<h1 class="c75 c35" id="h.xyaq94augh8e"><span class="c28 c87"></span></h1><h1 class="c95 c35" id="h.whu25b1s40xn"><span class="c28 c87">Epis&oacute;dio 15: Conhecendo a interrup&ccedil;&atilde;o por estouro em Timer1 (registradores TMR1H, TMR1L e T1CON de 8 bits) de 16 bits no PIC16F628A</span></h1><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Neste episodio veremos o uso do modulo Timer1 como contador/temporizador de 16 bits e sua interrup&ccedil;&atilde;o associada.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">O processo de configura&ccedil;&atilde; do modulo &eacute; semelante ao TImer0, sendo tratado pelo registrador T1CON (Timer1 Control Register)</p><p class="c11"><span>A configura&ccedil;&atilde;o &eacute; feita pelo registrador T1CON e pelos bits: T1CKPS1, T1CKPS0, </span><span class="c59">T1SYNC</span><span class="c5">, TMR1CS e TMR1ON</p><p class="c11"><span class="c5">A Figura X1 exibe o registrador </span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Figura X1</span><span class="c5">- Registrador T1CON e seus bits</span></p><p class="c12"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 604.72px; height: 64.00px;"><img alt="" src="images/image12.png" style="width: 604.72px; height: 64.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">O bit TMR1ON ser&aacute; confkgurado com 1 se quisermos ativar o modulo Timer1, e com 0 se quisermos parar a atua&ccedil;&atilde;o do Timer1</p><p class="c11"><span><br>J&aacute; o bit TMR1CS seleciona a fonte de incremento, onde se esse bit tiver o valor igual a 1, a fonte ser&aacute; externa no pino RB6/T1OSO/T1CKI/PGC na borda de subida, enquanto se esse bit for 0, a fonte adv&eacute;m do clock interno (F</span><span class="c62">osc</span><span class="c5">/ 4).</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Os bits T1CKP1 e T1CKP0 selecionam a taxa do Prescaler, onde pode-se ver os valores conforme Tabela 1</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Tabela 1</span><span class="c5">- Tabela com combina&ccedil;&atilde;o de taxas de incremento</span></p><a id="t.0ce4935b4d07cc25c3c392eaecaab83821b74cb9"></a><a id="t.150"></a><table class="c56"><tbody><tr>
								<td class="c32"><span class="c26">T1CKP1</span></p></td><td class="c32"><p class="c1"><span class="c26">T1CKP0</span></p></td><td class="c32"><p class="c1"><span class="c26">Valor Prescaler</td>
</tr>
<tr>
								<td class="c32"><span class="c5">0</span></p></td><td class="c32"><p class="c1"><span class="c5">0</span></p></td><td class="c32"><p class="c1"><span class="c5">1:1</td>
</tr>
<tr>
								<td class="c32"><span class="c5">0</span></p></td><td class="c32"><p class="c1"><span class="c5">1</span></p></td><td class="c32"><p class="c1"><span class="c5">1:2</td>
</tr>
<tr>
								<td class="c32"><span class="c5">1</span></p></td><td class="c32"><p class="c1"><span class="c5">0</span></p></td><td class="c32"><p class="c1"><span class="c5">1:4</td>
</tr>
<tr>
								<td class="c32"><span class="c5">1</span></p></td><td class="c32"><p class="c1"><span class="c5">1</span></p></td><td class="c32"><p class="c1"><span class="c5">1:8</span></p></td></tr></tbody></table><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Agora o bit T1OSCEN &eacute; utilizado para ativa&ccedil;&atilde; de uso de clock externo nos pinos RB6/T1OSO e RB7/T1OSI ou n&atilde;o. Se esse bit for igual a 1 est&aacute; ativado o uso do oscilador e 0 caso o contr&aacute;rio.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span>Por ultimo temos o bit </span><span class="c59">T1SYNC</span><span class="c5">reponsavel pelo controle de sincroniza&ccedil;&atilde;o de entrada do clock externo do Timer1. Assim, se TMR1CS = 1, isto &eacute;, faz-se uso de clock externo, ent&atilde;o</span></p><ul class="c80 lst-kix_371ulc8krm8k-0 start"><li class="c31"><span class="c5">T1SYNC = 1, se n&atilde;o quer sincronizar com o clock externo de entrada;</span></li><li class="c31"><span class="c5">T1SYNC = 0, se quer sincronizar com o clock externo de entrada.</span></li></ul><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Porem se TMR1CS = 0, T1SYNC &eacute; ignorado, pois Timer1 faz uso do clock interno.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Ap&oacute;s as devidas configura&ccedil;&otilde;es dos bits anterioes, pode-se a configura&ccedil;&atilde;o dos dois registradores que compoem os 16 bits do Timer1, os registradores TMR1H e TMR1L, onde TMR1H s&atilde;o os 8 bits mais significativos e TMR1L s&atilde;o os 8 bits menos sifnigicativos do n&uacute;mero de 16 bits, sendo que este numero come&ccedil;a em 0x0000 (0) at&eacute; 0xFFFF (65535), sendo que pode ser atribuido Prescaler para aumentar o intervalo de contagem ou temporaizador.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c42 c39 c34 c50">Exemplo semelhante ao do Timer 1, s&oacute; com contagem maior</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><hr style="page-break-before:always;display:none;">