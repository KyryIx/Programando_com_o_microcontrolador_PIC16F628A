<html>
	<head>
		<meta content="text/html; charset=UTF-8" http-equiv="content-type">
		
		<!-- https://highlightjs.org/download/ -->
		<!--
			https://mg.pov.lt/restview/
			pip install restview
			
		-->
		<link rel="stylesheet" href="./lib/highlight/styles/default.css">
		<script src="./lib/highlight/highlight.pack.js"></script>
		<script>hljs.highlightAll();</script>
		
		<link rel="stylesheet" href="./style.css">
		<style type="text/css">
		</style>
	</head>
		<body>
			<div>
				<p class="title">
					<span class="titlePrincipal">Conhecendo o PIC16F628A</span>
					<br/>
					<span class="titleSecondary">com exemplos</span>
					<br/>
					<span class="about">por <a href="http://www.everton.mat.br" target="_blank">Everton Pereira da Cruz</a></span>
				</p>
				<div class="page">
					<h1 class="indice"><a id="h.indice">&Iacute;ndice</a></h1>
					<hr class="indice"/>
					<ol class="indice">
						<li>
							<a href="#h.b2hb51dkz9wq">Epis&oacute;dio 1: Conhecendo o inv&oacute;lucro do componente, a pinagem, o diagrama de blocos e a tabela de memoria do PIC16F628A</a></li>
						<li>
							<a href="#h.s62fszs3wsiu">Epis&oacute;dio 2: Conhecendo o MPLAB X IDE, a estrutura de um arquivo em assembly, b&aacute;sico de n&uacute;meros bin&aacute;rios, octais e hexadecimais, e esquema de clock e ciclo de instru&ccedil;&atilde;o.</a></li>
						<li>
							<a href="#h.ke1tar3ww6i0">Epis&oacute;dio 3: Conhecendo os registradores STATUS, OPTION (OPTION_REG), INTCON, W e o registradores de uso geral para o usu&aacute;rio do PIC16F628A</a></li>
						<li>
							<a href="#h.ks32qwd0wsgu">Epis&oacute;dio 4: Conhecendo os registradores PORTA, PORTB, TRISA e TRISB do PIC16F628A</a></li>
						<li>
							<a href="#h.f1a37k6ele">Epis&oacute;dio 5: Conhecendo as instru&ccedil;&otilde;es GOTO, MOVLW, MOVWF, MOVF, BCF, BSF, BTFSC e BTFSS para o PIC16F628A. Execu&ccedil;&atilde;o passo a passo do c&oacute;digo</a></li>
						<li>
							<a href="#h.6dsmjkq8gxmk">Epis&oacute;dio 6: Exemplo 1 - Controle de estados dos pinos do PIC16F628A e uso do simulador SimulIDE</a></li>
						<li>
							<a href="#h.6s9s48u2ylem">Epis&oacute;dio 7: Grava&ccedil;&atilde;o do PIC16F628A com os hardwares K150 e o PICKIT3</a></li>
						<li>
							<a href="#h.9b7nicdpglls">Epis&oacute;dio 8: Conhecendo as instru&ccedil;&otilde;es ADDLW, ADDWF, INCF, INCFSZ, SUBLW, SUBWF, DECF, DECFSZ, ANDLW, ANDWF, IORLW, IORWF, XORLW, XORWF e COMF para o PIC16F628A</a></li>
						<li>
							<a href="#h.gtjslkauy293">Epis&oacute;dio 9: Conhecendo as instru&ccedil;&otilde;es CLRF, CLRW, NOP, RLF, RRF e SWAPF para o PIC16F628A</a></li>
						<li>
							<a href="#h.elclzztxr9nq">Epis&oacute;dio 10: Exemplo 2 - Criando delay no PIC16F628A</a></li>
						<li>
							<a href="#h.bscpoad04ftu">Epis&oacute;dio 11: Criando e chamando subrotinas com CALL, RETURN e RETLW no PIC16F628A</a></li>
						<li>
							<a href="#h.wqzrj958isdh">Epis&oacute;dio 12: Conhecendo a interrup&ccedil;&atilde;o externa em RB0 e a instru&ccedil;&atilde;o RETFIE no PIC16F628A</a></li>
						<li>
							<a href="#h.58jk4me2xwmk">Epis&oacute;dio 13: Conhecendo a interrup&ccedil;&atilde;o por mudan&ccedil;a de estados em RB4 a RB7 no PIC16F628A</a></li>
						<li>
							<a href="#h.9jbmwmyno0j">Epis&oacute;dio 14: Conhecendo a interrup&ccedil;&atilde;o por estouro em Timer0 (registrador TMR0 de 8 bits) de 8 bits no PIC16F628A</a></li>
						<li>
							<a href="#h.whu25b1s40xn">Epis&oacute;dio 15: Conhecendo a interrup&ccedil;&atilde;o por estouro em Timer1 (registradores TMR1H, TMR1L e T1CON de 8 bits) de 16 bits no PIC16F628A</a></li>
						<li>
							<a href="#h.y6ftgzimznq0">Epis&oacute;dio 16: Conhecendo a interrup&ccedil;&atilde;o por coincid&ecirc;ncia em Timer2 (registrador TMR2, PR2 e T2CON de 8 bits) de 8 bits no PIC16F628A</a></li>
						<li>
							<a href="#h.m8rchl8n16k9">Epis&oacute;dio 17: Conhecendo o m&oacute;dulo CCP - Modo capturar e a interrup&ccedil;&atilde;o associada</a></li>
						<li>
							<a href="#h.38y2bb5mcu7t">Epis&oacute;dio 18: Conhecendo o m&oacute;dulo CCP - Modo comparar e a interrup&ccedil;&atilde;o associada</a></li>
						<li>
							<a href="#h.j74nqk8f0mt0">Epis&oacute;dio 19: Conhecendo o m&oacute;dulo CCP - Modo de Modula&ccedil;&atilde;o por Largura de Pulso (PWM)</a></li>
						<li>
							<a href="#h.m305xgcjv6z5">Epis&oacute;dio 20: Conhecendo o m&oacute;dulo Comparador e a interrup&ccedil;&atilde;o associada</a></li>
						<li>
							<a href="#h.l9hau6hf265b">Epis&oacute;dio 21: Conhecendo o m&oacute;dulo de tens&atilde;o el&eacute;trica de refer&ecirc;ncia</a></li>
						<li>
							<a href="#h.js75nxhbpdh1">Epis&oacute;dio 22: Conhecendo a escrita e a leitura na mem&oacute;ria EEPROM</a></li>
						<li>
							<a href="#h.lku7dftewsau">Epis&oacute;dio 23: Conhecendo o m&oacute;dulo USART - Transmiss&atilde;o ass&iacute;ncrona e a interrup&ccedil;&atilde;o associada</a></li>
						<li>
							<a href="#h.w69xvh7zteyu">Epis&oacute;dio 24: Conhecendo o m&oacute;dulo USART - Recep&ccedil;&atilde;o ass&iacute;ncrona e a interrup&ccedil;&atilde;o associada</a></li>
						<li>
							<a href="#h.mbompx2djc0b">Epis&oacute;dio 25: Conhecendo o Watchdog Timer (WDT) e a instru&ccedil;&atilde;o CLRWDT</a></li>
						<li>
							<a href="#h.c2fmpzgslllm">Epis&oacute;dio 26: Conhecendo o modo sleep (dormir) e a instru&ccedil;&atilde;o SLEEP</a></li>
						<li>
							<a href="#h.bg133axk9izg">Epis&oacute;dio 27: Exemplo 3 - Integra&ccedil;&atilde;o dos epis&oacute;dios anteriores em um projeto de controle de acesso</a></li>
						<li>
							<a href="#h.zgowazyxoqxo">Epis&oacute;dio 28: Desenvolvimento de c&oacute;digo em C para o PIC16F628A</a></li>
					</ol>
				</div>
				
				<div class="page">
					<h1 id="h.b2hb51dkz9wq">Epis&oacute;dio 1: Conhecendo o inv&oacute;lucro do componente, a pinagem, o diagrama de blocos e a tabela de memoria do PIC16F628A</h1>
					<p class="voltarIndice"><a href="#h.indice">Voltar ao &iacute;ndice</a></p>
					<hr class="indice"/>
					
					<p class="c11 x189">O microcontrolador PIC16F628A, conforme o <i>datasheet</i> dispon&iacute;vel em <span class="citacaoTemporary">Microchip (2020a)</span> tem as seguintes caracter&iacute;sticas:</p>
					
					<ul class="listaTemporary">
						<li class="c31">
							<i>clock</i> de opera&ccedil;&atilde;o at&eacute; 20 MHz;</li>
						<li class="c31">
							8 n&iacute;veis de pilha;</li>
						<li class="c31">
							apenas 35 instru&ccedil;&otilde;es;</li>
						<li class="c31">
							oscilador interno de 4 MHz ou de 48 kHz (para baixo consumo);</li>
						<li class="c31">
							modo dormir (<i>sleep</i>) para economia de energia;</li>
						<li class="c31">
							programa&ccedil;&atilde;o dos estados <i>de pull-up</i> sobre os pinos em <span class="c34">PORTB</span>;</li>
						<li class="c31">
							tens&atilde;o de opera&ccedil;&atilde;o de 2 a 5,5 volts;</li>
						<li class="c31">
							16 pinos de entrada/sa&iacute;da;</li>
						<li class="c31">
							1 m&oacute;dulo comparador com 2 comparadores anal&oacute;gicos;</li>
						<li class="c31">
							3 m&oacute;dulos de temporizadores/contadores com 2 m&oacute;dulos de 8 <i>bits</i> e 1 de 16 <i>bits</i>com suas diferen&ccedil;as;</li>
						<li class="c31">
							1 m&oacute;dulo de capturar (16 bits), comparar (16 bits) e PWM (10 bits);</li>
						<li class="c31">
							1 m&oacute;dulo de comunica&ccedil;&atilde;o USART;</li>
						<li class="c31">
							2048 palavras de mem&oacute;ria de programa;</li>
						<li class="c31">
							224 bytes de mem&oacute;ria SRAM (dados);</li>
						<li class="c31">
							128 bytes de mem&oacute;ria EEPROM (dados);</li>
					</ul>
					
					<p class="c11 x189">Na mesma documenta&ccedil;&atilde;o, encontram-se os modelos de encapsulamentos dispon&iacute;veis para o PIC16F628A, os quais s&atilde;o PDIP, SOIC, SSOP e QFN. Nesta sequ&ecirc;ncia de epis&oacute;dios, baseamos o estudo no encapsulamento PDIP (<i>Plastic Dual In-line Package</i>) de 18 pinos conforme Figura 1.1 e Figura 1.2.</p>
					
					<table class="image">
						<thead>
							<tr>
								<th>
									<span class="c34">Figura 1.1 -</span>PIC16F628A com inv&oacute;lucro PDIP
								</th>
							</tr>
						</thead>
						<tbody>
							<tr class="c21">
								<td class="c206">
									<img alt="" src="figures/PIC16F628_package.png" style="width: 213.61px; height: 132.88px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title="PIC16F628 DIP package" alt="PIC16F628 DIP package"/>
								</td>
							</tr>
						</tbody>
						<tfoot>
							<tr>
								<td>
									<span class="citacaoFigura">Fonte: <span class="citacaoTemporary">MICROCHIP 2020 (a)</span></span>
								</td>
							</td>
						</tfoot>
					</table>
					
					<table class="image">
						<thead>
							<tr>
								<th>
									<span class="c34">Figura 1.2 -</span>Pinagem do PIC16F628A
								</th>
							</tr>
						</thead>
						<tbody>
							<tr class="c21">
								<td class="c206">
									<img alt="" src="figures/PIC16F628_pinout.png" style="width: 398.89px; height: 242.18px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title="PIC16F628 pinout" alt="PIC16F628 pinout"/>
								</td>
							</tr>
						</tbody>
						<tfoot>
							<tr>
								<td>
									<span class="citacaoFigura">Fonte: <span class="citacaoTemporary">MICROCHIP 2020b pag. 4</span></span>
								</td>
							</td>
						</tfoot>
					</table>
					
					<p class="c11 x189">O PIC16F628A &eacute; um microcontrolador com arquitetura RISC(<i>Reduced Instruction Set Computer</i>) e conforme <span class="citacaoTemporary">Wikipedia (2020)</span>, esse tipo de arquitetura &eacute; favorecida por um conjunto simples e pequeno de instru&ccedil;&otilde;es no qual levam aproximadamente a mesma quantidade de tempo para serem executadas, e elas podem ser vistas na Figura 1.3.</p>
					
					<table class="image">
						<thead>
							<tr>
								<th>
									<span class="c34">Figura 1.3 -</span>Conjuntos de instru&ccedil;&otilde;es assembly para PIC16F628A
								</th>
							</tr>
						</thead>
						<tbody>
							<tr class="c21">
								<td class="c206">
									<img alt="" src="figures/PIC16F628_instructions.png" style="width: 587.00px; height: 554.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title="PIC16F628A map instructions" alt="PIC16F628 map instructions"/>
								</td>
							</tr>
						</tbody>
						<tfoot>
							<tr>
								<td>
									<span class="citacaoFigura">Fonte: <span class="citacaoTemporary">MICROCHIP 2020 (b) pag. 118</span></span>
								</td>
							</td>
						</tfoot>
					</table>
					
					<p class="c11 x189">Esse conjunto de instru&ccedil;&otilde;es reduzidas, s&atilde;o separadas em instru&ccedil;&otilde;es com <i>bytes</i> associados a registradores, com <i>bits</i> de registradores, literais (n&uacute;meros de 8 <i>bits</i>) diretamente e instru&ccedil;&otilde;es de controle de fluxo de rotinas entre outros.</p>
					
					<p class="c11 x189">Outra qualidade do PIC16F628A &eacute; o seu controle atrav&eacute;s de registradores dispon&iacute;veis em quatro bancos de mem&oacute;ria (<i>Bank</i> 0, <i>Bank</i> 1, <i>Bank</i> 2 e <i>Bank</i> 3) e exibido na Figura 1.4.</p>
					
					<table class="image">
						<thead>
							<tr>
								<th>
									<span class="c34">Figura 1.4 -</span>Mapa de mem&oacute;ria de dados
								</th>
							</tr>
						</thead>
						<tbody>
							<tr class="c21">
								<td class="c206">
									<img alt="" src="figures/PIC16F628_memory_bank.png" style="width: 484.88px; height: 606.72px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title="PIC16F628 memory banks">
								</td>
							</tr>
						</tbody>
						<tfoot>
							<tr>
								<td>
									<span class="citacaoFigura">Fonte: <span class="citacaoTemporary">MICROCHIP 2020 (b) pag. 118</span></span>
								</td>
							</td>
						</tfoot>
					</table>
					
					<p class="c11 x189">Al&eacute;m dos registradores para controle do microcontrolador, h&aacute; dispon&iacute;veis tamb&eacute;m registradores para uso geral (<i>general purpose register</i>), que utilizaremos para armazenar estados, quantidades e outros valores relativos a l&oacute;gica de programa&ccedil;&atilde;o que abordaremos com exemplos nestes epis&oacute;dios.</p>
					
					<p class="c11 x189">O relacionamento entre as estruturas internas do PIC16F628A e seus m&oacute;dulos podem ser vistos na Figura 1.5, a qual abordaremos todos os m&oacute;dulos dispon&iacute;veis atrav&eacute;s de exemplos pr&aacute;ticos.</p>
					
					<table class="image">
						<thead>
							<tr>
								<th>
									<span class="c34">Figura 1.5 -</span>Diagrama de blocos
								</th>
							</tr>
						</thead>
						<tbody>
							<tr class="c21">
								<td class="c206">
									<img alt="" src="figures/PIC16F628_blocks_diagram.png" style="width: 590.00px; height: 560.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title="PIC16F628 blocks and functions diagram">
								</td>
							</tr>
						</tbody>
						<tfoot>
							<tr>
								<td>
									<span class="citacaoFigura">Fonte: <span class="citacaoTemporary">MICROCHIP 2020 (b) pag. 12</span></span>
								</td>
							</td>
						</tfoot>
					</table>
					
					<p class="c11 x189">No pr&oacute;ximo epis&oacute;dio veremos como criar nosso primeiro projeto e entenderemos o relacionamento dos c&oacute;digos com o microcontrolador PIC16F628A.</p>
				</div>
					
				<div class="page">
					<h1 id="h.s62fszs3wsiu">Epis&oacute;dio 2: Conhecendo o MPLAB X IDE, a estrutura de um arquivo em assembly, b&aacute;sico de n&uacute;meros bin&aacute;rios, octais e hexadecimais, e esquema de clock e ciclo de instru&ccedil;&atilde;o.</h1>
					<p class="voltarIndice"><a href="#h.indice">Voltar ao &iacute;ndice</a></p>
					<hr class="indice"/>
					
					<p class="c11 x189">Neste epis&oacute;dio veremos como &eacute; o processo de cria&ccedil;&atilde;o de um projeto no MPLAB X IDE, cria&ccedil;&atilde;o de um arquivo em <i>assembly</i> (ASM) com sua estrutura (diretiva <i>include</i>, <i>bits</i>de configura&ccedil;&atilde;o em <span class="definesASM1">_CONFIG</span>, diretivas <span class="definesASM1">define</span> para defini&ccedil;&otilde;es de espa&ccedil;os de mem&oacute;ria ou procedimento e endere&ccedil;o do vetor <i>reset</i>(<span class="definesASM1">0x00</span>) e interrup&ccedil;&atilde;o (<span class="definesASM1">0x04</span>)).</p>
					
					<p class="c11 x189">Come&ccedil;aremos conhecendo o MPLAB X IDE 5.30, dispon&iacute;vel no endere&ccedil;o <span class="linkDoc1"><a href="https://www.google.com/url?q=https://www.microchip.com/development-tools/pic-and-dspic-downloads-archive&amp;sa=D&amp;source=editors&amp;ust=1619797898942000&amp;usg=AOvVaw2rcvFPOSIim8AbDJrdFdH6">https://www.microchip.com/development-tools/pic-and-dspic-downloads-archive</a></span> e na Figura 2.1 pode ser visto a interface da IDE, sendo que esta (MPLAB X IDE) &eacute; a IDE oficial da Microchip para edi&ccedil;&atilde;o de projetos para microcontroladores PIC.</p>
					
					<p class="c11 x189">Na Figura 2.1 h&aacute; 6 ret&acirc;ngulos que representam as partes da tela da IDE, onde o ret&acirc;ngulo em vermelho representa a barra dos menus, o segundo ret&acirc;ngulo laranja &eacute; a barra de ferramentas, o terceiro ret&acirc;ngulo em rosa &eacute; a <span class="textoVermelho">caixa</span> de projetos, o quarto ret&acirc;ngulo em azul &eacute; a &aacute;rea de informa&ccedil;&otilde;es de inicializa&ccedil;&atilde;o da IDE e tamb&eacute;m principalmente, onde s&atilde;o exibidos os arquivos para edi&ccedil;&atilde;o do c&oacute;digo, o quinto ret&acirc;ngulo em verde a caixa de <i>Dashboard</i>, e o sexto e &uacute;ltimo ret&acirc;ngulo, em amarelo, &eacute; a <span class="textoVermelho">caixa</span>de informa&ccedil;&otilde;es (compila&ccedil;&atilde;o) ou configura&ccedil;&otilde;es (<i>debug</i>) dos processos terminados ou em execu&ccedil;&atilde;o.</p>
					
					<p class="c11 x189">Conhecendo a tela inicial do programa, podemos criar nosso primeiro projeto para o PIC16F628A, seguindo os seguintes passos</p>
					
					<ol class="c80 lst-kix_ssjd6oi9nk5d-0 start" start="1">
						<li class="c31">
							Acesse o meu <span class="c6 c34 c37">File</span>e escolha a op&ccedil;&atilde;o </span><span class="c6 c34 c37">New Project</span>;</li>
						<li class="c31">
							Em <span class="c6 c34 c37">Choose Project</span>, conforme Figura 2.2, na op&ccedil;&atilde;o <span class="c6 c34 c37">categories</span>escolha a op&ccedil;&atilde;o <span class="c6 c34 c37">Microchip Embedded</span>e na op&ccedil;&atilde;o <span class="c6 c34 c37">projects</span>escolha a op&ccedil;&atilde;o <span class="c6 c34 c37">Standalone Project</span>e ap&oacute;s clique no bot&atilde;o <span class="c6 c34 c37">Next</span>;</li>
						<li class="c31">
							Em <span class="c6 c34 c37">Select Device</span>, conforme Figura 2.3, na op&ccedil;&atilde;o <span class="c6 c34 c37">Family</span>escolha <span class="c6 c34 c37">All Families</span>e op&ccedil;&atilde;o <span class="c6 c34 c37">Device</span>digite <span class="c6 c34 c37">PIC16F628A</span>e clique no item respondido pela consulta e tamb&eacute;m no bot&atilde;o <span class="c6 c34 c37">Next</span>;</li>
						<li class="c31">
							Em <span class="c6 c34 c37">Select Header</span>, conforme Figura 2.4, n&atilde;o modifique nada e apenas clique no bot&atilde;o <span class="c6 c34 c37">Next</span>;</li>
						<li class="c31">
							Em </span><span class="c6 c34 c37">Select Tool (Optional)</span>, conforme Figura 2.5, na op&ccedil;&atilde;o <span class="c6 c34 c37">Hardware Tools</span>, escolha a op&ccedil;&atilde;o <span class="c6 c34 c37">Simulator</span>e clique no bot&atilde;o <span class="c6 c34 c37">Next</span>;</li>
						<li class="c31">
							Em </span><span class="c6 c34 c37">Select Compiler</span>, conforme Figura 2.6, na op&ccedil;&atilde;o <span class="c6 c34 c37">Compiler Toolchains</span>, em mpasm escolha </span><span class="c6 c34 c37">mpasm (v5.86)</span> (montador <i>assembly</i>) e clique no bot&atilde;o <span class="c6 c34 c37">Next</span>;</li>
					</ol>
					
					<p class="c11 c49 x189">
						<span class="c6 c39 c34">IMPORTANTE:</span> Essas vers&otilde;es de compiladores e IDE s&atilde;o obtidas em <span class="linkDoc1"><a href="https://www.google.com/url?q=https://www.microchip.com/development-tools/pic-and-dspic-downloads-archive&amp;sa=D&amp;source=editors&amp;ust=1619797898945000&amp;usg=AOvVaw2CEATHTOHbv-5U7i4fxNoT">https://www.microchip.com/development-tools/pic-and-dspic-downloads-archive</a></span></p>
					<ol class="c80 lst-kix_ssjd6oi9nk5d-0" start="7">
						<li class="c31">
							Em <span class="c6 c34 c37">Select Project Name and Folder</span>, conforme Figura 2.7, no campo <span class="c6 c34 c37">Project Name</span>coloca-se o nome do projeto que neste caso foi usado <i>FIRST_PROJECT_PIC16F628A</i>, e em <span class="c6 c34 c37">Project Location</span>pode-se escolher o diret&oacute;rio onde ser&aacute; armazenado o projeto, sendo que neste caso foi em <i>C:\Users\Engineer\MPLABXProjects</i>. Ao final desse passo clique no bot&atilde;o <span class="c6 c34 c37">Finish</span>.</li>
					</ol>
					
					<p class="c11 c49 x189">
						<span class="c6 c39 c34">IMPORTANTE:</span> Caso necessite voltar ainda aqui neste assistente de cria&ccedil;&atilde;o de projeto, utilize o bot&atilde;o <span class="c6 c34 c37">Back</span>.
					</p>
					
					<table class="image">
						<thead>
							<tr>
								<th>
									<span class="c34">Figura 2.1 -</span>Tela do MPLAB X IDE 5.30
								</th>
							</tr>
						</thead>
						<tbody>
							<tr class="c21">
								<td class="c206">
									<img alt="" src="images/image42.png" style="width: 604.72px; height: 496.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title="Intial window MPLAB X IDE 5.30" alt="Intial window MPLAB X IDE 5.30"/>
								</td>
							</tr>
						</tbody>
						<tfoot>
							<tr>
								<td>
									<span class="citacaoFigura">Fonte: <span class="citacaoTemporary">Fonte: Autor 2020</span></span>
								</td>
							</td>
						</tfoot>
					</table>
					
					<table class="image">
						<thead>
							<tr>
								<th>
									<span class="c34">Figura 2.2 -</span>Escolha do tipo de projeto
								</th>
							</tr>
						</thead>
						<tbody>
							<tr class="c21">
								<td class="c206">
									<img alt="" src="images/image28.png" style="width: 461.56px; height: 378.72px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title="Choose project type" alt="Selection project type"/>
								</td>
							</tr>
						</tbody>
						<tfoot>
							<tr>
								<td>
									<span class="citacaoFigura">Fonte: <span class="citacaoTemporary">Fonte: Autor 2020</span></span>
								</td>
							</td>
						</tfoot>
					</table>
					
					<table class="image">
						<thead>
							<tr>
								<th>
									<span class="c34">Figura 2.3 -</span> Sele&ccedil;&atilde;o do modelo do microcontrolador
								</th>
							</tr>
						</thead>
						<tbody>
							<tr class="c21">
								<td class="c206">
									<img alt="" src="images/image14.png" style="width: 468.14px; height: 384.11px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title="Choose microcontroller model" alt="Selection microcontroller model"/>
								</td>
							</tr>
						</tbody>
						<tfoot>
							<tr>
								<td>
									<span class="citacaoFigura">Fonte: <span class="citacaoTemporary">Fonte: Autor 2020</span></span>
								</td>
							</td>
						</tfoot>
					</table>
					
					<table class="image">
						<thead>
							<tr>
								<th>
									<span class="c34">Figura 2.4 -</span> Sele&ccedil;&atilde;o de cabe&ccedil;alho
								</th>
							</tr>
						</thead>
						<tbody>
							<tr class="c21">
								<td class="c206">
									<img alt="" src="images/image16.png" style="width: 469.80px; height: 384.72px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title="Choose header for work" alt="Selection header for work"/>
								</td>
							</tr>
						</tbody>
						<tfoot>
							<tr>
								<td>
									<span class="citacaoFigura">Fonte: <span class="citacaoTemporary">Fonte: Autor 2020</span></span>
								</td>
							</td>
						</tfoot>
					</table>
					
					<table class="image">
						<thead>
							<tr>
								<th>
									<span class="c34">Figura 2.5 -</span> Sele&ccedil;&atilde;o da ferramenta de depura&ccedil;&atilde;o e grava&ccedil;&atilde;o
								</th>
							</tr>
						</thead>
						<tbody>
							<tr class="c21">
								<td class="c206">
									<img alt="" src="images/image5.png" style="width: 469.76px; height: 384.69px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title="Choose tool to debug and burn" alt="Selection tool to debug and burn"/>
								</td>
							</tr>
						</tbody>
						<tfoot>
							<tr>
								<td>
									<span class="citacaoFigura">Fonte: <span class="citacaoTemporary">Fonte: Autor 2020</span></span>
								</td>
							</td>
						</tfoot>
					</table>
					
					<table class="image">
						<thead>
							<tr>
								<th>
									<span class="c34">Figura 2.6 -</span> Sele&ccedil;&atilde;o do compilador
								</th>
							</tr>
						</thead>
						<tbody>
							<tr class="c21">
								<td class="c206">
									<img alt="" src="images/image51.png" style="width: 469.11px; height: 383.72px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title="Selection of compiler"/>
								</td>
							</tr>
						</tbody>
						<tfoot>
							<tr>
								<td>
									<span class="citacaoFigura">Fonte: <span class="citacaoTemporary">Fonte: Autor 2020</span></span>
								</td>
							</td>
						</tfoot>
					</table>
					
					<table class="image">
						<thead>
							<tr>
								<th>
									<span class="c34">Figura 2.7 -</span> Nome e sele&ccedil;&atilde;o do diret&oacute;rio para o projeto
								</th>
							</tr>
						</thead>
						<tbody>
							<tr class="c21">
								<td class="c206">
									<img src="images/image44.png" style="width: 469.75px; height: 385.11px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title="Directory name of project"/>
								</td>
							</tr>
						</tbody>
						<tfoot>
							<tr>
								<td>
									<span class="citacaoFigura">Fonte: <span class="citacaoTemporary">Fonte: Autor 2020</span></span>
								</td>
							</td>
						</tfoot>
					</table>	
					
					<p class="c11 x189">
						Os procedimentos anteriores para a cria&ccedil;&atilde;o, apenas disponibilizam a cria&ccedil;&atilde;o do projeto, sem a inclus&atilde;o de arquivo base para a codifica&ccedil;&atilde;o e para isso teremos que criar um arquivo para podermos conhecer o padr&atilde;o de codifica&ccedil;&atilde;o no PIC16F628A.
					</p>
					
					<p class="c11 x189">
						Para a cria&ccedil;&atilde;o do arquivo <span class="c6 c34 c37">.asm</span>, siga os seguintes passo:
					</p>
					
					<ol class="c80 lst-kix_tudr15gsxq98-0 start" start="1">
						<li class="c31">
							Acesse o menu <span class="c6 c34 c37">File</span>;</li>
						<li class="c31">
							Escolha a op&ccedil;&atilde;o <span class="c6 c34 c37">New File</span>;</li>
						<li class="c31">
							Na tela de <span class="c6 c34 c37">Choose File Type</span>, escolha a op&ccedil;&atilde;o <span class="c6 c34 c37">Assembler</span>em <span class="c6 c34 c37">Categories</span>;</li>
						<li class="c31">
							Agora selecione a op&ccedil;&atilde;o <span class="c6 c34 c37">AssemblyFile.asm</span>em <span class="c6 c34 c37">File Types</span>e clique no bot&atilde;o <span class="c6 c34 c37">Next</span>;</li>
						<li class="c31">
							Neste passo final, na tela <span class="c6 c34 c37">Name and Location</span>, no campo <span class="c6 c34 c37">File Name</span>, coloque o nome do arquivo <i>assembly</i>que ser&aacute; <span class="c6 c34 c37">main</span>, o qual a extens&atilde;o asm &eacute; inserida automaticamente pela IDE;</li>
						<li class="c31">
							Clique posteriormente no bot&atilde;o<span class="c6 c34 c37">Finish</span>e o arquivo aberto &eacute; visto na Figura 2.8.</li>
					</ol>
					
					<table class="image">
						<thead>
							<tr>
								<th>
									<span class="c34">Figura 2.8 -</span> Arquivo <i>main.asm</I>criado e aberto para edi&ccedil;&atilde;o
								</th>
							</tr>
						</thead>
						<tbody>
							<tr class="c21">
								<td class="c206">
									<img src="images/image77.png" style="width: 604.72px; height: 496.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title="Opening main.asm file in IDE" alt="Opening main.asm file in IDE">
								</td>
							</tr>
						</tbody>
						<tfoot>
							<tr>
								<td>
									<span class="citacaoFigura">Fonte: <span class="citacaoTemporary">Fonte: Autor 2020</span></span>
								</td>
							</td>
						</tfoot>
					</table>
					
					<p class="c11 x189">
						Na Figura 2.8, o arquivo <span class="c6 c34 c37">main.asm</span>foi aberto automaticamente ao final do processo de cria&ccedil;&atilde;o dele, por&eacute;m ele est&aacute; vazio decorrente de ainda n&atilde;o ter sido feito uso de comandos de programa&ccedil;&atilde;o, que veremos a seguir.
					</p>
					
					<p class="c11 x189">
						Come&ccedil;aremos conhecendo o arquivo base para o nosso trabalho, que ser&aacute; usado at&eacute; o 27&ordm; epis&oacute;dio (pois do epis&oacute;dio 1 ao 27 usa-se a linguagem <i>assembly</i>enquanto que o 28&ordm; epis&oacute;dio faz uso de linguagem C) desta s&eacute;rie de uso do microcontrolador PIC16F628A, sendo que o arquivo base "Codigo 2.1 - Exemplo base.asm" &eacute; exibido no C&oacute;digo 2.1 e o download pode ser feito em <span class="linkDoc1"><a href="https://www.google.com/url?q=https://github.com/KyryIx/programando-com-o-microcontrolador-PIC16F628A&amp;sa=D&amp;source=editors&amp;ust=1619797898951000&amp;usg=AOvVaw1vdSXmMdySKWjypCDn3L7n">https://github.com/KyryIx/programando-com-o-microcontrolador-PIC16F628A</a></span>.
					</p>
					
					<p class="c11 x189">
						O C&oacute;digo 2.1 &eacute; o nosso arquivo base para <i>assembly</i>, no qual foi inserido a numera&ccedil;&atilde;o de linhas &agrave; esquerda como forma de facilitar a refer&ecirc;ncia no texto, mas que n&atilde;o comp&otilde;em o padr&atilde;o de arquivo.
					</p>
					
					<p class="c11 x189">
						Come&ccedil;amos notando que as linhas 1, 2 e 3 iniciam com o caracter <span class="c34">;</span>que em assembly representa linha de coment&aacute;rio, e assim essas linhas foram usadas como coment&aacute;rio inicial do arquivo base.
					</p>
					
					<p class="c12">
						<span class="c34">C&oacute;digo 2.1 -</span> Exemplo base
					</p>

<pre><code class="x86asm">
   ; DESENVOLVIDO POR EVERTON P. CRUZ
   ; COM O PROPOSITO DE USO BASE PARA OS EPISODIOS
   ; DA SERIE CONHECENDO O MICROCONTROLADOR PIC16F628A
   #INCLUDE <P16F628A.INC>
   LIST P=16F628A
   __CONFIG _BOREN_ON & _CP_OFF & _PWRTE_ON & _WDT_OFF & _LVP_OFF & _MCLRE_OFF & _INTRC_OSC_NOCLKOUT
    
  ; DEFINICAO DE CONSTANTES E VARIAVEIS
  #DEFINE BOTAO	    PORTB, RB0
  #DEFINE CONTADOR  0x20
    
  ORG     0x00       ; TRATAMENTO DO RESET
  GOTO    SETUP_PROCESSO

  ORG     0x04       ; TRATAMENTO DAS INTERRUPCOES
  RETFIE
    
SETUP_PROCESSO:
  ; SELECIONA O BANCO 1 DE MEMORIA
  BCF     STATUS, RP1
  BSF     STATUS, RP0

  BSF	PCON, OSCF ; CONF. FREQÜÊNCIA DO OSCILADOR INTERNO EM 4 MHz
  
  ; CONFIGURACOES DO REGISTRADOR OPTION
  MOVLW	B'10000000'
  ; 1 - NOT_RBPU    -> DESATIVA RESISTORES PULL-UP
  ; 0 - INTDEG      -> INT. ATIV. BORDA DE DESCIDA RB0
  ; 0 - TOCS        -> O CLOCK DO TIMER 0 EH INTERNO
  ; 0 - TOSE        -> BORDA DE SUBIDA NO TIMER 0, RA4
  ; 0 - PSA         -> PRESCALER ASSOCIADO AO TIMER 0
  ; 0 - PS2,PS1,PS0 -> TIMER 0 COM RAZAO 1:2
  MOVWF   OPTION_REG
    
  ; MODIFICA O COMPORTAMENTO DA PORTA
  MOVLW   B'11111111'
  ; 1 - PINO RA7 COMO ENTRADA
  ; 1 - PINO RA6 COMO ENTRADA
  ; 1 - PINO RA5 COMO ENTRADA
  ; 1 - PINO RA4 COMO ENTRADA
  ; 1 - PINO RA3 COMO ENTRADA
  ; 1 - PINO RA2 COMO ENTRADA
  ; 1 - PINO RA1 COMO ENTRADA
  ; 1 - PINO RA0 COMO ENTRADA
  MOVWF   TRISA ; CONFIGURAÇÕES DO TRISA
    
  ; MODIFICA O COMPORTAMENTO DA PORTB
  MOVLW   B'11111111'
  ; 1 - PINO RB7 COMO ENTRADA
  ; 1 - PINO RB6 COMO ENTRADA
  ; 1 - PINO RB5 COMO ENTRADA
  ; 1 - PINO RB4 COMO ENTRADA
  ; 1 - PINO RB3 COMO ENTRADA
  ; 1 - PINO RB2 COMO ENTRADA
  ; 1 - PINO RB1 COMO ENTRADA
  ; 1 - PINO RB0 COMO ENTRADA
  MOVWF   TRISB ; CONFIGURAÇÕES DO TRISB	    
    
  ; SELECIONA O BANCO 0 DE MEMORIA
  BCF     STATUS, RP1
  BCF     STATUS, RP0	    
    
  ; DEFINE O MODO DE OPERACAO DO COMP. ANALOG. DESLIGADOS
  MOVLW   B'00000111'
  MOVWF   CMCON	    
    
  ; CONFIGURACOES DE INTERRUPCOES
  MOVLW   B'00000000'  
  ; 0 - GIE  -> DESATIVA INT./CHAVE GERAL
  ; 0 - EEIE -> DESATIVA INT. DA EEPROM
  ; 0 - T0IE -> DESATIVA INT. NO TMR0
  ; 0 - INTE -> DESATIVA INT. NO RB0/INT
  ; 0 - RBIE -> DESATIVA INT. MUDANCA RB<7:4>
  ; 0 - T0IF -> FLAG DE TRANSBORDO DO TMR0
  ; 0 - INTF -> FLAG DE RESPOSTA INT. RB0/INT
  ; 0 - RBIF -> FLAG DE RESPOSTA INT EM RB<7:4>
  MOVWF   INTCON
    
  ; VARIAVEL CONTADOR COM VALOR 0
  CLRF    CONTADOR
    
PROGRAMAPRINCIPAL:
  BTFSC   BOTAO
  GOTO    PROGRAMAPRINCIPAL
  GOTO    CONTARPRODUTO

CONTARPRODUTO:
  INCF    CONTADOR, 1	    ; INCREMENTA CONTADOR
LOOP_CALCULAR:
  BTFSC   BOTAO
  GOTO    PROGRAMAPRINCIPAL
  GOTO    LOOP_CALCULAR
    
  END
</code></pre>
					
					<p class="c11 x189">
						A linha 4 do C&oacute;digo 2.1 representa a inclus&atilde;o (<span class="c38 c6 c44">INCLUDE</span>) de um arquivo de cabe&ccedil;alho de microcontrolador usado no projeto, que neste caso &eacute; o PIC16F628A e ele &eacute; acess&iacute;vel no endere&ccedil;o <i>C:\Program Files (x86)\Microchip\MPLABX\v5.30\mpasmx\p16f628a.inc</i>, no qual tem as defini&ccedil;&otilde;es de nome dos registros e seus respectivos endere&ccedil;os de mem&oacute;ria, como nomes de <i>bits</i> e suas posi&ccedil;&otilde;es no <i>byte</i>.
					</p>
					
					<p class="c11 x189">
						J&aacute; a linha 5 do C&oacute;digo 2.1, ela &eacute; a linha que lista (<span class="c3">LIST</span>) o microcontrolador em uso no projeto, enquanto que a linha 6 &eacute; respons&aacute;vel pelas configura&ccedil;&otilde;es (<span class="c38 c6 c44">__CONFIG</span>) de par&acirc;metros para uso do microcontrolador e eles s&atilde;o visto na Tabela 2.1 e esta informa&ccedil;&atilde;o est&aacute; conforme item 14.0 (<i>SPECIAL FEATURES OF THE CPU</i>) do <i>datasheet</i>, contido na p&aacute;gina 98.
					</p>
					
					<p class="c12 c776">
						<span class="c34">Tabela 2.1 -</span>Bits de configura&ccedil;&atilde;o</span>
					</p>
					
					<table class="c56">
						<thead>
							<tr>
								<th>Configura&ccedil;&atilde;o</th>
								<th>Fun&ccedil;&atilde;o</th>
							</tr>
						</thead>
						<tbody>
							<tr class="c21">
								<td class="c107">
									<span class="c60 c38 c6 c44">_BOREN_ON</span>
								</td>
								<td class="c97">
									<p class="c67">
										<i>Bit</i> "</span><span class="c6 c34 c37">B</span><i>rown-</i><span class="c6 c34 c37">o</span><i>ut </i><span class="c6 c34 c37">R</span><i>eset </i><span class="c6 c34 c37">En</span><i>able&rdquo;</i> que representa quando a tens&atilde;o baixou at&eacute; um limite inferior aceit&aacute;vel, abaixo disso o microcontrolador &eacute; resetado, no qual a tens&atilde;o V <sub>BOR</sub>&eacute; tipicamente de 4 V e ativado quando T <sub>BOR</sub>for maior que 72 ms.
									</p>
									
									<p class="c67">
										Os estados s&atilde;o:
									</p>
									
									<ul class="c80 lst-kix_30thcegsz8y6-0 start">
										<li class="c19 c31 li-bullet-0">
											<span class="c38 c6 c44">_BOREN_ON</span>: ativado</li>
										<li class="c19 c31 li-bullet-0">
											<span class="c38 c6 c44">_BOREN_OFF</span><span class="definesASM1">: </span>desativado</li>
									</ul>
								</td>
							</tr>
							
							<tr class="c21">
								<td class="c107">
									<p class="c19">
										<span class="c60 c38 c6 c44">_CP_OFF</span>
									</p>
								</td>
								
								<td class="c97">
									<p class="c67">
										<i>Bit</i> "<i>Flash Program Memory</i> <span class="c6 c34 c37">C</span><i>ode </i><span class="c6 c34 c37">P</span><i>rotection</i>" que atua sobre a permiss&atilde;o de prote&ccedil;&atilde;o de leitura da mem&oacute;ria de programa do PIC16F628A.
									</p>
									
									<p class="c67">
										Os estados s&atilde;o:
									</p>
									
									<ul class="c80 lst-kix_p3qxonbqfu68-0 start">
										<li class="c19 c31 li-bullet-0">
											<span class="c38 c6 c44">_CP_ON</span>: ativado permiss&atilde;o de c&oacute;pia</li>
										<li class="c19 c31 li-bullet-0">
											<span class="c38 c6 c44">_CP_OFF</span>: desativado permiss&atilde;o de c&oacute;pia</li>
									</ul>
								</td>
							</tr>
							
							<tr class="c21">
								<td class="c107">
									<p class="c19">
										<span class="c60 c38 c6 c44">_PWRTE_ON</span>
									</p>
								</td>
								
								<td class="c97">
									<p class="c67">
										<i>Bit "<span class="c6 c34 c37">P</span><i>o</i><span class="c6 c34 c37">w</span><i>e</i><span class="c6 c34 c37">r</span><i>-up</i> <span class="c6 c34 c37">T</span><i>imer</i> <span class="c6 c34 c37">E</span><i>nable</i>" prov&eacute;m um tempo fixo de 72 ms na inicializa&ccedil;&atilde;o do microcontrolador como forma de permitir a estabiliza&ccedil;&atilde;o da tens&atilde;o de alimenta&ccedil;&atilde;o e ap&oacute;s isso iniciar o PIC16F628A.
									</p>
									
									<p class="c19">
										Os estados s&atilde;o:
									</p>
									
									<ul class="c80 lst-kix_654ap9hwcauo-0 start">
										<li class="c67 c31 li-bullet-0">
											<span class="c38 c6 c44">_PWRTE_ON</span>: ativado o tempo de espera de 72 ms para iniciar o PIC16F628A quando alimentado</li>
										<li class="c67 c31 li-bullet-0">
											<span class="c38 c6 c44">_PWRTE_OFF</span>: desativado o tempo de 72 ms ao alimentar o PIC16F628A</li>
									</ul>
								</td>
							</tr>
							
							<tr class="c21">
								<td class="c107">
									<p class="c19">
										<span class="c60 c38 c6 c44">_WDT_OFF</span>
									</p>
								</td>
								
								<td class="c97">
									<p class="c67">
										<i>Bit</i> "</span><span class="c6 c34 c37">W</span><i>atch</i><span class="c6 c34 c37">d</span><i>og </i><span class="c6 c34 c37">T</span><i>imer Enable</i>&rdquo; no qual prov&eacute;m uma inicializa&ccedil;&atilde;o do microcontrolador ap&oacute;s 72 ms se o estado dele n&atilde;o for limpo (veremos o uso do WDT no epis&oacute;dio 25).
									</p>
									
									<ul class="c80 lst-kix_trnjdkbmm24v-0 start">
										<li class="c19 c31 li-bullet-0">
											<span class="c38 c6 c44">_WDT_ON</span>: ativa o Watchdog Timer Enable</li>
										<li class="c19 c31 li-bullet-0"><span class="c38 c6 c44">_WDT_OFF</span>: desativa o Watchdog Timer Enable</li>
									</ul>
								</td>
							</tr>
							
							<tr class="c21">
								<td class="c107">
									<p class="c19">
										<span class="c60 c38 c6 c44">_LVP_OFF</span>
									</p>
								</td>
								
								<td class="c97">
									<p class="c67">
										<i>Bit</i> "<span class="c6 c34 c37">L</span><i>ow-</i><span class="c6 c34 c37">V</span><i>oltage </i><span class="c6 c34 c37">P</span><i>rogramming Enable</i>" no qual representa a ativa&ccedil;&atilde;o de grava&ccedil;&atilde;o em baixa tens&atilde;o el&eacute;trica.
									</p>
									
									<ul class="c80 lst-kix_tsfp2ex45nc1-0 start">
										<li class="c67 c31 li-bullet-0">
											<span class="c38 c6 c44">_LVP_ON</span>: ativa grava&ccedil;&atilde;o em baixa tens&atilde;o e RB4 &eacute; PGM</li>
										<li class="c67 c31 li-bullet-0">
											<span class="c38 c6 c44">_LVP_OFF</span>: n&atilde;o ativa grava&ccedil;&atilde;o em baixa tens&atilde;o e RB4 &eacute; um I/O e a alta tens&atilde;o &eacute; aplicada sobre o pino MCLR.</li>
									</ul>
								</td>
							</tr>
							
							<tr class="c21">
								<td class="c107">
									<p class="c19">
										<span class="c60 c38 c6 c44">_MCLRE_OFF</span>
									</p>
								</td>
								
								<td class="c97">
									<p class="c67">
										<i>Bit</i> "RA5/MCLR/VPP <i>Pin Function Select</i>" o qual representa se o pino RA5 ser&aacute; usado como Master clear.
									</p>
									
									<ul class="c80 lst-kix_rz2f5tewy68r-0 start">
										<li class="c67 c31 li-bullet-0">
											<span class="c38 c6 c44">_MCLRE_ON</span>: pino RA5 ser&aacute; usado como <i>Master clear</i> (<i>reset</i>);</li>
										<li class="c67 c31 li-bullet-0">
											<span class="c38 c6 c44">_MCLRE_OFF</span>: pino RA5 n&atilde;o ser&aacute; usado como <i>Master clear</i>(<i>reset</i>) e sim como pino I/O.</li>
									</ul>
								</td>
							</tr>
							
							<tr class="c21">
								<td class="c107">
									<p class="c19">
										<span class="c60 c38 c6 c44">_INTRC_OSC_NOCLKOUT</span>
									</p>
								</td>
								
								<td class="c97">
									<p class="c67">
										<i>Bit</i> "<i>Oscillator Selection</i>" no qual <span class="c38 c6 c44">_INTRC_OSC_NOCLKOUT</span>representa que o clock ser&aacute; pelo oscilador RC interno e os pinos RA6 e RA7 s&atilde;o pinos de I/O. Para saber mais sobre essas configura&ccedil;&otilde;es leia os coment&aacute;rios em <i>C:\Program Files (x86)\Microchip\MPLABX\v5.30\mpasmx\p16f628a.inc</i>
									</p>
								</td>
							</tr>
						</tbody>
						<tfoot>
							<tr>
								<td colspan="2">
									<span class="citacaoFigura">Fonte: <span class="citacaoTemporary">MICROCHIP 2020 (b) 98</span></span>
								</td>
							</td>
						</tfoot>
					</table>
					
					<p class="c11">
						As linhas 9 e 10 s&atilde;o as linhas de defini&ccedil;&atilde;o de constantes ou vari&aacute;veis, sendo que neste exemplo foi definido que a palavra <span class="definesASM1">SENSOR</span>que representar&aacute; o bit <span class="c47 c6 c34">RB0</span>do registrador <span class="c47 c6 c34">PORTB</span>enquanto que a palavra <span class="definesASM1">CONTADOR</span>representa o valor <span class="definesASM1">0x20</span>(em hexadecimal), que ser&aacute; usado neste exemplo como endere&ccedil;o de mem&oacute;ria.
					</p>
					
					<p class="c11">
						Iremos fazer uso da diretiva <span class="c38 c6 c44">#DEFINE</span>para definir constantes ou endere&ccedil;os de registradores que iremos associar a estados ou quantidades que desejamos armazenar.
					</p>
					
					<p class="c11">
						As linhas 12 e 15 s&atilde;o linhas de endere&ccedil;os de mem&oacute;ria de programa&ccedil;&atilde;o onde <span class="definesASM1">0x00</span>representa o endere&ccedil;o de <i>reset</i>do microcontrolador, onde o microcontrolador inicializa, e &eacute; neste endere&ccedil;o que ele come&ccedil;a a execu&ccedil;&atilde;o de c&oacute;digo, enquanto que o endere&ccedil;o <span class="definesASM1">0x04</span>&eacute; o endere&ccedil;o no qual h&aacute; a primeira instru&ccedil;&atilde;o a ser executada apenas quando houver uma interrup&ccedil;&atilde;o e a chave geral das interrup&ccedil;&otilde;es estiverem ativas como tamb&eacute;m as respectivas chaves individuais das interrup&ccedil;&otilde;es.
					</p>
					
					<p class="c11">
						Na linha 13 h&aacute; a instru&ccedil;&atilde;o <span class="c3">GOTO</span>, que salta (<i>GO TO</i>) para o r&oacute;tulo <span class="definesASM1">SETUP_PROCESSO</span>, que est&aacute; na linha 18, enquanto que na linha 16 h&aacute; a instru&ccedil;&atilde;o <span class="c3">RETFIE</span>, que &eacute; respons&aacute;vel por retornar de uma subrotina de interrup&ccedil;&atilde;o (<span class="c6 c34 c37">RET</span><i>urn </i><span class="c6 c34 c37">F</span><i>rom</i> <span class="c6 c34 c37">I</span><i>nt</i><span class="c6 c34 c37">E</span><i>rrupt</i>).
					</p>
					
					<p class="c11">
						J&aacute; nas linhas 18, 82, 87 e 89 est&atilde;o os r&oacute;tulos para uso em subrotinas, no qual podem ser criados v&aacute;rios r&oacute;tulos para serem tratados com subrotinas e facilitar o desenvolvimento da aplica&ccedil;&atilde;o.
					</p>
					
					<p class="c11">
						Na linha 94 tem a instru&ccedil;&atilde;o de finaliza&ccedil;&atilde;o do c&oacute;digo/arquivo <i>assembly</i>e nela cont&eacute;m a diretiva <span class="c6 c243">END.</span>
					</p>
					
					<p class="c11">
						As outras linhas contidas no arquivo <i>assembly</i>, s&atilde;o linhas de instru&ccedil;&atilde;o necess&aacute;rias para a l&oacute;gica da solu&ccedil;&atilde;o proposta para um determinado problema e veremos essas instru&ccedil;&otilde;es ao longo dos epis&oacute;dios
					</p>
					
					<p class="c11">
						Conforme visto no arquivo <i>assembly</i>, existem linhas que cont&ecirc;m comando que fazem uso de n&uacute;meros escritos como <span class="definesASM1">0x04</span>e outros como <span class="definesASM1">B&#39;11111111&#39;</span>. Essas formas de escrever n&uacute;meros permitem fazer uso aqui de dois tipos de sistema num&eacute;rico, sendo eles o sistema num&eacute;rico hexadecimal (base 16) e o sistema num&eacute;rico bin&aacute;rio (base 2).
					</p>
					
					<p class="c11">
						No sistema num&eacute;rico decimal como conhecemos, fazemos uso de 10 algarismos para representar qualquer quantidade, fazendo um de um sistema posicional, e assim esses algarismos s&atilde;o 0, 1, 2, 3, 4, 5, 6, 7, 8 e 9. J&aacute; no sistema num&eacute;rico hexadecimal, h&aacute; 16 algarismos para fazer uso no sistema posicional e eles s&atilde;o 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, A, B, C, D, E e F, e como isso o mesmo n&uacute;mero 10 na base decimal &eacute; igual ao n&uacute;mero A na base hexadecimal, enquanto que o n&uacute;mero FE na base hexadecimal &eacute; igual a n&uacute;mero 254 na base decimal
					</p>
					
					<p class="c11">
						Ao escrever c&oacute;digos para PIC16F628A pode-se tamb&eacute;m utilizar de n&uacute;meros no sistema num&eacute;rico bin&aacute;rio (base 2) no qual existem apenas 2 algarismos para uso sendo eles o 0 e o 1.
					</p>
					
					<p class="c11">
						O mesmo n&uacute;mero 10 em decimal, A em hexadecimal, ser&aacute; 1010 em bin&aacute;rio. E por &uacute;ltimo existe ainda o sistema num&eacute;rico octal composto dos algarismo 0, 1, 2, 3, 4, 5, 6 e 7, no qual &eacute; pouco utilizado, mas que &eacute; bom conhecer e assim conforme a Tabela 2.2, tem-se a rela&ccedil;&atilde;o entre os quatro sistemas num&eacute;ricos.
					</p>
					
					<p class="c12">
						<span class="c34">Tabela 2.2 -</span> Equival&ecirc;ncia de n&uacute;meros nos sistemas num&eacute;ricos
					</p>
					
					<table class="c56">
						<thead>
							<tr>
								<th>valor decimal</th>
								<th>valor bin&aacute;rio</th>
								<th>valor octal</th>
								<th>valor hexadecimal</th>
							</tr>
						</thead>
						
						<tbody>
							<tr class="c83">
								<td>0</td>
								<td>0</td>
								<td>0</td>
								<td>0</td>
							</tr>
							<tr class="c21">
								<td>1</td>
								<td>1</td>
								<td>1</td>
								<td>1</td>
							</tr>
							<tr class="c21">
								<td>2</td>
								<td>10</td>
								<td>2</td>
								<td>2</td>
							</tr>
							<tr class="c21">
								<td>3</td>
								<td>11</td>
								<td>3</td>
								<td>3</td>
							</tr>
							<tr class="c21">
								<td>4</td>
								<td>100</td>
								<td>4</td>
								<td>4</td>
							</tr>
							<tr class="c21">
								<td>5</td>
								<td>101</td>
								<td>5</td>
								<td>5</td>
							</tr>
							<tr class="c21">
								<td>6</td>
								<td>110</td>
								<td>6</td>
								<td>6</td>
							</tr>
							<tr class="c21">
								<td>7</td>
								<td>111</td>
								<td>7</td>
								<td>7</td>
							</tr>
							<tr class="c21">
								<td>8</td>
								<td>1000</td>
								<td>10</td>
								<td>8</td>
							</tr>
							<tr class="c21">
								<td>9</td>
								<td>1001</td>
								<td>11</td>
								<td>9</td>
							</tr>
							<tr class="c21">
								<td>10</td>
								<td>1010</td>
								<td>12</td>
								<td>A</td>
							</tr>
								<tr class="c21">
								<td>11</td>
								<td>1011</td>
								<td>13</td>
								<td>B</td>
							</tr>
							<tr class="c21">
								<td>12</td>
								<td>1100</td>
								<td>14</td>
								<td>C</td>
							</tr>
							<tr class="c21">
								<td>13</td>
								<td>1101</td>
								<td>15</td>
								<td>D</td>
							</tr>
							<tr class="c21">
								<td>14</td>
								<td>1110</td>
								<td>16</td>
								<td>E</td>
							</tr>
							<tr class="c21">
								<td>15</td>
								<td>1111</td>
								<td>17</td>
								<td>F</td>
							</tr>
							<tr class="c21">
								<td>16</td>
								<td>10000</td>
								<td>20</td>
								<td>10</td>
							</tr>
							<tr class="c21">
								<td>...</td>
								<td>...</td>
								<td>...</td>
								<td>...</td>
							</tr>
						</tbody>
						<tfoot>
							<tr>
								<td colspan="2">
									<span class="citacaoFigura">Fonte: <span class="citacaoTemporary">Autor 2020</span></span>
								</td>
							</td>
						</tfoot>
					</table>
					
					<p class="c11">
						Para saber mais sobre sistemas num&eacute;ricos recomendo ler <span class="textoVermelho">(BORBA, 2020)</span>e v&iacute;deos sobre opera&ccedil;&otilde;es e convers&otilde;es sobre estes sistemas em <span class="textoVermelho">(CRUZ, 2020).
					</p>
					
					<p class="c11">
						Agora que sabemos como funcionam os sistemas num&eacute;ricos, veremos como representar eles dentro do MPASM&trade; Assembler da Microchip e para isso faz-se uso do documento <span class="textoVermelho">(MICROCHIP, 2013 p&aacute;gina 67)</span>no qual disp&otilde;e da Tabela 2.3 que especifica o formato dos n&uacute;meros no montador <i>assembly</i> MPASM.
					</p>
					
					<p class="c11">
						Assim, quando houver necessidade de tratar individualmente estados ou endere&ccedil;os de mem&oacute;ria, iremos fazer uso do sistema num&eacute;rico bin&aacute;rio, octal ou hexadecimal e quando houver necessidade de contagem de objetos, iremos usar o sistema num&eacute;rico decimal.
					</p>
					
					<p class="c11">
						Agora ap&oacute;s vermos a estrutura do arquivo base em <i>assembly</i> e a forma de expressar quantidades e estados com 4 sistemas num&eacute;ricos, veremos como &eacute; feito a execu&ccedil;&atilde;o das instru&ccedil;&otilde;es, sem adentrar no escopo do que cada instru&ccedil;&atilde;o faz, pois ser&atilde;o abordados nos pr&oacute;ximos epis&oacute;dios.
					</p>
					
					<p class="c12">
						<span class="c34">Tabela 2.3 -</span> Nota&ccedil;&atilde;o dos n&uacute;meros no montador MPASM
					</p>
						
					<table class="c56">
						<thead>
							<tr>
								<th>Tipo</th>
								<th>Sintaxe</th>
								<th>Exemplos</th>
							</tr>
						</thead>
						
						<tbody>
							<tr>
								<td class="c32">Bin&aacute;rio</td>
								<td class="c32">
									<span class="c60 c8 c6 c53">B&#39;d&iacute;gitos_binarios&#39;</span>
								</td>
								<td class="c32">
									<span class="c60 c8 c6 c53">B&#39;00000111&#39;</span>
									<br/>
									<span class="c60 c8 c6 c53">B&#39;10100101&#39;</span>
								</td>
							</tr>
							
							<tr>
								<td class="c32">Octal</td>
								<td class="c32">
									<span class="c60 c8 c6 c53">O&#39;d&iacute;gitos_octais&#39;</span>
								</td>
								<td class="c32">
									<span class="c60 c8 c6 c53">O&#39;767&#39;</span>
									<br/>
									<span class="c60 c8 c6 c53">O&#39;081&#39;</span>
								</td>
							</tr>
							
							<tr>
								<td class="c32">Decimal</td>
								<td class="c32">
									<span class="c60 c8 c6 c53">D&#39;d&iacute;gitos_decimais&#39;</span>
									<br/>ou<br/>
									<span class="c60 c8 c6 c53">.d&iacute;gitos_decimais</span>
								</td>
								<td class="c32">
									<span class="definesASM1">D&#39;97&#39;</span>
									<br/>ou<br/>
									<span class="c60 c8 c6 c53">.97</span>
									<br/>ou<br/>
									<span class="definesASM1">D&#39;253&#39;</span>
									<br/>ou<br/>
									<span class="c60 c8 c6 c53">.253</span>
								</td>
							</tr>
							
							<tr>
								<td class="c32">Hexadecimal</td>
								<td class="c32">
									<span class="c60 c8 c6 c53">H&#39;d&iacute;gitos_hexadecimais&#39;</span>
									<br/>ou<br/>
									<span class="c60 c8 c6 c53">0xd&iacute;gitos_hexadecimais</span>
								</td>
								<td class="c32">
									<span class="c60 c8 c6 c53">H&#39;9f&#39; ou 0x9f</span>
									<br/>ou<br/>
									<span class="c60 c8 c6 c53">H&#39;9F&#39; ou 0x9F</span>
								</td>
							</tr>
							
							<tr>
								<td class="c32">ASCII</td>
								<td class="c32">
									<span class="c60 c8 c6 c53">A&#39;caracter&#39;</span>
									<br/>ou<br/>
									<span class="c60 c8 c6 c53">&#39;caracter&#39;</span>
								</td>
								<td class="c32">
									<span class="c60 c8 c6 c53">A&#39;C&#39;</span>
									<br/>ou<br/>
									<span class="c60 c8 c6 c53">&#39;C&#39;</span>
								</td>
							</tr>
						</tbody>
						
						<tfoot>
							<tr>
								<td colspan="2">
									<span class="citacaoFigura">Fonte: <span class="citacaoTemporary">MICROCHIP 2020 (c) pag. 67</span></span>
								</td>
							</td>
						</tfoot>
					</table>
					
					<p class="c11">
						Conforme a Figura 2.9, pode-se ver que na posi&ccedil;&atilde;o de mem&oacute;ria 000h (<span class="definesASM1">0x000</span>) tem-se o vetor de <i>reset</i>, na posi&ccedil;&atilde;o 0004h (<span class="definesASM1">0x0004</span>) o vetor de interrup&ccedil;&atilde;o, da posi&ccedil;&atilde;o 0005h (<span class="definesASM1">0x0005)</span>em diante tem-se a mem&oacute;ria de programa inclu&iacute;da no chip.
					</p>
					
					<p class="c11">
						Na Figura 2.9 pode-se ver ainda que a mem&oacute;ria de programa do PIC16F628A come&ccedil;a em 0005h e vai at&eacute; 07FFh totalizando 2048 palavras (000h at&eacute; 07FFh).
					</p>
					
					<p class="c11">
						Na Figura 2.9 ainda h&aacute; a pilha (<i>stack</i>) que &eacute; composta de 8 n&iacute;veis no qual pode ser usado para armazenar chamadas de subrotinas.
					</p>
					
					<p class="c11">
						E agora para terminarmos este epis&oacute;dio,n&oacute;s veremos o esquema de <i>clock</i> e ciclo de instru&ccedil;&atilde;o que nos ajudar&aacute; a entender como funciona o conceito de tempo dentro do PIC16F628A.
					</p>
					
					<p class="c11">
						Na Figura 2.10 pode-se ver que h&aacute; uma linha com o nome de OSC1 (<i>clock</i> de entrada), no qual pode ser inserido pelo pino <span class="c47 c6 c34">RA7</span>ou gerado internamente, e esse <i>clock</i> &eacute; divido por 4 gerando Q1, Q2, Q3 e Q4. Assim, internamente o contador de programa (<i>Program Counter - PC</i>) &eacute; incrementado em Q1, e a instru&ccedil;&atilde;o &eacute; decodificada e executada durante o ciclo Q1 at&eacute; ciclo Q4, mas enquanto uma instru&ccedil;&atilde;o est&aacute; sendo carregada (<i>Fetch INST (PC)</i>), a anterior que j&aacute; foi carregada est&aacute; sendo executada (<i>Execute INST (PC - 1)</i>) conforme Figura 2.10. Assim, um ciclo de instru&ccedil;&atilde;o consiste dos quatro ciclos, Q1 a Q4.
					</p>
					
					<table class="image">
						<thead>
							<tr>
								<th>
									<span class="c34">Figura 2.9 -</span>Mapa de mem&oacute;ria de programa e pilha
								</th>
							</tr>
						</thead>
						<tbody>
							<tr class="c21">
								<td class="c206">
									<img src="images/image1.png" style="width: 246.00px; height: 586.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title="Memory map of stack and program" alt="Memory map of stack and program">
								</td>
							</tr>
						</tbody>
						<tfoot>
							<tr>
								<td>
									<span class="citacaoFigura">Fonte: <span class="citacaoTemporary">MICROCHIP 2020 (b) pag. 17</span></span>
								</td>
							</td>
						</tfoot>
					</table>
					
					<p class="c11">
						Quando chegarmos no epis&oacute;dio 10, no qual falaremos em contagem de tempo, voltaremos a Figura 2.10 para utilizarmos o conceito de <i>clock</i>e ciclo de instru&ccedil;&atilde;o para cria&ccedil;&atilde;o de subrotinas de temporizadores (<i>delays</i>).
					</p>
					
					<table class="image">
						<thead>
							<tr>
								<th>
									<span class="c34">Figura 2.9 -</span><i>Clock</i> e ciclo de instru&ccedil;&atilde;o
								</th>
							</tr>
						</thead>
						<tbody>
							<tr class="c21">
								<td class="c206">
									<img src="images/image7.png" style="width: 590.00px; height: 210.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title="Instruction clock and cycle" alt="Instruction clock and cycle"/>
								</td>
							</tr>
						</tbody>
						<tfoot>
							<tr>
								<td>
									<span class="citacaoFigura">Fonte: <span class="citacaoTemporary">MICROCHIP 2020 (b) pag. 15</span></span>
								</td>
							</td>
						</tfoot>
					</table>
						
						<hr style="page-break-before:always;display:none;">
				</div>
						
						
						<h1 class="c75 c35" id="h.260bmg2z5f7g"><span class="c28 c87"></span></h1><h1 class="c95 c35" id="h.ke1tar3ww6i0"><span class="c28 c87">Epis&oacute;dio 3: Conhecendo os registradores STATUS, OPTION (OPTION_REG), INTCON, W e o registradores de uso geral para o usu&aacute;rio do PIC16F628A</span></h1><p class="c11">Neste epis&oacute;dio veremos os registradores especiais <span class="c47 c6 c34">STATUS</span>, <span class="c47 c6 c34">OPTION</span>(</span><span class="c47 c6 c34">OPTION_REG</span>), <span class="c47 c6 c34">INTCON</span>e </span><span class="c34">W</span>e as suas defini&ccedil;&otilde;es e seus bits (exceto o registrador </span><span class="c34">W</span>) no qual s&atilde;o respons&aacute;veis pelo controle do microcontrolador (exceto o registrador </span><span class="c34">W</span>)</p><p class="c11">Come&ccedil;aremos o estudo pelo registrador <span class="c47 c6 c34">STATUS</span>(contido nos bancos 0, 1, 2 e 3 e endere&ccedil;o de mem&oacute;ria <span class="definesASM1">0x03</span>, <span class="definesASM1">0x83</span></span><span class="definesASM1">0x103</span>e <span class="definesASM1">0x183</span>) que &eacute; um dos registradores especiais mais utilizados, por necessidade de sele&ccedil;&atilde;o de qual banco de mem&oacute;ria se est&aacute; trabalhando no momento e tamb&eacute;m dos estados que algumas instru&ccedil;&otilde;es modificam</p><p class="c11">O registrador <span class="c47 c6 c34">STATUS</span>&eacute; composto pelos bits <span class="c47 c6 c34">IRP</span>, <span class="c47 c6 c34">RP1</span>, <span class="c47 c6 c34">RP0</span>, </span><span class="c59 c47 c6 c34">TO</span>, </span><span class="c59 c47 c6 c34">PD</span>, <span class="c47 c6 c34">Z</span>, <span class="c47 c6 c34">DC</span><span class="c6 c34 c37">e <span class="c47 c6 c34">C</span>conforme a Tabela 3.1.</p><p class="c12"><span class="c34">Tabela 3.1 -</span>Bits do registrador <span class="c47 c6 c34">STATUS</span></p><a id="t.addcc4bc249a3b213912655225c28017803a97c0"></a><a id="t.13"></a><table class="c7"><tbody><tr class="c21"><td class="c84"><p class="c19"><span class="c5">tipo-valor</span></p></td><td class="c126"><p class="c1"><span class="c5">R/W-0</span></p></td><td class="c126"><p class="c1"><span class="c5">R/W-0</span></p></td><td class="c126"><p class="c1"><span class="c5">R/W-0</span></p></td><td class="c126"><p class="c1"><span class="c5">R-1</span></p></td><td class="c126"><p class="c1"><span class="c5">R-1</span></p></td><td class="c126"><p class="c1"><span class="c5">R/W-x</span></p></td><td class="c126"><p class="c1"><span class="c5">R/W-x</span></p></td><td class="c126"><p class="c1"><span class="c5">R/W-x</td>
</tr>
<tr class="c21"><td class="c157"><p class="c19"><span class="c5">bit</span></p></td><td class="c166"><p class="c1"><span class="c42 c47 c34 c53">IRP</span></p></td><td class="c166"><p class="c1"><span class="c42 c47 c34 c53">RP1</span></p></td><td class="c166"><p class="c1"><span class="c42 c47 c34 c53">RP0</span></p></td><td class="c166"><p class="c1"><span class="c42 c47 c34 c53">TO</span></p></td><td class="c166"><p class="c1"><span class="c42 c47 c34 c53">PD</span></p></td><td class="c166"><p class="c1"><span class="c42 c47 c34 c53">Z</span></p></td><td class="c166"><p class="c1"><span class="c42 c47 c34 c53">DC</span></p></td><td class="c166"><p class="c1"><span class="c42 c47 c34 c53">C</span></p></td></tr><tr class="c185"><td class="c84"><p class="c19"><span class="c5">posi&ccedil;&atilde;o</span></p></td><td class="c146"><p class="c1"><span class="c5">bit 7</span></p></td><td class="c146"><p class="c1"><span class="c5">bit 6</span></p></td><td class="c146"><p class="c1"><span class="c5">bit 5</span></p></td><td class="c146"><p class="c1"><span class="c5">bit 4</span></p></td><td class="c146"><p class="c1"><span class="c5">bit 3</span></p></td><td class="c146"><p class="c1"><span class="c5">bit 2</span></p></td><td class="c146"><p class="c1"><span class="c5">bit 1</span></p></td><td class="c146"><p class="c1"><span class="c5">bit 0</span></p></td></tr></tbody></table><p class="c11"><span class="textoVermelho">Fonte: MICROCHIP 2020 (b) pag. 24</span></p><p class="c12 c14"></p><p class="c11">Na Tabela 3.1, a letra R e W em tipo-valor representam respectivamente que o </span><i>bit</span>&eacute; de leitura e escrita, enquanto que o valor 0 ou 1 representa que este &eacute; o valor inicial por um </span><i>reset</span>, enquanto que se o valor for x, representa que o seu valor &eacute; desconhecido</p><p class="c11">O primeiro </span><i>bit</span>do registrador <span class="c47 c6 c34">STATUS</span>, &eacute; o </span><i>bit</span></span><span class="c47 c6 c34">IRP</span>(</span><i>Register Bank Select bit</span>) usado para endere&ccedil;amento indireto, no qual se ele for igual a 0, indexa os bancos de mem&oacute;ria 0 e 1, isto &eacute;, ser&atilde;o indexados os endere&ccedil;os de mem&oacute;ria de <span class="definesASM1">0x00</span>a <span class="definesASM1">0xFF</span>. J&aacute; se o </span><i>bit</span></span><span class="c47 c6 c34">IRP</span>for igual a 1, indexa os bancos de mem&oacute;ria 2 e 3, isto &eacute;, ser&atilde;o indexados os endere&ccedil;os de mem&oacute;ria de <span class="definesASM1">0x100</span>a <span class="definesASM1">0x1FF</span>. Nesses epis&oacute;dios n&atilde;o trabalharemos com endere&ccedil;amento indireto</p><p class="c11">Os </span><i>bits</span></span><span class="c34">RP1</span>e </span><span class="c34">RP0</span>s&atilde;o os </span><i>bits</span>respons&aacute;veis pela sele&ccedil;&atilde;o do banco de registradores para acesso direto &agrave; mem&oacute;ria, onde s&atilde;o definidos seus valores conforme a Tabela 3.2.</p><p class="c12"><span class="c34">Tabela 3.2 -</span></span><i>Bits</span>de sele&ccedil;&atilde;o de banco de mem&oacute;ria</span></p><a id="t.af2239e8fba0753c9449c59517781ef6c79a8589"></a><a id="t.14"></a><table class="c232"><tbody><tr class="c21"><td class="c170"><p class="c1"><span class="c60 c47 c6 c34 c53">RP1</span></p></td><td class="c55"><p class="c1"><span class="c60 c47 c6 c34 c53">RP0</span></p></td><td class="c208"><p class="c1">Banco selecionado</td>
</tr>
<tr class="c21"><td class="c170"><p class="c1">0</span></p></td><td class="c55"><p class="c1">0</span></p></td><td class="c208"><p class="c1"><i>Bank</span>0</td>
</tr>
<tr class="c21"><td class="c170"><p class="c1">0</span></p></td><td class="c55"><p class="c1">1</span></p></td><td class="c208"><p class="c1"><i>Bank</span>1</td>
</tr>
<tr class="c21"><td class="c170"><p class="c1">1</span></p></td><td class="c55"><p class="c1">0</span></p></td><td class="c208"><p class="c1"><i>Bank</span>2</span></p></td></tr><tr class="c245"><td class="c170"><p class="c1">1</span></p></td><td class="c55"><p class="c1">1</span></p></td><td class="c208"><p class="c1"><i>Bank</span>3</span></p></td></tr></tbody></table><p class="c11">                </span><span class="citacaoFigura">Fonte: MICROCHIP 2020 (b) pag. 24</span></p><p class="c11">Os </span><i>bits</span></span><span class="c59 c47 c6 c34">TO</span>(</span><span class="c6 c34 c37">T</span><i>ime </span><span class="c6 c34 c37">O</span><i>ut</span>) e </span><span class="c59 c47 c6 c34">PD</span>(</span><span class="c6 c34 c37">P</span><i>ower-</span><span class="c6 c34 c37">D</span><i>own</span>) s&atilde;o </span><i>bits</span>de estados relacionados a uma ocorr&ecirc;ncia de </span><i>Watchdog Timer</span>ou </span><i>Sleep</span>e veremos em epis&oacute;dios posteriores</p><p class="c11">J&aacute; o </span><i>bit</span></span><span class="c47 c6 c34">Z</span>(</span><i>Zero</span>), &eacute; o </span><i>bit</span>respons&aacute;vel por expressar se uma opera&ccedil;&atilde;o aritm&eacute;tica ou l&oacute;gica teve como resultado o valor 0. Se a opera&ccedil;&atilde;o aritm&eacute;tica ou l&oacute;gica resultou em 0, o </span><i>bit</span></span><span class="c47 c6 c34">Z</span>ser&aacute; setado, isto &eacute;, ficar&aacute; com valor 1, caso contr&aacute;rio, o </span><i>bit</span></span><span class="c47 c6 c34">Z</span>ser&aacute; limpo, isto &eacute;, ficar&aacute; com o valor 0</p><p class="c11">Antes de falarmos nos </span><i>bits</span>restantes de do registrador <span class="c47 c6 c34">STATUS</span>, temos que esclarecer o que s&atilde;o </span><i>nibbles</span>em um n&uacute;mero bin&aacute;rio.</span></p><p class="c11 c14"></span></p><a id="t.df3a2833e8cc32c0f6ae4bf03bde9431efcd00a2"></a><a id="t.15"></a><table class="c56"><tbody><tr class="c21"><td class="c155"><p class="c11 c14"><span class="c60 c6 c39 c34 c50"></span></p><p class="c11"><span class="c6 c39 c34">IMPORTANTE:</span>Um </span><i>nibble</span></span>&eacute; uma sequ&ecirc;ncia de 4 </span><i>bits</span>em um n&uacute;mero bin&aacute;rio. Um n&uacute;mero bin&aacute;rio de 1 </span><i>byte</span>, que representa 8 </span><i>bits</span>, &eacute; composto por 2 </span><i>nibbles</p><p class="c11"><span class="c34">Exemplo:</span>O n&uacute;mero 154</span><span class="c6 c62">10</span>escrito na base bin&aacute;ria, &eacute; representado por 10011010</span><span class="c6 c62">2</span>, assim:</span></p><a id="t.d16bfcdf42f6e1a6087ab6573b637d4b378cb5bf"></a><a id="t.16"></a><table class="c200"><tbody><tr class="c21"><td class="c132"><p class="c24">1001</span><span class="c131 c6 c62 c50 c53 c44">2</span></p></td><td class="c213"><p class="c67 c35">representa</span>o </span><i>nibble</span></span>mais significativo do n&uacute;mero bin&aacute;rio 10011010</span><span class="c6 c62">2</span>, isto &eacute;, representa os quatro </span><i>bits</span>mais &agrave; esquerda do n&uacute;mero bin&aacute;rio 10011010</span><span class="c6 c62">2.</td>
</tr>
<tr class="c21"><td class="c132"><p class="c24">1010</span><span class="c6 c62">2</span></p></td><td class="c213"><p class="c67">representa o </span><i>nibble</span>menos significativo do n&uacute;mero bin&aacute;rio 10011010</span><span class="c6 c62">2</span>, isto &eacute;, representa os quatro </span><i>bits</span>mais &agrave; direita do n&uacute;mero bin&aacute;rio 10011010</span><span class="c6 c62">2.</span></p></td></tr></tbody></table></td></tr></tbody></table><p class="c11 c14"></span></p><p class="c11">O </span><i>bit</span></span><span class="c47 c6 c34">DC</span>(</span><i>Digit Carry</span>/</span><span class="c59 c6 c37">borrow</span>) tem seu estado modificado pelas instru&ccedil;&otilde;es </span><span class="c3">ADDWF</span>, </span><span class="c3">ADDLW</span>, </span><span class="c3">SUBWF</span>e </span><span class="c3">SUBLW</span>, onde as regras s&atilde;o</span>:</span></p><ul class="c80 lst-kix_452ijsx0ndh0-0 start"><li class="c31">o </span><i>bit</span></span><span class="c47 c6 c34">DC</span>&eacute; igual a 1 quando o </span><i>nibble</span>menos significativo passar de <span class="definesASM1">0xF</span>para <span class="definesASM1">0x0</span>, isto &eacute;, quando houver um estouro no </span><i>nibble</span>menos significativo</span>, e &eacute; igual a 0 caso o contr&aacute;rio. O </span><i>digit carry</span>est&aacute; associado &agrave;s instru&ccedil;&otilde;es </span><span class="c3">ADDWF</span>e </span><span class="c3">ADDLW</span>;</span></li></ul><ul class="c80 lst-kix_452ijsx0ndh0-0"><li class="c31">o </span><i>bit</span></span><span class="c47 c6 c34">DC</span>&eacute; igual a 1 quando o </span><i>nibble</span>menos significativo passar de <span class="definesASM1">0xF</span>para <span class="definesASM1">0x0</span>, e isso ocorre na subtra&ccedil;&atilde;o por causa da a&ccedil;&atilde;o da adi&ccedil;&atilde;o de complemento de 2 do segundo operando. Assim para </span><span class="c59 c6 c37">borrow</span>(empr&eacute;stimo quando o primeiro operando for menor que o segundo operando) a polaridade &eacute; reversa, por causa de </span><span class="c3">SUBWF</span>e </span><span class="c3">SUBLW.</span></li></ul><p class="c11">O bit <span class="c47 c6 c34">C</span>(</span><i>carry</span>/</span><span class="c59 c6 c37">borrow</span>) tem seu estado modificado pelas instru&ccedil;&otilde;es </span><span class="c3">ADDWF</span>, </span><span class="c3">ADDLW</span>, </span><span class="c3">SUBWF</span>e </span><span class="c3">SUBLW</span>, e as </span>regras para modifica&ccedil;&atilde;o do seu estado s&atilde;o:</span></p><ul class="c80 lst-kix_c8lbyj56p99l-0 start"><li class="c31">o </span><i>bit</span></span><span class="c47 c6 c34">C</span>&eacute; igual a 1 quando as instru&ccedil;&otilde;es </span><span class="c3">ADDWF</span>e </span><span class="c3">ADDLW</span>gerarem valor maior que <span class="definesASM1">0xFF</span>e 0 caso o contr&aacute;rio;</span></li></ul><ul class="c80 lst-kix_c8lbyj56p99l-0"><li class="c31">o </span><i>bit</span></span><span class="c47 c6 c34">C</span>&eacute; igual a 1 quando as instru&ccedil;&otilde;es </span><span class="c3">SUBWF</span>e </span><span class="c3">SUBLW</span>gerarem valor maior que <span class="definesASM1">0xFF</span>, pois como comentado anteriormente, a subtra&ccedil;&atilde;o &eacute; obtida por adi&ccedil;&atilde;o ao complemento de 2 do segundo operando, e 0 caso o contr&aacute;rio;</span></li></ul><ul class="c80 lst-kix_c8lbyj56p99l-0"><li class="c31">o </span><i>bit</span></span><span class="c47 c6 c34">C</span>pode ter seu estado modificado quando fizer uso das instru&ccedil;&otilde;es </span><span class="c3">RRF</span>e </span><span class="c3">RLF</span>como ser&atilde;o vistas posteriormente no </span>epis&oacute;dio 9.</span></li></ul><p class="c11">Outro registrador especial &eacute; o registrador <span class="c47 c6 c34">OPTION_REG</span>(contido nos bancos 1 e 3 e endere&ccedil;os <span class="definesASM1">0x81</span>e <span class="definesASM1">0x181</span>) e seus bits s&atilde;o: </span><span class="c59 c47 c6 c34">RBPU</span>, <span class="c47 c6 c34">INTEDG</span>, <span class="c47 c6 c34">T0CS</span>, <span class="c47 c6 c34">T0SE</span>, <span class="c47 c6 c34">PSA</span>, <span class="c47 c6 c34">PS2</span>, <span class="c47 c6 c34">PS1</span>e <span class="c47 c6 c34">PS0</span>conforme a Tabela 3.3.</p><p class="c12"><span class="c34">Tabela 3.3 -</span>Bits do registrador <span class="c47 c6 c34">OPTION_REG</span></p><a id="t.e8231c9c9b925940ffa75166d38a06f3dd91775a"></a><a id="t.17"></a><table class="c7"><tbody><tr class="c21"><td class="c84"><p class="c19"><span class="c5">tipo-valor</span></p></td><td class="c134"><p class="c1"><span class="c5">R/W-1</span></p></td><td class="c162"><p class="c1"><span class="c5">R/W-1</span></p></td><td class="c160"><p class="c1"><span class="c5">R/W-1</span></p></td><td class="c134"><p class="c1"><span class="c5">R/W-1</span></p></td><td class="c134"><p class="c1"><span class="c5">R/W-1</span></p></td><td class="c134"><p class="c1"><span class="c5">R/W-1</span></p></td><td class="c134"><p class="c1"><span class="c5">R/W-1</span></p></td><td class="c134"><p class="c1"><span class="c5">R/W-1</td>
</tr>
<tr class="c21"><td class="c157"><p class="c19"><span class="c5">bit</span></p></td><td class="c167"><p class="c1"><span class="c59 c255 c47 c34 c53 c256">RBPU</span></p></td><td class="c105"><p class="c1"><span class="c42 c47 c34 c53">INTEDG</span></p></td><td class="c137"><p class="c1"><span class="c42 c47 c34 c53">T0CS</span></p></td><td class="c167"><p class="c1"><span class="c42 c47 c34 c53">T0SE</span></p></td><td class="c167"><p class="c1"><span class="c42 c47 c34 c53">PSA</span></p></td><td class="c167"><p class="c1"><span class="c42 c47 c34 c53">PS2</span></p></td><td class="c167"><p class="c1"><span class="c42 c47 c34 c53">PS1</span></p></td><td class="c167"><p class="c1"><span class="c42 c47 c34 c53">PS0</td>
</tr>
<tr class="c21"><td class="c84"><p class="c19"><span class="c5">posi&ccedil;&atilde;o</span></p></td><td class="c69"><p class="c1"><span class="c5">bit 7</span></p></td><td class="c152"><p class="c1"><span class="c5">bit 6</span></p></td><td class="c189"><p class="c1"><span class="c5">bit 5</span></p></td><td class="c69"><p class="c1"><span class="c5">bit 4</span></p></td><td class="c69"><p class="c1"><span class="c5">bit 3</span></p></td><td class="c69"><p class="c1"><span class="c5">bit 2</span></p></td><td class="c69"><p class="c1"><span class="c5">bit 1</span></p></td><td class="c69"><p class="c1"><span class="c5">bit 0</span></p></td></tr></tbody></table><p class="c11"><span class="textoVermelho">Fonte: MICROCHIP 2020 (b) pag. 25</span></p><p class="c11">O bit </span><span class="c59 c47 c6 c34">RBPU</span>&eacute; o </span><i>bit</span>respons&aacute;vel por ativar os estados em </span><i>pull-up</span>dos </span><i>bits</span>da porta <span class="c47 c6 c34">PORTB</span>, que ser&aacute; visto no epis&oacute;dio 4, onde </span><span class="c59 c47 c6 c34">RBPU</span>&eacute; igual a 1 quando se quer desabilitar os estados </span><i>pull-up</span>dos </span><i>bits</span>de <span class="c47 c6 c34">PORTB</span>e igual a 0 caso o contr&aacute;rio. Note a marca&ccedil;&atilde;o barrada em </span><span class="c59 c47 c6 c34">RBPU</span>, necessitando trabalhar com l&oacute;gica inversa</p><p class="c11">Na Figura 3.1 pode-se ver um exemplo de resistor </span><i>pull-up</span>de 10 k</span><span class="c6 c182 c252">&Omega;</span>no qual faz a sa&iacute;da output iniciar em n&iacute;vel alto (valor V</span><span class="c6 c62">CC</span>) e quando pressionado o bot&atilde;o </span><i>KEY1</span>, a sa&iacute;da ficar&aacute; em n&iacute;vel baixo (GND - 0V) e p</span>ara saber mais sobre resistor </span><i>pull-up</span>acesse </span><span class="linkDoc1"><a href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/Pull-up_resistor&amp;sa=D&amp;source=editors&amp;ust=1619797899052000&amp;usg=AOvVaw1OisnnKS3U93u1w2flb40q">https://en.wikipedia.org/wiki/Pull-up_resistor</a>.</p><p class="c12"><span class="c34">Figura 3.1 -</span>Resistor </span><span class="c142 c6 c50 c53 c37 c44">pull-up</span></p><a id="t.3c9232b2d5d9ea2a259f8403ad80b64e9db35916"></a><a id="t.18"></a><table class="c235"><tbody><tr class="c21"><td class="c253"><p class="c12"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 259.28px; height: 213.15px;"><img alt="" src="images/image8.png" style="width: 259.28px; height: 213.15px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr></tbody></table><p class="c11">            </span><span class="citacaoFigura">Fonte: Autor 2020</span></p><p class="c11">O </span><i>bit</span></span><span class="c47 c6 c34">INTEDG</span>&eacute; o bit respons&aacute;vel por selecionar o tipo de borda de disparo da interrup&ccedil;&atilde;o externa, que ser&aacute; vista no epis&oacute;dio 12. Se este </span><i>bit</span>for igual a 1, o disparo da interrup&ccedil;&atilde;o ser&aacute; sobre a borda de subida e se for igual a 0, ter&aacute; o disparo sobre a borda de descida</p><p class="c11">O </span><i>bit</span></span><span class="c47 c6 c34">T0CS</span>&eacute; o </span><i>bit</span>respons&aacute;vel por selecionar a fonte de incremento do </span><i>Timer0</span>, que ser&aacute; visto no epis&oacute;dio 14, onde ele ser&aacute; igual a 1 quando o </span><i>clock</span>do </span><i>Timer0</span>adv&eacute;m de fonte externa no pino <span class="c47 c6 c34">RA4</span>e igual a 0 quando o </span><i>Timer0</span>fizer uso do </span><i>clock</span>do ciclo de instru&ccedil;&atilde;o (</span><i>clock</span>interno)</p><p class="c11">O </span><i>bit</span></span><span class="c47 c6 c34">T0SE</span>&eacute; o </span><i>bit</span>respons&aacute;vel por selecionar o tipo de transi&ccedil;&atilde;o quando selecionado a fonte externa (</span><span class="c47 c6 c34">T0CS</span>=1) no bit <span class="c47 c6 c34">T0CS</span>para o incremento do </span><i>Timer0</span>. Se o </span><i>bit</span></span><span class="c47 c6 c34">T0SE</span>for igual a 1, o incremento &eacute; feito na transi&ccedil;&atilde;o de alto-para-baixo e 0 na transi&ccedil;&atilde;o de baixo-para-alto</p><p class="c11">O bit <span class="c47 c6 c34">PSA</span>&eacute; o </span><i>bit</span>respons&aacute;vel por selecionar a qual perif&eacute;rico o </span><i>Prescaler</span>(taxa de incremento) &eacute; atribu&iacute;do. Se <span class="c47 c6 c34">PSA</span>for igual a 1, o </span><i>Prescaler</span>ser&aacute; atribu&iacute;do ao </span><i>Watchdog Timer</span>(</span><i>WDT</span>) que ser&aacute; visto no epis&oacute;dio 25 e se for igual a 0, o </span><i>Prescaler</span>ser&aacute; atribu&iacute;do ao </span><i>Timer0</p><p class="c11">E por &uacute;ltimo os </span><i>bits</span></span><span class="c47 c6 c34">PS2</span>, <span class="c47 c6 c34">PS1</span>e <span class="c47 c6 c34">PS0</span>, que </span>s&atilde;o os </span><i>bits</span>de configura&ccedil;&atilde;o da taxa de incremento do </span><i>Timer0</span>ou </span><i>Watchdog Timer</span>, conforme a Tabela 3.4.</p><p class="c12"><span class="c34">Tabela 3.4 -</span>Configura&ccedil;&atilde;o da taxa de incremento do </span><i>Timer0</span>ou </span><span class="c142 c6 c50 c53 c37 c44">Watchdog Timer</span></p><a id="t.a651b2c78f412582e1faa8b0872b33b3b7abe6ac"></a><a id="t.19"></a><table class="c241"><tbody><tr class="c21"><td class="c77"><p class="c104"><span class="c60 c47 c6 c34 c53">PS2</span></p></td><td class="c124"><p class="c104"><span class="c60 c47 c6 c34 c53">PS1</span></p></td><td class="c61"><p class="c104"><span class="c60 c47 c6 c34 c53">PS0</span></p></td><td class="c64"><p class="c104"><span class="c34">Taxa de inc. de </span><span class="c142 c6 c34 c50 c53 c37">Timer0</span></p></td><td class="c144"><p class="c104"><span class="c34">Taxa de inc. de </span><span class="c142 c6 c34 c50 c53 c37">WDT</td>
</tr>
<tr class="c21"><td class="c77"><p class="c109">0</span></p></td><td class="c124"><p class="c109">0</span></p></td><td class="c61"><p class="c109">0</span></p></td><td class="c64"><p class="c109">1:2</span></p></td><td class="c144"><p class="c109">1:1</td>
</tr>
<tr class="c21"><td class="c77"><p class="c109">0</span></p></td><td class="c124"><p class="c109">0</span></p></td><td class="c61"><p class="c109">1</span></p></td><td class="c64"><p class="c109">1:4</span></p></td><td class="c144"><p class="c109">1:2</td>
</tr>
<tr class="c21"><td class="c77"><p class="c109">0</span></p></td><td class="c124"><p class="c109">1</span></p></td><td class="c61"><p class="c109">0</span></p></td><td class="c64"><p class="c109">1:8</span></p></td><td class="c144"><p class="c109">1:4</td>
</tr>
<tr class="c21"><td class="c77"><p class="c109">0</span></p></td><td class="c124"><p class="c109">1</span></p></td><td class="c61"><p class="c109">1</span></p></td><td class="c64"><p class="c109">1:16</span></p></td><td class="c144"><p class="c109">1:8</td>
</tr>
<tr class="c21"><td class="c77"><p class="c109">1</span></p></td><td class="c124"><p class="c109">0</span></p></td><td class="c61"><p class="c109">0</span></p></td><td class="c64"><p class="c109">1:32</span></p></td><td class="c144"><p class="c109">1:16</td>
</tr>
<tr class="c21"><td class="c77"><p class="c109">1</span></p></td><td class="c124"><p class="c109">0</span></p></td><td class="c61"><p class="c109">1</span></p></td><td class="c64"><p class="c109">1:64</span></p></td><td class="c144"><p class="c109">1:32</td>
</tr>
<tr class="c21"><td class="c77"><p class="c109">1</span></p></td><td class="c124"><p class="c109">1</span></p></td><td class="c61"><p class="c109">0</span></p></td><td class="c64"><p class="c109">1:128</span></p></td><td class="c144"><p class="c109">1:64</td>
</tr>
<tr class="c21"><td class="c77"><p class="c109">1</span></p></td><td class="c124"><p class="c109">1</span></p></td><td class="c61"><p class="c109">1</span></p></td><td class="c64"><p class="c109">1:256</span></p></td><td class="c144"><p class="c109">1:128</span></p></td></tr></tbody></table><p class="c11">     </span><span class="citacaoFigura">Fonte: MICROCHIP 2020 (b) pag. 25</span></p><p class="c11">Outro registrador especial importante &eacute; o <span class="c47 c6 c34">INTCON</span>(contido nos bancos 0, 1, 2 e 3 nos endere&ccedil;os <span class="definesASM1">0x0B</span>, <span class="definesASM1">0x8B</span>, <span class="definesASM1">0x10B</span>, <span class="definesASM1">0x18B</span>) e seus </span><i>bits</span>s&atilde;o <span class="c47 c6 c34">GIE</span>, <span class="c47 c6 c34">PEIE</span>, <span class="c47 c6 c34">T0IE</span>, <span class="c47 c6 c34">INTE</span>, <span class="c47 c6 c34">RBIE</span>, <span class="c47 c6 c34">T0IF</span>, <span class="c47 c6 c34">INTF</span>e <span class="c47 c6 c34">RBIF</span>conforme a Tabela 3.5.</p><p class="c12"><span class="c34">Tabela 3.5 -</span></span><i>Bits</span>do registrador </span><span class="c47 c6 c34 c37">INTCON</span></p><a id="t.2b87974983e6f7f2e5f96c7fc80e81238f40133f"></a><a id="t.20"></a><table class="c7"><tbody><tr class="c21"><td class="c84"><p class="c19"><span class="c5">tipo-valor</span></p></td><td class="c134"><p class="c1"><span class="c5">R/W-0</span></p></td><td class="c162"><p class="c1"><span class="c5">R/W-0</span></p></td><td class="c160"><p class="c1"><span class="c5">R/W-0</span></p></td><td class="c134"><p class="c1"><span class="c5">R/W-0</span></p></td><td class="c134"><p class="c1"><span class="c5">R/W-0</span></p></td><td class="c134"><p class="c1"><span class="c5">R/W-0</span></p></td><td class="c134"><p class="c1"><span class="c5">R/W-0</span></p></td><td class="c134"><p class="c1"><span class="c5">R/W-x</td>
</tr>
<tr class="c21"><td class="c157"><p class="c19"><span class="c5">bit</span></p></td><td class="c167"><p class="c1"><span class="c42 c47 c34 c53">GIE</span></p></td><td class="c105"><p class="c1"><span class="c42 c47 c34 c53">PEIE</span></p></td><td class="c137"><p class="c1"><span class="c42 c47 c34 c53">T0IE</span></p></td><td class="c167"><p class="c1"><span class="c42 c47 c34 c53">INTE</span></p></td><td class="c167"><p class="c1"><span class="c42 c47 c34 c53">RBIE</span></p></td><td class="c167"><p class="c1"><span class="c42 c47 c34 c53">T0IF</span></p></td><td class="c167"><p class="c1"><span class="c42 c47 c34 c53">INTF</span></p></td><td class="c167"><p class="c1"><span class="c42 c47 c34 c53">RBIF</td>
</tr>
<tr class="c21"><td class="c84"><p class="c19"><span class="c5">posi&ccedil;&atilde;o</span></p></td><td class="c69"><p class="c1"><span class="c5">bit 7</span></p></td><td class="c152"><p class="c1"><span class="c5">bit 6</span></p></td><td class="c189"><p class="c1"><span class="c5">bit 5</span></p></td><td class="c69"><p class="c1"><span class="c5">bit 4</span></p></td><td class="c69"><p class="c1"><span class="c5">bit 3</span></p></td><td class="c69"><p class="c1"><span class="c5">bit 2</span></p></td><td class="c69"><p class="c1"><span class="c5">bit 1</span></p></td><td class="c69"><p class="c1"><span class="c5">bit 0</span></p></td></tr></tbody></table><p class="c11"><span class="textoVermelho">Fonte: MICROCHIP 2020 (b) pag. 26</span></p><p class="c11">O primeiro </span><i>bit</span>&eacute; o </span><i>bit</span></span><span class="c47 c6 c34">GIE</span>que &eacute; respons&aacute;vel por permitir ou n&atilde;o permitir que todas as interrup&ccedil;&otilde;es sejam executadas. Esse </span><i>bit</span>&eacute; conhecido como a chave geral de todas as interrup&ccedil;&otilde;es e a Figura 3.2 exibe a fun&ccedil;&atilde;o do </span><i>bit</span></span><span class="c47 c6 c34">GIE</span>. Se o valor do </span><i>bit</span></span><span class="c47 c6 c34">GIE</span>for igual a 1 (setado) &eacute; permitido as interrup&ccedil;&otilde;es serem enviadas ao processamento pelo PIC, mas se o </span><i>bit</span>for igual a 0 (limpo), as interrup&ccedil;&otilde;es n&atilde;o ser&atilde;o processadas pelo PIC</p><p class="c11">O bit <span class="c47 c6 c34">PEIE</span>&eacute; o </span><i>bit</span>para ativar (valor igual a 1, setado) ou desativar (valor igual a 0, limpo) as interrup&ccedil;&otilde;es de perif&eacute;ricos (</span><i>Timer1</span>, </span><i>Timer2</span>, M&oacute;dulo de capturar/comparar/</span><i>PWM</span>, M&oacute;dulo comparador, </span><i>USART </span>e </span><i>EEPROM</span>) e isto pode ser visto na Figura 3.2.</p><p class="c12"><span class="c34">Figura 3.2</span>- L&oacute;gica das interrup&ccedil;&otilde;es</span></p><a id="t.3c9232b2d5d9ea2a259f8403ad80b64e9db35916"></a><a id="t.21"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c11"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 590.00px; height: 189.33px;"><img alt="" src="images/image41.png" style="width: 590.00px; height: 189.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr></tbody></table><p class="c19"><span class="citacaoFigura">Fonte: MICROCHIP 2020 (b) pag. 109</span></p><p class="c11">O </span><i>bit</span></span><span class="c47 c6 c34">T0IE</span>&eacute; o </span><i>bit</span>para ativar (valor igual a 1, setado) ou desativar (valor igual a 0, limpo) a interrup&ccedil;&atilde;o por estouro no registrador <span class="c47 c6 c34">TMR0</span>do </span><i>Timer0</span>que ser&aacute; vista no epis&oacute;dio 14</p><p class="c11">O </span><i>bit</span></span><span class="c47 c6 c34">INTE</span>&eacute; o </span><i>bit</span>para ativar (valor igual a 1, setado) ou desativar (valor igual a 0, limpo) a interrup&ccedil;&atilde;o externa no pino <span class="c47 c6 c34">RB0</span>que ser&aacute; vista no epis&oacute;dio 12</p><p class="c11">O </span><i>bit</span></span><span class="c47 c6 c34">RBIE</span>&eacute; o </span><i>bit</span>para ativar (valor igual a 1, setado) ou desativar (valor igual a 0, limpo) a interrup&ccedil;&atilde;o por mudan&ccedil;a de estados nos pinos <span class="c47 c6 c34">RB4</span></span><span class="definesASM1">a <span class="c47 c6 c34">RB7</span>que ser&aacute; vista no epis&oacute;dio 13</p><p class="c11"><span class="c6 c39 c34">OBSERVA&Ccedil;&Atilde;O:</span>Note que os </span><i>bits</span>acima terminam com a letra E (de </span><i>Enable</span>) e permitem ativar ou desativar as interrup&ccedil;&otilde;es. J&aacute; os pr&oacute;ximos bits que veremos terminam com a letra F (de </span><i>Flag</span>), que ser&atilde;o respons&aacute;veis por saber se a interrup&ccedil;&atilde;o ocorreu ou n&atilde;o</p><p class="c11">O </span><i>bit</span></span><span class="c47 c6 c34">T0IF</span>&eacute; o </span><i>bit</span>respons&aacute;vel por informar se ocorreu (valor igual a 1, setado) ou n&atilde;o ocorreu (valor igual a 0, limpo) a interrup&ccedil;&atilde;o por estouro no registrador <span class="c47 c6 c34">TMR0</p><p class="c11">O </span><i>bit</span></span><span class="c47 c6 c34">INTF</span>e o </span><i>bit</span>respons&aacute;vel por informar se ocorreu (valor igual a 1, setado) ou n&atilde;o ocorreu (valor igual a 0, limpo) a interrup&ccedil;&atilde;o externa no pino <span class="c47 c6 c34">RB0</p><p class="c11">O </span><i>bit</span></span><span class="c47 c6 c34">RBIF</span>&eacute; o </span><i>bit</span>respons&aacute;vel por informar se ocorreu (valor igual a 1, setado) ou n&atilde;o ocorreu (valor igual a 0, limpo) a interrup&ccedil;&atilde;o por mudan&ccedil;a de estados nos pinos <span class="c47 c6 c34">RB4</span>a <span class="c47 c6 c34">RB7</p><p class="c11">Outro registrador especial e importante que ser&aacute; o mais utilizado no software (</span><i>firmware</span>- </span><span class="c6 c222 c182">&eacute; uma classe espec&iacute;fica de software de computador que fornece controle de baixo n&iacute;vel para o hardware espec&iacute;fico do dispositivo, conforme Wikipedia em </span><span class="c43 c6 c182"><a href="https://www.google.com/url?q=https://pt.wikipedia.org/wiki/Firmware&amp;sa=D&amp;source=editors&amp;ust=1619797899078000&amp;usg=AOvVaw1ZIenQFvPXFlicv5we3_tb">https://pt.wikipedia.org/wiki/Firmware</a></span><span class="c6 c182 c222">)</span>&eacute; o registrador </span><span class="c6 c34 c37">W</span>(</span><i>work</span>) visto no diagrama de blocos da Figura 1.5 do epis&oacute;dio 1, e &eacute; um registrador de 8 bits usado pela Unidade L&oacute;gica e Aritm&eacute;tica (</span><i>ALU</span>) e n&atilde;o &eacute; endere&ccedil;ado como os outros registradores nos bancos. Assim, as opera&ccedil;&otilde;es aritm&eacute;ticas de adi&ccedil;&atilde;o e subtra&ccedil;&atilde;o e tamb&eacute;m as opera&ccedil;&otilde;es l&oacute;gicas de </span><span class="c34">E</span>e </span><span class="c34">OU</span>l&oacute;gico necessitam do registrador </span><span class="c6 c34 c37">W</span>. Por&eacute;m, n&atilde;o somente essas opera&ccedil;&otilde;es fazem uso do registrador </span><span class="c6 c34 c37">W</span>, como veremos posteriormente nos pr&oacute;ximos epis&oacute;dios</p><p class="c11">Ainda neste mesmo epis&oacute;dio, veremos os registradores de uso geral que o desenvolvedor pode armazenar valores relativos &agrave;s suas necessidades de implementa&ccedil;&atilde;o, como por exemplo a quantidade de vezes que uma certa subrotina tem que repetir, a quantidade de cliques, entre outros motivos que veremos em exemplos posteriormente</p><p class="c11">Os registradores de uso geral do PIC16F628A est&atilde;o <span class="definesASM1">0x20</span>a <span class="definesASM1">0x6F</span>(80 </span><i>bytes</span>no banco 0), <span class="definesASM1">0x70</span>a <span class="definesASM1">0x7F</span>(16 </span><i>bytes</span>banco 0), <span class="definesASM1">0xA0</span>a <span class="definesASM1">0xEF</span>(80 </span><i>bytes</span>no banco 1) e <span class="definesASM1">0x120</span>a <span class="definesASM1">0x14F</span>(48 </span><i>bytes</span>no banco 2), totalizando 224 </span><i>bytes</span>de </span><i>RAM.</span></p><hr style="page-break-before:always;display:none;"><h1 class="c75 c35" id="h.mnnnuuyr3y9q"><span class="c28 c87"></span></h1><h1 class="c95 c35" id="h.ks32qwd0wsgu"><span class="c28 c87">Epis&oacute;dio 4: Conhecendo os registradores PORTA, PORTB, TRISA e TRISB do PIC16F628A</span></h1><p class="c11">Neste epis&oacute;dio conheceremos os registradores especiais <span class="c47 c6 c34">TRISA</span>, </span><span class="c47 c6 c34 c37">TRISB</span>, <span class="c47 c6 c34">PORTA</span>e <span class="c47 c6 c34">PORTB</span><span class="c6 c28">, respons&aacute;veis pelo controle dos pinos do microcontrolador PIC16F628A</p><p class="c11">Os dois primeiros registradores que veremos s&atilde;o <span class="c47 c6 c34">TRISA</span>(contido no banco 1 no endere&ccedil;o <span class="definesASM1">0x85</span>) e <span class="c47 c6 c34">TRISB</span>(contido nos bancos 1 e 3 nos endere&ccedil;os <span class="definesASM1">0x86</span>e <span class="definesASM1">0x186</span>)</span>, respons&aacute;veis pelo controle da dire&ccedil;&atilde;o dos pinos <span class="c47 c6 c34">RA0</span>a <span class="c47 c6 c34">RA7</span>e <span class="c47 c6 c34">RB0</span>a <span class="c47 c6 c34">RB7</span>respectivamente</span>, isto &eacute;, esses dois registradores controlam se os pinos ser&atilde;o pinos de entrada (captura de estados) ou sa&iacute;da (escrita de estados). As posi&ccedil;&otilde;es dos bits e seus valores ao inicializar o PIC s&atilde;o conforme as tabelas Tabela 4.1 e Tabela 4.2.</p><p class="c12"><span class="c34">Tabela 4.1 -</span></span><i>Bits</span>do registrador <span class="c47 c6 c34">TRISA</span></p><a id="t.bb8243cff8d3556349b022608b6fccc9d22358d7"></a><a id="t.22"></a><table class="c7"><tbody><tr class="c21"><td class="c84"><p class="c19"><span class="c5">tipo-valor</span></p></td><td class="c134"><p class="c1"><span class="c5">R/W-1</span></p></td><td class="c162"><p class="c1"><span class="c5">R/W-1</span></p></td><td class="c160"><p class="c1"><span class="c5">R-1</span></p></td><td class="c134"><p class="c1"><span class="c5">R/W-1</span></p></td><td class="c134"><p class="c1"><span class="c5">R/W-1</span></p></td><td class="c134"><p class="c1"><span class="c5">R/W-1</span></p></td><td class="c134"><p class="c1"><span class="c5">R/W-1</span></p></td><td class="c134"><p class="c1"><span class="c5">R/W-1</td>
</tr>
<tr class="c21"><td class="c157"><p class="c19"><span class="c5">bit</span></p></td><td class="c167"><p class="c1"><span class="c42 c47 c34 c53">RA7</span></p></td><td class="c105"><p class="c1"><span class="c42 c47 c34 c53">RA6</span></p></td><td class="c137"><p class="c1"><span class="c42 c47 c34 c53">RA5</span></p></td><td class="c167"><p class="c1"><span class="c42 c47 c34 c53">RA4</span></p></td><td class="c167"><p class="c1"><span class="c42 c47 c34 c53">RA3</span></p></td><td class="c167"><p class="c1"><span class="c47 c34">RA2</span><span class="c26"></span></p></td><td class="c167"><p class="c1"><span class="c42 c47 c34 c53">RA1</span></p></td><td class="c167"><p class="c1"><span class="c42 c47 c34 c53">RA0</td>
</tr>
<tr class="c21"><td class="c84"><p class="c19"><span class="c5">posi&ccedil;&atilde;o</span></p></td><td class="c69"><p class="c1"><span class="c5">bit 7</span></p></td><td class="c152"><p class="c1"><span class="c5">bit 6</span></p></td><td class="c189"><p class="c1"><span class="c5">bit 5</span></p></td><td class="c69"><p class="c1"><span class="c5">bit 4</span></p></td><td class="c69"><p class="c1"><span class="c5">bit 3</span></p></td><td class="c69"><p class="c1"><span class="c5">bit 2</span></p></td><td class="c69"><p class="c1"><span class="c5">bit 1</span></p></td><td class="c69"><p class="c1"><span class="c5">bit 0</span></p></td></tr></tbody></table><p class="c11"><span class="textoVermelho">Fonte: MICROCHIP 2020 (b) pag. 37</span></p><p class="c12"><span class="c34">Tabela 4.2 -</span></span><i>Bits</span>do registrador <span class="c47 c6 c34">TRISB</span></p><a id="t.906f534990262e1332e4cdff1e912fc247f94c78"></a><a id="t.23"></a><table class="c7"><tbody><tr class="c21"><td class="c84"><p class="c19"><span class="c5">tipo-valor</span></p></td><td class="c134"><p class="c1"><span class="c5">R/W-1</span></p></td><td class="c162"><p class="c1"><span class="c5">R/W-1</span></p></td><td class="c160"><p class="c1"><span class="c5">R/W-1</span></p></td><td class="c134"><p class="c1"><span class="c5">R/W-1</span></p></td><td class="c134"><p class="c1"><span class="c5">R/W-1</span></p></td><td class="c134"><p class="c1"><span class="c5">R/W-1</span></p></td><td class="c134"><p class="c1"><span class="c5">R/W-1</span></p></td><td class="c134"><p class="c1"><span class="c5">R/W-1</td>
</tr>
<tr class="c21"><td class="c157"><p class="c19"><span class="c5">bit</span></p></td><td class="c167"><p class="c1"><span class="c42 c47 c34 c53">RB7</span></p></td><td class="c105"><p class="c1"><span class="c42 c47 c34 c53">RB6</span></p></td><td class="c137"><p class="c1"><span class="c42 c47 c34 c53">RB5</span></p></td><td class="c167"><p class="c1"><span class="c42 c47 c34 c53">RB4</span></p></td><td class="c167"><p class="c1"><span class="c42 c47 c34 c53">RB3</span></p></td><td class="c167"><p class="c1"><span class="c47 c34">RB2</span><span class="c26"></span></p></td><td class="c167"><p class="c1"><span class="c42 c47 c34 c53">RB1</span></p></td><td class="c167"><p class="c1"><span class="c42 c47 c34 c53">RB0</td>
</tr>
<tr class="c21"><td class="c84"><p class="c19"><span class="c5">posi&ccedil;&atilde;o</span></p></td><td class="c69"><p class="c1"><span class="c5">bit 7</span></p></td><td class="c152"><p class="c1"><span class="c5">bit 6</span></p></td><td class="c189"><p class="c1"><span class="c5">bit 5</span></p></td><td class="c69"><p class="c1"><span class="c5">bit 4</span></p></td><td class="c69"><p class="c1"><span class="c5">bit 3</span></p></td><td class="c69"><p class="c1"><span class="c5">bit 2</span></p></td><td class="c69"><p class="c1"><span class="c5">bit 1</span></p></td><td class="c69"><p class="c1"><span class="c5">bit 0</span></p></td></tr></tbody></table><p class="c11"><span class="textoVermelho">Fonte: MICROCHIP 2020 (b) pag. 37</span></p><p class="c11">Se alguns dos </span><i>bits</span></span><span class="c47 c6 c34">RA0</span>a <span class="c47 c6 c34">RA7</span>ou <span class="c47 c6 c34">RB0</span>a <span class="c47 c6 c34">RB7</span>de <span class="c47 c6 c34">TRISA</span>ou <span class="c47 c6 c34">TRISB</span>for igual a 0, o respectivo pino no PIC16F628A ser&aacute; um pino de sa&iacute;da, por&eacute;m, se algum </span><i>bit</span>de <span class="c47 c6 c34">RA0</span>a <span class="c47 c6 c34">RA7</span>e/ou <span class="c47 c6 c34">RB0</span>a <span class="c47 c6 c34">RB7</span>do registrador <span class="c47 c6 c34">TRISA</span>/</span><span class="c47 c6 c34">TRISB</span>for igual a 1, o respectivo pino no PIC16F628A ser&aacute; um pino de entrada</p><p class="c11">Agora se quisermos mudar o estado no pino de sa&iacute;da ou ler o estado de um pino de entrada, devemos fazer a escrita ou leitura no respectivo pino nos registradores </span><span class="c6 c34 c37 c47">PORTA</span>/</span><span class="c47 c6 c34">PORTB</p><p class="c11">Assim, por exemplo, se o pino <span class="c47 c6 c34">RB3</span>deve ser tratado como pino de sa&iacute;da, precisamos escrever no </span><i>bit</span></span><span class="c47 c6 c34">RB3</span>do registrador <span class="c47 c6 c34">TRISB</span>o valor igual a 0 (</span><i>output</span>)</span>, e para fazer esse pino ficar em n&iacute;vel alto (5V se VDD for igual a 5 V), escrevemos o valor 1 no </span><i>bit</span></span><span class="c47 c6 c34">RB3</span>em <span class="c47 c6 c34">PORTB</span>. Agora, se escrevermos o valor 0 no </span><i>bit</span></span><span class="c47 c6 c34">RB3</span>em <span class="c47 c6 c34">PORTB</span>, o pino estar&aacute; em n&iacute;vel baixo (aproximadamente 0 V)</p><p class="c11">Vejamos exemplos contidos na Tabela 4.3 para compreendermos o uso de valores em <span class="c47 c6 c34">TRISA</span>/</span><span class="c47 c6 c34">TRISB</span>e <span class="c47 c6 c34">PORTA</span>/</span><span class="c47 c6 c34">PORTB.</p><p class="c12"><span class="c34">Tabela 4.3 -</span>Exemplos de uso do <span class="c47 c6 c34">TRIS(A/B)</span>e </span><span class="c60 c47 c6 c34 c53">PORT(A/B)</span></p><a id="t.20fccb5f34992d72fdd39ea735631f780c029aa9"></a><a id="t.24"></a><table class="c56"><tbody><tr class="c21"><td class="c199"><p class="c1"><span class="c6 c34 c37">bit</span><span class="c34">em </span><span class="c60 c47 c6 c34 c53">TRIS(A/B)</span></p></td><td class="c199"><p class="c1"><span class="c6 c34 c37">bit</span><span class="c34">em </span><span class="c60 c47 c6 c34 c53">PORT(A/B)</span></p></td><td class="c89"><p class="c1">Descri&ccedil;&atilde;o</td>
</tr>
<tr class="c21"><td class="c178"><p class="c1"><span class="c47 c6 c34">RA2</span>= 1</span></p></td><td class="c178"><p class="c1"><span class="c47 c6 c34">RA2</span>= 0</span></p></td><td class="c89"><p class="c67">o pino <span class="c47 c6 c34">RA2</span>foi configurado como pino de entrada e atribu&iacute;do ou lido o estado como n&iacute;vel baixo (0 V).</td>
</tr>
<tr class="c21"><td class="c178"><p class="c1"><span class="c47 c6 c34">RA2</span>= 0</span></p></td><td class="c178"><p class="c1"><span class="c47 c6 c34">RA2</span>= 1</span></p></td><td class="c89"><p class="c67">o pino <span class="c47 c6 c34">RA2</span>foi configurado como pino de sa&iacute;da e e colocado o estado como n&iacute;vel alto (5 V se VDD = 5V).</td>
</tr>
<tr class="c21"><td class="c178"><p class="c1"><span class="definesASM1">RA5</span>= 1</span></p></td><td class="c178"><p class="c1"><span class="c47 c6 c34">RA2</span>= 1</span></p></td><td class="c89"><p class="c67">o pino <span class="c47 c6 c34">RA5</span>foi configurado como pino de entrada e atribu&iacute;do ou lido o estado como n&iacute;vel alto.</td>
</tr>
<tr class="c21"><td class="c178"><p class="c1"><span class="c47 c6 c34">RA5</span>= 0</span></p></td><td class="c178"><p class="c1"><span class="c47 c6 c34">RA2</span>= x</span></p></td><td class="c89"><p class="c67">o pino <span class="c47 c6 c34">RA5</span>n&atilde;o pode ser definido como pino de sa&iacute;da</span></p></td></tr></tbody></table><p class="c19"><span class="citacaoFigura">Fonte: Pr&oacute;prio autor (2020)</span></p><p class="c11">A diferen&ccedil;a entre <span class="c47 c6 c34">PORTA</span>e <span class="c47 c6 c34">PORTB</span>&eacute; que quando alguns pinos (</span><i>bits</span>) em <span class="c47 c6 c34">PORTB</span>for definido com entrada, h&aacute; a op&ccedil;&atilde;o deles trabalharem em l&oacute;gica inversa, isto &eacute;, iniciar em n&iacute;vel alto, onde esta op&ccedil;&atilde;o &eacute; ativada pelo </span><i>bit</span></span><span class="c59 c47 c6 c34">RBPU</span>do registrador <span class="c47 c6 c34">OPTION</span>(</span><span class="c47 c6 c34">OPTION_REG</span>)</p><p class="c11">Na Figura 1.5 vista no primeiro epis&oacute;dio, tem-se exibido as fun&ccedil;&otilde;es em cada pino e na Figura 4.1 pode-se ver mais especificamente elas.</p><p class="c12"><span class="c34">Figura 4.1</span>- Fun&ccedil;&otilde;es dos pinos em <span class="c47 c6 c34">PORTA</span>e </span><span class="c60 c47 c6 c34 c53">PORTB</span></p><a id="t.3c9232b2d5d9ea2a259f8403ad80b64e9db35916"></a><a id="t.25"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c12"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 590.00px; height: 206.67px;"><img alt="" src="images/image24.png" style="width: 590.00px; height: 206.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr></tbody></table><p class="c19"><span class="textoVermelho">Fonte: MICROCHIP 2020 (b) pag. 12</span></p><p class="c11">Assim, como veremos nos epis&oacute;dios posteriores, os pinos t&ecirc;m as fun&ccedil;&otilde;es baseadas nas Tabela 4.4 e Tabela 4.5 onde:</span></p><ul class="c80 lst-kix_rmly8bgfji6m-0 start"><li class="c31"><span class="c34">O</span>= </span><i>Output</span>(Sa&iacute;da);</span></li><li class="c31"><span class="c34">I</span>= </span><i>Input</span>(Entrada);</span></li><li class="c31"><span class="c34">CMOS</span>= CMOS </span><i>Output</span>(Sa&iacute;da CMOS) e mais sobre CMOS, acesse </span><span class="linkDoc1"><a href="https://www.google.com/url?q=https://pt.wikipedia.org/wiki/CMOS&amp;sa=D&amp;source=editors&amp;ust=1619797899102000&amp;usg=AOvVaw1NqBk_2FKIgEkGFiBaQlfO">https://pt.wikipedia.org/wiki/CMOS</a></span>ou </span><span class="linkDoc1"><a href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/CMOS&amp;sa=D&amp;source=editors&amp;ust=1619797899102000&amp;usg=AOvVaw005JHeSaSS926jhxEDSaAt">https://en.wikipedia.org/wiki/CMOS</a></span>;</span></li><li class="c31"><span class="c34">TTL</span>= TTL </span><i>Input</span>(Entrada TTL) e mais sobre TTL, acesse </span><span class="linkDoc1"><a href="https://www.google.com/url?q=https://pt.wikipedia.org/wiki/L%25C3%25B3gica_transistor-transistor&amp;sa=D&amp;source=editors&amp;ust=1619797899103000&amp;usg=AOvVaw2dilnBUFP6-68FG3LLzOHv">https://pt.wikipedia.org/wiki/L&oacute;gica_transistor-transistor</a></span>ou </span><span class="linkDoc1"><a href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/Transistor%25E2%2580%2593transistor_logic&amp;sa=D&amp;source=editors&amp;ust=1619797899103000&amp;usg=AOvVaw1HqqsnfAUtRvG13aMzk3rv">https://en.wikipedia.org/wiki/Transistor-transistor_logic</a></span>;</span></li><li class="c31"><span class="c34">AN</span>= </span><i>Analog</span>(Anal&oacute;gica);</span></li><li class="c31"><span class="c34">ST</span>= </span><i>Schmitt</span></span><i>Trigger</span></span><i>Input</span>(Entrada </span><i>Schmitt</span></span><i>Trigger</span>) e mais sobre </span><i>Schmitt</span></span><i>Trigger</span>, acesse </span><span class="linkDoc1"><a href="https://www.google.com/url?q=https://pt.wikipedia.org/wiki/Disparador_Schmitt&amp;sa=D&amp;source=editors&amp;ust=1619797899104000&amp;usg=AOvVaw3-7-a9mZtgLhPF1D70OZZZ">https://pt.wikipedia.org/wiki/Disparador_Schmitt</a></span>ou </span><span class="linkDoc1"><a href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/Schmitt_trigger&amp;sa=D&amp;source=editors&amp;ust=1619797899104000&amp;usg=AOvVaw3ISyZxIwQJCHroII1FMADo">https://en.wikipedia.org/wiki/Schmitt_trigger</a></span>;</span></li><li class="c31"><span class="c34">OD</span>= </span><i>Open</span></span><span class="c142 c6 c50 c53 c37 c44">Drain Output (Sa&iacute;da em dreno aberto);</span></li><li class="c31"><span class="c6 c34 c37">&mdash;</span><i>= Not used</span>(N&atilde;o usado(a)).</span></li></ul><p class="c12"><span class="c34">Tabela 4.4</span>- Fun&ccedil;&otilde;es dos pinos em </span><span class="c60 c47 c6 c34 c53">PORTA</span></p><a id="t.9a0d0509587e8d034693ae00225d5f2a25b18f92"></a><a id="t.26"></a><table class="c56"><tbody><tr class="c21"><td class="c65"><p class="c1">Nome</span></p></td><td class="c73"><p class="c1">Fun&ccedil;&atilde;o</span></p></td><td class="c73"><p class="c1">Tipo de entrada</span></p></td><td class="c73"><p class="c1">Tipo de sa&iacute;da</span></p></td><td class="c135"><p class="c1">Descri&ccedil;&atilde;o</span></p></td></tr><tr class="c51"><td class="c65" colspan="1" rowspan="2"><p class="c1">RA0/AN0</span></p></td><td class="c73"><p class="c1">RA0</span></p></td><td class="c73"><p class="c1">ST</span></p></td><td class="c73"><p class="c1">CMOS</span></p></td><td class="c135"><p class="c19">pino I/O bidirecional</span></p></td></tr><tr class="c51"><td class="c73"><p class="c1">AN0</span></p></td><td class="c73"><p class="c1">AN</span></p></td><td class="c73"><p class="c1">&mdash;</span></p></td><td class="c135"><p class="c67">entrada do m&oacute;dulo comparador anal&oacute;gico</span></p></td></tr><tr class="c51"><td class="c65" colspan="1" rowspan="2"><p class="c1">RA1/AN1</span></p></td><td class="c73"><p class="c1">RA1</span></p></td><td class="c73"><p class="c1">ST</span></p></td><td class="c73"><p class="c1">CMOS</span></p></td><td class="c135"><p class="c19">pino I/O bidirecional</span></p></td></tr><tr class="c51"><td class="c73"><p class="c1">AN1</span></p></td><td class="c73"><p class="c1">AN</span></p></td><td class="c73"><p class="c1"><span class="c34">&mdash;</span></p></td><td class="c135"><p class="c67">entrada do m&oacute;dulo comparador anal&oacute;gico</span></p></td></tr><tr class="c51"><td class="c65" colspan="1" rowspan="3"><p class="c1">RA2/AN2/VREF</span></p></td><td class="c73"><p class="c1">RA2</span></p></td><td class="c73"><p class="c1"><span class="c34">ST</span></p></td><td class="c73"><p class="c1"><span class="c34">CMOS</span></p></td><td class="c135"><p class="c19">pino I/O bidirecional</span></p></td></tr><tr class="c51"><td class="c73"><p class="c1">AN2</span></p></td><td class="c73"><p class="c1"><span class="c34">AN</span></p></td><td class="c73"><p class="c1"><span class="c34">&mdash;</span></p></td><td class="c135"><p class="c67">entrada do m&oacute;dulo comparador anal&oacute;gico</span></p></td></tr><tr class="c51"><td class="c73"><p class="c1">VREF</span></p></td><td class="c73"><p class="c1"><span class="c34">&mdash;</span></p></td><td class="c73"><p class="c1"><span class="c34">AN</span></p></td><td class="c135"><p class="c67">sa&iacute;da do m&oacute;dulo de tens&atilde;o de refer&ecirc;ncia</span></p></td></tr><tr class="c51"><td class="c65" colspan="1" rowspan="3"><p class="c1">RA3/AN3/CMP1</span></p></td><td class="c73"><p class="c1">RA3</span></p></td><td class="c73"><p class="c1"><span class="c34">ST</span></p></td><td class="c73"><p class="c1"><span class="c34">CMOS</span></p></td><td class="c135"><p class="c19">pino I/O bidirecional</span></p></td></tr><tr class="c51"><td class="c73"><p class="c1">AN3</span></p></td><td class="c73"><p class="c1"><span class="c34">AN</span></p></td><td class="c73"><p class="c1"><span class="c34">&mdash;</span></p></td><td class="c135"><p class="c67">entrada do m&oacute;dulo comparador anal&oacute;gico</span></p></td></tr><tr class="c51"><td class="c73"><p class="c1">CMP1</span></p></td><td class="c73"><p class="c1"><span class="c34">&mdash;</span></p></td><td class="c73"><p class="c1"><span class="c34">CMOS</span></p></td><td class="c135"><p class="c67">sa&iacute;da do m&oacute;dulo comparador anal&oacute;gico 1</span></p></td></tr><tr class="c51"><td class="c65" colspan="1" rowspan="3"><p class="c1">RA4/T0CKI/CMP2</span></p></td><td class="c73"><p class="c1">RA4</span></p></td><td class="c73"><p class="c1"><span class="c34">ST</span></p></td><td class="c73"><p class="c1">OD</span></p></td><td class="c135"><p class="c19">pino I/O bidirecional</span></p></td></tr><tr class="c51"><td class="c73"><p class="c1">T0CK</span></p></td><td class="c73"><p class="c1"><span class="c34">ST</span></p></td><td class="c73"><p class="c1"><span class="c34">&mdash;</span></p></td><td class="c135"><p class="c19">clock de entrada do Timer0</span></p></td></tr><tr class="c51"><td class="c73"><p class="c1">CMP2</span></p></td><td class="c73"><p class="c1"><span class="c34">&mdash;</span></p></td><td class="c73"><p class="c1">OD</span></p></td><td class="c135"><p class="c67">sa&iacute;da do m&oacute;dulo comparador anal&oacute;gico 2</span></p></td></tr><tr class="c51"><td class="c65" colspan="1" rowspan="3"><p class="c1">RA5/</span><span class="c59 c6">MCLR</span>/VPP</span></p></td><td class="c73"><p class="c1">RA5</span></p></td><td class="c73"><p class="c1"><span class="c34">ST</span></p></td><td class="c73"><p class="c1"><span class="c34">&mdash;</span></p></td><td class="c135"><p class="c19">porta de entrada (unidirecional)</span></p></td></tr><tr class="c51"><td class="c73"><p class="c1"><span class="c59 c6 c50 c53 c44 c255">MCLR</span></p></td><td class="c73"><p class="c1"><span class="c34">ST</span></p></td><td class="c73"><p class="c1"><span class="c34">&mdash;</span></p></td><td class="c135"><p class="c67"><i>Master CLeaR</span>. Quando configurado como MCLR, este pino est&aacute; ativo em n&iacute;vel baixo no </span><i>Reset</span>para o PIC16F628A.</span></p><p class="c67">A tens&atilde;o el&eacute;trica sobre o pino </span><span class="c59 c6">MCLR</span>/VPP n&atilde;o deve exceder o valor VDD durante a opera&ccedil;&atilde;o normal do PIC16F628A</span></p></td></tr><tr class="c51"><td class="c73"><p class="c1">VPP</span></p></td><td class="c73"><p class="c1"><span class="c34">&mdash;</span></p></td><td class="c73"><p class="c1"><span class="c34">&mdash;</span></p></td><td class="c135"><p class="c67">Entrada da tens&atilde;o el&eacute;trica de programa&ccedil;&atilde;o</span></p></td></tr><tr class="c51"><td class="c65" colspan="1" rowspan="3"><p class="c1">RA6/OSC2/CLKOUT</span></p></td><td class="c73"><p class="c1">RA6</span></p></td><td class="c73"><p class="c1"><span class="c34">ST</span></p></td><td class="c73"><p class="c1"><span class="c34">CMOS</span></p></td><td class="c135"><p class="c19">pino I/O bidirecional</span></p></td></tr><tr class="c51"><td class="c73"><p class="c1">OSC2</span></p></td><td class="c73"><p class="c1"><span class="c34">&mdash;</span></p></td><td class="c73"><p class="c1">XTAL</span></p></td><td class="c135"><p class="c67">sa&iacute;da do cristal oscilador. Conex&atilde;o do cristal ou ressonador no &ldquo;modo Oscilador a Cristal&rdquo;</span></p></td></tr><tr class="c51"><td class="c73"><p class="c1">CLKOUT</span></p></td><td class="c73"><p class="c1"><span class="c34">&mdash;</span></p></td><td class="c73"><p class="c1"><span class="c34">CMOS</span></p></td><td class="c135"><p class="c67">No modo RC/INTOSC, o pino OSC2 pode sair com CLKOUT, o qual tem 1/4 da frequ&ecirc;ncia de OSC1</span></p></td></tr><tr class="c51"><td class="c65" colspan="1" rowspan="3"><p class="c1">RA7/OSC1/CLKIN</span></p></td><td class="c73"><p class="c1">RA7</span></p></td><td class="c73"><p class="c1"><span class="c34">ST</span></p></td><td class="c73"><p class="c1"><span class="c34">CMOS</span></p></td><td class="c135"><p class="c19">pino I/O bidirecional</span></p></td></tr><tr class="c51"><td class="c73"><p class="c1">OSC1</span></p></td><td class="c73"><p class="c1"><span class="c34">XTAL</span></p></td><td class="c73"><p class="c1"><span class="c34">&mdash;</span></p></td><td class="c135"><p class="c19">entrada do cristal oscilador</span></p></td></tr><tr class="c51"><td class="c73"><p class="c1">CLKIN</span></p></td><td class="c73"><p class="c1"><span class="c34">ST</span></p></td><td class="c73"><p class="c1"><span class="c34">&mdash;</span></p></td><td class="c135"><p class="c67">entrada da fonte do clock externo. pino de polariza&ccedil;&atilde;o do oscilador RC</span></p></td></tr></tbody></table><p class="c19"><span class="textoVermelho">Fonte: MICROCHIP 2020 (b) pag. 13</span></p><p class="c12"><span class="c34">Tabela 4.5</span>- Fun&ccedil;&otilde;es dos pinos em PORTB</span></p><a id="t.f4357d09069fd3a593b524cb3e46ebefa5209b9d"></a><a id="t.27"></a><table class="c56"><tbody><tr class="c21"><td class="c78"><p class="c1">Nome</span></p></td><td class="c169"><p class="c1">Fun&ccedil;&atilde;o</span></p></td><td class="c132"><p class="c1">Tipo de entrada</span></p></td><td class="c117"><p class="c1">Tipo de sa&iacute;da</span></p></td><td class="c85"><p class="c1">Descri&ccedil;&atilde;o</span></p></td></tr><tr class="c51"><td class="c78" colspan="1" rowspan="2"><p class="c1">RB0/INT</span></p></td><td class="c169"><p class="c1">RB0</span></p></td><td class="c132"><p class="c1">TTL</span></p></td><td class="c117"><p class="c1"><span class="c34">CMOS</span></p></td><td class="c85"><p class="c67">pino I/O bidirecional. Pode ser programado via software para um </span><i>pull-up</span>interno de baixa corrente el&eacute;trica, tipicamente em torno de 200 &mu;A</span></p></td></tr><tr class="c51"><td class="c169"><p class="c1">INT</span></p></td><td class="c132"><p class="c1"><span class="c34">ST</span></p></td><td class="c117"><p class="c1"><span class="c34">&mdash;</span></p></td><td class="c85"><p class="c19">interrup&ccedil;&atilde;o externa</span></p></td></tr><tr class="c51"><td class="c78" colspan="1" rowspan="3"><p class="c1">RB1/RX/DT</span></p></td><td class="c169"><p class="c1">RB1</span></p></td><td class="c132"><p class="c1"><span class="c34">TTL</span></p></td><td class="c117"><p class="c1"><span class="c34">CMOS</span></p></td><td class="c85"><p class="c67">pino I/O bidirecional. Pode ser programado via software para um </span><i>pull-up</span>interno de baixa corrente el&eacute;trica, tipicamente em torno de 200 &mu;A</span></p></td></tr><tr class="c51"><td class="c169"><p class="c1">RX</span></p></td><td class="c132"><p class="c1">ST</span></p></td><td class="c117"><p class="c1"><span class="c34">&mdash;</span></p></td><td class="c85"><p class="c67">pino de recebimento de dados do m&oacute;dulo USART</span></p></td></tr><tr class="c51"><td class="c169"><p class="c1">DT</span></p></td><td class="c132"><p class="c1">ST</span></p></td><td class="c117"><p class="c1"><span class="c34">CMOS</span></p></td><td class="c85"><p class="c19">I/O de dados s&iacute;ncronos</span></p></td></tr><tr class="c51"><td class="c78" colspan="1" rowspan="3"><p class="c1">RB2/TX/CK</span></p></td><td class="c169"><p class="c1">RB2</span></p></td><td class="c132"><p class="c1"><span class="c34">TTL</span></p></td><td class="c117"><p class="c1"><span class="c34">CMOS</span></p></td><td class="c85"><p class="c67">pino I/O bidirecional. Pode ser programado via software para um </span><i>pull-up</span>interno de baixa corrente el&eacute;trica, tipicamente em torno de 200 &mu;A</span></p></td></tr><tr class="c51"><td class="c169"><p class="c1">TX</span></p></td><td class="c132"><p class="c1"><span class="c34">&mdash;</span></p></td><td class="c117"><p class="c1"><span class="c34">CMOS</span></p></td><td class="c85"><p class="c67">pino de transmiss&atilde;o de dados do m&oacute;dulo USART</span></p></td></tr><tr class="c51"><td class="c169"><p class="c1">CK</span></p></td><td class="c132"><p class="c1"><span class="c34">ST</span></p></td><td class="c117"><p class="c1"><span class="c34">CMOS</span></p></td><td class="c85"><p class="c19">I/O de clock s&iacute;ncrono</span></p></td></tr><tr class="c51"><td class="c78" colspan="1" rowspan="2"><p class="c1">RB3/CCP1</span></p></td><td class="c169"><p class="c1">RB3</span></p></td><td class="c132"><p class="c1"><span class="c34">TTL</span></p></td><td class="c117"><p class="c1"><span class="c34">CMOS</span></p></td><td class="c85"><p class="c67">pino I/O bidirecional. Pode ser programado via software para um </span><i>pull-up</span>interno de baixa corrente el&eacute;trica, tipicamente em torno de 200 &mu;A</span></p></td></tr><tr class="c51"><td class="c169"><p class="c1">CCP1</span></p></td><td class="c132"><p class="c1"><span class="c34">ST</span></p></td><td class="c117"><p class="c1"><span class="c34">CMOS</span></p></td><td class="c85"><p class="c67">pino I/O do m&oacute;dulo CCP (Capture/Compare/PWM)</span></p></td></tr><tr class="c51"><td class="c78" colspan="1" rowspan="2"><p class="c1">RB4/PGM</span></p></td><td class="c169"><p class="c1">RB4</span></p></td><td class="c132"><p class="c1"><span class="c34">TTL</span></p></td><td class="c117"><p class="c1"><span class="c34">CMOS</span></p></td><td class="c85"><p class="c67">pino I/O bidirecional. Pode ser programado via software para um </span><i>pull-up</span>interno de baixa corrente el&eacute;trica, tipicamente em torno de 200 &mu;A</span></p></td></tr><tr class="c51"><td class="c169"><p class="c1">PGM</span></p></td><td class="c132"><p class="c1"><span class="c34">ST</span></p></td><td class="c117"><p class="c1"><span class="c34">&mdash;</span></p></td><td class="c85"><p class="c67">pino de entrada de tens&atilde;o el&eacute;trica baixa de programa&ccedil;&atilde;o. Quando a programa&ccedil;&atilde;o em baixa tens&atilde;o el&eacute;trica est&aacute; ativa, a interrup&ccedil;&atilde;o por mudan&ccedil;a de estados e o </span><i>pull-up</span>de baixa corrente estar&atilde;o desativados</td>
</tr>
<tr class="c21"><td class="c78"><p class="c1">RB5</span></p></td><td class="c169"><p class="c1">RB5</span></p></td><td class="c132"><p class="c1"><span class="c34">ST</span></p></td><td class="c117"><p class="c1"><span class="c34">CMOS</span></p></td><td class="c85"><p class="c67">pino I/O bidirecional. Pode ser programado via software para um </span><i>pull-up</span>interno de baixa corrente el&eacute;trica, tipicamente em torno de 200 &mu;A</span></p></td></tr><tr class="c51"><td class="c78" colspan="1" rowspan="4"><p class="c1">RB6/T1OSO/T1CKI/PGC</span></p></td><td class="c169"><p class="c1">RB6</span></p></td><td class="c132"><p class="c1"><span class="c34">TTL</span></p></td><td class="c117"><p class="c1"><span class="c34">CMOS</span></p></td><td class="c85"><p class="c67">pino I/O bidirecional. Pode ser programado via software para um </span><i>pull-up</span>interno de baixa corrente el&eacute;trica, tipicamente em torno de 200 &mu;A</span></p></td></tr><tr class="c51"><td class="c169"><p class="c1">T1OSO</span></p></td><td class="c132"><p class="c1"><span class="c34">&mdash;</span></p></td><td class="c117"><p class="c1">XTAL</span></p></td><td class="c85"><p class="c19">sa&iacute;da do oscilador do Timer1</span></p></td></tr><tr class="c51"><td class="c169"><p class="c1">T1CKI</span></p></td><td class="c132"><p class="c1"><span class="c34">ST</span></p></td><td class="c117"><p class="c1"><span class="c34">&mdash;</span></p></td><td class="c85"><p class="c19">entrada do </span><i>clock</span>do Timer1</span></p></td></tr><tr class="c51"><td class="c169"><p class="c1">PGC</span></p></td><td class="c132"><p class="c1"><span class="c34">ST</span></p></td><td class="c117"><p class="c1"><span class="c34">&mdash;</span></p></td><td class="c85"><p class="c67"><i>clock</span>de programa&ccedil;&atilde;o do modo ICSP&trade; (</span><i>In-Circuit Serial Programming</span>&trade;). Para saber mais acesse </span><span class="linkDoc1"><a href="https://www.google.com/url?q=http://ww1.microchip.com/downloads/en/devicedoc/30277d.pdf&amp;sa=D&amp;source=editors&amp;ust=1619797899157000&amp;usg=AOvVaw2tAGDqOjdTjpmJL5pr8CyV">http://ww1.microchip.com/downloads/en/devicedoc/30277d.pdf</a></td>
</tr>
<tr class="c21"><td class="c78"><p class="c1">RB7/T1OSI/PGD</span></p></td><td class="c169"><p class="c1">RB7</span></p></td><td class="c132"><p class="c1"><span class="c34">TTL</span></p></td><td class="c117"><p class="c1"><span class="c34">CMOS</span></p></td><td class="c85"><p class="c67">pino I/O bidirecional. Pode ser programado via software para um </span><i>pull-up</span>interno de baixa corrente el&eacute;trica, tipicamente em torno de 200 &mu;A</td>
</tr>
<tr class="c21"><td class="c78"><p class="c1 c14"></p></td><td class="c169"><p class="c1">T1OSI</span></p></td><td class="c132"><p class="c1"><span class="c34">XTAL</span></p></td><td class="c117"><p class="c1"><span class="c34">&mdash;</span></p></td><td class="c85"><p class="c19">entrada do oscilador do Timer1</td>
</tr>
<tr class="c21"><td class="c78"><p class="c1 c14"></p></td><td class="c169"><p class="c1">PGD</span></p></td><td class="c132"><p class="c1"><span class="c34">ST</span></p></td><td class="c117"><p class="c1"><span class="c34">CMOS</span></p></td><td class="c85"><p class="c67">dados I/O de programa&ccedil;&atilde;o do modo ICSP</span></p></td></tr></tbody></table><p class="c19"><span class="textoVermelho">Fonte: MICROCHIP 2020 (b) pag. 13</span></p><hr style="page-break-before:always;display:none;"><h1 class="c75 c35" id="h.twn5m1lnelau"><span class="c28 c87"></span></h1><h1 class="c95 c35" id="h.f1a37k6ele"><span class="c28 c87">Epis&oacute;dio 5: Conhecendo as instru&ccedil;&otilde;es GOTO, MOVLW, MOVWF, MOVF, BCF, BSF, BTFSC e BTFSS para o PIC16F628A. Execu&ccedil;&atilde;o passo a passo do c&oacute;digo</span></h1><p class="c11">O PIC16F628A &eacute; controlado por v&aacute;rios registradores e 35 instru&ccedil;&otilde;es conforme Figura 5.1 e neste epis&oacute;dio vamos abordar as instru&ccedil;&otilde;es </span><span class="c3">GOTO</span>, </span><span class="c3">MOVLW</span>, </span><span class="c3">MOVWF</span>, </span><span class="c3">MOVF</span>, </span><span class="c3">BCF</span>, </span><span class="c3">BSF</span>, </span><span class="c3">BTFSC</span>e </span><span class="c3">BTFSS.</p><p class="c12"><span class="c34">Figura 5.1 -</span>Conjuntos de instru&ccedil;&otilde;es</span></p><a id="t.3c9232b2d5d9ea2a259f8403ad80b64e9db35916"></a><a id="t.28"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c11"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 587.00px; height: 554.00px;"><img alt="" src="images/image34.png" style="width: 587.00px; height: 554.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr></tbody></table><p class="c19"><span class="citacaoFigura">Fonte: MICROCHIP 2020 (b) p&aacute;gina 118</span></p><p class="c11">A primeira instru&ccedil;&atilde;o, que &eacute; muito usada, &eacute; a instru&ccedil;&atilde;o </span><span class="c3">GOTO</span><span class="c47 c6 c34">k</span>, a qual &eacute; respons&aacute;vel por ir (saltar) para um endere&ccedil;o (r&oacute;tulo) </span><span class="c34">k</span>da mem&oacute;ria de programa.</p><p class="c12"><span class="c34">C&oacute;digo 5.1 -</span>Exemplo do usa da instru&ccedil;&atilde;o </span><span class="c3">GOTO</span><span class="c47 c6 c34">k</span></p><a id="t.9ad5599bd9c82170949e1b1c7bf6b0f7eab47605"></a><a id="t.29"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c8">1</span><span class="c42 c8 c76">; INSTRUCAO: GOTO</span></p><p class="c19"><span class="c8">2</span><span class="c42 c8 c76">; VAI PARA UM ENDERECO/ROTULO DE MEMORIA DE PROGRAMA</span></p><p class="c19"><span class="c8">3</span><span class="c47 c34"></span><span class="c47 c34">TESTEBOTAOPRESSIONADO:</span><span class="c8">       </span><span class="c42 c8 c76">; &lt;-----------+</span></p><p class="c19"><span class="c8">4</span><span class="c8">                  </span><span class="c42 c8 c76">;       |</span></p><p class="c19"><span class="c8">5</span><span class="c8">   </span><span class="c9">BTFSS</span><span class="c8"> </span><span class="c47 c34">PORTA</span><span class="c8">, </span><span class="c47 c34">RA0</span><span class="c8">      </span><span class="c42 c8 c76">; &gt;--+--+   |</span></p><p class="c19"><span class="c8">6</span><span class="c8">                  </span><span class="c42 c8 c76">;  | |   |</span></p><p class="c19"><span class="c8">7</span><span class="c8">   </span><span class="c9">GOTO</span><span class="c8">  </span><span class="c47 c34">TESTEBOTAOPRESSIONADO</span><span class="c8"> </span><span class="c42 c8 c76">; &lt;--+ | &gt;--+</span></p><p class="c19"><span class="c8">8</span><span class="c8">                  </span><span class="c42 c8 c76">;    |</span></p><p class="c19"><span class="c8">9</span><span class="c8">   </span><span class="c9">NOP</span><span class="c8">              </span><span class="c42 c8 c76">; &lt;-----+   </span></p><p class="c19 c14"><span class="c2"></span></p></td></tr></tbody></table><p class="c11">No C&oacute;digo 2.1 pode-se ver um exemplo do uso da instru&ccedil;&atilde;o </span><span class="c3">GOTO</span>a qual, nos coment&aacute;rios s&atilde;o feitas as sequ&ecirc;ncias de execu&ccedil;&otilde;es</p><p class="c11">Na linha 5, se o bit <span class="c47 c6 c34">RA0</span>do registrador <span class="c47 c6 c34">PORTA</span>estiver setado (valor 1), salta-se uma instru&ccedil;&atilde;o, isto &eacute;, salta-se a instru&ccedil;&atilde;o </span><span class="c3">GOTO</span>na linha 7, indo para a linha 9 para executar a instru&ccedil;&atilde;o </span><span class="c3">NOP</span>, conforme seta no coment&aacute;rio. Mas se <span class="c47 c6 c34">RA0</span>estiver limpo (valor 0), a pr&oacute;xima instru&ccedil;&atilde;o </span><span class="c3">GOTO</span>da linha 7 &eacute; executada, tamb&eacute;m conforme coment&aacute;rio e fazendo a execu&ccedil;&atilde;o do programa saltar para a linha 3 e executar a pr&oacute;xima instru&ccedil;&atilde;o ap&oacute;s esta linha, sendo ela a instru&ccedil;&atilde;o </span><span class="c3">BTFSS</span>da linha 5</p><p class="c11">A pr&oacute;xima instru&ccedil;&atilde;o &eacute; </span><span class="c3">MOVLW</span><span class="c47 c6 c34">k</span>que &eacute; respons&aacute;vel por mover (atribuir) um literal (valor de 8 bits) <span class="c47 c6 c34">k</span>ao registrador </span><span class="c34">W</span>. Para colocar valores literais em outros registradores, primeiramente deve ser movido (atribu&iacute;do) para o registrador </span><span class="c34">W.</p><p class="c12"><span class="c34">C&oacute;digo 5.2 -</span>Exemplo do usa da instru&ccedil;&atilde;o </span><span class="c3">MOVLW</span><span class="c47 c6 c34">k</span></p><a id="t.f098fe4295f298caa3e20dbd5c7942786c99e475"></a><a id="t.30"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c8"></span><span class="c8">1 </span><span class="c42 c8 c76">; INSTRUCAO: MOVLW</span></p><p class="c19"><span class="c8">2 </span><span class="c42 c8 c76">; MOVE (COLOCA) O LITERAL (NUMERO) NO REGISTRADOR W</span></p><p class="c19"><span class="c8">3 </span><span class="c42 c8 c76">; OU MELHOR DIZENDO</span></p><p class="c19"><span class="c8"></span><span class="c8">4 </span><span class="c42 c8 c76">; ARMAZENA O LITERAL (NUMERO) NO REGISTRADOR W</span></p><p class="c19"><span class="c8"></span><span class="c8">5 </span><span class="c9">MOVLW</span><span class="c8"> </span><span class="c8 c54">B&#39;00001011&#39;</span><span class="c8"></span><span class="c8 c76">; ARMAZENA O LITERAL 13 (1011) NO REGISTRADOR W</span></p><p class="c19"><span class="c8"></span><span class="c8">6 </span><span class="c9">MOVLW</span><span class="c8"> </span><span class="c8 c54">O&#39;14&#39;    </span><span class="c8 c76">; SOBRESCREVE O VALOR 11 PELO VALOR 12 NO REG. W</span></p><p class="c19"><span class="c8">7 </span><span class="c9">MOVLW</span><span class="c8"> </span><span class="c8 c54">D&#39;10&#39;    </span><span class="c42 c8 c76">; SOBRESCREVE O VALOR 12 PELO VALOR 10 NO REG. W</span></p><p class="c19"><span class="c8">8 </span><span class="c9">MOVLW</span><span class="c8"> </span><span class="c8 c54">.10</span><span class="c8">    </span><span class="c42 c8 c76">; SOBRESCREVE O VALOR 10 PELO VALOR 10 NO REG. W</span></p><p class="c19"><span class="c8">9 </span><span class="c9">MOVLW</span><span class="c8"> </span><span class="c8 c54">H&#39;0B&#39;    </span><span class="c42 c8 c76">; SOBRESCREVE O VALOR 10 PELO VALOR 11 NO REG. W</span></p><p class="c19"><span class="c8">10 </span><span class="c9">MOVLW</span><span class="c8"> </span><span class="c8 c54">0x0B    </span><span class="c8 c76">; SOBRESCREVE O VALOR 11 PELO VALOR 11 NO REG. W</span></p><p class="c19"><span class="c8">11 </span><span class="c9">MOVLW</span><span class="c8"> </span><span class="c8 c54">A&#39;%&#39;    </span><span class="c42 c8 c76">; SOBRESCREVE O VALOR 12 PELO CARACTER % NO REG. W</span></p><p class="c19"><span class="c8">12          </span><span class="c42 c8 c76">; O CARACTER EH SUBSTITUIDO PELO BYTE DA TAB. ASCII</span></p><p class="c19"><span class="c8">13 </span><span class="c9">MOVLW</span><span class="c8"> </span><span class="c8 c54">&#39;#&#39;     </span><span class="c42 c8 c76">; SOBRESCREVE CARACTER % POR CARACTER # NO REG. W</span></p><p class="c19 c14"><span class="c2"></span></p></td></tr></tbody></table><p class="c11">Na linha 5 do C&oacute;digo 5.2, o literal </span><span class="c8 c6 c54">B&#39;00001011&#39;</span>em bin&aacute;rio &eacute; armazenado no registrador </span><span class="c34">W</span>. J&aacute; na linha 6, foi armazenado o literal </span><span class="c8 c6 c54">O&#39;14&#39;</span>em octal no registrador </span><span class="c34">W</span>. Nas linhas 7 e 8 tem-se o armazenamento dos n&uacute;meros 10 escritos em decimal (</span><span class="c8 c6 c54">D&#39;10&#39;</span><span class="definesASM1">e </span><span class="c8 c6 c54">.10</span>). Nas linhas 9 e 10 tem-se o armazenamento dos n&uacute;meros 11 escritos em hexadecimal (</span><span class="c8 c6 c54">H&#39;0B&#39;</span>e </span><span class="c8 c6 c54">0x0B</span>) e por &uacute;ltimo nas linhas 11 e 13 tem-se o armazenamento dos caracteres &ldquo;%&rdquo; e &ldquo;#&rdquo; (</span><span class="definesASM1">A&#39;%&#39;</span>e <span class="definesASM1">&#39;#&#39;</span>) no registrador </span><span class="c34">W</span>. Nas linhas 11 e 13 do C&oacute;digo 5.2, os caracteres armazenados, sendo eles:</span></p><ul class="c80 lst-kix_g8f3ax9g05y6-0 start"><li class="c31"><span class="c8 c6 c54">%</span>pode ser representado pelos n&uacute;meros </span><span class="c8 c6 c54">B&#39;00100101&#39;</span>, </span><span class="c8 c6 c54">O&#39;45&#39;</span>, </span><span class="c8 c6 c54">D&#39;37&#39;</span>ou </span><span class="c8 c6 c54">H&#39;25&#39;</span>;</span></li><li class="c31"><span class="c8 c6 c54">#</span>pode ser representado pelos n&uacute;meros </span><span class="c8 c6 c54">B&#39;00100011&#39;</span>, </span><span class="c8 c6 c54">O&#39;43&#39;</span>, </span><span class="c8 c6 c54">D&#39;35&#39;</span>ou </span><span class="c8 c6 c54">H&#39;23&#39;.</span></li></ul><p class="c11">s&atilde;o baseados na tabela ASCII que pode ser vista em </span><span class="linkDoc1"><a href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/ASCII&amp;sa=D&amp;source=editors&amp;ust=1619797899171000&amp;usg=AOvVaw257-4F5romGDTCz7aZNE6r">https://en.wikipedia.org/wiki/ASCII</a></p><p class="c11">A pr&oacute;xima &eacute; a instru&ccedil;&atilde;o </span><span class="c3">MOVWF</span><span class="c47 c6 c34">f</span>que &eacute; respons&aacute;vel por mover (copiar) o literal (valor de 8 bits) que est&aacute; no registrador </span><span class="c34">W</span>para o registrador de endere&ccedil;o <span class="c47 c6 c34">f.</p><p class="c12"><span class="c34">C&oacute;digo 5.3 -</span>Exemplo do usa da instru&ccedil;&atilde;o </span><span class="c3">MOVWF</span><span class="c47 c6 c34">f</span></p><a id="t.b5ccd0369fa1b5ea02a703de37a2d1124b9c8613"></a><a id="t.31"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c8">1 </span><span class="c42 c8 c76">; INSTRUCAO: MOVWF</span></p><p class="c19"><span class="c8">2 </span><span class="c42 c8 c76">; MOVE O CONTEUDO DE W P/ O REGISTRADOR DE ENDERECO 0x0C</span></p><p class="c19"><span class="c8">3 </span><span class="c9">MOVWF</span><span class="c8"> </span><span class="c42 c8 c54">0x0C</span></p><p class="c19 c14"><span class="c2"></span></p></td></tr></tbody></table><p class="c11">Na linha 3 do C&oacute;digo 5.3, o conte&uacute;do do registrador </span><span class="c34">W</span> foi movido (copiado) para o registrador de endere&ccedil;o <span class="definesASM1">0x0C</span>(endere&ccedil;o contido no intervalo de registradores de uso geral do microcontrolador PIC16F628A) conforme visto anteriormente</p><p class="c11">A instru&ccedil;&atilde;o </span><span class="c3">MOVF</span><span class="c47 c6 c34">f,d</span>&eacute; respons&aacute;vel por mover (copiar) o literal (valor de 8 bits) que est&aacute; no registrador de endere&ccedil;o <span class="c47 c6 c34">f</span>para o registrador </span><span class="c34">W</span>(se <span class="c47 c6 c34">d</span>=0) ou para o registrador de endere&ccedil;o <span class="c47 c6 c34">f</span>(se <span class="c47 c6 c34">d</span>=1).</p><p class="c12"><span class="c34">C&oacute;digo 5.4 -</span>Exemplo do usa da instru&ccedil;&atilde;o </span><span class="c3">MOVF</span><span class="c47 c6 c34">f,d</span></p><a id="t.4feddf12a8a3da6a3af8dcfa2d2ce58d22568cb9"></a><a id="t.32"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c8">1 </span><span class="c42 c8 c76">; INSTRUCAO: MOVF</span></p><p class="c19"><span class="c8">2 </span><span class="c42 c8 c76">; MOVE O CONTEUDO DO REGISTRADOR STATUS PARA W</span></p><p class="c19"><span class="c8">3 </span><span class="c9">MOVF</span><span class="c8"> </span><span class="c47 c34">STATUS</span><span class="c8">, </span><span class="c42 c8 c54">0</span></p><p class="c19 c14"><span class="c2"></span></p></td></tr></tbody></table><p class="c11">Na linha 3 do C&oacute;digo 5.4 tem-se a instru&ccedil;&atilde;o que est&aacute; sendo usada para fazer c&oacute;pia de valor contido no registrador <span class="c47 c6 c34">STATUS</span>, para o registrador </span><span class="c34">W</span>. Esta instru&ccedil;&atilde;o &eacute; a &ldquo;parceira da instru&ccedil;&atilde;o </span><span class="c3">MOVWF</p><p class="c11">A instru&ccedil;&atilde;o </span><span class="c3">BCF</span><span class="c47 c6 c34">f,b</span>&eacute; respons&aacute;vel por resetar (limpar) o </span><i>bit</span></span><span class="c47 c6 c34">b</span>do registrador de endere&ccedil;o (r&oacute;tulo) <span class="c47 c6 c34">f</span>, isto &eacute;, colocar o valor 0 no </span><i>bit</span></span><span class="c47 c6 c34">b</span>. Na linha 5 do C&oacute;digo 5.5, pode-se ver a aplica&ccedil;&atilde;o dessa instru&ccedil;&atilde;o ao limpar o sexto </span><i>bit</span>do registrador de endere&ccedil;o <span class="definesASM1">0x0C</span>. Essa instru&ccedil;&atilde;o ser&aacute; muito &uacute;til ao trabalhar com estados de portas, como tamb&eacute;m estados de interrup&ccedil;&otilde;es, e configura&ccedil;&otilde;es do microcontrolador, entre outros</p><p class="c11">A instru&ccedil;&atilde;o </span><span class="c3">BSF</span><span class="c47 c6 c34">f,b</span>&eacute; respons&aacute;vel por setar o </span><i>bit</span></span><span class="c47 c6 c34">b</span>do registrador de endere&ccedil;o (r&oacute;tulo) <span class="c47 c6 c34">f</span>, isto &eacute;, colocar o valor 1 no </span><i>bit</span></span><span class="c6 c34 c37">b</span>. Esta instru&ccedil;&atilde;o &eacute; semelhante &agrave; instru&ccedil;&atilde;o </span><span class="c3">BCF</span>, sendo que esta limpa enquanto que a instru&ccedil;&atilde;o </span><span class="c3">BCF</span>reseta (coloca o valor igual a 1 no estado do </span><i>bit</span>) e isso pode ser visto nos</span>C&oacute;digo 5.5 e C&oacute;digo 5.6 no qual exibem exemplos de usos.</p><p class="c12"><span class="c34">C&oacute;digo 5.5 -</span>Exemplo do usa da instru&ccedil;&atilde;o </span><span class="c3">BCF</span><span class="c47 c6 c34">f,b</span></p><a id="t.14447b2077508c20c6c16bfd209b755543347ff0"></a><a id="t.33"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c8">1 </span><span class="c42 c8 c76">; INSTRUCAO: BCF</span></p><p class="c19"><span class="c8">2 </span><span class="c42 c8 c76">; LIMPA O BIT b DO REGISTRADOR f</span></p><p class="c19"><span class="c8">3 </span><span class="c9">MOVLW</span><span class="c8"> </span><span class="c42 c8 c54">.197</span></p><p class="c19"><span class="c8">4 </span><span class="c9">MOVWF</span><span class="c8"> </span><span class="c42 c8 c54">0x0C</span></p><p class="c19"><span class="c8">5 </span><span class="c9">BCF</span><span class="c8">  </span><span class="c8 c54">0x0C</span><span class="c8">, </span><span class="c8 c54">6</span><span class="c8"> </span><span class="c42 c8 c76">; LIMPA O SEXTO BIT DO REGISTRADOR DE ENDERECO 0x0C</span></p><p class="c19 c14"><span class="c2"></span></p></td></tr></tbody></table><p class="c12"><span class="c34">C&oacute;digo 5.6 -</span>Exemplo do usa da instru&ccedil;&atilde;o </span><span class="c3">BSF</span><span class="c47 c6 c34">f,b</span></p><a id="t.76dab7cadfc4885655e071aa602b3b4e1db34ee3"></a><a id="t.34"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c8">1 </span><span class="c42 c8 c76">; INSTRUCAO: BSF</span></p><p class="c19"><span class="c8">2 </span><span class="c42 c8 c76">; SETA O BIT b DO REGISTRADOR f</span></p><p class="c19"><span class="c8">3 </span><span class="c9">MOVLW</span><span class="c8"> </span><span class="c42 c8 c54">.197</span></p><p class="c19"><span class="c8">4 </span><span class="c9">MOVWF</span><span class="c8"> </span><span class="c42 c8 c54">0x0C</span></p><p class="c19"><span class="c8">5 </span><span class="c9">BSF</span><span class="c8">  </span><span class="c8 c54">0x0C</span><span class="c8">, </span><span class="c8 c54">4</span><span class="c8"> </span><span class="c42 c8 c76">; SETA O QUARTO BIT DO REGISTRADOR DE ENDERECO 0x0C</span></p><p class="c19 c14"><span class="c2"></span></p></td></tr></tbody></table><p class="c11">Tanto a instru&ccedil;&atilde;o </span><span class="c3">BCF</span>quanto a instru&ccedil;&atilde;o </span><span class="c3">BSF</span>modificam </span><i>bits</span>de registrador</span>, o C&oacute;digo 5.5 gera como resultado o valor exibido na Tabela 5.2, enquanto que o C&oacute;digo 5.6 gera como resultado o valor exibido na Tabela 5.3.</p><p class="c12"><span class="c34">Tabela 5.1 -</span>Representa&ccedil;&atilde;o do n&uacute;mero 197 em d&iacute;gitos bin&aacute;rios</span></p><a id="t.e74c943d0b64a2088f36ddc152bbfd413fe92003"></a><a id="t.35"></a><table class="c56"><tbody><tr class="c51"><td class="c247" colspan="8" rowspan="1"><p class="c1">Bin&aacute;rio</span></p></td><td class="c70"><p class="c1">Decimal</span></p></td></tr><tr class="c51"><td class="c74"><p class="c1">Bit 7</span></p></td><td class="c74"><p class="c1">Bit 6</span></p></td><td class="c74"><p class="c1">Bit 5</span></p></td><td class="c74"><p class="c1">Bit 4</span></p></td><td class="c74"><p class="c1">Bit 3</span></p></td><td class="c74"><p class="c1">Bit 2</span></p></td><td class="c74"><p class="c1">Bit 1</span></p></td><td class="c74"><p class="c1">Bit 0</span></p></td><td class="c70" colspan="1" rowspan="2"><p class="c1 c14"></span></p><p class="c1">197</span></p></td></tr><tr class="c51"><td class="c74"><p class="c1"><span class="c60 c8 c6 c53">1</span></p></td><td class="c74"><p class="c1"><span class="c60 c8 c6 c53">1</span></p></td><td class="c74"><p class="c1"><span class="c60 c8 c6 c53">0</span></p></td><td class="c74"><p class="c1"><span class="c60 c8 c6 c53">0</span></p></td><td class="c74"><p class="c1"><span class="c60 c8 c6 c53">0</span></p></td><td class="c74"><p class="c1"><span class="c60 c8 c6 c53">1</span></p></td><td class="c74"><p class="c1"><span class="c60 c8 c6 c53">0</span></p></td><td class="c74"><p class="c1"><span class="c60 c8 c6 c53">1</span></p></td></tr></tbody></table><p class="c12"><span class="c34">Tabela 5.2 -</span>Representa&ccedil;&atilde;o do resultado da execu&ccedil;&atilde;o do C&oacute;digo 5.5</span></p><a id="t.460d3a3fb31d378e6cd1a83e363e4d1e1fe253fe"></a><a id="t.36"></a><table class="c56"><tbody><tr class="c51"><td class="c250" colspan="8" rowspan="1"><p class="c1">Bin&aacute;rio</span></p></td><td class="c223"><p class="c1">Decimal</span></p></td></tr><tr class="c51"><td class="c99"><p class="c1">Bit 7</span></p></td><td class="c99"><p class="c1">Bit 6</span></p></td><td class="c99"><p class="c1">Bit 5</span></p></td><td class="c99"><p class="c1">Bit 4</span></p></td><td class="c99"><p class="c1">Bit 3</span></p></td><td class="c99"><p class="c1">Bit 2</span></p></td><td class="c99"><p class="c1">Bit 1</span></p></td><td class="c99"><p class="c1">Bit 0</span></p></td><td class="c223" colspan="1" rowspan="2"><p class="c1 c14"></span></p><p class="c1">133</span></p></td></tr><tr class="c51"><td class="c99"><p class="c1"><span class="c60 c8 c6 c53">1</span></p></td><td class="c99 c197"><p class="c1"><span class="c60 c8 c6 c53">0</span></p></td><td class="c99"><p class="c1"><span class="c60 c8 c6 c53">0</span></p></td><td class="c99"><p class="c1"><span class="c60 c8 c6 c53">0</span></p></td><td class="c99"><p class="c1"><span class="c60 c8 c6 c53">0</span></p></td><td class="c99"><p class="c1"><span class="c60 c8 c6 c53">1</span></p></td><td class="c99"><p class="c1"><span class="c60 c8 c6 c53">0</span></p></td><td class="c99"><p class="c1"><span class="c60 c8 c6 c53">1</span></p></td></tr></tbody></table><p class="c12"><span class="c34">Tabela 5.3 -</span>Representa&ccedil;&atilde;o do resultado da execu&ccedil;&atilde;o do C&oacute;digo 5.6</span></p><a id="t.b0483c2cb8d7cba98bb8c2f83ef3fc1844b3c0de"></a><a id="t.37"></a><table class="c56"><tbody><tr class="c51"><td class="c96" colspan="8" rowspan="1"><p class="c1">Bin&aacute;rio</span></p></td><td class="c108"><p class="c1">Decimal</span></p></td></tr><tr class="c51"><td class="c55"><p class="c1">Bit 7</span></p></td><td class="c55"><p class="c1">Bit 6</span></p></td><td class="c55"><p class="c1">Bit 5</span></p></td><td class="c55"><p class="c1">Bit 4</span></p></td><td class="c55"><p class="c1">Bit 3</span></p></td><td class="c55"><p class="c1">Bit 2</span></p></td><td class="c55"><p class="c1">Bit 1</span></p></td><td class="c55"><p class="c1">Bit 0</span></p></td><td class="c233" colspan="1" rowspan="2"><p class="c1">213</span></p></td></tr><tr class="c51"><td class="c55"><p class="c1"><span class="c60 c8 c6 c53">1</span></p></td><td class="c55"><p class="c1"><span class="c60 c8 c6 c53">1</span></p></td><td class="c55"><p class="c1"><span class="c60 c8 c6 c53">0</span></p></td><td class="c55 c197"><p class="c1"><span class="c60 c8 c6 c53">1</span></p></td><td class="c55"><p class="c1"><span class="c60 c8 c6 c53">0</span></p></td><td class="c55"><p class="c1"><span class="c60 c8 c6 c53">1</span></p></td><td class="c55"><p class="c1"><span class="c60 c8 c6 c53">0</span></p></td><td class="c55"><p class="c1"><span class="c60 c8 c6 c53">1</span></p></td></tr></tbody></table><p class="c11">Outra instru&ccedil;&atilde;o importante &eacute; a instru&ccedil;&atilde;o </span><span class="c3">BTFSC</span><span class="c47 c6 c34">f,b</span>que &eacute; respons&aacute;vel por testar/verificar se o </span><i>bit</span></span><span class="c47 c6 c34">b</span>do registrador de r&oacute;tulo/endere&ccedil;o <span class="c47 c6 c34">f</span>est&aacute; limpo (clear). Se estiver limpo (valor igual a 0) a pr&oacute;xima instru&ccedil;&atilde;o &eacute; ignorada e o fluxo do programa segue normalmente. Se estiver setado (valor igual a 1), executa a pr&oacute;xima instru&ccedil;&atilde;o e segue o fluxo do programa normalmente.</p><p class="c12"><span class="c34">C&oacute;digo 5.7 -</span>Exemplo do usa da instru&ccedil;&atilde;o </span><span class="c3">BTFSC</span><span class="c47 c6 c34">f,b</span></p><a id="t.03f8f86f3f98b51294af64db960d6d62f61a3d02"></a><a id="t.38"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c8"></span><span class="c8">1 </span><span class="c42 c8 c76">; INSTRUCAO: BTFSC</span></p><p class="c19"><span class="c8">2 </span><span class="c42 c8 c76">; TESTA SE O BIT b DO REGISTRADOR f ESTA limpo (valor 0)</span></p><p class="c19"><span class="c8">3 </span><span class="c42 c8 c76">; SE ESTIVER limpo (valor 0) SALTA A PROXIMA INSTRUCAO</span></p><p class="c19"><span class="c8"></span><span class="c8">4 </span><span class="c9">MOVLW</span><span class="c8"> .197   </span><span class="c42 c8 c76">; 197 DECIMAL = 1100.0101 BINARIO</span></p><p class="c19"><span class="c8"></span><span class="c8">5 </span><span class="c9">MOVWF</span><span class="c8"> 0x0C   </span><span class="c42 c8 c76">; </span></p><p class="c19"><span class="c8">6</span><span class="c8">         </span><span class="c8 c76">; </span></p><p class="c19"><span class="c8"></span><span class="c8">7 </span><span class="c9">BTFSC</span><span class="c8"> 0x0C, 5  </span><span class="c42 c8 c76">; BIT NA POSICAO 5 EH ZERO &gt;---+</span></p><p class="c19"><span class="c8">8</span><span class="c8">         </span><span class="c42 c8 c76">;               |</span></p><p class="c19"><span class="c8"></span><span class="c8">9 </span><span class="c9">NOP</span><span class="c8">       </span><span class="c42 c8 c76">;               |</span></p><p class="c19"><span class="c8">10 </span><span class="c8">         </span><span class="c42 c8 c76">;               |</span></p><p class="c19"><span class="c8">11 </span><span class="c9">NOP</span><span class="c8">       </span><span class="c42 c8 c76">; &lt;----------------------------+</span></p><p class="c19 c14"><span class="c2"></span></p></td></tr></tbody></table><p class="c12"><span class="c34">C&oacute;digo 5.8 -</span>Exemplo do usa da instru&ccedil;&atilde;o </span><span class="c3">BTFSC</span><span class="c47 c6 c34">f,b</span></p><a id="t.ae0699ce405c71da1f4ffb6d4cf158659531052b"></a><a id="t.39"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c8">1 </span><span class="c42 c8 c76">; INSTRUCAO: BTFSC</span></p><p class="c19"><span class="c8">2 </span><span class="c42 c8 c76">; TESTA SE O BIT b DO REGISTRADOR f ESTA limpo (valor 0)</span></p><p class="c19"><span class="c8">3 </span><span class="c42 c8 c76">; SE ESTIVER limpo (valor 0) SALTA A PROXIMA INSTRUCAO</span></p><p class="c19"><span class="c8">4 </span><span class="c9">MOVLW</span><span class="c8"> .197   </span><span class="c42 c8 c76">; 197 DECIMAL = 1100.0101 BINARIO</span></p><p class="c19"><span class="c8">5 </span><span class="c9">MOVWF</span><span class="c8"> 0x0C   </span><span class="c42 c8 c76">; </span></p><p class="c19"><span class="c8">6          </span><span class="c42 c8 c76">; </span></p><p class="c19"><span class="c8">7 </span><span class="c9">BTFSC</span><span class="c8"> 0x0C, 2  </span><span class="c42 c8 c76">; BIT NA POSICAO 2 EH UM &gt;----+</span></p><p class="c19"><span class="c8">8          </span><span class="c42 c8 c76">;               |</span></p><p class="c19"><span class="c8">9 </span><span class="c9">NOP</span><span class="c8">       </span><span class="c42 c8 c76">; &lt;---------------------------+</span></p><p class="c19"><span class="c8">10          </span><span class="c42 c8 c76">; </span></p><p class="c19"><span class="c8">11 </span><span class="c9">NOP</span><span class="c8">       </span><span class="c42 c8 c76">; </span></p><p class="c19 c14"><span class="c2"></span></p></td></tr></tbody></table><p class="c11">No C&oacute;digo 5.7 pode-se ver na linha 7 o uso da instru&ccedil;&atilde;o </span><span class="c9 c6">BTFSC</span>a qual quando executada faz saltar (salta se limpo, isto &eacute;, pois o bit da posi&ccedil;&atilde;o <span class="c47 c6 c34">b</span><span class="definesASM1">=5</span>&eacute; igual a 1)) a instru&ccedil;&atilde;o seguinte contida na linha 9 enquanto que a instru&ccedil;&atilde;o seguinte a linha ignorada &eacute; executada (linha 11)</p><p class="c11">O C&oacute;digo 5.8 mostra o caso quando o bit <span class="c47 c6 c34">b</span>n&atilde;o est&aacute; limpo, no qual n&atilde;o ignora a instru&ccedil;&atilde;o seguinte e segue o fluxo do programa normalmente</p><p class="c11">E por &uacute;ltimo a instru&ccedil;&atilde;o </span><span class="c3">BTFSS</span><span class="c47 c6 c34">f,d</span>que &eacute; respons&aacute;vel por testar se o bit <span class="c47 c6 c34">b</span>do registrador <span class="c47 c6 c34">f</span>est&aacute; setado (valor igual a 1). Se estiver setado (valor igual a 1) salta a pr&oacute;xima instru&ccedil;&atilde;o, ignorando-a e seguindo o fluxo do programa. Se estiver limpo (valor igual a 0), executa a pr&oacute;xima instru&ccedil;&atilde;o e segue o fluxo normal do programa</p><p class="c11">Na linha 7 do C&oacute;digo 5.9, o comando </span><span class="c3">BTFSS</span>verifica se o sexto bit do n&uacute;mero armazenado no registrador de endere&ccedil;o <span class="definesASM1">0x0C</span>(registrador de uso geral) est&aacute; setado, que no caso &eacute; o valor 197</span><span class="c6 c62">10</span>= 1100.0101</span><span class="c6 c62">2</span>, sendo que o sexto bit &eacute; 0. Logo n&atilde;o salta-se a pr&oacute;xima instru&ccedil;&atilde;o contida na linha 9, mas executando-a.</p><p class="c12"><span class="c34">C&oacute;digo 5.9 -</span>Exemplo do usa da instru&ccedil;&atilde;o </span><span class="c3">BTFSS</span><span class="c47 c6 c34">f,d</span></p><a id="t.92e5441c700111fd70078600fdc7eaebdaae30b0"></a><a id="t.40"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c8">1 </span><span class="c42 c8 c76">; INSTRUCAO: BTFSS</span></p><p class="c19"><span class="c8">2 </span><span class="c42 c8 c76">; TESTA SE O BIT b DO REGISTRADOR f ESTA setado (valor 1)</span></p><p class="c19"><span class="c8">3 </span><span class="c42 c8 c76">; SE ESTIVER setado (valor 1) SALTA A PROXIMA INSTRUCAO</span></p><p class="c19"><span class="c8">4 </span><span class="c9">MOVLW</span><span class="c8"> .197   </span><span class="c42 c8 c76">; 197 DECIMAL = 1100.0101 BINARIO</span></p><p class="c19"><span class="c8">5 </span><span class="c9">MOVWF</span><span class="c8"> 0x0C   </span><span class="c42 c8 c76">;</span></p><p class="c19"><span class="c8">6 </span><span class="c8">         </span><span class="c42 c8 c76">;</span></p><p class="c19"><span class="c8">7 </span><span class="c9">BTFSS</span><span class="c8"> 0x0C, 5  </span><span class="c42 c8 c76">; BIT NA POSICAO 5 EH ZERO &gt;--+</span></p><p class="c19"><span class="c8">8 </span><span class="c8">         </span><span class="c42 c8 c76">;               |</span></p><p class="c19"><span class="c8">9 </span><span class="c9">NOP</span><span class="c8">       </span><span class="c42 c8 c76">; &lt;---------------------------+</span></p><p class="c19"><span class="c8">10</span><span class="c8">         </span><span class="c42 c8 c76">;</span></p><p class="c19"><span class="c8">11 </span><span class="c9">NOP</span><span class="c8">       </span><span class="c42 c8 c76">;</span></p><p class="c19 c14"><span class="c2"></span></p></td></tr></tbody></table><p class="c12"><span class="c34">C&oacute;digo 5.10 -</span>Exemplo do usa da instru&ccedil;&atilde;o </span><span class="c3">BTFSS</span><span class="c47 c6 c34">f,d</span></p><a id="t.e4219d881943cd0ba2ba782a51f82f750d7c56a3"></a><a id="t.41"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c8">1 </span><span class="c42 c8 c76">; INSTRUCAO: BTFSC</span></p><p class="c19"><span class="c8">2 </span><span class="c42 c8 c76">; TESTA SE O BIT b DO REGISTRADOR f ESTA setado (valor 1)</span></p><p class="c19"><span class="c8">3 </span><span class="c42 c8 c76">; SE ESTIVER setado (valor 1) SALTA A PROXIMA INSTRUCAO</span></p><p class="c19"><span class="c8">4 </span><span class="c9">MOVLW</span><span class="c8"> .197   </span><span class="c42 c8 c76">; 197 DECIMAL = 1100.0101 BINARIO</span></p><p class="c19"><span class="c8">5 </span><span class="c9">MOVWF</span><span class="c8"> 0x0C   </span><span class="c42 c8 c76">; </span></p><p class="c19"><span class="c8">6 </span><span class="c8">         </span><span class="c42 c8 c76">; </span></p><p class="c19"><span class="c8">7 </span><span class="c9">BTFSS</span><span class="c8"> 0x0C, 2  </span><span class="c42 c8 c76">; BIT NA POSICAO 2 EH UM &gt;----+</span></p><p class="c19"><span class="c8">8 </span><span class="c8">         </span><span class="c42 c8 c76">;               |</span></p><p class="c19"><span class="c8">9 </span><span class="c9">NOP</span><span class="c8">       </span><span class="c42 c8 c76">;               |</span></p><p class="c19"><span class="c8">10 </span><span class="c8">         </span><span class="c42 c8 c76">;               |</span></p><p class="c19"><span class="c8">11 </span><span class="c9">NOP</span><span class="c8">       </span><span class="c42 c8 c76">; &lt;---------------------------+</span></p><p class="c19 c14"><span class="c2"></span></p></td></tr></tbody></table><p class="c11">J&aacute; na linha 7 do C&oacute;digo 5.10, a instru&ccedil;&atilde;o </span><span class="c3">BTFSS</span>verifica se o terceiro bit do n&uacute;mero armazenado no registrador de endere&ccedil;o <span class="definesASM1">0x0C</span>est&aacute; setado, que no caso o valor &eacute; 197</span><span class="c6 c62">10</span>= 1100.0101</span><span class="c6 c62">2</span>, sendo que o terceiro bit &eacute; 1. Logo salta-se a pr&oacute;xima instru&ccedil;&atilde;o contida na linha 9, executando a instru&ccedil;&atilde;o da linha 11 e as instru&ccedil;&otilde;es seguintes</p><p class="c11">Agora vejamos o processo de execu&ccedil;&atilde;o passo a passo (</span><i>debug</span>) de um c&oacute;digo exemplo para testarmos o processo como um todo</p><p class="c11">Primeiramente vejamos o conceito de fluxograma para podermos usar neste exemplo. Assim, conforme </span><span class="linkDoc1"><a href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/Flowchart&amp;sa=D&amp;source=editors&amp;ust=1619797899216000&amp;usg=AOvVaw2W1iyh5xQk8mni2fEG2dit">https://en.wikipedia.org/wiki/Flowchart</a></span>:</span></p><p class="c11 c49">Um fluxograma &eacute; um tipo de diagrama que representa o fluxo de trabalho ou processo. Um fluxograma pode tamb&eacute;m ser definido como um representa&ccedil;&atilde;o diagram&aacute;tica de um algoritmo, uma abordagem passo a passo para resolver uma tarefa</p><p class="c11">Com essa informa&ccedil;&atilde;o, pode-se ver na Tabela 5.1 algumas formas utilizadas em fluxogramas para representa&ccedil;&atilde;o em algoritmos.</p><p class="c12"><span class="c34">Tabela 5.1 -</span>Formas para fluxogramas</span></p><a id="t.72e8583feb1a1230a204b14954cc06373a259678"></a><a id="t.42"></a><table class="c56"><tbody><tr class="c21"><td class="c190"><p class="c1">Forma ANSI/ISO</span></p></td><td class="c244"><p class="c1">Nome</span></p></td><td class="c172"><p class="c1">Descri&ccedil;&atilde;o</td>
</tr>
<tr class="c21"><td class="c121"><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 93.50px; height: 18.70px;"><img alt="" src="images/image33.png" style="width: 93.50px; height: 18.70px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td><td class="c103"><p class="c1">linha de fluxo</span></p></td><td class="c172"><p class="c67">Mostra a ordem de opera&ccedil;&atilde;o do processo. A ponta da seta toca o pr&oacute;ximo processo a ser executado. A forma &eacute; representada por uma seta.</td>
</tr>
<tr class="c21"><td class="c121"><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 93.50px; height: 44.88px;"><img alt="" src="images/image6.png" style="width: 93.50px; height: 44.88px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td><td class="c103"><p class="c1">terminal</span></p></td><td class="c172"><p class="c67">Indica o in&iacute;cio e fim de um programa ou subprocesso. A forma &eacute; representada por um ret&acirc;ngulo de cantos arredondados.</td>
</tr>
<tr class="c21"><td class="c121"><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 93.50px; height: 44.88px;"><img alt="" src="images/image29.png" style="width: 93.50px; height: 44.88px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td><td class="c103"><p class="c1">processo</span></p></td><td class="c172"><p class="c67">Representa um conjunto de opera&ccedil;&otilde;es que trocam valor, forma, ou localiza&ccedil;&atilde;o de dados. A forma &eacute; representada por um ret&acirc;ngulo.</td>
</tr>
<tr class="c21"><td class="c121"><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 93.50px; height: 67.32px;"><img alt="" src="images/image66.png" style="width: 93.50px; height: 67.32px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td><td class="c103"><p class="c1">decis&atilde;o</span></p></td><td class="c172"><p class="c67">Mostra uma opera&ccedil;&atilde;o condicional no qual pode ser um de dois caminhos do programa que pegar&aacute;. A opera&ccedil;&atilde;o &eacute; comumente uma quest&atilde;o com resposta sim/n&atilde;o ou um teste com valor-verdade verdadeiro/falso. A forma &eacute; representada por um losango.</td>
</tr>
<tr class="c21"><td class="c121"><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 93.50px; height: 44.88px;"><img alt="" src="images/image53.png" style="width: 93.50px; height: 44.88px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td><td class="c103"><p class="c1">entrada/sa&iacute;da</span></p></td><td class="c172"><p class="c67">Indica o processo de entrada ou sa&iacute;da de dado, com em entrando dado ou exibindo resultados. A forma &eacute; representada por um paralelogramo.</td>
</tr>
<tr class="c21"><td class="c121"><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 80.00px; height: 80.00px;"><img alt="" src="images/image22.png" style="width: 80.00px; height: 80.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td><td class="c103"><p class="c1">conector</span></p></td><td class="c172"><p class="c67">Conecta duas ou mais linhas de fluxo e sai apenas uma linha de fluxo. A forma &eacute; representada por um pequeno c&iacute;rculo com uma letra internamente.</span></p></td></tr></tbody></table><p class="c19"><span class="textoVermelho">Fonte: https://en.wikipedia.org/wiki/Flowchart</span></p><p class="c11">Vejamos um exemplo no qual vamos executar passo a passo e ver o funcionamento do c&oacute;digo e de algumas instru&ccedil;&otilde;es baseadas no fluxograma da Figura 5.2</p><p class="c11">No fluxograma da Figura 5.2, o bloco condicional &ldquo;BOT&Atilde;O PRESSIONADO?&rdquo;, ao bot&atilde;o est&aacute; associado o pino <span class="c47 c6 c34">RA3</span>, enquanto que o motor, atrav&eacute;s de um rel&eacute;, est&aacute; associado ao pino </span><span class="c34">RB4</span>e para o processo de espera (delay) de 500 milisegundos, iremos fazer uso da implementa&ccedil;&atilde;o contida em </span><span class="linkDoc1"><a href="https://www.google.com/url?q=http://www.piclist.com/techref/piclist/codegen/delay.htm&amp;sa=D&amp;source=editors&amp;ust=1619797899224000&amp;usg=AOvVaw1t_FaWvYLqaDEbkdvXqBUr">http://www.piclist.com/techref/piclist/codegen/delay.htm</a></p><p class="c11">A implementa&ccedil;&atilde;o do fluxograma contida na Figura 5.2 &eacute; dada no C&oacute;digo 5.11.</p><p class="c12"><span class="c34">Figura 5.2 -</span>Fluxograma do Exemplo</span></p><a id="t.3c9232b2d5d9ea2a259f8403ad80b64e9db35916"></a><a id="t.43"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 495.00px; height: 579.00px;"><img alt="" src="images/image69.png" style="width: 495.00px; height: 579.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr></tbody></table><p class="c19"><span class="citacaoFigura">Fonte: Pr&oacute;prio autor (2020)</span></p><p class="c12"><span class="c34">C&oacute;digo 5.11 -</span>Codifica&ccedil;&atilde;o do fluxograma da Figura 5.2</span></p><a id="t.05c25d9c496204b30a2dd885e76df5421b5590ef"></a><a id="t.44"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c19"><span class="c8"> 1  </span><span class="c13 c8">; DESENVOLVIDO POR EVERTON P. CRUZ</span></p><p class="c19"><span class="c8"> 2  </span><span class="c13 c8">; COM O PROPOSITO DE USO BASE PARA OS EPISODIOS</span></p><p class="c19"><span class="c8"> 3  </span><span class="c13 c8">; DA SERIE CONHECENDO O MICROCONTROLADOR PIC16F628A</span></p><p class="c19"><span class="c8"> 4  </span><span class="c8 c20">#INCLUDE</span><span class="c8"></span><span class="c42 c8 c181">&lt;P16F628A.INC&gt;</span></p><p class="c19"><span class="c8"> 5  </span><span class="c8 c20">LIST</span><span class="c8"></span><span class="c8 c18">P</span><span class="c8">=16</span><span class="c42 c8 c18">F628A</span></p><p class="c19"><span class="c8"> 6  </span><span class="c8 c20">__CONFIG</span><span class="c8"></span><span class="c8 c18">_BOREN_ON</span><span class="c8">&amp; </span><span class="c8 c18">_CP_OFF</span><span class="c8">&amp; </span><span class="c8 c18">_PWRTE_ON</span><span class="c8">&amp; </span><span class="c8 c18">_WDT_OFF</span><span class="c8">&amp; </span><span class="c8 c18">_LVP_OFF</span><span class="c8">&amp; </span><span class="c8 c18">_MCLRE_OFF</span><span class="c8">&amp; </span><span class="c42 c8 c18">_INTRC_OSC_NOCLKOUT</span></p><p class="c19"><span class="c2"> 7 </span></p><p class="c19"><span class="c8"> 8 </span><span class="c13 c8">; DEFINICAO DE CONSTANTES E VARIAVEIS</span></p><p class="c19"><span class="c8"> 9 </span><span class="c8 c20">#DEFINE</span><span class="c8"></span><span class="c8 c18">BOTAO</span><span class="c8">  </span><span class="c8">PORTA, </span><span class="c42 c8 c18">RA3</span></p><p class="c19"><span class="c8">10 </span><span class="c8 c20">#DEFINE</span><span class="c8"></span><span class="c8 c18">MOTOR</span><span class="c8">  PORTB, </span><span class="c42 c8 c18">RB4</span></p><p class="c19"><span class="c2">11 </span></p><p class="c19"><span class="c8">12 </span><span class="c13 c8">; http://golovchenko.org/cgi-bin/delay</span></p><p class="c19"><span class="c8">13 </span><span class="c42 c8 c20">CBLOCK</span></p><p class="c19"><span class="c8">14  </span><span class="c42 c8 c18">D1</span></p><p class="c19"><span class="c8">15  </span><span class="c42 c8 c18">D2</span></p><p class="c19"><span class="c8">16  </span><span class="c42 c8 c18">D3</span></p><p class="c19"><span class="c8">17 </span><span class="c42 c8 c20">ENDC</span></p><p class="c19"><span class="c2">18  </span></p><p class="c19"><span class="c8">19 </span><span class="c8 c20">ORG</span><span class="c8">  0x00    </span><span class="c13 c8">; TRATAMENTO DO RESET</span></p><p class="c19"><span class="c8">20 </span><span class="c38 c34">GOTO</span><span class="c8">  </span><span class="c42 c8 c18">SETUP_PROCESSO</span></p><p class="c19"><span class="c2">21</span></p><p class="c19"><span class="c8">22 </span><span class="c8 c20">ORG</span><span class="c8">  0x04    </span><span class="c13 c8">; TRATAMENTO DAS INTERRUPCOES</span></p><p class="c19"><span class="c8">23 </span><span class="c42 c38 c34">RETFIE</span></p><p class="c19"><span class="c2">24  </span></p><p class="c19"><span class="c8"> </span><span class="c47 c34">SETUP_PROCESSO</span><span class="c2">:</span></p><p class="c19"><span class="c8">26 </span><span class="c13 c8">; SELECIONA O BANCO 1 DE MEMORIA</span></p><p class="c19"><span class="c8">27 </span><span class="c38 c34">BCF</span><span class="c8">  </span><span class="c8 c156">STATUS</span><span class="c8">, </span><span class="c42 c8 c18">RP1</span></p><p class="c19"><span class="c8">28 </span><span class="c38 c34">BSF</span><span class="c8">  </span><span class="c8 c156">STATUS</span><span class="c8">, </span><span class="c42 c8 c18">RP0</span></p><p class="c19"><span class="c2">29</span></p><p class="c19"><span class="c8">30 </span><span class="c38 c34">BSF</span><span class="c8"></span><span class="c8 c156">PCON</span><span class="c8">, </span><span class="c8 c18">OSCF</span><span class="c8"></span><span class="c13 c8">; CONF. FREQ&Uuml;&Ecirc;NCIA DO OSCILADOR INTERNO EM 4 MHz</span></p><p class="c19"><span class="c2">31 </span></p><p class="c19"><span class="c8">32 </span><span class="c13 c8">; CONFIGURACOES DO REGISTRADOR OPTION</span></p><p class="c19"><span class="c8">33 </span><span class="c38 c34">MOVLW</span><span class="c8"></span><span class="c38 c34">B</span><span class="c42 c8 c181">&#39;10000000&#39;</span></p><p class="c19"><span class="c8">34 </span><span class="c13 c8">; 1 - NOT_RBPU  -&gt; DESATIVA RESISTORES PULL-UP</span></p><p class="c19"><span class="c8">35 </span><span class="c13 c8">; 0 - INTDEG   -&gt; INT. ATIV. BORDA DE DESCIDA RB0</span></p><p class="c19"><span class="c8">36 </span><span class="c13 c8">; 0 - TOCS    -&gt; O CLOCK DO TIMER 0 EH INTERNO</span></p><p class="c19"><span class="c8">37 </span><span class="c13 c8">; 0 - TOSE    -&gt; BORDA DE SUBIDA NO TIMER 0, RA4</span></p><p class="c19"><span class="c8">38 </span><span class="c13 c8">; 0 - PSA     -&gt; PRESCALER ASSOCIADO AO TIMER 0</span></p><p class="c19"><span class="c8">39 </span><span class="c13 c8">; 0 - PS2,PS1,PS0 -&gt; TIMER 0 COM RAZAO 1:2</span></p><p class="c19"><span class="c8">40 </span><span class="c38 c34">MOVWF</span><span class="c8"> </span><span class="c42 c8 c156">OPTION_REG</span></p><p class="c19"><span class="c2">41  </span></p><p class="c19"><span class="c8">42 </span><span class="c8 c13">; MODIFICA O COMPORTAMENTO DA PORTA</span></p><p class="c19"><span class="c8">43 </span><span class="c38 c34">MOVLW</span><span class="c8"> </span><span class="c38 c34">B</span><span class="c42 c8 c181">&#39;11111111&#39;</span></p><p class="c19"><span class="c8">44 </span><span class="c13 c8">; 1 - PINO RA7 COMO ENTRADA</span></p><p class="c19"><span class="c8">45 </span><span class="c13 c8">; 1 - PINO RA6 COMO ENTRADA</span></p><p class="c19"><span class="c8">46 </span><span class="c13 c8">; 1 - PINO RA5 COMO ENTRADA</span></p><p class="c19"><span class="c8">47 </span><span class="c13 c8">; 1 - PINO RA4 COMO ENTRADA</span></p><p class="c19"><span class="c8">48 </span><span class="c13 c8">; 1 - PINO RA3 COMO ENTRADA</span></p><p class="c19"><span class="c8">49 </span><span class="c13 c8">; 1 - PINO RA2 COMO ENTRADA</span></p><p class="c19"><span class="c8">50 </span><span class="c13 c8">; 1 - PINO RA1 COMO ENTRADA</span></p><p class="c19"><span class="c8">51 </span><span class="c13 c8">; 1 - PINO RA0 COMO ENTRADA</span></p><p class="c19"><span class="c8">52 </span><span class="c38 c34">MOVWF</span><span class="c8"> </span><span class="c8 c156">TRISA</span><span class="c8"></span><span class="c13 c8">; CONFIGURA&Ccedil;&Otilde;ES DO TRISA</span></p><p class="c19"><span class="c2">53  </span></p><p class="c19"><span class="c8">54 </span><span class="c13 c8">; MODIFICA O COMPORTAMENTO DA PORTB</span></p><p class="c19"><span class="c8">55 </span><span class="c38 c34">MOVLW</span><span class="c8"> </span><span class="c38 c34">B</span><span class="c42 c8 c181">&#39;11101111&#39;</span></p><p class="c19"><span class="c8">56 </span><span class="c13 c8">; 1 - PINO RB7 COMO ENTRADA</span></p><p class="c19"><span class="c8">57 </span><span class="c13 c8">; 1 - PINO RB6 COMO ENTRADA</span></p><p class="c19"><span class="c8">58 </span><span class="c13 c8">; 1 - PINO RB5 COMO ENTRADA</span></p><p class="c19"><span class="c8">59 </span><span class="c13 c8">; 1 - PINO RB4 COMO SAIDA</span></p><p class="c19"><span class="c8">60 </span><span class="c13 c8">; 1 - PINO RB3 COMO SAIDA</span></p><p class="c19"><span class="c8">61 </span><span class="c13 c8">; 1 - PINO RB2 COMO ENTRADA</span></p><p class="c19"><span class="c8">62 </span><span class="c13 c8">; 1 - PINO RB1 COMO ENTRADA</span></p><p class="c19"><span class="c8">63 </span><span class="c13 c8">; 1 - PINO RB0 COMO ENTRADA</span></p><p class="c19"><span class="c8">64 </span><span class="c38 c34">MOVWF</span><span class="c8"> </span><span class="c8 c156">TRISB</span><span class="c8"></span><span class="c8 c115">; CONFIGURA&Ccedil;&Otilde;ES DO TRISB</span><span class="c2">  </span></p><p class="c19"><span class="c2">65  </span></p><p class="c19"><span class="c8">66 </span><span class="c13 c8">; SELECIONA O BANCO 0 DE MEMORIA</span></p><p class="c19"><span class="c8">67 </span><span class="c38 c34">BCF</span><span class="c8">  </span><span class="c8 c156">STATUS</span><span class="c8">, </span><span class="c42 c8 c18">RP1</span></p><p class="c19"><span class="c8">68 </span><span class="c38 c34">BCF</span><span class="c8">  </span><span class="c8 c156">STATUS</span><span class="c8">, </span><span class="c8 c18">RP0</span><span class="c2">  </span></p><p class="c19"><span class="c2">69  </span></p><p class="c19"><span class="c8">70 </span><span class="c13 c8">; DEFINE O MODO DE OPERACAO DO COMP. ANALOG. DESLIGADOS</span></p><p class="c19"><span class="c8">71 </span><span class="c38 c34">MOVLW</span><span class="c8"> </span><span class="c38 c34">B</span><span class="c42 c8 c181">&#39;00000111&#39;</span></p><p class="c19"><span class="c8">72 </span><span class="c38 c34">MOVWF</span><span class="c8"> </span><span class="c8 c156">CMCON</span><span class="c2">  </span></p><p class="c19"><span class="c2">73  </span></p><p class="c19"><span class="c8">74 </span><span class="c13 c8">; CONFIGURACOES DE INTERRUPCOES</span></p><p class="c19"><span class="c8">75 </span><span class="c38 c34">MOVLW</span><span class="c8"> </span><span class="c38 c34">B</span><span class="c8 c181">&#39;00000000&#39;</span><span class="c2"> </span></p><p class="c19"><span class="c8">76 </span><span class="c13 c8">; 0 - GIE -&gt; DESATIVA INT./CHAVE GERAL</span></p><p class="c19"><span class="c8">77 </span><span class="c13 c8">; 0 - EEIE -&gt; DESATIVA INT. DA EEPROM</span></p><p class="c19"><span class="c8">78 </span><span class="c13 c8">; 0 - T0IE -&gt; DESATIVA INT. NO TMR0</span></p><p class="c19"><span class="c8">79 </span><span class="c13 c8">; 0 - INTE -&gt; DESATIVA INT. NO RB0/INT</span></p><p class="c19"><span class="c8">80 </span><span class="c13 c8">; 0 - RBIE -&gt; DESATIVA INT. MUDANCA RB&lt;7:4&gt;</span></p><p class="c19"><span class="c8">81 </span><span class="c13 c8">; 0 - T0IF -&gt; FLAG DE TRANSBORDO DO TMR0</span></p><p class="c19"><span class="c8">82 </span><span class="c13 c8">; 0 - INTF -&gt; FLAG DE RESPOSTA INT. RB0/INT</span></p><p class="c19"><span class="c8">83 </span><span class="c13 c8">; 0 - RBIF -&gt; FLAG DE RESPOSTA INT EM RB&lt;7:4&gt;</span></p><p class="c19"><span class="c8">84 </span><span class="c38 c34">MOVWF</span><span class="c8"> </span><span class="c42 c8 c156">INTCON</span></p><p class="c19"><span class="c2">85  </span></p><p class="c19"><span class="c8"> </span><span class="c42 c47 c34 c53">ROTULO_A:</span></p><p class="c19"><span class="c8">87 </span><span class="c38 c34">BTFSS</span><span class="c8"> </span><span class="c8 c18">BOTAO</span><span class="c8">     </span><span class="c13 c8">; BOTAO PRESSIONADO? SE SIM SALTA</span></p><p class="c19"><span class="c8">88 </span><span class="c38 c34">GOTO</span><span class="c8">  </span><span class="c42 c8 c18">ROTULO_C</span></p><p class="c19"><span class="c8">89 </span><span class="c38 c34">BTFSC</span><span class="c8"> </span><span class="c8 c18">MOTOR</span><span class="c8">     </span><span class="c13 c8">; MOTOR LIGADO? SE SIM SALTA</span></p><p class="c19"><span class="c8">90 </span><span class="c38 c34">GOTO</span><span class="c8">  </span><span class="c42 c8 c18">DESLIGA_MOTOR</span></p><p class="c19"><span class="c8">91 </span><span class="c38 c34">GOTO</span><span class="c8">  </span><span class="c42 c8 c18">LIGA_MOTOR</span></p><p class="c19"><span class="c8"> </span><span class="c42 c47 c34 c53">ROTULO_B:</span></p><p class="c19"><span class="c8">93 </span><span class="c38 c34">GOTO</span><span class="c8">  </span><span class="c42 c8 c18">ESPERA_500MS</span></p><p class="c19"><span class="c8">94 </span><span class="c38 c34">GOTO</span><span class="c8">  </span><span class="c42 c8 c18">ROTULO_C</span></p><p class="c19"><span class="c8"> </span><span class="c42 c47 c34 c53">ROTULO_C:</span></p><p class="c19"><span class="c8">96 </span><span class="c38 c34">GOTO</span><span class="c8">  </span><span class="c42 c8 c18">ROTULO_A</span></p><p class="c19"><span class="c2">97</span></p><p class="c19"><span class="c8"> </span><span class="c42 c47 c34 c53">DESLIGA_MOTOR:</span></p><p class="c19"><span class="c8">99 </span><span class="c38 c34">BCF</span><span class="c8">  </span><span class="c42 c8 c18">MOTOR</span></p><p class="c19"><span class="c8">100 </span><span class="c38 c34">GOTO</span><span class="c8">  </span><span class="c42 c8 c18">ROTULO_B</span></p><p class="c19"><span class="c2">101</span></p><p class="c19"><span class="c42 c47 c34 c53"> LIGA_MOTOR:</span></p><p class="c19"><span class="c8">103 </span><span class="c38 c34">BSF</span><span class="c8">  </span><span class="c42 c8 c18">MOTOR</span></p><p class="c19"><span class="c8">104 </span><span class="c38 c34">GOTO</span><span class="c8">  </span><span class="c42 c8 c18">ROTULO_B</span></p><p class="c19"><span class="c2">105</span></p><p class="c19"><span class="c42 c47 c34 c53"> ESPERA_500MS:</span></p><p class="c19"><span class="c8">107 </span><span class="c13 c8">; http://golovchenko.org/cgi-bin/delay</span></p><p class="c19"><span class="c8">108 </span><span class="c13 c8">; Delay = 0.5 seconds</span></p><p class="c19"><span class="c8">109 </span><span class="c13 c8">; Clock frequency = 4 MHz</span></p><p class="c19"><span class="c8">110 </span><span class="c13 c8">; Actual delay = 0.5 seconds = 500000 cycles</span></p><p class="c19"><span class="c8">111 </span><span class="c13 c8">; 499994 cycles</span></p><p class="c19"><span class="c8">112 </span><span class="c38 c34">MOVLW</span><span class="c2"> 0x03</span></p><p class="c19"><span class="c8">113 </span><span class="c38 c34">MOVWF</span><span class="c8"> </span><span class="c42 c8 c18">D1</span></p><p class="c19"><span class="c8">114 </span><span class="c38 c34">MOVLW</span><span class="c2"> 0x18</span></p><p class="c19"><span class="c8">115 </span><span class="c38 c34">MOVWF</span><span class="c8"> </span><span class="c42 c8 c18">D2</span></p><p class="c19"><span class="c8">116 </span><span class="c38 c34">MOVLW</span><span class="c2"> 0x02</span></p><p class="c19"><span class="c8">117 </span><span class="c38 c34">MOVWF</span><span class="c8"> </span><span class="c42 c8 c18">D3</span></p><p class="c19"><span class="c47 c34"> </span><span class="c42 c47 c34 c53">Delay_0:</span></p><p class="c19"><span class="c8">119 </span><span class="c38 c34">DECFSZ</span><span class="c8"> </span><span class="c8 c18">D1</span><span class="c2">, f</span></p><p class="c19"><span class="c8">120 </span><span class="c38 c34">GOTO</span><span class="c2">  $+2</span></p><p class="c19"><span class="c8">121 </span><span class="c38 c34">DECFSZ</span><span class="c8"> </span><span class="c8 c18">D2</span><span class="c2">, f</span></p><p class="c19"><span class="c8">122 </span><span class="c38 c34">GOTO</span><span class="c2">  $+2</span></p><p class="c19"><span class="c8">123 </span><span class="c38 c34">DECFSZ</span><span class="c8"> </span><span class="c8 c18">D3</span><span class="c2">, f</span></p><p class="c19"><span class="c8">124 </span><span class="c38 c34">GOTO</span><span class="c8">  </span><span class="c42 c8 c18">Delay_0</span></p><p class="c19"><span class="c8">125 </span><span class="c13 c8">;6 cycles</span></p><p class="c19"><span class="c8">126 </span><span class="c38 c34">GOTO</span><span class="c2">  $+1</span></p><p class="c19"><span class="c8">127 </span><span class="c38 c34">GOTO</span><span class="c2">  $+1</span></p><p class="c19"><span class="c8">128 </span><span class="c38 c34">GOTO</span><span class="c8">  </span><span class="c42 c8 c18">ROTULO_C</span></p><p class="c19"><span class="c2">129 </span></p><p class="c19"><span class="c8">130 </span><span class="c42 c8 c20">END</span></p><p class="c19 c14"><span class="c2"></span></p></td></tr></tbody></table><p class="c11">Para come&ccedil;armos o processo, reveja o epis&oacute;dio 2 para cria&ccedil;&atilde;o do projeto e tamb&eacute;m do arquivo no qual voc&ecirc; ir&aacute; copiar o C&oacute;digo 5.11 (retirando as numera&ccedil;&otilde;es a esquerda, ou baixando o arquivo em </span><span class="linkDoc1"><a href="https://www.google.com/url?q=https://github.com/KyryIx/programando-com-o-microcontrolador-PIC16F628A/blob/main/C&amp;sa=D&amp;source=editors&amp;ust=1619797899252000&amp;usg=AOvVaw3E1mNBN_cSN98L2EuAim6d">https://github.com/KyryIx/programando-com-o-microcontrolador-PIC16F628A/blob/main/C&oacute;digo 5.11 - Codifica&ccedil;&atilde;o do fluxograma da Figura 5.2.asm</a></span>) para podermos come&ccedil;ar com a compila&ccedil;&atilde;o e tamb&eacute;m a execu&ccedil;&atilde;o passo a passo (</span><i>debug</span>)</p><p class="c11">Para testar se ocorreu tudo corretamente no processo de copiar e colar o C&oacute;digo 5.11, clique no menu </span><i>Production</span>&rarr; </span><i>Build Main Project</span>(pode ser utilizada a tecla <span class="definesASM1">F11</span>)</span>, com isso come&ccedil;ar&aacute; o processo de compila&ccedil;&atilde;o do seu projeto e caso houver algum erro ele exibir&aacute; e o usu&aacute;rio dever&aacute; corrigi-lo, sendo que muitas vezes pode ser copiado o erro e pesquisado no Google uma solu&ccedil;&atilde;o e com o tempo voc&ecirc; ir&aacute; aprendendo a corrigir sozinho</p><p class="c11">Caso o processo de compila&ccedil;&atilde;o seja executado com sucesso, a Figura 5.3 exibe a tela com a mensagem </span><i>BUILD SUCCESSFUL</span>em verde. Caso houvesse algum erro, exibir&aacute; a mensagem BUILD FAILED em vermelho conforme a Figura 5.4.</p><p class="c12"><span class="c34">Figura 5.3 -</span>Tela de resultado de sucesso da compila&ccedil;&atilde;o do C&oacute;digo 5.11</span></p><a id="t.3c9232b2d5d9ea2a259f8403ad80b64e9db35916"></a><a id="t.45"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 590.00px; height: 401.33px;"><img alt="" src="images/image79.png" style="width: 590.00px; height: 401.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr></tbody></table><p class="c19"><span class="textoVermelho">Fonte: Pr&oacute;prio autor (2020)</span></p><p class="c12"><span class="c34">Figura 5.4 -</span>Tela de resultado de falha da compila&ccedil;&atilde;o do C&oacute;digo 5.11</span></p><a id="t.3c9232b2d5d9ea2a259f8403ad80b64e9db35916"></a><a id="t.46"></a><table class="c7"><tbody><tr class="c21"><td class="c68"><p class="c11"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 590.00px; height: 130.67px;"><img alt="" src="images/image76.png" style="width: 590.00px; height: 130.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr></tbody></table><p class="c19"><span class="textoVermelho">Fonte: Pr&oacute;prio autor (2021)</span></p><p class="c11">Com o arquivo do C&oacute;digo 5.11 aberto, clique no n&uacute;mero da linha 20 no qual tem a instru&ccedil;&atilde;o &ldquo;</span><span class="c3">GOTO</span><span class="definesASM1">  </span><span class="c8 c6 c18">SETUP_PROCESSO</span>&rdquo; e clique no menu</span><i>Debug</span>&rarr; </span><i>Toggle Line Breakpoint</span>(pode ser utilizada a sequ&ecirc;ncia <span class="definesASM1">CTRL + F8</span>como tamb&eacute;m um clique com o bot&atilde;o esquerdo sobre o n&uacute;mero da linha), que na sequ&ecirc;ncia aparecer&aacute; um quadrado vermelho sobre o n&uacute;mero da linha, al&eacute;m de esta linha ficar toda vermelha, indicando que quando come&ccedil;ar a execu&ccedil;&atilde;o do c&oacute;digo, ele ir&aacute; parar nesta linha (breakpoint - ponto de parada) e desta forma poderemos executar instru&ccedil;&atilde;o ap&oacute;s instru&ccedil;&atilde;o e ver os resultados gerados por essas instru&ccedil;&otilde;es, este processo pode ser visto na Figura 5.5.</p><p class="c12"><span class="c34">Figura 5.5 -</span>Tela de marca&ccedil;&atilde;o do breakpoint</span></p><a id="t.3c9232b2d5d9ea2a259f8403ad80b64e9db35916"></a><a id="t.47"></a><table class="c212"><tbody><tr class="c21"><td class="c154"><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 311.11px; height: 72.97px;"><img alt="" src="images/image50.png" style="width: 311.11px; height: 72.97px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr></tbody></table><p class="c19">               </span><span class="textoVermelho">Fonte: Pr&oacute;prio autor (2020)</span></p><p class="c11">Como j&aacute; marcamos onde queremos parar, j&aacute; podemos come&ccedil;ar o processo de execu&ccedil;&atilde;o passo a passo, e para isso precisamos acessar o menu </span><i>Debug</span>&rarr; </span><i>Debug Main Project</span>e automaticamente aparece uma seta verde na linha 20 e ela fica selecionada em verde conforme Figura 5.6.</p><p class="c12"><span class="c34">Figura 5.6 -</span>Tela de parada do breakpoint</span></p><a id="t.3c9232b2d5d9ea2a259f8403ad80b64e9db35916"></a><a id="t.48"></a><table class="c212"><tbody><tr class="c21"><td class="c154"><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 332.00px; height: 77.33px;"><img alt="" src="images/image13.png" style="width: 332.00px; height: 77.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr></tbody></table><p class="c19">                 </span><span class="textoVermelho">Fonte: Pr&oacute;prio autor (2020)</span></p><p class="c11">Agora que j&aacute; sabemos como parar a execu&ccedil;&atilde;o de um programa em um local espec&iacute;fico, veremos como executar linha por linha deste c&oacute;digo e para isso vamos fazer uso novamente do menu </span><i>Debug</p><p class="c11">No menu </span><i>Debug</span>come&ccedil;aremos pela op&ccedil;&atilde;o </span><i>Debug</span>&rarr; </span><i>Step Over</span>(ou tecla <span class="definesASM1">F8</span>) o qual a cada clique nessa op&ccedil;&atilde;o &eacute; pulada para a pr&oacute;xima instru&ccedil;&atilde;o (n&atilde;o &eacute; executada linhas, mas sim instru&ccedil;&otilde;es, pois entre duas instru&ccedil;&otilde;es podem ter uma linha em branco que &eacute; ignorada pela op&ccedil;&atilde;o </span><i>Step Over</span>e outras fun&ccedil;&otilde;es, pois linhas em branco n&atilde;o s&atilde;o instru&ccedil;&otilde;es)</p><p class="c11">Ao executar sucessivas vezes a op&ccedil;&atilde;o </span><i>Step Over</span>, o processo cair&aacute; em um loop por causa na op&ccedil;&atilde;o que colocamos de bot&atilde;o pressionado para ligar ou desligar o motor, e para contornar essa a&ccedil;&atilde;o do bot&atilde;o pressionado, precisamos modificar o estado do bit associado ao bot&atilde;o, que no C&oacute;digo 5.11 &eacute; o bit <span class="c47 c6 c34">RA3</span>do registrador <span class="c47 c6 c34">PORTA</span>, n&atilde;o esquecendo que queremos tamb&eacute;m saber o estado do motor, e para isso precisamos ver o estado do bit <span class="c47 c6 c34">RB4</span>do registrador <span class="c47 c6 c34">PORTB</p><p class="c11">Para podermos modificar o bit <span class="c47 c6 c34">RA3</span>como tamb&eacute;m saber o estado do bit RB4, precisamos ter acesso a eles e para isso vamos visualizarmos o estado dos bits dos registradores <span class="c47 c6 c34">PORTA</span>e <span class="c47 c6 c34">PORTB</span>, acessando o menu </span><i>Debug</span>&rarr; </span><i>New Watch&hellip;</span>(ou a sequ&ecirc;ncia de teclas <span class="definesASM1">Ctrl + Shift + F9</span>) e abrir&aacute; uma tela conforme Figura 5.7 o qual inclu&iacute;mos primeiramente o registrador <span class="c47 c6 c34">PORTA</span>e repetimos novamente o mesmo procedimento para incluir o registrador <span class="c47 c6 c34">PORTB.</p><p class="c12"><span class="c34">Figura 5.7 -</span>Tela de inclus&atilde;o de visualiza&ccedil;&atilde;o de registradores</span></p><a id="t.3c9232b2d5d9ea2a259f8403ad80b64e9db35916"></a><a id="t.49"></a><table class="c212"><tbody><tr class="c21"><td class="c154"><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 173.95px; height: 154.96px;"><img alt="" src="images/image31.png" style="width: 173.95px; height: 154.96px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr></tbody></table><p class="c19">                 </span><span class="textoVermelho">Fonte: Pr&oacute;prio autor (2020)</span></p><p class="c11">Com isso temos como resultado a Figura 5.8 e expandindo podem-se ver os bits dos dois registradores conforme Figura 5.9.</p><p class="c12"><span class="c34">Figura 5.8 -</span>Tela de visualiza&ccedil;&atilde;o dos registradores</span></p><a id="t.3c9232b2d5d9ea2a259f8403ad80b64e9db35916"></a><a id="t.50"></a><table class="c7"><tbody><tr class="c21"><td class="c133"><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 511.04px; height: 73.89px;"><img alt="" src="images/image37.png" style="width: 511.04px; height: 73.89px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr></tbody></table><p class="c19">    </span><span class="textoVermelho">Fonte: Pr&oacute;prio autor (2020)</span></p><p class="c12"><span class="c34">Figura 5.9 -</span>Tela de visualiza&ccedil;&atilde;o dos registradores e bits</span></p><a id="t.3c9232b2d5d9ea2a259f8403ad80b64e9db35916"></a><a id="t.51"></a><table class="c7"><tbody><tr class="c21"><td class="c133"><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 525.00px; height: 302.67px;"><img alt="" src="images/image52.png" style="width: 525.00px; height: 302.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr></tbody></table><p class="c19">    </span><span class="textoVermelho">Fonte: Pr&oacute;prio autor (2020)</span></p><p class="c11">Agora, pode-se modificar o valor/estado do bit <span class="c47 c6 c34">RA3</span>dando um duplo clique na linha RA3 no campo &ldquo;value&rdquo; e colocando o valor &ldquo;1&rdquo; para dizer que o bot&atilde;o foi pressionado e com isso o processo segue para ligar o motor, conforme pode-se ver ao executar alguns passos e exibido na Figura 5.10.</p><p class="c12"><span class="c34">Figura 5.10 -</span>Tela de visualiza&ccedil;&atilde;o dos registradores e bits em execu&ccedil;&atilde;o</span></p><a id="t.3c9232b2d5d9ea2a259f8403ad80b64e9db35916"></a><a id="t.52"></a><table class="c7"><tbody><tr class="c21"><td class="c133"><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 525.00px; height: 466.67px;"><img alt="" src="images/image82.png" style="width: 525.00px; height: 466.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr></tbody></table><p class="c19">    </span><span class="textoVermelho">Fonte: Pr&oacute;prio autor (2020)</span></p><p class="c11">E com isso terminamos nosso exemplo e a execu&ccedil;&atilde;o passo a passo. No pr&oacute;ximo </span>Epis&oacute;dio (epis&oacute;dio 6)</span><sup><a href="#cmnt1" id="cmnt_ref1">[a]</a></sup>veremos um exemplo completo, enquanto que no Epis&oacute;dio 7 veremos como fazer a grava&ccedil;&atilde;o do exemplo do epis&oacute;dio 6.</span></p><hr style="page-break-before:always;display:none;"><h1 class="c75 c35" id="h.et6e126gizrj"><span class="c28 c87"></span></h1><h1 class="c95 c35" id="h.6dsmjkq8gxmk"><span class="c28 c87">Epis&oacute;dio 6: Exemplo 1 - Controle de estados dos pinos do PIC16F628A e uso do simulador SimulIDE</span></h1><p class="c11">Neste epis&oacute;dio ser&aacute; abordado o uso de algumas instru&ccedil;&otilde;es vistas nos epis&oacute;dios anteriores, como algumas que veremos neste e nos pr&oacute;ximos epis&oacute;dios, mas que ser&aacute; necess&aacute;rio para apresenta&ccedil;&atilde;o de uma simula&ccedil;&atilde;o usando display de 7 segmentos, muito utilizado ainda hoje em dias, como tamb&eacute;m o uso de bot&otilde;es para o controle deste display de segmento</p><p class="c11">Inicialmente projetamos o circuito conforme Figura 6.1 fazendo uso do SimulIDE (dispon&iacute;vel no endere&ccedil;o </span><span class="linkDoc1"><a href="https://www.google.com/url?q=https://www.simulide.com/p&amp;sa=D&amp;source=editors&amp;ust=1619797899263000&amp;usg=AOvVaw05zN5FxF5H2pqx-Kdv48aK">https://www.simulide.com/</a></span>), no qual necessitamos fazer a adi&ccedil;&atilde;o dos valores em decimal e exibi-los em hexadecimais, isto &eacute;, se voc&ecirc; pressionar o bot&atilde;o &ldquo;add 1&rdquo;, o programa deve adicionar 1 unidade ao valor e atualizar o display de 7 segmentos.</p><p class="c12"><span class="c34">Figura 6.1 -</span>Circuito exemplo no SimulIDE</span></p><a id="t.3c9232b2d5d9ea2a259f8403ad80b64e9db35916"></a><a id="t.53"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c19"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 590.00px; height: 384.00px;"><img alt="" src="images/image45.png" style="width: 590.00px; height: 384.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr></tbody></table><p class="c19"><span class="textoVermelho">Fonte: Pr&oacute;prio autor (2020)</span></p><p class="c11">O fluxograma do processo se encontra na Figura 6.2 e a implementa&ccedil;&atilde;o no C&oacute;digo 6.1.</p><p class="c12"><span class="c34">Figura 6.2 -</span>Fluxograma do circuito exemplo</span><sup><a href="#cmnt2" id="cmnt_ref2">[b]</a></sup></p><a id="t.3c9232b2d5d9ea2a259f8403ad80b64e9db35916"></a><a id="t.54"></a><table class="c7"><tbody><tr class="c21"><td class="c230"><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 506.11px; height: 361.06px;"><img alt="" src="images/image10.png" style="width: 506.11px; height: 361.06px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr></tbody></table><p class="c24">   </span><span class="citacaoFigura">Fonte: Pr&oacute;prio autor (2020)</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12">C&oacute;digo 6.1 - C&oacute;digo exemplo de controle de estados</span></p><a id="t.6a091d2d012d88917f28e0b146fc5fee85f583d7"></a><a id="t.55"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c19"><span class="c8"> </span><span class="c13 c8">; DESENVOLVIDO POR EVERTON P. CRUZ</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; COM O PROPOSITO DE USO BASE PARA OS EPISODIOS</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; DA SERIE CONHECENDO O MICROCONTROLADOR PIC16F628A</span></p><p class="c19"><span class="c8"> </span><span class="c8 c20">#INCLUDE</span><span class="c8"></span><span class="c42 c8 c181">&lt;P16F628A.INC&gt;</span></p><p class="c19"><span class="c8"> </span><span class="c8 c20">LIST</span><span class="c8"></span><span class="c8 c18">P</span><span class="c8">=</span><span class="c42 c8 c18">16F628A</span></p><p class="c19"><span class="c8"> </span><span class="c8 c20">__CONFIG</span><span class="c8"></span><span class="c8 c18">_BOREN_ON</span><span class="c8">&amp; </span><span class="c8 c18">_CP_OFF</span><span class="c8">&amp; </span><span class="c8 c18">_PWRTE_ON</span><span class="c8">&amp; </span><span class="c8 c18">_WDT_OFF</span><span class="c8">&amp; </span><span class="c8 c18">_LVP_OFF</span><span class="c8">&amp; </span><span class="c8 c18">_MCLRE_OFF</span><span class="c8">&amp; </span><span class="c42 c8 c18">_INTRC_OSC_NOCLKOUT</span></p><p class="c19"><span class="c2"> </span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; https://pt.wikipedia.org/wiki/SEGMENTO_De_sete_segmentos</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; https://en.wikipedia.org/wiki/Seven-segment_display</span></p><p class="c19"><span class="c2"> </span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; DEFINICAO DE CONSTANTES E VARIAVEIS</span></p><p class="c19"><span class="c8"> </span><span class="c8 c20">#DEFINE</span><span class="c8"></span><span class="c8 c18">BOTAO_1</span><span class="c8"> PORTA, RA2 </span><span class="c13 c8">; botao com valor 1</span></p><p class="c19"><span class="c8"> </span><span class="c8 c20">#DEFINE</span><span class="c8"></span><span class="c8 c18">BOTAO_2</span><span class="c8"> PORTA, RA3 </span><span class="c13 c8">; botao com valor 2</span></p><p class="c19"><span class="c8"> </span><span class="c8 c20">#DEFINE</span><span class="c8"></span><span class="c8 c18">BOTAO_4</span><span class="c8"> PORTA, RA4 </span><span class="c13 c8">; botao com valor 4</span></p><p class="c19"><span class="c8"> </span><span class="c8 c20">#DEFINE</span><span class="c8"></span><span class="c8 c18">BOTAO_8</span><span class="c8"> PORTA, RA5 </span><span class="c13 c8">; botao com valor 8</span></p><p class="c19"><span class="c2"> </span></p><p class="c19"><span class="c8"> </span><span class="c8 c20">#DEFINE</span><span class="c8"></span><span class="c8 c18">SEGMENTO_A</span><span class="c8">PORTB, RB7 </span><span class="c13 c8">; segmento A</span></p><p class="c19"><span class="c8"> </span><span class="c8 c20">#DEFINE</span><span class="c8"></span><span class="c8 c18">SEGMENTO_B</span><span class="c8">PORTB, RB6 </span><span class="c13 c8">; segmento B</span></p><p class="c19"><span class="c8"> </span><span class="c8 c20">#DEFINE</span><span class="c8"></span><span class="c8 c18">SEGMENTO_C</span><span class="c8">PORTB, RB5 </span><span class="c13 c8">; segmento C</span></p><p class="c19"><span class="c8"> </span><span class="c8 c20">#DEFINE</span><span class="c8"></span><span class="c8 c18">SEGMENTO_D</span><span class="c8">PORTB, RB4 </span><span class="c13 c8">; segmento D</span></p><p class="c19"><span class="c8"> </span><span class="c8 c20">#DEFINE</span><span class="c8"></span><span class="c8 c18">SEGMENTO_E</span><span class="c8">PORTB, RB3 </span><span class="c13 c8">; segmento E</span></p><p class="c19"><span class="c8"> </span><span class="c8 c20">#DEFINE</span><span class="c8"></span><span class="c8 c18">SEGMENTO_F</span><span class="c8">PORTB, RB2 </span><span class="c13 c8">; segmento F</span></p><p class="c19"><span class="c8"> </span><span class="c8 c20">#DEFINE</span><span class="c8"></span><span class="c8 c18">SEGMENTO_G</span><span class="c8">PORTB, RB1 </span><span class="c13 c8">; segmento G</span></p><p class="c19"><span class="c8"> </span><span class="c8 c20">#DEFINE</span><span class="c8"></span><span class="c8 c18">SEGMENTO_P</span><span class="c8">PORTB, RB0 </span><span class="c13 c8">; ponto</span></p><p class="c19"><span class="c2"> </span></p><p class="c19"><span class="c8"> </span><span class="c8 c20">#DEFINE</span><span class="c8"></span><span class="c8 c18">CONTADOR</span><span class="c8"> 0x20    </span><span class="c13 c8">; registrador para armazenar adi&ccedil;&otilde;es</span></p><p class="c19"><span class="c2"> </span></p><p class="c19"><span class="c8"> </span><span class="c8 c20">ORG</span><span class="c8">  0x00    </span><span class="c13 c8">; TRATAMENTO DO RESET</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">GOTO</span><span class="c8">  </span><span class="c42 c8 c18">SETUP_PROCESSO</span></p><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c8"> </span><span class="c8 c20">ORG</span><span class="c8">  0x04    </span><span class="c13 c8">; TRATAMENTO DAS INTERRUPCOES</span></p><p class="c19"><span class="c8"> </span><span class="c42 c38 c34">RETFIE</span></p><p class="c19"><span class="c2">  </span></p><p class="c19"><span class="c2">SETUP_PROCESSO:</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; SELECIONA O BANCO 1 DE MEMORIA</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c2"> STATUS, RP1</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> STATUS, RP0</span></p><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c8">PCON, OSCF </span><span class="c13 c8">; CONF. FREQ&Uuml;&Ecirc;NCIA DO OSCILADOR INTERNO EM 4 MHz</span></p><p class="c19"><span class="c2"> </span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; CONFIGURACOES DO REGISTRADOR OPTION</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">MOVLW</span><span class="c2">B&#39;10000000&#39;</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; 1 - NOT_RBPU  -&gt; DESATIVA RESISTORES PULL-UP</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; 0 - INTDEG   -&gt; INT. ATIV. BORDA DE DESCIDA RB0</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; 0 - TOCS    -&gt; O CLOCK DO TIMER 0 EH INTERNO</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; 0 - TOSE    -&gt; BORDA DE SUBIDA NO TIMER 0, RA4</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; 0 - PSA     -&gt; PRESCALER ASSOCIADO AO TIMER 0</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; 0 - PS2,PS1,PS0 -&gt; TIMER 0 COM RAZAO 1:2</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">MOVWF</span><span class="c2">OPTION_REG</span></p><p class="c19"><span class="c2">  </span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; MODIFICA O COMPORTAMENTO DA PORTA</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">MOVLW</span><span class="c2">B&#39;11111111&#39;</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; 1 - PINO RA7 COMO ENTRADA</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; 1 - PINO RA6 COMO ENTRADA</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; 1 - PINO RA5 COMO ENTRADA</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; 1 - PINO RA4 COMO ENTRADA</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; 1 - PINO RA3 COMO ENTRADA</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; 1 - PINO RA2 COMO ENTRADA</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; 1 - PINO RA1 COMO ENTRADA</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; 1 - PINO RA0 COMO ENTRADA</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">MOVWF</span><span class="c8">TRISA </span><span class="c13 c8">; CONFIGURA&Ccedil;&Otilde;ES DO TRISA</span></p><p class="c19"><span class="c2">  </span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; MODIFICA O COMPORTAMENTO DA PORTB</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">;MOVLW  B&#39;00000000&#39;</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; 1 - PINO RB7 COMO SAIDA</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; 1 - PINO RB6 COMO SAIDA</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; 1 - PINO RB5 COMO SAIDA</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; 1 - PINO RB4 COMO SAIDA</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; 1 - PINO RB3 COMO SAIDA</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; 1 - PINO RB2 COMO SAIDA</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; 1 - PINO RB1 COMO SAIDA</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; 1 - PINO RB0 COMO SAIDA</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">;MOVWF  TRISB ; CONFIGURA&Ccedil;&Otilde;ES DO TRISB</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">CLRF</span><span class="c2"> TRISB</span></p><p class="c19"><span class="c2">  </span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; SELECIONA O BANCO 0 DE MEMORIA</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c2"> STATUS, RP1</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c2"> STATUS, RP0  </span></p><p class="c19"><span class="c2">  </span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; DEFINE O MODO DE OPERACAO DO COMP. ANALOG. DESLIGADOS</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">MOVLW</span><span class="c2">B&#39;00000111&#39;</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">MOVWF</span><span class="c2">CMCON  </span></p><p class="c19"><span class="c2">  </span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; CONFIGURACOES DE INTERRUPCOES</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">;MOVLW  B&#39;00000000&#39; </span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; 0 - GIE -&gt; DESATIVA INT./CHAVE GERAL</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; 0 - EEIE -&gt; DESATIVA INT. DA EEPROM</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; 0 - T0IE -&gt; DESATIVA INT. NO TMR0</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; 0 - INTE -&gt; DESATIVA INT. NO RB0/INT</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; 0 - RBIE -&gt; DESATIVA INT. MUDANCA RB&lt;7:4&gt;</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; 0 - T0IF -&gt; FLAG DE TRANSBORDO DO TMR0</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; 0 - INTF -&gt; FLAG DE RESPOSTA INT. RB0/INT</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; 0 - RBIF -&gt; FLAG DE RESPOSTA INT EM RB&lt;7:4&gt;</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">;MOVWF INTCON</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">CLRF</span><span class="c2"> INTCON</span></p><p class="c19"><span class="c2"> </span></p><p class="c19"><span class="c2">PRINCIPAL:</span></p><p class="c19"><span class="c8"> </span><span class="c42 c38 c34">CLRW</span></p><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c2">SOMA_1:</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BTFSS</span><span class="c2">BOTAO_1</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">GOTO</span><span class="c8"> </span><span class="c42 c8 c18">SOMA_2</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">ADDLW</span><span class="c2">.1</span></p><p class="c19"><span class="c2"> </span></p><p class="c19"><span class="c2">SOMA_2:</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BTFSS</span><span class="c2">BOTAO_2</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">GOTO</span><span class="c8"> </span><span class="c42 c8 c18">SOMA_4</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">ADDLW</span><span class="c2">.2</span></p><p class="c19"><span class="c2">  </span></p><p class="c19"><span class="c2">SOMA_4:</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BTFSS</span><span class="c2">BOTAO_4</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">GOTO</span><span class="c8"> </span><span class="c42 c8 c18">SOMA_8</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">ADDLW</span><span class="c2">.4</span></p><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c2">SOMA_8:</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BTFSS</span><span class="c2">BOTAO_8</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">GOTO</span><span class="c8"> </span><span class="c42 c8 c18">EXIBE_VALOR</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">ADDLW</span><span class="c2">.8</span></p><p class="c19"><span class="c2">  </span></p><p class="c19"><span class="c2">EXIBE_VALOR:</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">MOVWF</span><span class="c2">CONTADOR</span></p><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c2">TESTA_0:</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">XORLW</span><span class="c2">0x00</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BTFSS</span><span class="c2">STATUS, Z</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">GOTO</span><span class="c8"> </span><span class="c42 c8 c18">TESTA_1</span></p><p class="c19"><span class="c2">MOSTRA_0:</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; 0 - segmentos a, b, c, d, e, f</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c8"> </span><span class="c42 c8 c18">SEGMENTO_A</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c8"> </span><span class="c42 c8 c18">SEGMENTO_B</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c8"> </span><span class="c42 c8 c18">SEGMENTO_C</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c8"> </span><span class="c42 c8 c18">SEGMENTO_D</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c8"> </span><span class="c42 c8 c18">SEGMENTO_E</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c8"> </span><span class="c42 c8 c18">SEGMENTO_F</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c8"> </span><span class="c42 c8 c18">SEGMENTO_G</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">GOTO</span><span class="c8"></span><span class="c42 c8 c18">PRINCIPAL</span></p><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c2">TESTA_1:</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">MOVF</span><span class="c2"> CONTADOR, 0</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">XORLW</span><span class="c2">0x01</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BTFSS</span><span class="c2">STATUS, Z</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">GOTO</span><span class="c8"> </span><span class="c42 c8 c18">TESTA_2</span></p><p class="c19"><span class="c2">MOSTRA_1:</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; 1 - b, c</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c8"> </span><span class="c42 c8 c18">SEGMENTO_A</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c8"> </span><span class="c42 c8 c18">SEGMENTO_B</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c8"> </span><span class="c42 c8 c18">SEGMENTO_C</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c8"> </span><span class="c42 c8 c18">SEGMENTO_D</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c8"> </span><span class="c42 c8 c18">SEGMENTO_E</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c8"> </span><span class="c42 c8 c18">SEGMENTO_F</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c8"> </span><span class="c42 c8 c18">SEGMENTO_G</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">GOTO</span><span class="c8"></span><span class="c42 c8 c18">PRINCIPAL</span></p><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c2">TESTA_2:</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">MOVF</span><span class="c2"> CONTADOR, 0</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">XORLW</span><span class="c2">0x02</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BTFSS</span><span class="c2">STATUS, Z</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">GOTO</span><span class="c8"> </span><span class="c42 c8 c18">TESTA_3</span></p><p class="c19"><span class="c2">MOSTRA_2:</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; 2 - a, b, d, e, g</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c8"> </span><span class="c42 c8 c18">SEGMENTO_A</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c8"> </span><span class="c42 c8 c18">SEGMENTO_B</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c8"> </span><span class="c42 c8 c18">SEGMENTO_C</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c8"> </span><span class="c42 c8 c18">SEGMENTO_D</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c8"> </span><span class="c42 c8 c18">SEGMENTO_E</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c8"> </span><span class="c42 c8 c18">SEGMENTO_F</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c8"> </span><span class="c42 c8 c18">SEGMENTO_G</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">GOTO</span><span class="c8"></span><span class="c42 c8 c18">PRINCIPAL</span></p><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c2">TESTA_3:</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">MOVF</span><span class="c2"> CONTADOR, 0</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">XORLW</span><span class="c2">0x03</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BTFSS</span><span class="c2">STATUS, Z</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">GOTO</span><span class="c8"> </span><span class="c42 c8 c18">TESTA_4</span></p><p class="c19"><span class="c2">MOSTRA_3:</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; 3 - a, b, c, d, g</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c8"> </span><span class="c42 c8 c18">SEGMENTO_A</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c8"> </span><span class="c42 c8 c18">SEGMENTO_B</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c8"> </span><span class="c42 c8 c18">SEGMENTO_C</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c8"> </span><span class="c42 c8 c18">SEGMENTO_D</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c8"> </span><span class="c42 c8 c18">SEGMENTO_E</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c8"> </span><span class="c42 c8 c18">SEGMENTO_F</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c8"> </span><span class="c42 c8 c18">SEGMENTO_G</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">GOTO</span><span class="c8"></span><span class="c42 c8 c18">PRINCIPAL</span></p><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c2">TESTA_4:</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">MOVF</span><span class="c2"> CONTADOR, 0</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">XORLW</span><span class="c2">0x04</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BTFSS</span><span class="c2">STATUS, Z</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">GOTO</span><span class="c8"> </span><span class="c42 c8 c18">TESTA_5</span></p><p class="c19"><span class="c2">MOSTRA_4:</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; 4 - b, c, f, g</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c8"> </span><span class="c42 c8 c18">SEGMENTO_A</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c8"> </span><span class="c42 c8 c18">SEGMENTO_B</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c8"> </span><span class="c42 c8 c18">SEGMENTO_C</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c8"> </span><span class="c42 c8 c18">SEGMENTO_D</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c8"> </span><span class="c42 c8 c18">SEGMENTO_E</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_F</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_G</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">GOTO</span><span class="c8"></span><span class="c42 c8 c18">PRINCIPAL</span></p><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c2">TESTA_5:</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">MOVF</span><span class="c2"> CONTADOR, 0</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">XORLW</span><span class="c2">0x05</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BTFSS</span><span class="c2">STATUS, Z</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">GOTO</span><span class="c8"> </span><span class="c42 c8 c18">TESTA_6</span></p><p class="c19"><span class="c2">MOSTRA_5:</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; 5 - a, c, d, f, g</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_A</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c2"> SEGMENTO_B</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_C</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_D</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c2"> SEGMENTO_E</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_F</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_G</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">GOTO</span><span class="c8"></span><span class="c42 c8 c18">PRINCIPAL</span></p><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c2">TESTA_6:</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">MOVF</span><span class="c2"> CONTADOR, 0</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">XORLW</span><span class="c2">0x06</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BTFSS</span><span class="c2">STATUS, Z</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">GOTO</span><span class="c8"> </span><span class="c42 c8 c18">TESTA_7</span></p><p class="c19"><span class="c2">MOSTRA_6:</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; 6 - a, c, d, e, f, g</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_A</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c2"> SEGMENTO_B</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_C</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_D</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_E</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_F</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_G</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">GOTO</span><span class="c8"></span><span class="c42 c8 c18">PRINCIPAL</span></p><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c2">TESTA_7:</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">MOVF</span><span class="c2"> CONTADOR, 0</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">XORLW</span><span class="c2">0x07</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BTFSS</span><span class="c2">STATUS, Z</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">GOTO</span><span class="c8"> </span><span class="c42 c8 c18">TESTA_8</span></p><p class="c19"><span class="c2">MOSTRA_7:</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; 7 - a, b, c</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_A</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_B</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_C</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c2"> SEGMENTO_D</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c2"> SEGMENTO_E</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c2"> SEGMENTO_F</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c2"> SEGMENTO_G</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">GOTO</span><span class="c8"></span><span class="c42 c8 c18">PRINCIPAL</span></p><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c2">TESTA_8:</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">MOVF</span><span class="c2"> CONTADOR, 0</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">XORLW</span><span class="c2">0x08</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BTFSS</span><span class="c2">STATUS, Z</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">GOTO</span><span class="c8"> </span><span class="c42 c8 c18">TESTA_9</span></p><p class="c19"><span class="c2">MOSTRA_8:</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; 8 - a, b, c, d, e, f, g</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_A</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_B</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_C</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_D</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_E</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_F</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_G</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">GOTO</span><span class="c8"></span><span class="c42 c8 c18">PRINCIPAL</span></p><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c2">TESTA_9:</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">MOVF</span><span class="c2"> CONTADOR, 0</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">XORLW</span><span class="c2">0x09</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BTFSS</span><span class="c2">STATUS, Z</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">GOTO</span><span class="c8"> </span><span class="c42 c8 c18">TESTA_A</span></p><p class="c19"><span class="c2">MOSTRA_9:</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; 9 - a, b, c, f, g</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_A</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_B</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_C</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c2"> SEGMENTO_D</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c2"> SEGMENTO_E</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_F</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_G</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">GOTO</span><span class="c8"></span><span class="c42 c8 c18">PRINCIPAL</span></p><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c2">TESTA_A:</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">MOVF</span><span class="c2"> CONTADOR, 0</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">XORLW</span><span class="c2">0x0A</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BTFSS</span><span class="c2">STATUS, Z</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">GOTO</span><span class="c8"> </span><span class="c42 c8 c18">TESTA_B</span></p><p class="c19"><span class="c2">MOSTRA_A:</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; A (mai&uacute;sculo) - a, b, c, e, f, g</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_A</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_B</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_C</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c2"> SEGMENTO_D</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_E</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_F</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_G</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">GOTO</span><span class="c8"></span><span class="c42 c8 c18">PRINCIPAL</span></p><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c2">TESTA_B:</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">MOVF</span><span class="c2"> CONTADOR, 0</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">XORLW</span><span class="c2">0x0B</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BTFSS</span><span class="c2">STATUS, Z</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">GOTO</span><span class="c8"> </span><span class="c42 c8 c18">TESTA_C</span></p><p class="c19"><span class="c2">MOSTRA_B:</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">;B (min&uacute;sculo) - c, d, e, f, g</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c2"> SEGMENTO_A</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c2"> SEGMENTO_B</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_C</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_D</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_E</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_F</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_G</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">GOTO</span><span class="c8"></span><span class="c42 c8 c18">PRINCIPAL</span></p><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c2">TESTA_C:</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">MOVF</span><span class="c2"> CONTADOR, 0</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">XORLW</span><span class="c2">0x0C</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BTFSS</span><span class="c2">STATUS, Z</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">GOTO</span><span class="c8"> </span><span class="c42 c8 c18">TESTA_D</span></p><p class="c19"><span class="c2">MOSTRA_C:</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; C (mai&uacute;sculo) - a, d, e, f</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_A</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c2"> SEGMENTO_B</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c2"> SEGMENTO_C</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_D</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_E</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_F</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c2"> SEGMENTO_G</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">GOTO</span><span class="c8"></span><span class="c42 c8 c18">PRINCIPAL</span></p><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c2">TESTA_D:</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">MOVF</span><span class="c2"> CONTADOR, 0</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">XORLW</span><span class="c2">0x0D</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BTFSS</span><span class="c2">STATUS, Z</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">GOTO</span><span class="c8"> </span><span class="c42 c8 c18">TESTA_E</span></p><p class="c19"><span class="c2">MOSTRA_D:</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; D (min&uacute;sculo) - b, c, d, e, g</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c2"> SEGMENTO_A</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_B</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_C</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_D</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_E</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c2"> SEGMENTO_F</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_G</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">GOTO</span><span class="c8"></span><span class="c42 c8 c18">PRINCIPAL</span></p><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c2">TESTA_E:</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">MOVF</span><span class="c2"> CONTADOR, 0</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">XORLW</span><span class="c2">0x0E</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BTFSS</span><span class="c2">STATUS, Z</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">GOTO</span><span class="c8"> </span><span class="c42 c8 c18">TESTA_F</span></p><p class="c19"><span class="c2">MOSTRA_E:</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; E (mai&uacute;sculo) - a, d, e, f, g</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_A</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c2"> SEGMENTO_B</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c2"> SEGMENTO_C</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_D</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_E</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_F</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_G</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">GOTO</span><span class="c8"></span><span class="c42 c8 c18">PRINCIPAL</span></p><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c2">TESTA_F:</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">MOVF</span><span class="c2"> CONTADOR, 0</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">XORLW</span><span class="c2">0x0F</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BTFSS</span><span class="c2">STATUS, Z</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">GOTO</span><span class="c8"> </span><span class="c42 c8 c18">PRINCIPAL</span></p><p class="c19"><span class="c2">MOSTRA_F:</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; F (mai&uacute;sculo) - a, e, f, g</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_A</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c2"> SEGMENTO_B</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c2"> SEGMENTO_C</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c2"> SEGMENTO_D</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_E</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_F</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> SEGMENTO_G</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">GOTO</span><span class="c8"></span><span class="c42 c8 c18">PRINCIPAL</span></p><p class="c19"><span class="c2"> </span></p><p class="c19"><span class="c2"> END</span></p></td></tr></tbody></table><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><hr style="page-break-before:always;display:none;"><h1 class="c75 c35" id="h.c2dmt1c8fri6"><span class="c28 c87"></span></h1><h1 class="c95 c35" id="h.6s9s48u2ylem"><span class="c28 c87">Epis&oacute;dio 7: Grava&ccedil;&atilde;o do PIC16F628A com os hardwares K150 e o PICkit 3</span></h1><p class="c11">Neste epis&oacute;dio iremos fazer a grava&ccedil;&atilde;o do projeto visto no epis&oacute;dio anterior e faremos uso de dois equipamentos para a grava&ccedil;&atilde;o: o gravador K150 e o gravador PICkit 3</p><p class="c11">O gravador K150 conforme Figura 7.1, pode ser encontrado no mercado livre e tamb&eacute;m em algumas lojas de eletr&ocirc;nica online, e o site do projeto &eacute; </span><span class="linkDoc1"><a href="https://www.google.com/url?q=http://www.kitsrus.com/pic.html&amp;sa=D&amp;source=editors&amp;ust=1619797899333000&amp;usg=AOvVaw3NsS6ffB2HRBnHODI4srSo">http://www.kitsrus.com/pic.html</a></span>e </span>um passo a passo de uso pode ser baixado em </span><span class="linkDoc1"><a href="https://www.google.com/url?q=https://www.sigmaelectronica.net/manuals/k150.pdf&amp;sa=D&amp;source=editors&amp;ust=1619797899333000&amp;usg=AOvVaw2d224G0r9Gdp1-hL6Vzo2S">https://www.sigmaelectronica.net/manuals/k150.pdf</a>.</p><p class="c12"><span class="c34">Figura 7.1 -</span>Gravador K150</span></p><a id="t.3c9232b2d5d9ea2a259f8403ad80b64e9db35916"></a><a id="t.56"></a><table class="c7"><tbody><tr class="c21"><td class="c174"><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 565.11px; height: 566.08px;"><img alt="" src="images/image81.png" style="width: 565.11px; height: 566.08px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr></tbody></table><p class="c24"><span class="textoVermelho"> Fonte: </span><span class="c59 c6 c39"><a href="https://www.google.com/url?q=https://www.baudaeletronica.com.br/gravador-de-pic-usb-k150.html&amp;sa=D&amp;source=editors&amp;ust=1619797899334000&amp;usg=AOvVaw0q3Y0EjBP4OaxIsmdY1x1S">https://www.baudaeletronica.com.br/gravador-de-pic-usb-k150.html</a></span></p><p class="c11">Para o processo de grava&ccedil;&atilde;o, utiliza-se o programa </span><i>Microbrn</span>conforme Figura 7.2 que tamb&eacute;m se encontra no link do projeto e de f&aacute;cil utiliza&ccedil;&atilde;o.</p><p class="c12"><span class="c34">Figura 7.2 - </span>Programa Microbrn</span></p><p class="c12"><span class="c39 c227">COLOCAR A FIGURA DO APP AQUI</span><sup><a href="#cmnt3" id="cmnt_ref3">[c]</a></sup></p><p class="c11">O driver de instala&ccedil;&atilde;o para o dispositivo &eacute; encontrado em </span><span class="linkDoc1"><a href="https://www.google.com/url?q=http://www.profilic.tw/US/ShowProduct.aspx?p_id%3D225%26pcid%3D41&amp;sa=D&amp;source=editors&amp;ust=1619797899335000&amp;usg=AOvVaw17ibuGdM-Ncus1s65jZrwe">http://www.profilic.tw/US/ShowProduct.aspx?p_id=225&amp;pcid=41</a></span>ou </span><span class="linkDoc1"><a href="https://www.google.com/url?q=http://www.profilic.tw/US/ShowProduct.aspx?p_id%3D223%26pcid%3D126&amp;sa=D&amp;source=editors&amp;ust=1619797899336000&amp;usg=AOvVaw0gyh16rVM-HKh4-Ltptpe_">http://www.profilic.tw/US/ShowProduct.aspx?p_id=223&amp;pcid=126</a></span>e ap&oacute;s a instala&ccedil;&atilde;o pode-se conectar o dispositivo K150 e executar o aplicativo Microbrn dispon&iacute;vel em </span><span class="linkDoc1"><a href="https://www.google.com/url?q=http://paginapessoal.utfpr.edu.br/amauriassef/disciplinas/sistemas-microcontrolados/gravador-microburn-k150&amp;sa=D&amp;source=editors&amp;ust=1619797899336000&amp;usg=AOvVaw2zHLmVfQJDnzrIF7Eq8ovt">http://paginapessoal.utfpr.edu.br/amauriassef/disciplinas/sistemas-microcontrolados/gravador-microburn-k150</a></p><p class="c11">Ao abrir o aplicativo h&aacute; a necessidade de selecionar a porta COM onde est&aacute; associada o K150. Para isso abra o gerenciador de dispositivo conforme Figura 7.3 e acesse a op&ccedil;&atilde;o Portas (</span><i>Ports</span>) e veja qual COM est&aacute; associada ao K150.</p><p class="c12"><span class="c34">Figura 7.3 - </span>Gerenciador de dispositivo</span></p><p class="c12"><span class="c39 c179">COLOCAR AQUI A IMAGEM DO GERENCIADOR DE DISPOSITIVO COM O K150 LIGADO/CONECTADO</span><sup><a href="#cmnt4" id="cmnt_ref4">[d]</a></sup></p><p class="c11">No menu </span><i>File</span>, acesse a op&ccedil;&atilde;o &ldquo;</span><i>Port</span>&rdquo; e digite o n&uacute;mero da porta. No mesmo menu </span><i>FIle</span>, acessa a op&ccedil;&atilde;o &ldquo;</span><i>Programmer</span>&rdquo; e selecione a op&ccedil;&atilde;o K150</p><p class="c11">O pr&oacute;ximo passo &eacute; a escolha do microcontrolador, na op&ccedil;&atilde;o &ldquo;</span><i>Chip Selector</span>&rdquo; do lado direito, na parte inferior da janela. Ao escolher o microcontrolador PIC16F628A (16F628A) no dropbox, no conector ZIF exibido no programa, exibir&aacute; a posi&ccedil;&atilde;o a ser inserido no soquete</p><p class="c11">Agora clique no bot&atilde;o &ldquo;</span><i>Load</span>&rdquo; para carregar o arquivo para a tela principal. Neste momento j&aacute; se pode clicar no bot&atilde;o &ldquo;</span><i>Program</span>&rdquo; para gravar o programa na mem&oacute;ria de programa do microcontrolador</p><p class="c11">Outra op&ccedil;&atilde;o de grava&ccedil;&atilde;o &eacute; pelo modo ICSP (</span><i>In-Circuit Serial Programming</span>) acessando o menu &ldquo;</span><i>Options</span>&rdquo; e a op&ccedil;&atilde;o &ldquo;</span><i>ICSP Mode</span>&rdquo;. Essa op&ccedil;&atilde;o d&aacute; a capacidade de grava&ccedil;&atilde;o no circuito, sendo necess&aacute;rias algumas modifica&ccedil;&otilde;es para prote&ccedil;&atilde;o de algum componente sens&iacute;vel</p><p class="c11">No modo ICSP os pinos para uso na programa&ccedil;&atilde;o s&atilde;o: </span><i>VPP1</span>, </span><i>LOW</span>, </span><i>DAT</span>, </span><i>CLK</span>, </span><i>VCC</span>e </span><i>GND</span>. Para a programa&ccedil;&atilde;o do PIC16F628A utiliza-se a rela&ccedil;&atilde;o contida na Tabela 7.1.</p><p class="c12"><span class="c34">Tabela 7.1 -</span>Rela&ccedil;&atilde;o dos pinos do K150 e PIC16F628A</span></p><a id="t.2df5236e1367bf3588e20400d89ebc084e6b1daa"></a><a id="t.57"></a><table class="c56"><tbody><tr class="c21"><td class="c123"><p class="c1"><span class="c6 c33">Pinos K150</span></p></td><td class="c123"><p class="c1">Pinos PIC16F628A</td>
</tr>
<tr class="c21"><td class="c123"><p class="c1"><span class="c142 c6 c50 c53 c37 c44">VPP1</span></p></td><td class="c123"><p class="c1"><span class="c34">RA5</span>/</span><span class="c59 c6 c34">MCLR</span>/V</span><span class="c6 c62">PP</span>(pino 4)</td>
</tr>
<tr class="c21"><td class="c123"><p class="c1"><span class="c142 c6 c50 c53 c37 c44">LOW</span></p></td><td class="c123"><p class="c1 c14"></p></td>
</tr>
<tr class="c21"><td class="c123"><p class="c1"><span class="c142 c6 c50 c53 c37 c44">DAT</span></p></td><td class="c123"><p class="c1"><span class="c34">RB7</span>/</span><span class="c34">PGD</span>(pino 13)</td>
</tr>
<tr class="c21"><td class="c123"><p class="c1"><span class="c6 c50 c53 c37 c44 c142">CLK</span></p></td><td class="c123"><p class="c1"><span class="c34">RB6</span>/</span><span class="c34">PGC</span>(pino 12)</td>
</tr>
<tr class="c21"><td class="c123"><p class="c1"><span class="c142 c6 c50 c53 c37 c44">VCC</span></p></td><td class="c123"><p class="c1">V</span><span class="c6 c62">DD</span>(pino 14)</td>
</tr>
<tr class="c21"><td class="c123"><p class="c1"><span class="c142 c6 c50 c53 c37 c44">GND</span></p></td><td class="c123"><p class="c1">V</span><span class="c6 c62">SS</span>(pino 5)</span></p></td></tr></tbody></table><p class="c11">Outro passo a passo de grava&ccedil;&atilde;o usando o gravador pode ser visto em </span><span class="linkDoc1"><a href="https://www.google.com/url?q=https://www.filipeflop.com/blog/como-utilizar-gravador-de-pic-usb-k150/&amp;sa=D&amp;source=editors&amp;ust=1619797899343000&amp;usg=AOvVaw0Rnxq2Z83WdWIqt5wpkuSP">https://www.filipeflop.com/blog/como-utilizar-gravador-de-pic-usb-k150/</a></p><p class="c11">J&aacute; que iniciamos o conceito de grava&ccedil;&atilde;o usando o ICSP, passamos para a grava&ccedil;&atilde;o usando o PICkit 3 &quot;gen&eacute;rico&#39;&#39;, conforme Figura 7.4, sendo que o PICKit3 tem 6 pinos conforme Tabela 7.4.</p><p class="c12"><span class="c34">Figura 7.4 - </span>Gravador PICkit 3</span></p><a id="t.e4f3041869950f6173e4d8d0fcb2b6b2c7ee6a8a"></a><a id="t.58"></a><table class="c7"><tbody><tr class="c21"><td class="c224"><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 450.00px; height: 450.00px;"><img alt="" src="images/image17.jpg" style="width: 450.00px; height: 450.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></td>
</tr>
<tr class="c21"><td class="c226"><p class="c24"><span class="textoVermelho">Fonte: </span><span class="c59 c6 c39"><a href="https://www.google.com/url?q=https://www.arduinobrasilshop.com.br/pickit3-kit-programador-gravador-de-pic&amp;sa=D&amp;source=editors&amp;ust=1619797899344000&amp;usg=AOvVaw2_xiOd_V_1E9VsqIgACRCy">https://www.arduinobrasilshop.com.br/pickit3-kit-programador-gravador-de-pic</a></span></p></td></tr></tbody></table><p class="c12"><span class="c34">Tabela 7.2 -</span>Identifica&ccedil;&atilde;o dos pinos do PICkit 3</span></p><a id="t.48f7e6afbef21f16b980062586b29229c51240bc"></a><a id="t.59"></a><table class="c56"><tbody><tr class="c21"><td class="c123"><p class="c1">Pino</span></p></td><td class="c123"><p class="c1">Sinal</td>
</tr>
<tr class="c21"><td class="c123"><p class="c1">1</span></p></td><td class="c123"><p class="c1"><span class="c59 c6 c34">MCLR</span>/V</span><span class="c131 c6 c62 c50 c53 c44">PP</td>
</tr>
<tr class="c21"><td class="c123"><p class="c1">2</span></p></td><td class="c123"><p class="c1">V</span><span class="c131 c6 c62 c50 c53 c44">DD</td>
</tr>
<tr class="c21"><td class="c123"><p class="c1">3</span></p></td><td class="c123"><p class="c1">V</span><span class="c6 c62 c50 c53 c44 c131">SS</td>
</tr>
<tr class="c21"><td class="c123"><p class="c1">4</span></p></td><td class="c123"><p class="c1"><span class="c34">PGD</span>(ICSPDAT)</td>
</tr>
<tr class="c21"><td class="c123"><p class="c1">5</span></p></td><td class="c123"><p class="c1"><span class="c34">PGC</span>(ICSPCLK)</td>
</tr>
<tr class="c21"><td class="c123"><p class="c1">6</span></p></td><td class="c123"><p class="c1">N&atilde;o conectado</span></p></td></tr></tbody></table><p class="c11">A conex&atilde;o do PICkit 3 com o PIC16F628A &eacute; semelhante a da conex&atilde;o do K150 com o PIC16F628A no modo ICSP</p><p class="c11">A diferen&ccedil;a no processo de grava&ccedil;&atilde;o est&aacute; no software que &eacute; usado, onde o K150 faz uso do </span><i>MicroBrn</span>enquanto que o PICkit 3 faz uso do </span><i>PICkit 3 Programmer</p><p class="c11">Um tutorial usando o gravador PICkit 3 pode ser encontrado em </span><span class="linkDoc1"><a href="https://www.google.com/url?q=https://www.filipeflop.com/blog/como-utilizar-gravador-pic-pickit-3/&amp;sa=D&amp;source=editors&amp;ust=1619797899349000&amp;usg=AOvVaw0ggSKRXntFbCmKqBBHZc9h">https://www.filipeflop.com/blog/como-utilizar-gravador-pic-pickit-3/</a></p><p class="c11">Para este epis&oacute;dio falaremos sobre o processo de grava&ccedil;&atilde;o usando o PICkit 3 e o programa PICkit 3 </span><i>Programmer</span>, mas sabendo que o processo &eacute; semelhante para o gravador K150 com o programa Microbrn no modo ICSP</p><p class="c11">No epis&oacute;dio anterior vimos o exemplo de uso das portas do microcontrolador trabalhando como entrada ou sa&iacute;da no fluxograma e no c&oacute;digo e neste epis&oacute;dio vamos fazer a grava&ccedil;&atilde;o do bin&aacute;rio gerado neste projeto no microcontrolador</p><p class="c11">O arquivo bin&aacute;rio com extens&atilde;o .hex (arquivo gerado no projeto para ser usado no gravador) est&aacute; dentro do diret&oacute;rio do projeto em <span class="definesASM1">C:\Users\</span><span class="c47 c6 c34">&lt;diret&oacute;rio do usu&aacute;rio&gt;</span><span class="definesASM1">\MPLABXProjects\</span><span class="c47 c6 c34">&lt;nome do projeto&gt;</span><span class="definesASM1">.X\dist\default\production</p><p class="c11">Supondo que o usu&aacute;rio seja &ldquo;</span><span class="c34">Everton</span>&rdquo; e o projeto seja &ldquo;</span><span class="c34">PiscaLed</span>&rdquo; o endere&ccedil;o completo do diret&oacute;rio com o seguinte arquivo .hex ser&aacute; <span class="definesASM1">C:\Users\</span><span class="c47 c6 c34">Everton</span><span class="definesASM1">\MPLABXProjects\</span><span class="c47 c6 c34">PiscaLed</span><span class="definesASM1">.X\dist\default\production\</span><span class="c47 c6 c34">PiscaLed</span><span class="definesASM1">.X.production.hex</span>. A Figura 7.5 exibe os arquivos dentro do diret&oacute;rio do projeto &ldquo;</span><span class="c34">PiscaLed</span>&rdquo;.</p><p class="c12"><span class="c34">Figura 7.5 - </span>Arquivo .hex do projeto</span></p><a id="t.3c9232b2d5d9ea2a259f8403ad80b64e9db35916"></a><a id="t.60"></a><table class="c7"><tbody><tr class="c21"><td class="c68"><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 590.00px; height: 237.33px;"><img alt="" src="images/image56.png" style="width: 590.00px; height: 237.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr></tbody></table><p class="c24"><span class="citacaoFigura">Fonte: Pr&oacute;prio autor</span></p><p class="c11">Agora que j&aacute; sabemos o diret&oacute;rio onde est&aacute; o arquivo necess&aacute;rio para a grava&ccedil;&atilde;o, precisamos executar o PICkit 3 Programmer para fazer a grava&ccedil;&atilde;o. </span>A Figura 7.6 exibe a tela do programa PICkit 3 Programmer e para selecionar o arquivo .hex, precisamos acessar o menu File &rarr; ...</span><sup><a href="#cmnt5" id="cmnt_ref5">[e]</a></sup></p><p class="c12"><span class="c34">Figura 7.6 - </span>Tela inicial do programa PICkit 3 Programmer</span></p><p class="c12"><span class="c39 c179">colocar aqui a tela inicial do PICkit 3 programmer</span><sup><a href="#cmnt6" id="cmnt_ref6">[f]</a></sup></p><p class="c11">Ap&oacute;s a sele&ccedil;&atilde;o do arquivo .hex, e tamb&eacute;m da conex&atilde;o do microcontrolador com o PICkit 3, pressiona-se o bot&atilde;o &ldquo;Write&rdquo; para gravar o arquivo na memoria de programa do PIC16F628A, e ao final da grava&ccedil;&atilde;o h&aacute; a informa&ccedil;&atilde;o de &ldquo;Programming Sucessfull&rdquo; em verde como mostrado na Figura 7.7 o processo de grava&ccedil;&atilde;o finalizado.</p><p class="c12">Figura 7.7 - Tela do PICkit 3 programmer ap&oacute;s grava&ccedil;&atilde;o</span></p><p class="c12"><span class="c39 c225">Colocar aqui tela do PICkit 3 programmer ap&oacute;s grava&ccedil;&atilde;o</span><sup><a href="#cmnt7" id="cmnt_ref7">[g]</a></sup></p><p class="c12 c14"></p><p class="c11">Com isso vamos ao teste de funcionamento p&oacute;s-grava&ccedil;&atilde;o para verificar se nossa l&oacute;gica e nosso c&oacute;digo condiz com a ideia inicial ou teremos que fazer algumas modifica&ccedil;&otilde;es.</span></p><p class="c12 c14"></p><p class="c14 c24"></p><hr style="page-break-before:always;display:none;"><h1 class="c75 c35" id="h.9b7nicdpglls"><span class="c28 c87"></span></h1><h1 class="c95 c35" id="h.55wcq7mke037"><span>Epis&oacute;dio 8: Conhecendo as instru&ccedil;&otilde;es </span><span class="c8">ADDLW</span><span>, </span><span class="c8">ADDWF</span><span>, </span><span class="c8">INCF</span><span>, </span><span class="c8">INCFSZ</span><span>, </span><span class="c8">SUBLW</span><span>, </span><span class="c8">SUBWF</span><span>, </span><span class="c8">DECF</span><span>, </span><span class="c8">DECFSZ</span><span>, </span><span class="c8">ANDLW</span><span>, </span><span class="c8">ANDWF</span><span>, </span><span class="c8">IORLW</span><span>, </span><span class="c8">IORWF</span><span>, </span><span class="c8">XORLW</span><span>, </span><span class="c8">XORWF</span><span>e </span><span class="c8">COMF</span><span class="c28 c87">para o PIC16F628A</span></h1><p class="c11">Neste epis&oacute;dio conheceremos as instru&ccedil;&otilde;es de opera&ccedil;&otilde;es aritm&eacute;ticas e l&oacute;gicas dispon&iacute;veis para o PIC16F628A. As instru&ccedil;&otilde;es concebem as opera&ccedil;&otilde;es de adi&ccedil;&atilde;o e incremento, subtra&ccedil;&atilde;o e decremento, </span><span class="c6 c34 c37">e</span>l&oacute;gico, </span><span class="c6 c34 c37">ou</span>inclusivo, </span><span class="c6 c34 c37">ou</span>exclusivo e complemento l&oacute;gico</p><p class="c11">A adi&ccedil;&atilde;o no PIC16F628A &eacute; concebida por duas instru&ccedil;&otilde;es </span><span class="c3">ADDLW</span>e </span><span class="c3">ADDWF</p><p class="c11">A instru&ccedil;&atilde;o </span><span class="c3">ADDLW k</span></span>&eacute; respons&aacute;vel por adicionar o literal <span class="c47 c6 c34">k</span>(n&uacute;mero de 8 bits ) ao conte&uacute;do do registrador </span><span class="c6 c34 c37">W</span>. Essa instru&ccedil;&atilde;o afeta os bits <span class="c47 c6 c34">C</span>, <span class="c47 c6 c34">DC</span>e <span class="c47 c6 c34">Z</span>do registrador <span class="c47 c6 c34">STATUS</span>visto no epis&oacute;dio 3</p><p class="c11">O C&oacute;digo 8.1 exibe um exemplo de adi&ccedil;&atilde;o onde <span class="c47 c6 c34">C</span>(estouro)</span>, <span class="c47 c6 c34">DC</span>(nibble mais significativo n&atilde;o zero) e <span class="c47 c6 c34">Z</span>(n&atilde;o gerou zero) s&atilde;o iguais a zero:</span></p><p class="c12"><span class="c34">C&oacute;digo 8.1 -</span>Exemplo do uso da instru&ccedil;&atilde;o </span><span class="c3">ADDLW</span>para <span class="c47 c6 c34">C</span>=0, <span class="c47 c6 c34">DC</span>=0 e <span class="c47 c6 c34">Z</span>=0</span></p><a id="t.b5cf2d6cff11fdc57bc4638bb6b5bb72ab057814"></a><a id="t.61"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c8">1 </span><span class="c42 c8 c76">; INSTRUCAO: ADDLW</span></p><p class="c19"><span class="c8">2 </span><span class="c42 c8 c76">; ADICIONA UM LITERAL (NUMERO) AO CONTEUDO DO REG. W</span></p><p class="c19"><span class="c8 c222">3 </span><span class="c9">MOVLW</span><span class="c8"> </span><span class="c42 c8 c54">.5</span></p><p class="c19"><span class="c8">4 </span><span class="c9">ADDLW</span><span class="c8"> </span><span class="c42 c8 c54">.4</span></p><p class="c19"><span class="c8">5 </span><span class="c42 c8 c76">; O RESULTADO ARMAZENADO EM W SERA 9</span></p><p class="c19 c14"><span class="c2"></span></p></td></tr></tbody></table><p class="c11">A Tabela 8.1 exibe o processo da instru&ccedil;&atilde;o </span><span class="c3">ADDLW</span>e </span><span class="c3">ADDWF</span><span class="definesASM1">.</p><p class="c12"><span class="c34">Tabela 8.1 - </span>Exemplo de adi&ccedil;&atilde;o de dois n&uacute;meros naturais</span></p><a id="t.cbe2fa749bb9e60ad0b7229f2ad5d9ea6669bd1f"></a><a id="t.62"></a><table class="c56"><tbody><tr class="c21"><td class="c91"><p class="c1"><span class="c42 c47 c34 c53">C</span></p></td><td class="c91"><p class="c1"><span class="c26">bit 7</span></p></td><td class="c91"><p class="c1"><span class="c26">bit 6</span></p></td><td class="c91"><p class="c1"><span class="c26">bit 5</span></p></td><td class="c91"><p class="c1"><span class="c26">bit 4</span></p></td><td class="c91"><p class="c1"><span class="c26">bit 3</span></p></td><td class="c91"><p class="c1"><span class="c26">bit 2</span></p></td><td class="c91"><p class="c1"><span class="c26">bit 1</span></p></td><td class="c91"><p class="c1"><span class="c26">bit 0</span></p></td><td class="c91"><p class="c1 c14"><span class="c26"></span></p></td><td class="c91"><p class="c1 c14"><span class="c26"></span></p></td><td class="c91"><p class="c1 c14"><span class="c26"></td>
</tr>
<tr class="c21"><td class="c91"><p class="c1"><span class="c2">0</span></p></td><td class="c91"><p class="c1"><span class="c2">0</span></p></td><td class="c91"><p class="c1"><span class="c2">0</span></p></td><td class="c91"><p class="c1"><span class="c2">0</span></p></td><td class="c91"><p class="c1"><span class="c2">0</span></p></td><td class="c91"><p class="c1"><span class="c2">0</span></p></td><td class="c91"><p class="c1"><span class="c2">1</span></p></td><td class="c91"><p class="c1"><span class="c2">0</span></p></td><td class="c91"><p class="c1"><span class="c2">1</span></p></td><td class="c91"><p class="c1"><span class="c26">=</span></p></td><td class="c91"><p class="c1"><span class="c8">5</span><span class="c63 c8 c62 c53">10</span></p></td><td class="c91"><p class="c1"><span class="c2">0x05</td>
</tr>
<tr class="c21"><td class="c91"><p class="c1"><span class="c2">0</span></p></td><td class="c91"><p class="c1"><span class="c2">0</span></p></td><td class="c91"><p class="c1"><span class="c2">0</span></p></td><td class="c91"><p class="c1"><span class="c2">0</span></p></td><td class="c91"><p class="c1"><span class="c2">0</span></p></td><td class="c91"><p class="c1"><span class="c2">0</span></p></td><td class="c91"><p class="c1"><span class="c2">1</span></p></td><td class="c91"><p class="c1"><span class="c2">0</span></p></td><td class="c91"><p class="c1"><span class="c2">0</span></p></td><td class="c91"><p class="c1"><span class="c26">=</span></p></td><td class="c91"><p class="c1"><span class="c8">4</span><span class="c8 c62">10</span></p></td><td class="c91"><p class="c1"><span class="c2">0x04</span></p></td></tr><tr class="c51"><td class="c68" colspan="12" rowspan="1"><p class="c1"><span class="c26">ADI&Ccedil;&Atilde;O</td>
</tr>
<tr class="c21"><td class="c91"><p class="c1"><span class="c2">0</span></p></td><td class="c91"><p class="c1"><span class="c2">0</span></p></td><td class="c91"><p class="c1"><span class="c2">0</span></p></td><td class="c91"><p class="c1"><span class="c2">0</span></p></td><td class="c91"><p class="c1"><span class="c2">0</span></p></td><td class="c91"><p class="c1"><span class="c2">1</span></p></td><td class="c91"><p class="c1"><span class="c2">0</span></p></td><td class="c91"><p class="c1"><span class="c2">0</span></p></td><td class="c91"><p class="c1"><span class="c2">1</span></p></td><td class="c91"><p class="c1"><span class="c26">=</span></p></td><td class="c91"><p class="c1"><span class="c8">9</span><span class="c8 c62">10</span></p></td><td class="c91"><p class="c1"><span class="c2">0x09</span></p></td></tr></tbody></table><p class="c11">O C&oacute;digo 8.2 exibe um exemplo de adi&ccedil;&atilde;o onde </span><span class="c34">C</span>ficou igual a 1 (houve estouro no registrador, isto &eacute;, 254 + 4 = 258 &gt; 255) e </span><span class="c34">DC</span>e </span><span class="c34">Z</span>s&atilde;o iguais a zero.</p><p class="c12"><span class="c34">C&oacute;digo 8.2 -</span>Exemplo do uso da instru&ccedil;&atilde;o </span><span class="c3">ADDLW</span>para <span class="c47 c6 c34">C</span>=1, <span class="c47 c6 c34">DC</span>=0 e <span class="c47 c6 c34">Z</span>=0</span></p><a id="t.76231dcc2c79256ab3899b66bb6e986da4721811"></a><a id="t.63"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c8">1 </span><span class="c42 c8 c76">; INSTRUCAO: ADDLW</span></p><p class="c19"><span class="c8">2 </span><span class="c42 c8 c76">; ADICIONA UM LITERAL (NUMERO) AO CONTEUDO DO REG. W</span></p><p class="c19"><span class="c8">3 </span><span class="c9">MOVLW</span><span class="c8"> </span><span class="c42 c8 c54">.254</span></p><p class="c19"><span class="c8">4 </span><span class="c9">ADDLW</span><span class="c8"> </span><span class="c42 c8 c54">.4</span></p><p class="c19"><span class="c8">5 </span><span class="c42 c8 c76">; O RESULTADO ARMAZENADO EM W SERA 2</span></p><p class="c19 c14"><span class="c2"></span></p></td></tr></tbody></table><p class="c11">A Tabela 8.2 exibe o processo de adi&ccedil;&atilde;o de dois n&uacute;meros com estouro no registrador que o armazena, que no C&oacute;digo 8.2 &eacute; o registrador </span><span class="c6 c34 c37">W.</p><p class="c12"><span class="c34">Tabela 8.2 - </span>Exemplo de adi&ccedil;&atilde;o de dois n&uacute;meros naturais</span></p><a id="t.fd09ac595eb9ac13bf706290ef03b7666d2d2d04"></a><a id="t.64"></a><table class="c56"><tbody><tr class="c21"><td class="c22"><p class="c1"><span class="c42 c47 c34 c53">C</span></p></td><td class="c61"><p class="c1"><span class="c26">bit 7</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 6</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 5</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 4</span></p></td><td class="c79"><p class="c1"><span class="c26">bit 3</span></p></td><td class="c46"><p class="c1"><span class="c26">bit 2</span></p></td><td class="c41"><p class="c1"><span class="c26">bit 1</span></p></td><td class="c41"><p class="c1"><span class="c26">bit 0</span></p></td><td class="c15"><p class="c1 c14"><span class="c26"></span></p></td><td class="c57"><p class="c1 c14"><span class="c26"></span></p></td><td class="c57"><p class="c1 c14"><span class="c26"></td>
</tr>
<tr class="c21"><td class="c22"><p class="c1"><span class="c2">0</span></p></td><td class="c61"><p class="c1"><span class="c2">1</span></p></td><td class="c66"><p class="c1"><span class="c2">1</span></p></td><td class="c66"><p class="c1"><span class="c2">1</span></p></td><td class="c66"><p class="c1"><span class="c2">1</span></p></td><td class="c79"><p class="c1"><span class="c2">1</span></p></td><td class="c46"><p class="c1"><span class="c2">1</span></p></td><td class="c41"><p class="c1"><span class="c2">1</span></p></td><td class="c41"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c26">=</span></p></td><td class="c57"><p class="c1"><span class="c8">254</span><span class="c63 c8 c62 c53">10</span></p></td><td class="c57"><p class="c1"><span class="c2">0xFE</td>
</tr>
<tr class="c21"><td class="c22"><p class="c1"><span class="c5">0</span></p></td><td class="c61"><p class="c1"><span class="c5">0</span></p></td><td class="c66"><p class="c1"><span class="c5">0</span></p></td><td class="c66"><p class="c1"><span class="c5">0</span></p></td><td class="c66"><p class="c1"><span class="c5">0</span></p></td><td class="c79"><p class="c1"><span class="c5">0</span></p></td><td class="c46"><p class="c1"><span class="c5">1</span></p></td><td class="c41"><p class="c1"><span class="c5">0</span></p></td><td class="c41"><p class="c1"><span class="c5">0</span></p></td><td class="c15"><p class="c1"><span class="c26">=</span></p></td><td class="c57"><p class="c1"><span class="c8">4</span><span class="c8 c62">10</span></p></td><td class="c57"><p class="c1"><span class="c2">0x04</span></p></td></tr><tr class="c51"><td class="c68" colspan="12" rowspan="1"><p class="c1"><span class="c26">ADI&Ccedil;&Atilde;O</td>
</tr>
<tr class="c21"><td class="c22"><p class="c1"><span class="c2">1</span></p></td><td class="c61"><p class="c1"><span class="c2">0</span></p></td><td class="c66"><p class="c1"><span class="c2">0</span></p></td><td class="c66"><p class="c1"><span class="c2">0</span></p></td><td class="c66"><p class="c1"><span class="c2">0</span></p></td><td class="c79"><p class="c1"><span class="c2">0</span></p></td><td class="c46"><p class="c1"><span class="c2">0</span></p></td><td class="c41"><p class="c1"><span class="c2">1</span></p></td><td class="c41"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c26">=</span></p></td><td class="c57"><p class="c1"><span class="c8">2</span><span class="c8 c62">10</span></p></td><td class="c57"><p class="c1"><span class="c2">0x02</span></p></td></tr></tbody></table><p class="c11">Agora, veremos um exemplo de adi&ccedil;&atilde;o onde </span><span class="c34">C</span>e </span><span class="c34">Z</span>s&atilde;o iguais a 1 (&ldquo;estourou&rdquo; o registrador de armazenamento da adi&ccedil;&atilde;o al&eacute;m de gerar o valor zero nesta adi&ccedil;&atilde;o) e </span><span class="c34">DC</span>&eacute; igual a zero.</p><p class="c12"><span class="c34">C&oacute;digo 8.3 -</span>Exemplo do uso da instru&ccedil;&atilde;o </span><span class="c3">ADDLW</span>para <span class="c47 c6 c34">C</span>=1, <span class="c47 c6 c34">DC</span>=0 e <span class="c47 c6 c34">Z</span>=1</span></p><a id="t.b75d1abd15d3880ee0b4efdfbcda2e2cfb7646c9"></a><a id="t.65"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c8">1 </span><span class="c42 c8 c76">; INSTRUCAO: ADDLW</span></p><p class="c19"><span class="c8">2 </span><span class="c42 c8 c76">; ADICIONA UM LITERAL (NUMERO) AO CONTEUDO DO REG. W</span></p><p class="c19"><span class="c8">3 </span><span class="c9">MOVLW</span><span class="c8"> </span><span class="c42 c8 c54">.253</span></p><p class="c19"><span class="c8">4 </span><span class="c9">ADDLW</span><span class="c8"> </span><span class="c42 c8 c54">.3</span></p><p class="c19"><span class="c8">5 </span><span class="c42 c8 c76">; O RESULTADO ARMAZENADO EM W SERA 0</span></p><p class="c19 c14"><span class="c2"></span></p></td></tr></tbody></table><p class="c11">A Tabela 8.3 exibe o processo com estouro e retorno de um valor igual a 0.</p><p class="c12"><span class="c34">Tabela 8.3 - </span>Exemplo de adi&ccedil;&atilde;o de dois n&uacute;meros naturais</span></p><a id="t.34d4143cbb50325031a1567bf59b9f3566f8f86f"></a><a id="t.66"></a><table class="c56"><tbody><tr class="c21"><td class="c22"><p class="c1"><span class="c42 c47 c34 c53">C</span></p></td><td class="c61"><p class="c1"><span class="c26">bit 7</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 6</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 5</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 4</span></p></td><td class="c79"><p class="c1"><span class="c26">bit 3</span></p></td><td class="c46"><p class="c1"><span class="c26">bit 2</span></p></td><td class="c41"><p class="c1"><span class="c26">bit 1</span></p></td><td class="c41"><p class="c1"><span class="c26">bit 0</span></p></td><td class="c15"><p class="c1 c14"><span class="c26"></span></p></td><td class="c57"><p class="c1 c14"><span class="c26"></span></p></td><td class="c57"><p class="c1 c14"><span class="c26"></td>
</tr>
<tr class="c21"><td class="c22"><p class="c1"><span class="c2">0</span></p></td><td class="c61"><p class="c1"><span class="c2">1</span></p></td><td class="c66"><p class="c1"><span class="c2">1</span></p></td><td class="c66"><p class="c1"><span class="c2">1</span></p></td><td class="c66"><p class="c1"><span class="c2">1</span></p></td><td class="c79"><p class="c1"><span class="c2">1</span></p></td><td class="c46"><p class="c1"><span class="c2">1</span></p></td><td class="c41"><p class="c1"><span class="c2">0</span></p></td><td class="c41"><p class="c1"><span class="c2">1</span></p></td><td class="c15"><p class="c1"><span class="c26">=</span></p></td><td class="c57"><p class="c1"><span class="c8">253</span><span class="c63 c8 c62 c53">10</span></p></td><td class="c57"><p class="c1"><span class="c2">0xFD</td>
</tr>
<tr class="c21"><td class="c22"><p class="c1"><span class="c2">0</span></p></td><td class="c61"><p class="c1"><span class="c2">0</span></p></td><td class="c66"><p class="c1"><span class="c2">0</span></p></td><td class="c66"><p class="c1"><span class="c2">0</span></p></td><td class="c66"><p class="c1"><span class="c2">0</span></p></td><td class="c79"><p class="c1"><span class="c2">0</span></p></td><td class="c46"><p class="c1"><span class="c2">0</span></p></td><td class="c41"><p class="c1"><span class="c2">1</span></p></td><td class="c41"><p class="c1"><span class="c2">1</span></p></td><td class="c15"><p class="c1"><span class="c26">=</span></p></td><td class="c57"><p class="c1"><span class="c8">3</span><span class="c8 c62">10</span></p></td><td class="c57"><p class="c1"><span class="c2">0x03</span></p></td></tr><tr class="c51"><td class="c68" colspan="12" rowspan="1"><p class="c1"><span class="c26">ADI&Ccedil;&Atilde;O</td>
</tr>
<tr class="c21"><td class="c22"><p class="c1"><span class="c2">1</span></p></td><td class="c61"><p class="c1"><span class="c2">0</span></p></td><td class="c66"><p class="c1"><span class="c2">0</span></p></td><td class="c66"><p class="c1"><span class="c2">0</span></p></td><td class="c66"><p class="c1"><span class="c2">0</span></p></td><td class="c79"><p class="c1"><span class="c2">0</span></p></td><td class="c46"><p class="c1"><span class="c2">0</span></p></td><td class="c41"><p class="c1"><span class="c2">0</span></p></td><td class="c41"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c26">=</span></p></td><td class="c57"><p class="c1"><span class="c8">0</span><span class="c8 c62">10</span></p></td><td class="c57"><p class="c1"><span class="c2">0x09</span></p></td></tr></tbody></table><p class="c11">O C&oacute;digo 8.4 exibe um exemplo de adi&ccedil;&atilde;o onde </span><span class="c34">C</span>e </span><span class="c34">Z</span>s&atilde;o iguais a 0 e </span><span class="c34">DC</span>&eacute; igual a 1 (houve um estouro no </span><i>nibble</span>menos significativo):</span></p><p class="c12"><span class="c34">C&oacute;digo 8.4 -</span>Exemplo do uso da instru&ccedil;&atilde;o </span><span class="c3">ADDLW</span>para <span class="c47 c6 c34">C</span>=0, <span class="c47 c6 c34">DC</span>=1 e <span class="c47 c6 c34">Z</span>=0</span></p><a id="t.2876286265ca29702a086cc7fcd1f6e1b3f8e387"></a><a id="t.67"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c8">1 </span><span class="c42 c8 c76">; INSTRUCAO: ADDLW</span></p><p class="c19"><span class="c8">2 </span><span class="c42 c8 c76">; ADICIONA UM LITERAL (NUMERO) AO CONTEUDO DO REG. W</span></p><p class="c19"><span class="c8">3 </span><span class="c9">MOVLW</span><span class="c8"> </span><span class="c42 c8 c54">.31</span></p><p class="c19"><span class="c8">4 </span><span class="c9">ADDLW</span><span class="c8"> </span><span class="c42 c8 c54">.1</span></p><p class="c19"><span class="c8">5 </span><span class="c42 c8 c76">; O RESULTADO ARMAZENADO EM W SERA 32</span></p><p class="c19 c14"><span class="c2"></span></p></td></tr></tbody></table><p class="c11">A Tabela 8.4 exibe o processo de adi&ccedil;&atilde;o para o caso do estouro de nibble menos significativo, isto &eacute;, quando o valor dos 4 bits menos significativos passarem de qualquer valor diferente de zero para zero.</p><p class="c12"><span class="c34">Tabela 8.4 - </span>Exemplo de adi&ccedil;&atilde;o de dois n&uacute;meros naturais</span></p><a id="t.e2705d025854d4d361ec5729ddb1c48165a6570d"></a><a id="t.68"></a><table class="c56"><tbody><tr class="c21"><td class="c22"><p class="c1"><span class="c42 c47 c34 c53">C</span></p></td><td class="c61"><p class="c1"><span class="c26">bit 7</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 6</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 5</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 4</span></p></td><td class="c79"><p class="c1"><span class="c26">bit 3</span></p></td><td class="c46"><p class="c1"><span class="c26">bit 2</span></p></td><td class="c41"><p class="c1"><span class="c26">bit 1</span></p></td><td class="c41"><p class="c1"><span class="c26">bit 0</span></p></td><td class="c15"><p class="c1 c14"><span class="c26"></span></p></td><td class="c57"><p class="c1 c14"><span class="c26"></span></p></td><td class="c57"><p class="c1 c14"><span class="c26"></td>
</tr>
<tr class="c21"><td class="c22"><p class="c1"><span class="c2">0</span></p></td><td class="c61"><p class="c1"><span class="c2">0</span></p></td><td class="c66"><p class="c1"><span class="c2">0</span></p></td><td class="c66"><p class="c1"><span class="c2">0</span></p></td><td class="c66"><p class="c1"><span class="c2">1</span></p></td><td class="c79"><p class="c1"><span class="c2">1</span></p></td><td class="c46"><p class="c1"><span class="c2">1</span></p></td><td class="c41"><p class="c1"><span class="c2">1</span></p></td><td class="c41"><p class="c1"><span class="c2">1</span></p></td><td class="c15"><p class="c1"><span class="c26">=</span></p></td><td class="c57"><p class="c1"><span class="c8">31</span><span class="c63 c8 c62 c53">10</span></p></td><td class="c57"><p class="c1"><span class="c2">0x1F</td>
</tr>
<tr class="c21"><td class="c22"><p class="c1"><span class="c2">0</span></p></td><td class="c61"><p class="c1"><span class="c2">0</span></p></td><td class="c66"><p class="c1"><span class="c2">0</span></p></td><td class="c66"><p class="c1"><span class="c2">0</span></p></td><td class="c66"><p class="c1"><span class="c2">0</span></p></td><td class="c79"><p class="c1"><span class="c2">0</span></p></td><td class="c46"><p class="c1"><span class="c2">0</span></p></td><td class="c41"><p class="c1"><span class="c2">0</span></p></td><td class="c41"><p class="c1"><span class="c2">1</span></p></td><td class="c15"><p class="c1"><span class="c26">=</span></p></td><td class="c57"><p class="c1"><span class="c8">1</span><span class="c8 c62">10</span></p></td><td class="c57"><p class="c1"><span class="c2">0x01</span></p></td></tr><tr class="c51"><td class="c68" colspan="12" rowspan="1"><p class="c1"><span class="c26">ADI&Ccedil;&Atilde;O</td>
</tr>
<tr class="c21"><td class="c22"><p class="c1"><span class="c2">0</span></p></td><td class="c61"><p class="c1"><span class="c2">0</span></p></td><td class="c66"><p class="c1"><span class="c2">0</span></p></td><td class="c66"><p class="c1"><span class="c2">1</span></p></td><td class="c66"><p class="c1"><span class="c2">0</span></p></td><td class="c79"><p class="c1"><span class="c2">0</span></p></td><td class="c46"><p class="c1"><span class="c2">0</span></p></td><td class="c41"><p class="c1"><span class="c2">0</span></p></td><td class="c41"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c26">=</span></p></td><td class="c57"><p class="c1"><span class="c8">32</span><span class="c8 c62">10</span></p></td><td class="c57"><p class="c1"><span class="c2">0x20</span></p></td></tr></tbody></table><p class="c11">A instru&ccedil;&atilde;o </span><span class="c3">ADDWF</span><span class="c47 c6 c34">f,d</span>&eacute; respons&aacute;vel por adicionar o conte&uacute;do do registrador de endere&ccedil;o/nome/r&oacute;tulo <span class="c47 c6 c34">f</span>ao conte&uacute;do do registrador </span><span class="c6 c34 c37">W</span>e o resultado desta opera&ccedil;&atilde;o &eacute; armazenado em </span><span class="c6 c34 c37">W</span>se <span class="c47 c6 c34">d</span>=0</span>e em <span class="c47 c6 c34">f</span>se <span class="c47 c6 c34">d</span>=1</span>, sendo que se n&atilde;o houver a inclus&atilde;o de <span class="c47 c6 c34">d</span>, <span class="c47 c6 c34">d</span>ter&aacute; o valor impl&iacute;cito 1. Essa instru&ccedil;&atilde;o afeta os bits <span class="c47 c6 c34">C</span>, <span class="c47 c6 c34">DC</span>e <span class="c47 c6 c34">Z</span>do registrador <span class="c47 c6 c34">STATUS</span>de forma semelhante &agrave; instru&ccedil;&atilde;o </span><span class="c3">ADDLW</p><p class="c11">Um exemplo do uso desta instru&ccedil;&atilde;o pode ser visto no C&oacute;digo 8.5.</p><p class="c12"><span class="c34">C&oacute;digo 8.5 -</span>Exemplo do uso da instru&ccedil;&atilde;o </span><span class="c3">ADDWF</span></p><a id="t.d1c57015862fd08c2f3b348e5f05beb775189fef"></a><a id="t.69"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c42 c8 c76">; INSTRUCAO: ADDWF</span></p><p class="c19"><span class="c42 c8 c76">; ADICIONA O CONTEUDO DO REG. W AO CONTEUDO DO REG. f</span></p><p class="c19"><span class="c42 c8 c76">; E COLOCA EM d</span></p><p class="c19"><span class="c9">MOVLW</span><span class="c8"> </span><span class="c42 c8 c54">.5</span></p><p class="c19"><span class="c9">MOVWF</span><span class="c8"> </span><span class="c42 c8 c54">0x0C</span></p><p class="c19"><span class="c9">MOVLW</span><span class="c8"> </span><span class="c42 c8 c54">.4</span></p><p class="c19"><span class="c9">ADDWF</span><span class="c8"> </span><span class="c42 c8 c54">0x0C, 0</span></p><p class="c19 c14"><span class="c2"></span></p></td></tr></tbody></table><p class="c11">A instru&ccedil;&atilde;o </span><span class="c3">SUBLW</span><span class="c47 c6 c34">k</span>&eacute; respons&aacute;vel por subtrair o literal <span class="c47 c6 c34">k</span>(n&uacute;mero de 8 bits) do conte&uacute;do do registrador </span><span class="c6 c34 c37">W</span>. Essa instru&ccedil;&atilde;o afeta os bits <span class="c47 c6 c34">C</span>, <span class="c47 c6 c34">DC</span>e <span class="c47 c6 c34">Z</span>do registrador <span class="c47 c6 c34">STATUS</p><p class="c11">O C&oacute;digo 8.6 exibe um exemplo quando o </span><span class="c59 c6">minuendo for maior que o subtraendo</span>, 15 - 7.</p><p class="c12"><span class="c34">C&oacute;digo 8.6 -</span>Exemplo do uso da instru&ccedil;&atilde;o </span><span class="c3">SUBLW</span></p><a id="t.ecc04a0bf8024c2dd225c7e52bcde6655b48f2cf"></a><a id="t.70"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c42 c8 c76">; INSTRUCAO: SUBLW</span></p><p class="c19"><span class="c42 c8 c76">; SUBTRAI CONTEUDO DO REG. W DO LITERAL (NUMERO)</span></p><p class="c19"><span class="c42 c8 c76">; E ARMAZENA NO REG. W</span></p><p class="c19"><span class="c9">MOVLW</span><span class="c8"> </span><span class="c42 c8 c54">.15</span></p><p class="c19"><span class="c9">SUBLW</span><span class="c8"> </span><span class="c42 c8 c54">.7</span></p><p class="c19 c14"><span class="c2"></span></p></td></tr></tbody></table><p class="c11">Assim pode-se ver pelas Tabela 8.5 a Tabela 8.9 que 15 - 7 &eacute; igual a 8.</p><p class="c12"><span class="c34">Tabela 8.5 - </span>N&uacute;mero 15 em bin&aacute;rio</span></p><a id="t.173efabae182ca2c06db6ffd560542a598dd4009"></a><a id="t.71"></a><table class="c56"><tbody><tr class="c21"><td class="c22"><p class="c1"><span class="c26">C</span></p></td><td class="c61"><p class="c1"><span class="c26">bit 7</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 6</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 5</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 4</span></p></td><td class="c79"><p class="c1"><span class="c26">bit 3</span></p></td><td class="c46"><p class="c1"><span class="c26">bit 2</span></p></td><td class="c41"><p class="c1"><span class="c26">bit 1</span></p></td><td class="c41"><p class="c1"><span class="c26">bit 0</span></p></td><td class="c15"><p class="c1 c14"><span class="c26"></span></p></td><td class="c57"><p class="c1 c14"><span class="c26"></span></p></td><td class="c57"><p class="c1 c14"><span class="c26"></td>
</tr>
<tr class="c21"><td class="c22"><p class="c1"><span class="c2">0</span></p></td><td class="c61"><p class="c1"><span class="c2">0</span></p></td><td class="c66"><p class="c1"><span class="c2">0</span></p></td><td class="c66"><p class="c1"><span class="c2">0</span></p></td><td class="c66"><p class="c1"><span class="c2">0</span></p></td><td class="c79"><p class="c1"><span class="c2">1</span></p></td><td class="c46"><p class="c1"><span class="c2">1</span></p></td><td class="c41"><p class="c1"><span class="c2">1</span></p></td><td class="c41"><p class="c1"><span class="c2">1</span></p></td><td class="c15"><p class="c1"><span class="c5">=</span></p></td><td class="c57"><p class="c1"><span>15</span><span class="c63 c62 c50 c53 c44">10</span></p></td><td class="c57"><p class="c1"><span class="c2">0x0F</span></p></td></tr></tbody></table><p class="c12"><span class="c34">Tabela 8.6 - </span>N&uacute;mero 7 em bin&aacute;rio</span></p><a id="t.9761d6d7539cf10f008563e93b0c5e680cb00a54"></a><a id="t.72"></a><table class="c56"><tbody><tr class="c21"><td class="c22"><p class="c1"><span class="c26">C</span></p></td><td class="c61"><p class="c1"><span class="c26">bit 7</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 6</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 5</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 4</span></p></td><td class="c79"><p class="c1"><span class="c26">bit 3</span></p></td><td class="c46"><p class="c1"><span class="c26">bit 2</span></p></td><td class="c41"><p class="c1"><span class="c26">bit 1</span></p></td><td class="c41"><p class="c1"><span class="c26">bit 0</span></p></td><td class="c98"><p class="c1 c14"><span class="c26"></span></p></td><td class="c186"><p class="c1 c14"><span class="c26"></span></p></td><td class="c180"><p class="c1 c14"><span class="c26"></td>
</tr>
<tr class="c21"><td class="c22"><p class="c1"><span class="c2">0</span></p></td><td class="c61"><p class="c1"><span class="c2">0</span></p></td><td class="c66"><p class="c1"><span class="c2">0</span></p></td><td class="c66"><p class="c1"><span class="c2">0</span></p></td><td class="c66"><p class="c1"><span class="c2">0</span></p></td><td class="c79"><p class="c1"><span class="c2">0</span></p></td><td class="c46"><p class="c1"><span class="c2">1</span></p></td><td class="c41"><p class="c1"><span class="c2">1</span></p></td><td class="c41"><p class="c1"><span class="c2">1</span></p></td><td class="c98"><p class="c1"><span class="c5">=</span></p></td><td class="c186"><p class="c1"><span>7</span><span class="c63 c62 c50 c53 c44">10</span></p></td><td class="c180"><p class="c1"><span class="c2">0x07</span></p></td></tr></tbody></table><p class="c12"><span class="c34">Tabela 8.7 - </span>Complemento do n&uacute;mero 7 em bin&aacute;rio</span></p><a id="t.8bbc758e29a0a61dae3f295da904621c8cfafa1c"></a><a id="t.73"></a><table class="c56"><tbody><tr class="c21"><td class="c22"><p class="c1"><span class="c26">C</span></p></td><td class="c61"><p class="c1"><span class="c26">bit 7</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 6</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 5</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 4</span></p></td><td class="c79"><p class="c1"><span class="c26">bit 3</span></p></td><td class="c46"><p class="c1"><span class="c26">bit 2</span></p></td><td class="c41"><p class="c1"><span class="c26">bit 1</span></p></td><td class="c41"><p class="c1"><span class="c26">bit 0</span></p></td><td class="c128"><p class="c1 c14"><span class="c26"></span></p></td><td class="c111"><p class="c1 c14"><span class="c26"></span></p></td><td class="c205"><p class="c1 c14"><span class="c26"></td>
</tr>
<tr class="c21"><td class="c22"><p class="c1"><span class="c2">0</span></p></td><td class="c61"><p class="c1"><span class="c2">1</span></p></td><td class="c66"><p class="c1"><span class="c2">1</span></p></td><td class="c66"><p class="c1"><span class="c2">1</span></p></td><td class="c66"><p class="c1"><span class="c2">1</span></p></td><td class="c79"><p class="c1"><span class="c2">1</span></p></td><td class="c46"><p class="c1"><span class="c2">0</span></p></td><td class="c41"><p class="c1"><span class="c2">0</span></p></td><td class="c41"><p class="c1"><span class="c2">0</span></p></td><td class="c128"><p class="c1"><span class="c5">=</span></p></td><td class="c111"><p class="c1"><span>248</span><span class="c63 c62 c50 c53 c44">10</span></p></td><td class="c205"><p class="c1"><span class="c2">0xF8</span></p></td></tr></tbody></table><p class="c12"><span class="c34">Tabela 8.8 - </span>Complemento do n&uacute;mero 7 em bin&aacute;rio + 1 que &eacute; igual a -7</span></p><a id="t.b5773dc5fd23b1f83ff1a77d4f62b1cc598b388f"></a><a id="t.74"></a><table class="c56"><tbody><tr class="c21"><td class="c22"><p class="c1"><span class="c26">C</span></p></td><td class="c61"><p class="c1"><span class="c26">bit 7</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 6</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 5</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 4</span></p></td><td class="c79"><p class="c1"><span class="c26">bit 3</span></p></td><td class="c46"><p class="c1"><span class="c26">bit 2</span></p></td><td class="c41"><p class="c1"><span class="c26">bit 1</span></p></td><td class="c41"><p class="c1"><span class="c26">bit 0</span></p></td><td class="c15"><p class="c1 c14"><span class="c26"></span></p></td><td class="c57"><p class="c1 c14"><span class="c26"></span></p></td><td class="c57"><p class="c1 c14"><span class="c26"></td>
</tr>
<tr class="c21"><td class="c22"><p class="c1"><span class="c2">0</span></p></td><td class="c61"><p class="c1"><span class="c2">1</span></p></td><td class="c66"><p class="c1"><span class="c2">1</span></p></td><td class="c66"><p class="c1"><span class="c2">1</span></p></td><td class="c66"><p class="c1"><span class="c2">1</span></p></td><td class="c79"><p class="c1"><span class="c2">1</span></p></td><td class="c46"><p class="c1"><span class="c2">0</span></p></td><td class="c41"><p class="c1"><span class="c2">0</span></p></td><td class="c41"><p class="c1"><span class="c2">1</span></p></td><td class="c15"><p class="c1"><span class="c5">=</span></p></td><td class="c57"><p class="c1"><span>249</span><span class="c63 c62 c50 c53 c44">10</span></p></td><td class="c57"><p class="c1"><span class="c2">0xF9</span></p></td></tr></tbody></table><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Tabela 8.9 - </span>Subtra&ccedil;&atilde;o de 15 - 7 transformado em 15 + (-7)</span></p><a id="t.3bf488f6094e6d3161c78c284341637194b692fd"></a><a id="t.75"></a><table class="c56"><tbody><tr class="c21"><td class="c22"><p class="c1"><span class="c26">C</span></p></td><td class="c61"><p class="c1"><span class="c26">bit 7</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 6</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 5</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 4</span></p></td><td class="c79"><p class="c1"><span class="c26">bit 3</span></p></td><td class="c46"><p class="c1"><span class="c26">bit 2</span></p></td><td class="c41"><p class="c1"><span class="c26">bit 1</span></p></td><td class="c41"><p class="c1"><span class="c26">bit 0</span></p></td><td class="c106"><p class="c1 c14"><span class="c26"></span></p></td><td class="c41"><p class="c1 c14"><span class="c26"></span></p></td><td class="c88"><p class="c1 c14"><span class="c26"></td>
</tr>
<tr class="c21"><td class="c22"><p class="c1"><span class="c2">0</span></p></td><td class="c61"><p class="c1"><span class="c2">0</span></p></td><td class="c66"><p class="c1"><span class="c2">0</span></p></td><td class="c66"><p class="c1"><span class="c2">0</span></p></td><td class="c66"><p class="c1"><span class="c2">0</span></p></td><td class="c79"><p class="c1"><span class="c2">1</span></p></td><td class="c46"><p class="c1"><span class="c2">1</span></p></td><td class="c41"><p class="c1"><span class="c2">1</span></p></td><td class="c41"><p class="c1"><span class="c2">1</span></p></td><td class="c106"><p class="c1"><span class="c5">=</span></p></td><td class="c41"><p class="c1"><span>15</span><span class="c63 c62 c50 c53 c44">10</span></p></td><td class="c88"><p class="c1"><span class="c2">0x0F</td>
</tr>
<tr class="c21"><td class="c22"><p class="c1"><span class="c2">0</span></p></td><td class="c61"><p class="c1"><span class="c2">1</span></p></td><td class="c66"><p class="c1"><span class="c2">1</span></p></td><td class="c66"><p class="c1"><span class="c2">1</span></p></td><td class="c66"><p class="c1"><span class="c2">1</span></p></td><td class="c79"><p class="c1"><span class="c2">1</span></p></td><td class="c46"><p class="c1"><span class="c2">0</span></p></td><td class="c41"><p class="c1"><span class="c2">0</span></p></td><td class="c41"><p class="c1"><span class="c2">1</span></p></td><td class="c106"><p class="c1"><span class="c5">=</span></p></td><td class="c41"><p class="c1"><span>-7</span><span class="c62">10</span></p></td><td class="c88"><p class="c1"><span class="c2">0xF9</span></p></td></tr><tr class="c51"><td class="c114" colspan="12" rowspan="1"><p class="c1"><span class="c26">ADI&Ccedil;&Atilde;O</td>
</tr>
<tr class="c21"><td class="c22"><p class="c1"><span class="c2">1</span></p></td><td class="c61"><p class="c1"><span class="c2">0</span></p></td><td class="c66"><p class="c1"><span class="c2">0</span></p></td><td class="c66"><p class="c1"><span class="c2">0</span></p></td><td class="c66"><p class="c1"><span class="c2">0</span></p></td><td class="c79"><p class="c1"><span class="c2">1</span></p></td><td class="c46"><p class="c1"><span class="c2">0</span></p></td><td class="c41"><p class="c1"><span class="c2">0</span></p></td><td class="c41"><p class="c1"><span class="c2">0</span></p></td><td class="c106"><p class="c1"><span class="c5">=</span></p></td><td class="c41"><p class="c1"><span>8</span><span class="c62">10</span></p></td><td class="c88"><p class="c1"><span class="c2">0x08</span></p></td></tr></tbody></table><p class="c11">Agora veremos pelo C&oacute;digo 8.7 um exemplo quando o </span><span class="c59 c6">minuendo for menor que o subtraendo</span>, 7 - 15.</p><p class="c12"><span class="c34">C&oacute;digo 8.7 -</span>Exemplo do uso da instru&ccedil;&atilde;o </span><span class="c3">SUBLW</span></p><a id="t.f956b2aea6b2e922b254069d26ba650ce878e7ae"></a><a id="t.76"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c42 c8 c76">; INSTRUCAO: SUBLW</span></p><p class="c19"><span class="c42 c8 c76">; SUBTRAI CONTEUDO DO REG. W DO LITERAL (NUMERO)</span></p><p class="c19"><span class="c42 c8 c76">; E ARMAZENA NO REG. W</span></p><p class="c19"><span class="c9">MOVLW</span><span class="c8"> </span><span class="c42 c8 c54">.7</span></p><p class="c19"><span class="c9">SUBLW</span><span class="c8"> </span><span class="c42 c8 c54">.15</span></p><p class="c19 c14"><span class="c2"></span></p></td></tr></tbody></table><p class="c11">Assim pode-se ver pelas Tabela 8.10 a Tabela 8.14 que 7 - 15 &eacute; igual a 248.</p><p class="c12"><span class="c34">Tabela 8.10 - </span>N&uacute;mero 7 em bin&aacute;rio</span></p><a id="t.9761d6d7539cf10f008563e93b0c5e680cb00a54"></a><a id="t.77"></a><table class="c56"><tbody><tr class="c21"><td class="c22"><p class="c1"><span class="c26">C</span></p></td><td class="c61"><p class="c1"><span class="c26">bit 7</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 6</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 5</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 4</span></p></td><td class="c79"><p class="c1"><span class="c26">bit 3</span></p></td><td class="c46"><p class="c1"><span class="c26">bit 2</span></p></td><td class="c41"><p class="c1"><span class="c26">bit 1</span></p></td><td class="c41"><p class="c1"><span class="c26">bit 0</span></p></td><td class="c15"><p class="c1 c14"><span class="c26"></span></p></td><td class="c57"><p class="c1 c14"><span class="c26"></span></p></td><td class="c57"><p class="c1 c14"><span class="c26"></td>
</tr>
<tr class="c21"><td class="c22"><p class="c1"><span class="c2">0</span></p></td><td class="c61"><p class="c1"><span class="c2">0</span></p></td><td class="c66"><p class="c1"><span class="c2">0</span></p></td><td class="c66"><p class="c1"><span class="c2">0</span></p></td><td class="c66"><p class="c1"><span class="c2">0</span></p></td><td class="c79"><p class="c1"><span class="c2">0</span></p></td><td class="c46"><p class="c1"><span class="c2">1</span></p></td><td class="c41"><p class="c1"><span class="c2">1</span></p></td><td class="c41"><p class="c1"><span class="c2">1</span></p></td><td class="c15"><p class="c1"><span class="c5">=</span></p></td><td class="c57"><p class="c1"><span>7</span><span class="c63 c62 c50 c53 c44">10</span></p></td><td class="c57"><p class="c1"><span class="c2">0x07</span></p></td></tr></tbody></table><p class="c12"><span class="c34">Tabela 8.11 - </span>N&uacute;mero 15 em bin&aacute;rio</span></p><a id="t.173efabae182ca2c06db6ffd560542a598dd4009"></a><a id="t.78"></a><table class="c56"><tbody><tr class="c21"><td class="c22"><p class="c1"><span class="c26">C</span></p></td><td class="c61"><p class="c1"><span class="c26">bit 7</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 6</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 5</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 4</span></p></td><td class="c79"><p class="c1"><span class="c26">bit 3</span></p></td><td class="c46"><p class="c1"><span class="c26">bit 2</span></p></td><td class="c41"><p class="c1"><span class="c26">bit 1</span></p></td><td class="c41"><p class="c1"><span class="c26">bit 0</span></p></td><td class="c98"><p class="c1 c14"><span class="c26"></span></p></td><td class="c186"><p class="c1 c14"><span class="c26"></span></p></td><td class="c180"><p class="c1 c14"><span class="c26"></td>
</tr>
<tr class="c21"><td class="c22"><p class="c1"><span class="c2">0</span></p></td><td class="c61"><p class="c1"><span class="c2">0</span></p></td><td class="c66"><p class="c1"><span class="c2">0</span></p></td><td class="c66"><p class="c1"><span class="c2">0</span></p></td><td class="c66"><p class="c1"><span class="c2">0</span></p></td><td class="c79"><p class="c1"><span class="c2">1</span></p></td><td class="c46"><p class="c1"><span class="c2">1</span></p></td><td class="c41"><p class="c1"><span class="c2">1</span></p></td><td class="c41"><p class="c1"><span class="c2">1</span></p></td><td class="c98"><p class="c1"><span class="c5">=</span></p></td><td class="c186"><p class="c1"><span>15</span><span class="c63 c62 c50 c53 c44">10</span></p></td><td class="c180"><p class="c1"><span class="c2">0x0F</span></p></td></tr></tbody></table><p class="c12"><span class="c34">Tabela 8.12 - </span>Complemento do n&uacute;mero 15 em bin&aacute;rio</span></p><a id="t.156f6b4e340a86d7c620fb044fb6263cbe1b5add"></a><a id="t.79"></a><table class="c56"><tbody><tr class="c21"><td class="c22"><p class="c1"><span class="c26">C</span></p></td><td class="c61"><p class="c1"><span class="c26">bit 7</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 6</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 5</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 4</span></p></td><td class="c79"><p class="c1"><span class="c26">bit 3</span></p></td><td class="c46"><p class="c1"><span class="c26">bit 2</span></p></td><td class="c41"><p class="c1"><span class="c26">bit 1</span></p></td><td class="c41"><p class="c1"><span class="c26">bit 0</span></p></td><td class="c128"><p class="c1 c14"><span class="c26"></span></p></td><td class="c111"><p class="c1 c14"><span class="c26"></span></p></td><td class="c205"><p class="c1 c14"><span class="c26"></td>
</tr>
<tr class="c21"><td class="c22"><p class="c1"><span class="c2">0</span></p></td><td class="c61"><p class="c1"><span class="c2">1</span></p></td><td class="c66"><p class="c1"><span class="c2">1</span></p></td><td class="c66"><p class="c1"><span class="c2">1</span></p></td><td class="c66"><p class="c1"><span class="c2">1</span></p></td><td class="c79"><p class="c1"><span class="c2">0</span></p></td><td class="c46"><p class="c1"><span class="c2">0</span></p></td><td class="c41"><p class="c1"><span class="c2">0</span></p></td><td class="c41"><p class="c1"><span class="c2">0</span></p></td><td class="c128"><p class="c1"><span class="c5">=</span></p></td><td class="c111"><p class="c1"><span>240</span><span class="c63 c62 c50 c53 c44">10</span></p></td><td class="c205"><p class="c1"><span class="c2">0xF0</span></p></td></tr></tbody></table><p class="c12"><span class="c34">Tabela 8.13 - </span>Complemento do n&uacute;mero 15 em bin&aacute;rio + 1 que &eacute; igual a -15</span></p><a id="t.d9525e0fe7de491fda1f5743b8a07eca668f8133"></a><a id="t.80"></a><table class="c56"><tbody><tr class="c21"><td class="c22"><p class="c1"><span class="c26">C</span></p></td><td class="c61"><p class="c1"><span class="c26">bit 7</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 6</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 5</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 4</span></p></td><td class="c79"><p class="c1"><span class="c26">bit 3</span></p></td><td class="c46"><p class="c1"><span class="c26">bit 2</span></p></td><td class="c41"><p class="c1"><span class="c26">bit 1</span></p></td><td class="c41"><p class="c1"><span class="c26">bit 0</span></p></td><td class="c15"><p class="c1 c14"><span class="c26"></span></p></td><td class="c57"><p class="c1 c14"><span class="c26"></span></p></td><td class="c57"><p class="c1 c14"><span class="c26"></td>
</tr>
<tr class="c21"><td class="c22"><p class="c1"><span class="c2">0</span></p></td><td class="c61"><p class="c1"><span class="c2">1</span></p></td><td class="c66"><p class="c1"><span class="c2">1</span></p></td><td class="c66"><p class="c1"><span class="c2">1</span></p></td><td class="c66"><p class="c1"><span class="c2">1</span></p></td><td class="c79"><p class="c1"><span class="c2">0</span></p></td><td class="c46"><p class="c1"><span class="c2">0</span></p></td><td class="c41"><p class="c1"><span class="c2">0</span></p></td><td class="c41"><p class="c1"><span class="c2">1</span></p></td><td class="c15"><p class="c1"><span class="c5">=</span></p></td><td class="c57"><p class="c1"><span>241</span><span class="c63 c62 c50 c53 c44">10</span></p></td><td class="c57"><p class="c1"><span class="c2">0xF1</span></p></td></tr></tbody></table><p class="c12"><span class="c34">Tabela 8.14 - </span>Subtra&ccedil;&atilde;o de 7 - 15 transformado em 7 + (-15)</span></p><a id="t.bccc5f3c7ec228693c4a649d3734aedc1ce072db"></a><a id="t.81"></a><table class="c56"><tbody><tr class="c21"><td class="c22"><p class="c1"><span class="c26">C</span></p></td><td class="c61"><p class="c1"><span class="c26">bit 7</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 6</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 5</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 4</span></p></td><td class="c79"><p class="c1"><span class="c26">bit 3</span></p></td><td class="c46"><p class="c1"><span class="c26">bit 2</span></p></td><td class="c41"><p class="c1"><span class="c26">bit 1</span></p></td><td class="c41"><p class="c1"><span class="c26">bit 0</span></p></td><td class="c106"><p class="c1 c14"><span class="c26"></span></p></td><td class="c41"><p class="c1 c14"><span class="c26"></span></p></td><td class="c88"><p class="c1 c14"><span class="c26"></td>
</tr>
<tr class="c21"><td class="c22"><p class="c1"><span class="c2">0</span></p></td><td class="c61"><p class="c1"><span class="c2">0</span></p></td><td class="c66"><p class="c1"><span class="c2">0</span></p></td><td class="c66"><p class="c1"><span class="c2">0</span></p></td><td class="c66"><p class="c1"><span class="c2">0</span></p></td><td class="c79"><p class="c1"><span class="c2">0</span></p></td><td class="c46"><p class="c1"><span class="c2">1</span></p></td><td class="c41"><p class="c1"><span class="c2">1</span></p></td><td class="c41"><p class="c1"><span class="c2">1</span></p></td><td class="c106"><p class="c1"><span class="c5">=</span></p></td><td class="c41"><p class="c1"><span>7</span><span class="c63 c62 c50 c53 c44">10</span></p></td><td class="c88"><p class="c1"><span class="c2">0x07</td>
</tr>
<tr class="c21"><td class="c22"><p class="c1"><span class="c2">0</span></p></td><td class="c61"><p class="c1"><span class="c2">1</span></p></td><td class="c66"><p class="c1"><span class="c2">1</span></p></td><td class="c66"><p class="c1"><span class="c2">1</span></p></td><td class="c66"><p class="c1"><span class="c2">1</span></p></td><td class="c79"><p class="c1"><span class="c2">0</span></p></td><td class="c46"><p class="c1"><span class="c2">0</span></p></td><td class="c41"><p class="c1"><span class="c2">0</span></p></td><td class="c41"><p class="c1"><span class="c2">1</span></p></td><td class="c106"><p class="c1"><span class="c5">=</span></p></td><td class="c41"><p class="c1"><span>-15</span><span class="c62">10</span></p></td><td class="c88"><p class="c1"><span class="c2">0xF1</span></p></td></tr><tr class="c51"><td class="c114" colspan="12" rowspan="1"><p class="c1"><span class="c26">ADI&Ccedil;&Atilde;O</td>
</tr>
<tr class="c21"><td class="c22"><p class="c1"><span class="c2">0</span></p></td><td class="c61"><p class="c1"><span class="c2">1</span></p></td><td class="c66"><p class="c1"><span class="c2">1</span></p></td><td class="c66"><p class="c1"><span class="c2">1</span></p></td><td class="c66"><p class="c1"><span class="c2">1</span></p></td><td class="c79"><p class="c1"><span class="c2">1</span></p></td><td class="c46"><p class="c1"><span class="c2">0</span></p></td><td class="c41"><p class="c1"><span class="c2">0</span></p></td><td class="c41"><p class="c1"><span class="c2">0</span></p></td><td class="c106"><p class="c1"><span class="c5">=</span></p></td><td class="c41"><p class="c1"><span>248</span><span class="c62">10</span></p></td><td class="c88"><p class="c1"><span class="c2">0xF8</span></p></td></tr></tbody></table><p class="c11">A instru&ccedil;&atilde;o </span><span class="c3">SUBWF</span><span class="c47 c6 c34">f,d</span>&eacute; respons&aacute;vel por subtrair o conte&uacute;do do registrador de endere&ccedil;o/nome/r&oacute;tulo <span class="c47 c6 c34">f</span>do conte&uacute;do do registrador </span><span class="c6 c34 c37">W</span>e o resultado da opera&ccedil;&atilde;o &eacute; armazenado em </span><span class="c6 c34 c37">W</span>se <span class="c47 c6 c34">d</span>=0</span>ou no registrador <span class="c47 c6 c34">f</span>se <span class="c47 c6 c34">d</span>=1</span>. Essa instru&ccedil;&atilde;o afeta os bits <span class="c47 c6 c34">C</span>, <span class="c47 c6 c34">DC</span>e <span class="c47 c6 c34">Z</span>do registrador <span class="c47 c6 c34">STATUS</p><p class="c11">No C&oacute;digo 8.8 pode-se um exemplo da instru&ccedil;&atilde;o </span><span class="c3">SUBLW.</p><p class="c12"><span class="c34">C&oacute;digo 8.8 -</span>Exemplo do uso da instru&ccedil;&atilde;o </span><span class="c3">SUBLW</span></p><a id="t.4d6c30065340ba5706377ed50d56b7ab939fd66e"></a><a id="t.82"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c42 c8 c76">; INSTRUCAO: SUBWF</span></p><p class="c19"><span class="c42 c8 c76">; SUBTRAI CONTEUDO DO REG. W DO CONTEUDO DO REG. f E COLOCA EM d</span></p><p class="c19"><span class="c9">MOVLW</span><span class="c8"> </span><span class="c42 c8 c54">.15</span></p><p class="c19"><span class="c9">MOVWF</span><span class="c8"> </span><span class="c42 c8 c54">0x0C</span></p><p class="c19"><span class="c9">MOVLW</span><span class="c8"> </span><span class="c42 c8 c54">.7</span></p><p class="c19"><span class="c9">SUBWF</span><span class="c8"> </span><span class="c8 c54">0x0C</span><span class="c8">, </span><span class="c42 c8 c54">0</span></p><p class="c19 c14"><span class="c2"></span></p></td></tr></tbody></table><p class="c11">A instru&ccedil;&atilde;o </span><span class="c3">ANDLW</span><span class="c47 c6 c34">k</span>&eacute; respons&aacute;vel por aplicar a opera&ccedil;&atilde;o </span><span class="c6 c34 c37">e</span>l&oacute;gico ao literal <span class="c47 c6 c34">k</span>(n&uacute;mero de 8 bits) e ao conte&uacute;do do registrador </span><span class="c6 c34 c37">W</span>. O resultado desta opera&ccedil;&atilde;o &eacute; armazenado no registrador </span><span class="c6 c34 c37">W</p><p class="c11">A Tabela 8.15 verdade exibe o processo da opera&ccedil;&atilde;o </span><span class="c6 c34 c37">e</span>l&oacute;gico:</span></p><p class="c12"><span class="c34">Tabela 8.15 -</span>Tabela-verdade da opera&ccedil;&atilde;o </span><span class="c6 c34 c37">e</span>l&oacute;gico</span></p><a id="t.8e85914e7992e8b3a933a5414e5fd68b8143aa16"></a><a id="t.83"></a><table class="c56"><tbody><tr class="c196"><td class="c32"><p class="c1"><span class="c26">bit 1</span></p></td><td class="c32"><p class="c1"><span class="c26">bit 2</span></p></td><td class="c32"><p class="c1"><span class="c34">bit 1 [ </span><span class="c34 c37">E</span><span class="c34">]</span><span class="c26">bit 2</td>
</tr>
<tr>
								<td class="c32"><span class="c2">0</span></p></td><td class="c32"><p class="c1"><span class="c2">0</span></p></td><td class="c32"><p class="c1"><span class="c2">0</td>
</tr>
<tr>
								<td class="c32"><span class="c2">0</span></p></td><td class="c32"><p class="c1"><span class="c2">1</span></p></td><td class="c32"><p class="c1"><span class="c2">0</td>
</tr>
<tr>
								<td class="c32"><span class="c2">1</span></p></td><td class="c32"><p class="c1"><span class="c2">0</span></p></td><td class="c32"><p class="c1"><span class="c2">0</td>
</tr>
<tr>
								<td class="c32"><span class="c2">1</span></p></td><td class="c32"><p class="c1"><span class="c2">1</span></p></td><td class="c32"><p class="c1"><span class="c2">1</span></p></td></tr></tbody></table><p class="c11">O bit afetado nesta opera&ccedil;&atilde;o &eacute; o bit <span class="c47 c6 c34">Z</span>do registrador <span class="c47 c6 c34">STATUS</p><p class="c11">No C&oacute;digo 8.9 pode-se ver um exemplo da instru&ccedil;&atilde;o l&oacute;gica </span><span class="c9 c6">ANDLW</span>e na Tabela 8.16 o processo bit a bit.</p><p class="c12"><span class="c34">C&oacute;digo 8.9 -</span>Exemplo do uso da instru&ccedil;&atilde;o </span><span class="c9 c6">ANDLW</span></p><a id="t.96613eda1ad32ec49a1c0fdbcc61fa34e99ee506"></a><a id="t.84"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c42 c8 c76">; INSTRUCAO: ANDLW</span></p><p class="c19"><span class="c42 c8 c76">; APLICA O OPERADOR &lsquo;AND&rsquo; AO LITERAL (NUMERO) E TAMBEM</span></p><p class="c19"><span class="c42 c8 c76">; AO CONTEUDO DO REG. W E O RESULTADO ARMAZENA NO REG. W</span></p><p class="c19"><span class="c9">MOVLW</span><span class="c8"> </span><span class="c42 c8 c54">.7</span></p><p class="c19"><span class="c9">ANDLW</span><span class="c8"> </span><span class="c42 c8 c54">.10</span></p><p class="c19 c14"><span class="c2"></span></p></td></tr></tbody></table><p class="c12"><span class="c34">Tabela 8.16 - </span>Opera&ccedil;&atilde;o e l&oacute;gico dos n&uacute;meros 7</span><span class="c6 c62">10</span>e 10</span><span class="c6 c62">10</span></p><a id="t.95eadb929b87fce76ba86ca0c08fdd86a98615bd"></a><a id="t.85"></a><table class="c56"><tbody><tr class="c21"><td class="c15"><p class="c1"><span class="c26">bit 7</span></p></td><td class="c15"><p class="c1"><span class="c26">bit 6</span></p></td><td class="c15"><p class="c1"><span class="c26">bit 5</span></p></td><td class="c15"><p class="c1"><span class="c26">bit 4</span></p></td><td class="c15"><p class="c1"><span class="c26">bit 3</span></p></td><td class="c15"><p class="c1"><span class="c26">bit 2</span></p></td><td class="c15"><p class="c1"><span class="c26">bit 1</span></p></td><td class="c15"><p class="c1"><span class="c26">bit 0</span></p></td><td class="c15"><p class="c1 c14"><span class="c26"></span></p></td><td class="c15"><p class="c1 c14"><span class="c26"></span></p></td><td class="c15"><p class="c1 c14"><span class="c26"></td>
</tr>
<tr class="c21"><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">1</span></p></td><td class="c15"><p class="c1"><span class="c2">1</span></p></td><td class="c15"><p class="c1"><span class="c2">1</span></p></td><td class="c15"><p class="c1"><span class="c5">=</span></p></td><td class="c15"><p class="c1"><span>7</span><span class="c63 c62 c50 c53 c44">10</span></p></td><td class="c15"><p class="c1"><span class="c5">0x07</td>
</tr>
<tr class="c21"><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">1</span></p></td><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">1</span></p></td><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c5">=</span></p></td><td class="c15"><p class="c1"><span>10</span><span class="c62 c50 c53 c44 c63">10</span></p></td><td class="c15"><p class="c1"><span class="c5">0x0A</span></p></td></tr><tr class="c51"><td class="c68" colspan="11" rowspan="1"><p class="c1"><span class="c26">AND</td>
</tr>
<tr class="c21"><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">1</span></p></td><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">=</span></p></td><td class="c15"><p class="c1"><span class="c8">2</span><span class="c63 c8 c62 c53">10</span></p></td><td class="c15"><p class="c1"><span class="c2">0x02</span></p></td></tr></tbody></table><p class="c11">A instru&ccedil;&atilde;o </span><span class="c3">ANDWF</span><span class="c47 c6 c34">f,d</span>&eacute; respons&aacute;vel por aplicar a opera&ccedil;&atilde;o </span><span class="c6 c34 c37">e</span>l&oacute;gico ao conte&uacute;do do registrador <span class="c47 c6 c34">f</span>com o conte&uacute;do do registrador </span><span class="c6 c34 c37">W</span>e armazenar o resultado no registrador <span class="c47 c6 c34">f</span>se <span class="c47 c6 c34">d</span>=1</span>ou em </span><span class="c6 c34 c37">W</span>se <span class="c47 c6 c34">d</span>=0</span>. O bit afetado por essa instru&ccedil;&atilde;o &eacute; o bit <span class="c47 c6 c34">Z</span>do registrador <span class="c47 c6 c34">STATUS</p><p class="c11">O C&oacute;digo 8.10 exibe o exemplo de uso da instru&ccedil;&atilde;o </span><span class="c3">ANDWF</span>com valores em </span><span class="c6 c34 c37">W</span>e no registrador de endere&ccedil;o <span class="definesASM1">0x0C.</p><p class="c12"><span class="c34">C&oacute;digo 8.10 -</span>Exemplo do uso da instru&ccedil;&atilde;o </span><span class="c3">ANDWF</span></p><a id="t.b7b3a44a367eae43e79d47c96af22495e9af48e7"></a><a id="t.86"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c42 c8 c76">; INSTRUCAO: ANDWF</span></p><p class="c19"><span class="c42 c8 c76">; APLICA O OPERADOR &lsquo;AND&rsquo; AO CONTEUDO DO REG. W E</span></p><p class="c19"><span class="c42 c8 c76">; CONTEUDO DO REG. f E COLOCA EM d</span></p><p class="c19"><span class="c9">MOVLW</span><span class="c8"> </span><span class="c42 c8 c54">.7</span></p><p class="c19"><span class="c9">MOVWF</span><span class="c8"> </span><span class="c42 c8 c54">0x0C</span></p><p class="c19"><span class="c9">MOVLW</span><span class="c8"> </span><span class="c42 c8 c54">.10</span></p><p class="c19"><span class="c9">ANDWF</span><span class="c8"> </span><span class="c8 c54">0x0C</span><span class="c8">, </span><span class="c42 c8 c54">0</span></p><p class="c19 c14"><span class="c2"></span></p></td></tr></tbody></table><p class="c11">A instru&ccedil;&atilde;o </span><span class="c3">IORLW</span><span class="c47 c6 c34">k</span>&eacute; respons&aacute;vel por aplicar a opera&ccedil;&atilde;o </span><span class="c6 c34 c37">ou</span>inclusivo ao literal <span class="c47 c6 c34">k</span>(n&uacute;mero de 8 bits) e ao conte&uacute;do do registrador </span><span class="c6 c34 c37">W</span>. O resultado desta opera&ccedil;&atilde;o &eacute; armazenado no registrador </span><span class="c6 c34 c37">W</span>. O bit afetado por essa instru&ccedil;&atilde;o &eacute; o bit <span class="c47 c6 c34">Z</span>do registrador <span class="c47 c6 c34">STATUS</p><p class="c11">A Tabela 8.17 &eacute; a tabela-verdade que exibe o processo da opera&ccedil;&atilde;o </span><span class="c6 c34 c37">ou</span>inclusivo:</span></p><p class="c12"><span class="c34">Tabela 8.17 -</span>Tabela-verdade da opera&ccedil;&atilde;o </span><span class="c6 c34 c37">ou</span>inclusivo</span></p><a id="t.c058a407069400d4cb45f2147a31987b16158a5c"></a><a id="t.87"></a><table class="c56"><tbody><tr class="c21"><td class="c52"><p class="c1"><span class="c26">bit 1</span></p></td><td class="c145"><p class="c1"><span class="c26">bit 2</span></p></td><td class="c139"><p class="c1"><span class="c34">bit 1 [ </span><span class="c34 c37">OU inclusivo</span><span class="c34">] bit</span><span class="c26">2</td>
</tr>
<tr class="c21"><td class="c52"><p class="c1"><span class="c2">0</span></p></td><td class="c145"><p class="c1"><span class="c2">0</span></p></td><td class="c139"><p class="c1"><span class="c2">0</td>
</tr>
<tr class="c21"><td class="c52"><p class="c1"><span class="c2">0</span></p></td><td class="c145"><p class="c1"><span class="c2">1</span></p></td><td class="c139"><p class="c1"><span class="c2">1</td>
</tr>
<tr class="c21"><td class="c52"><p class="c1"><span class="c2">1</span></p></td><td class="c145"><p class="c1"><span class="c2">0</span></p></td><td class="c139"><p class="c1"><span class="c2">1</td>
</tr>
<tr class="c21"><td class="c52"><p class="c1"><span class="c2">1</span></p></td><td class="c145"><p class="c1"><span class="c2">1</span></p></td><td class="c139"><p class="c1"><span class="c2">1</span></p></td></tr></tbody></table><p class="c11">Um exemplo da instru&ccedil;&atilde;o </span><span class="c3">IORLW</span>pode ser visto no C&oacute;digo 8.11 e o resultado na Tabela 8.18.</p><p class="c12"><span class="c34">C&oacute;digo 8.11 -</span>Exemplo do uso da instru&ccedil;&atilde;o </span><span class="c3">IORLW</span></p><a id="t.dbd81a8caebf1a31f87e13ca38051867f3f86113"></a><a id="t.88"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c42 c8 c76">; INSTRUCAO: IORLW</span></p><p class="c19"><span class="c42 c8 c76">; APLICA O OPERADOR &lsquo;OR&rsquo; INCLUSIVO AO LITERAL (NUMERO)</span></p><p class="c19"><span class="c42 c8 c76">; E TAMBEM AO CONTEUDO DO REG. W E O RESULTADO ARMAZENA</span></p><p class="c19"><span class="c42 c8 c76">; NO REG. W</span></p><p class="c19"><span class="c9">MOVLW</span><span class="c8"> </span><span class="c42 c8 c54">.7</span></p><p class="c19"><span class="c9">IORLW</span><span class="c8"> </span><span class="c42 c8 c54">.10</span></p><p class="c19 c14"><span class="c2"></span></p></td></tr></tbody></table><p class="c12"><span class="c34">Tabela 8.18 - </span>Opera&ccedil;&atilde;o ou l&oacute;gico inclusivo dos n&uacute;meros 7</span><span class="c6 c62">10</span>e 10</span><span class="c6 c62">10</span></p><a id="t.42cd33030ff105756be3e6e7ee42d4f67e26a180"></a><a id="t.89"></a><table class="c56"><tbody><tr class="c21"><td class="c15"><p class="c1"><span class="c26">bit 7</span></p></td><td class="c15"><p class="c1"><span class="c26">bit 6</span></p></td><td class="c15"><p class="c1"><span class="c26">bit 5</span></p></td><td class="c15"><p class="c1"><span class="c26">bit 4</span></p></td><td class="c15"><p class="c1"><span class="c26">bit 3</span></p></td><td class="c15"><p class="c1"><span class="c26">bit 2</span></p></td><td class="c15"><p class="c1"><span class="c26">bit 1</span></p></td><td class="c15"><p class="c1"><span class="c26">bit 0</span></p></td><td class="c15"><p class="c1 c14"><span class="c26"></span></p></td><td class="c15"><p class="c1 c14"><span class="c26"></span></p></td><td class="c15"><p class="c1 c14"><span class="c26"></td>
</tr>
<tr class="c21"><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">1</span></p></td><td class="c15"><p class="c1"><span class="c2">1</span></p></td><td class="c15"><p class="c1"><span class="c2">1</span></p></td><td class="c15"><p class="c1"><span class="c5">=</span></p></td><td class="c15"><p class="c1"><span>7</span><span class="c63 c62 c50 c53 c44">10</span></p></td><td class="c15"><p class="c1"><span class="c2">0x07</td>
</tr>
<tr class="c21"><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">1</span></p></td><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">1</span></p></td><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c5">=</span></p></td><td class="c15"><p class="c1"><span>10</span><span class="c63 c62 c50 c53 c44">10</span></p></td><td class="c15"><p class="c1"><span class="c2">0x0A</span></p></td></tr><tr class="c51"><td class="c68" colspan="11" rowspan="1"><p class="c1"><span class="c26">OR (INCLUSIVO)</td>
</tr>
<tr class="c21"><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">1</span></p></td><td class="c15"><p class="c1"><span class="c2">1</span></p></td><td class="c15"><p class="c1"><span class="c2">1</span></p></td><td class="c15"><p class="c1"><span class="c2">1</span></p></td><td class="c15"><p class="c1"><span class="c5">=</span></p></td><td class="c15"><p class="c1"><span>15</span><span class="c63 c62 c50 c53 c44">10</span></p></td><td class="c15"><p class="c1"><span class="c2">0x0F</span></p></td></tr></tbody></table><p class="c11">A instru&ccedil;&atilde;o </span><span class="c3">IORWF</span><span class="c47 c6 c34">f,d</span>&eacute; respons&aacute;vel por aplicar a opera&ccedil;&atilde;o </span><span class="c6 c34 c37">ou</span>inclusivo ao conte&uacute;do do registrador de endere&ccedil;o/nome <span class="c47 c6 c34">f</span>com o conte&uacute;do do registrador </span><span class="c6 c34 c37">W</span>e armazenando o resultado no registrador </span><span class="c6 c34 c37">W</span>se <span class="c47 c6 c34">d</span>&eacute; igual a 0 ou no registrador de endere&ccedil;o/nome <span class="c47 c6 c34">f</span>se <span class="c47 c6 c34">d</span>&eacute; igual a 1. O bit afetado nesta instru&ccedil;&atilde;o &eacute; o bit <span class="c47 c6 c34">Z</span>do registrador <span class="c47 c6 c34">STATUS</span>. Um exemplo da instru&ccedil;&atilde;o </span><span class="c3">IORWF</span>pode ser visto no C&oacute;digo 8.12.</p><p class="c12"><span class="c34">C&oacute;digo 8.12 -</span>Exemplo do uso da instru&ccedil;&atilde;o </span><span class="c3">IORWF</span></p><a id="t.0487fdbdd3ffa954514387cb1d54b54d7902da70"></a><a id="t.90"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c42 c8 c76">; INSTRUCAO: IORWF</span></p><p class="c19"><span class="c42 c8 c76">; APLICA O OPERADOR OR (inclusivo) AO CONTEUDO DO REG. W</span></p><p class="c19"><span class="c42 c8 c76">; E CONTEUDO DO REG. f E COLOCA EM d</span></p><p class="c19"><span class="c9">MOVLW</span><span class="c8"> </span><span class="c42 c8 c54">.7</span></p><p class="c19"><span class="c9">MOVWF</span><span class="c8"> </span><span class="c42 c8 c54">0x0C</span></p><p class="c19"><span class="c9">MOVLW</span><span class="c8"> </span><span class="c42 c8 c54">.10</span></p><p class="c19"><span class="c9">IORWF</span><span class="c8"> </span><span class="c8 c54">0x0C</span><span class="c8">, </span><span class="c42 c8 c54">0</span></p><p class="c19 c14"><span class="c2"></span></p></td></tr></tbody></table><p class="c11">A instru&ccedil;&atilde;o </span><span class="c3">XORLW</span><span class="c47 c6 c34">k</span>&eacute; respons&aacute;vel por aplicar a opera&ccedil;&atilde;o ou exclusivo ao literal <span class="c47 c6 c34">k</span>(n&uacute;mero de 8 bits) e ao conte&uacute;do do registrador </span><span class="c6 c34 c37">W</span>. O resultado desta opera&ccedil;&atilde;o &eacute; armazenado no registrador </span><span class="c6 c34 c37">W</span>. O bit afetado nesta opera&ccedil;&atilde;o/instru&ccedil;&atilde;o &eacute; o bit </span><span class="c47 c6 c34 c37">Z</span>do registrador <span class="c47 c6 c34">STATUS</span>. A Tabela 8.19 verdade exibe o processo da opera&ccedil;&atilde;o </span><span class="c6 c34 c37">ou</span>exclusivo, a implementa&ccedil;&atilde;o est&aacute; no C&oacute;digo 8.13 e o processo de c&aacute;lculo est&aacute; na Tabela 8.20.</p><p class="c12"><span class="c34">Tabela 8.19 -</span>Tabela-verdade da opera&ccedil;&atilde;o </span><span class="c6 c34 c37">ou</span>exclusivo</span></p><a id="t.51b4d98c58727b2fc0ac9c42f96412624becc369"></a><a id="t.91"></a><table class="c56"><tbody><tr class="c21"><td class="c52"><p class="c1"><span class="c26">bit 1</span></p></td><td class="c145"><p class="c1"><span class="c26">bit 2</span></p></td><td class="c139"><p class="c1"><span class="c34">bit 1 [ </span><span class="c34 c37">OU exclusivo</span><span class="c26">] bit 2</td>
</tr>
<tr class="c21"><td class="c52"><p class="c1"><span class="c2">0</span></p></td><td class="c145"><p class="c1"><span class="c2">0</span></p></td><td class="c139"><p class="c1"><span class="c2">0</td>
</tr>
<tr class="c21"><td class="c52"><p class="c1"><span class="c2">0</span></p></td><td class="c145"><p class="c1"><span class="c2">1</span></p></td><td class="c139"><p class="c1"><span class="c2">1</td>
</tr>
<tr class="c21"><td class="c52"><p class="c1"><span class="c2">1</span></p></td><td class="c145"><p class="c1"><span class="c2">0</span></p></td><td class="c139"><p class="c1"><span class="c2">1</td>
</tr>
<tr class="c21"><td class="c52"><p class="c1"><span class="c2">1</span></p></td><td class="c145"><p class="c1"><span class="c2">1</span></p></td><td class="c139"><p class="c1"><span class="c2">0</span></p></td></tr></tbody></table><p class="c12"><span class="c34">C&oacute;digo 8.13 -</span>Exemplo do uso da instru&ccedil;&atilde;o </span><span class="c3">XORLW</span></p><a id="t.c7d748b481ba54bac67a83b87ca188cf7afab44f"></a><a id="t.92"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c42 c8 c76">; INSTRUCAO: XORLW</span></p><p class="c19"><span class="c42 c8 c76">; APLICA O OPERADOR OR (exclusivo) NO LITERAL (NUMERO)</span></p><p class="c19"><span class="c42 c8 c76">; E NO CONTEUDO DO REG. W E ARMAZENA EM REG. W</span></p><p class="c19"><span class="c9">MOVLW</span><span class="c8"> </span><span class="c42 c8 c54">.7</span></p><p class="c19"><span class="c9">XORLW</span><span class="c8"> </span><span class="c42 c8 c54">.10</span></p><p class="c19 c14"><span class="c2"></span></p></td></tr></tbody></table><p class="c12"><span class="c34">Tabela 8.20 - </span>Opera&ccedil;&atilde;o ou l&oacute;gico exclusivo dos n&uacute;meros 7</span><span class="c6 c62">10</span>e 10</span><span class="c6 c62">10</span></p><a id="t.34eca53f04ad681730ea509cb103e33b01f44c1e"></a><a id="t.93"></a><table class="c56"><tbody><tr class="c21"><td class="c15"><p class="c1"><span class="c26">bit 7</span></p></td><td class="c15"><p class="c1"><span class="c26">bit 6</span></p></td><td class="c15"><p class="c1"><span class="c26">bit 5</span></p></td><td class="c15"><p class="c1"><span class="c26">bit 4</span></p></td><td class="c15"><p class="c1"><span class="c26">bit 3</span></p></td><td class="c15"><p class="c1"><span class="c26">bit 2</span></p></td><td class="c15"><p class="c1"><span class="c26">bit 1</span></p></td><td class="c15"><p class="c1"><span class="c26">bit 0</span></p></td><td class="c15"><p class="c1 c14"><span class="c26"></span></p></td><td class="c15"><p class="c1 c14"><span class="c26"></span></p></td><td class="c15"><p class="c1 c14"><span class="c26"></td>
</tr>
<tr class="c21"><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">1</span></p></td><td class="c15"><p class="c1"><span class="c2">1</span></p></td><td class="c15"><p class="c1"><span class="c2">1</span></p></td><td class="c15"><p class="c1"><span class="c5">=</span></p></td><td class="c15"><p class="c1"><span>7</span><span class="c63 c62 c50 c53 c44">10</span></p></td><td class="c15"><p class="c1"><span class="c2">0x07</td>
</tr>
<tr class="c21"><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">1</span></p></td><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">1</span></p></td><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c5">=</span></p></td><td class="c15"><p class="c1"><span>10</span><span class="c63 c62 c50 c53 c44">10</span></p></td><td class="c15"><p class="c1"><span class="c2">0x0A</span></p></td></tr><tr class="c51"><td class="c68" colspan="11" rowspan="1"><p class="c1"><span class="c26">OR (EXCLUSIVO)</td>
</tr>
<tr class="c21"><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">1</span></p></td><td class="c15"><p class="c1"><span class="c2">1</span></p></td><td class="c15"><p class="c1"><span class="c2">0</span></p></td><td class="c15"><p class="c1"><span class="c2">1</span></p></td><td class="c15"><p class="c1"><span class="c5">=</span></p></td><td class="c15"><p class="c1"><span>13</span><span class="c63 c62 c50 c53 c44">10</span></p></td><td class="c15"><p class="c1"><span class="c2">0x0D</span></p></td></tr></tbody></table><p class="c11">A instru&ccedil;&atilde;o </span><span class="c3">XORWF</span><span class="c47 c6 c34">f,d</span>&eacute; respons&aacute;vel por aplicar a opera&ccedil;&atilde;o de </span><span class="c6 c34 c37">ou</span>exclusivo ao conte&uacute;do do registrador de endere&ccedil;o/nome <span class="c47 c6 c34">f</span>com o conte&uacute;do do registrador </span><span class="c6 c34 c37">W</span>e armazenar o resultado no registrador </span><span class="c6 c34 c37">W</span>se <span class="c47 c6 c34">d</span>&eacute; igual a 0 ou no registrador de endere&ccedil;o/nome <span class="c47 c6 c34">f</span>se <span class="c47 c6 c34">d</span>for igual a 1. O bit afetado nesta opera&ccedil;&atilde;o/instru&ccedil;&atilde;o &eacute; o bit <span class="c47 c6 c34">Z</span>do registrador <span class="c47 c6 c34">STATUS</span>. Um exemplo de uso desta instru&ccedil;&atilde;o se encontra no C&oacute;digo 8.14.</p><p class="c12"><span class="c34">C&oacute;digo 8.14 -</span>Exemplo do uso da instru&ccedil;&atilde;o </span><span class="c3">XORWF</span></p><a id="t.d726bf10c2a38653f3fc172651796813d3ec8f1f"></a><a id="t.94"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c42 c8 c76">; INSTRUCAO: XORWF</span></p><p class="c19"><span class="c42 c8 c76">; APLICA O OPERADOR OR (exclusivo) AO CONTEUDO DO REG. W</span></p><p class="c19"><span class="c42 c8 c76">; E CONTEUDO DO REG. f E COLOCA EM d</span></p><p class="c19"><span class="c9">MOVLW</span><span class="c8"> </span><span class="c42 c8 c54">.7</span></p><p class="c19"><span class="c9">MOVWF</span><span class="c8"> </span><span class="c42 c8 c54">0x0C</span></p><p class="c19"><span class="c9">MOVLW</span><span class="c8"> </span><span class="c42 c8 c54">.10</span></p><p class="c19"><span class="c9">XORWF</span><span class="c8"> </span><span class="c8 c54">0x0C</span><span class="c8">, </span><span class="c42 c8 c54">0</span></p><p class="c19 c14"><span class="c2"></span></p></td></tr></tbody></table><p class="c11">A instru&ccedil;&atilde;o </span><span class="c3">COMF</span><span class="c47 c6 c34">f,d</span>&eacute; respons&aacute;vel por aplicar a opera&ccedil;&atilde;o complemento l&oacute;gico ao conte&uacute;do do registrador de endere&ccedil;o/nome <span class="c47 c6 c34">f</span>e armazenar o resultado no registrador </span><span class="c6 c34 c37">W</span>se <span class="c47 c6 c34">d</span>for igual a 0 ou no registrador de endere&ccedil;o/nome <span class="c47 c6 c34">f</span>se <span class="c47 c6 c34">d</span>for igual a 1. O bit afetado nesta opera&ccedil;&atilde;o/instru&ccedil;&atilde;o &eacute; o bit <span class="c47 c6 c34">Z</span>do registrador <span class="c47 c6 c34">STATUS</span>. A Tabela 8.21 verdade exibe o processo da opera&ccedil;&atilde;o </span>complemento l&oacute;gico, o C&oacute;digo 8.15 tem a implementa&ccedil;&atilde;o do exemplo de uso desta instru&ccedil;&atilde;o e a Tabela 8.22 tem o c&aacute;lculo do exemplo.</p><p class="c12"><span class="c34">Tabela 8.21 -</span>Tabela-verdade da opera&ccedil;&atilde;o</span>complemento l&oacute;gico</span></p><a id="t.88c84e7c21afda03e4699c43e35b3dc463f078d0"></a><a id="t.95"></a><table class="image"><tbody><tr class="c21"><td class="c229"><p class="c1"><span class="c26">bit 1</span></p></td><td class="c193"><p class="c1"><span class="c34">[ </span><span class="c34 c37">complemento</span><span class="c26">] bit 1</td>
</tr>
<tr class="c21"><td class="c229"><p class="c1"><span class="c2">0</span></p></td><td class="c193"><p class="c1"><span class="c2">1</td>
</tr>
<tr class="c21"><td class="c229"><p class="c1"><span class="c2">1</span></p></td><td class="c193"><p class="c1"><span class="c2">0</span></p></td></tr></tbody></table><p class="c12"><span class="c34">C&oacute;digo 8.15 -</span>Exemplo do uso da instru&ccedil;&atilde;o </span><span class="c3">COMF</span></p><a id="t.d4ba87cb5e31d23ef43b6af03f3fefcc22021ec1"></a><a id="t.96"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c42 c8 c76">; INSTRUCAO: COMF</span></p><p class="c19"><span class="c42 c8 c76">; APLICA O OPERADOR COMPLEMENTO AO CONTEUDO DO REG. f</span></p><p class="c19"><span class="c42 c8 c76">; E COLOCA EM d</span></p><p class="c19"><span class="c9">MOVLW</span><span class="c8"> </span><span class="c42 c8 c54">.7</span></p><p class="c19"><span class="c9">MOVWF</span><span class="c8"> </span><span class="c42 c8 c54">0x0C</span></p><p class="c19"><span class="c9">COMF</span><span class="c8">  </span><span class="c8 c54">0x0C</span><span class="c8">, </span><span class="c42 c8 c54">0</span></p><p class="c19 c14"><span class="c2"></span></p></td></tr></tbody></table><p class="c12"><span class="c34">Tabela 8.22 - </span>Opera&ccedil;&atilde;o complemento l&oacute;gico do n&uacute;mero 7</span><span class="c6 c62">10</span></p><a id="t.b8539e8dac8816d3bf551dda6b453f43442d04e2"></a><a id="t.97"></a><table class="c56"><tbody><tr class="c21"><td class="c22"><p class="c1"><span class="c26">C</span></p></td><td class="c61"><p class="c1"><span class="c26">bit 7</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 6</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 5</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 4</span></p></td><td class="c79"><p class="c1"><span class="c26">bit 3</span></p></td><td class="c46"><p class="c1"><span class="c26">bit 2</span></p></td><td class="c41"><p class="c1"><span class="c26">bit 1</span></p></td><td class="c41"><p class="c1"><span class="c26">bit 0</span></p></td><td class="c106"><p class="c1 c14"><span class="c26"></span></p></td><td class="c41"><p class="c1 c14"><span class="c26"></span></p></td><td class="c88"><p class="c1 c14"><span class="c26"></td>
</tr>
<tr class="c21"><td class="c22"><p class="c1"><span class="c26">0</span></p></td><td class="c61"><p class="c1"><span class="c26">0</span></p></td><td class="c66"><p class="c1"><span class="c26">0</span></p></td><td class="c66"><p class="c1"><span class="c26">0</span></p></td><td class="c66"><p class="c1"><span class="c26">0</span></p></td><td class="c79"><p class="c1"><span class="c26">0</span></p></td><td class="c46"><p class="c1"><span class="c26">1</span></p></td><td class="c41"><p class="c1"><span class="c26">1</span></p></td><td class="c41"><p class="c1"><span class="c26">1</span></p></td><td class="c106"><p class="c1"><span class="c26">=</span></p></td><td class="c41"><p class="c1"><span class="c34">7</span><span class="c63 c34 c62 c50 c53">10</span></p></td><td class="c88"><p class="c1"><span class="c26">0x07</span></p></td></tr><tr class="c51"><td class="c114" colspan="12" rowspan="1"><p class="c1"><span class="c26">COMPLEMENTO</td>
</tr>
<tr class="c21"><td class="c22"><p class="c1"><span class="c26">0</span></p></td><td class="c61"><p class="c1"><span class="c26">1</span></p></td><td class="c66"><p class="c1"><span class="c26">1</span></p></td><td class="c66"><p class="c1"><span class="c26">1</span></p></td><td class="c66"><p class="c1"><span class="c26">1</span></p></td><td class="c79"><p class="c1"><span class="c26">1</span></p></td><td class="c46"><p class="c1"><span class="c26">0</span></p></td><td class="c41"><p class="c1"><span class="c26">0</span></p></td><td class="c41"><p class="c1"><span class="c26">0</span></p></td><td class="c106"><p class="c1"><span class="c26">=</span></p></td><td class="c41"><p class="c1"><span class="c34">248</span><span class="c34 c62">10</span></p></td><td class="c88"><p class="c1"><span class="c26">0xF8</span></p></td></tr></tbody></table><p class="c11">Agora discutiremos 4 instru&ccedil;&otilde;es que decorrem da adi&ccedil;&atilde;o e subtra&ccedil;&atilde;o, sendo elas </span><span class="c3">INCF</span>, </span><span class="c3">INCFSZ</span>, </span><span class="c3">DECF</span>e </span><span class="c3">DECFSZ</p><p class="c11">A instru&ccedil;&atilde;o </span><span class="c3">INCF</span><span class="c47 c6 c34">f,d</span>&eacute; respons&aacute;vel por incrementar em 1 unidade o conte&uacute;do do registrador de endere&ccedil;o/nome <span class="c47 c6 c34">f</span>e armazenar o resultado no registrador </span><span class="c6 c34 c37">W</span>se <span class="c47 c6 c34">d</span>&eacute; igual a 0 ou no registrador de endere&ccedil;o/nome <span class="c47 c6 c34">f</span>se <span class="c47 c6 c34">d</span>for igual a 1. O bit afetado por esta instru&ccedil;&atilde;o &eacute; o bit <span class="c47 c6 c34">Z</span>do registrador <span class="c47 c6 c34">STATUS</span>. O C&oacute;digo 8.16 exibe a implementa&ccedil;&atilde;o do uso desta instru&ccedil;&atilde;o.</p><p class="c12"><span class="c34">C&oacute;digo 8.16 -</span>Exemplo do uso da instru&ccedil;&atilde;o </span><span class="c3">INCF</span></p><a id="t.aa224859f1c9318cf955a49635a345b371957b93"></a><a id="t.98"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c42 c8 c76">; INSTRUCAO: INCF</span></p><p class="c19"><span class="c42 c8 c76">; INCREMENTA O CONTEUDO DO REGISTRADOR f E ARMAZENA EM d</span></p><p class="c19"><span class="c9">MOVLW</span><span class="c8"> </span><span class="c42 c8 c54">.7</span></p><p class="c19"><span class="c9">MOVWF</span><span class="c8"> </span><span class="c42 c8 c54">0x0C</span></p><p class="c19"><span class="c9">INCF</span><span class="c8">  </span><span class="c8 c54">0x0C</span><span class="c8">, </span><span class="c42 c8 c54">0</span></p><p class="c19 c14"><span class="c2"></span></p></td></tr></tbody></table><p class="c11">A instru&ccedil;&atilde;o </span><span class="c3">INCFSZ</span><span class="c47 c6 c34">f,d</span>&eacute; respons&aacute;vel por incrementar em 1 unidade o conte&uacute;do do registrador de endere&ccedil;o/nome <span class="c47 c6 c34">f</span>e armazenar o resultado no registrador </span><span class="c6 c34 c37">W</span>se <span class="c47 c6 c34">d</span>&eacute; igual a 0 ou no registrador de endere&ccedil;o/nome <span class="c47 c6 c34">f</span>se <span class="c47 c6 c34">d</span>for igual a 1. Al&eacute;m disso, se o resultado desse incremento resultar em 0, a instru&ccedil;&atilde;o seguinte a essa ser&aacute; saltada (desconsiderada), e isto acontece quando o resultado passar de <span class="definesASM1">0xFF</span>para <span class="definesASM1">0x00</span>. Esta instru&ccedil;&atilde;o n&atilde;o afeta nenhum bit no registrador <span class="c47 c6 c34">STATUS</span>. O C&oacute;digo 8.17 e C&oacute;digo 8.18 mostram na implementa&ccedil;&atilde;o exemplos de uso desta instru&ccedil;&atilde;o.</p><p class="c12"><span class="c34">C&oacute;digo 8.17 -</span>Exemplo do uso da instru&ccedil;&atilde;o </span><span class="c3">INCFSZ</span>sem salto</span></p><a id="t.d60164e8afb49d2e15727bff72a152b128148f07"></a><a id="t.99"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c42 c8 c76">; INSTRUCAO: INCFSZ</span></p><p class="c19"><span class="c42 c8 c76">; INCREMENTA O CONTEUDO DO REGISTRADOR f E ARMAZENA EM d</span></p><p class="c19"><span class="c42 c8 c76">; SALTA UMA INSTRUCAO SER FOR ZERO</span></p><p class="c19"><span class="c9">MOVLW</span><span class="c8"> </span><span class="c8 c54">.254</span><span class="c42 c8 c76">   ;</span></p><p class="c19"><span class="c9">MOVWF</span><span class="c8"> </span><span class="c8 c54">0x0C</span><span class="c42 c8 c76">   ;</span></p><p class="c19"><span class="c9">INCFSZ</span><span class="c8"> </span><span class="c8 c54">0x0C</span><span class="c8">, </span><span class="c8 c54">0</span><span class="c42 c8 c76"> ; &gt;---+</span></p><p class="c19"><span class="c42 c8 c76">         ;   |</span></p><p class="c19"><span class="c9">CLRW</span><span class="c42 c8 c76">       ; &lt;---+</span></p><p class="c19"><span class="c42 c8 c76">         ;</span></p><p class="c19"><span class="c9">CLRF</span><span class="c8">  </span><span class="c8 c54">0x0C</span><span class="c42 c8 c76">   ;</span></p><p class="c19 c14"><span class="c42 c8 c76"></span></p></td></tr></tbody></table><p class="c12"><span class="c34">C&oacute;digo 8.18 -</span>Exemplo do uso da instru&ccedil;&atilde;o </span><span class="c3">INCFSZ</span>com salto</span></p><a id="t.86560436c69eee5f59a910ed509c855e19b525ba"></a><a id="t.100"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c42 c8 c76">; INSTRUCAO: INCFSZ</span></p><p class="c19"><span class="c42 c8 c76">; INCREMENTA O CONTEUDO DO REGISTRADOR f E ARMAZENA EM d</span></p><p class="c19"><span class="c42 c8 c76">; SALTA UMA INSTRUCAO SER FOR ZERO</span></p><p class="c19"><span class="c9">MOVLW</span><span class="c8"> </span><span class="c8 c54">.255</span><span class="c42 c8 c76">   ;</span></p><p class="c19"><span class="c9">MOVWF</span><span class="c8"> </span><span class="c8 c54">0x0C</span><span class="c42 c8 c76">   ;</span></p><p class="c19"><span class="c9">INCFSZ</span><span class="c8"> </span><span class="c8 c54">0x0C</span><span class="c8">, </span><span class="c8 c54">0</span><span class="c42 c8 c76"> ; &gt;---+</span></p><p class="c19"><span class="c42 c8 c76">         ;   |</span></p><p class="c19"><span class="c9">CLRW</span><span class="c42 c8 c76">       ;   |</span></p><p class="c19"><span class="c42 c8 c76">         ;   |</span></p><p class="c19"><span class="c9">CLRF</span><span class="c8">  </span><span class="c8 c54">0x0C</span><span class="c42 c8 c76">   ; &lt;---+</span></p><p class="c19 c14"><span class="c2"></span></p></td></tr></tbody></table><p class="c11">A instru&ccedil;&atilde;o </span><span class="c3">DECF</span><span class="c47 c6 c34">f,d</span>&eacute; respons&aacute;vel por decrementar em 1 unidade o conte&uacute;do do registrador de endere&ccedil;o/nome <span class="c47 c6 c34">f</span>e armazenar o resultado no registrador </span><span class="c6 c34 c37">W</span>se <span class="c47 c6 c34">d</span>for igual a 0 e no registrador de endere&ccedil;o/nome <span class="c47 c6 c34">f</span>se <span class="c47 c6 c34">d</span>for igual a 1. O bit afetado por esta instru&ccedil;&atilde;o &eacute; o bit <span class="c47 c6 c34">Z</span>do registrador <span class="c47 c6 c34">STATUS</span>. O C&oacute;digo 8.19 exibe um exemplo de uso desta instru&ccedil;&atilde;o.</p><p class="c12"><span class="c34">C&oacute;digo 8.19 -</span>Exemplo do uso da instru&ccedil;&atilde;o </span><span class="c3">DECF</span></p><a id="t.809c0ef95bdc9035b5ea4880d1c7124a3360fbb2"></a><a id="t.101"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c42 c8 c76">; INSTRUCAO: DECF</span></p><p class="c19"><span class="c42 c8 c76">; DECREMENTA O CONTEUDO DO REGISTRADOR f E ARMAZENA EM d</span></p><p class="c19"><span class="c9">MOVLW</span><span class="c8"> </span><span class="c42 c8 c54">.7</span></p><p class="c19"><span class="c9">MOVWF</span><span class="c8"> </span><span class="c42 c8 c54">0x0C</span></p><p class="c19"><span class="c9">DECF</span><span class="c8">  </span><span class="c8 c54">0x0C</span><span class="c8">, </span><span class="c42 c8 c54">0</span></p><p class="c19 c14"><span class="c2"></span></p></td></tr></tbody></table><p class="c11">A instru&ccedil;&atilde;o </span><span class="c3">DECFSZ</span><span class="c47 c6 c34">f,d</span>&eacute; respons&aacute;vel por decrementar em 1 unidade o conte&uacute;do do registrador de endere&ccedil;o/nome <span class="c47 c6 c34">f</span>e armazenar o resultado no registrador </span><span class="c6 c34 c37">W</span>se <span class="c47 c6 c34">d</span>for igual a 0 ou no registrador de endere&ccedil;o/nome <span class="c47 c6 c34">f</span>se <span class="c47 c6 c34">d</span>for igual a 1. Al&eacute;m disso, se o resultado desse incremento resultar em 0, a instru&ccedil;&atilde;o seguinte a essa ser&aacute; saltada (desconsiderada), e isto acontece quando o resultado passar de <span class="definesASM1">0x01</span>para <span class="definesASM1">0x00</span>. Esta instru&ccedil;&atilde;o n&atilde;o afeta nenhum bit no registrador <span class="c47 c6 c34">STATUS</span>. O C&oacute;digo 8.20 e C&oacute;digo 8.21 mostram na implementa&ccedil;&atilde;o exemplos de uso desta instru&ccedil;&atilde;o.</p><p class="c12"><span class="c34">C&oacute;digo 8.20 -</span>Exemplo do uso da instru&ccedil;&atilde;o </span><span class="c3">DECFSZ</span>sem salto</span></p><a id="t.56084bd2bdbc7c91073e3a7ed7673ce28f401354"></a><a id="t.102"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c42 c8 c76">; INSTRUCAO: DECFSZ</span></p><p class="c19"><span class="c42 c8 c76">; DECREMENTA O CONTEUDO DO REGISTRADOR f E ARMAZENA EM d</span></p><p class="c19"><span class="c42 c8 c76">; SALTA UMA INSTRUCAO SER FOR ZERO</span></p><p class="c19"><span class="c9">MOVLW</span><span class="c8"> </span><span class="c8 c54">.9 </span><span class="c42 c8 c76">   ;</span></p><p class="c19"><span class="c9">MOVWF</span><span class="c8"> </span><span class="c8 c54">0x0C</span><span class="c42 c8 c76">   ;</span></p><p class="c19"><span class="c9">DECFSZ</span><span class="c8"> </span><span class="c8 c54">0x0C</span><span class="c8">, </span><span class="c8 c54">0</span><span class="c42 c8 c76"> ; &gt;---+</span></p><p class="c19"><span class="c42 c8 c76">         ;   |</span></p><p class="c19"><span class="c9">CLRW</span><span class="c42 c8 c76">       ; &lt;---+</span></p><p class="c19"><span class="c42 c8 c76">         ;</span></p><p class="c19"><span class="c9">CLRF</span><span class="c8">  </span><span class="c8 c54">0x0C</span><span class="c42 c8 c76">   ;</span></p><p class="c19 c14"><span class="c42 c8 c76"></span></p></td></tr></tbody></table><p class="c12"><span class="c34">C&oacute;digo 8.21 -</span>Exemplo do uso da instru&ccedil;&atilde;o </span><span class="c3">DECFSZ</span>sem salto</span></p><a id="t.0b79198dd0b76b68de7cb357dee468dc591513b3"></a><a id="t.103"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c42 c8 c76">; INSTRUCAO: DECFSZ</span></p><p class="c19"><span class="c42 c8 c76">; DECREMENTA O CONTEUDO DO REGISTRADOR f E ARMAZENA EM d</span></p><p class="c19"><span class="c42 c8 c76">; SALTA UMA INSTRUCAO SER FOR ZERO</span></p><p class="c19"><span class="c9">MOVLW</span><span class="c8"> </span><span class="c8 c54">.1 </span><span class="c42 c8 c76">   ;</span></p><p class="c19"><span class="c9">MOVWF</span><span class="c8"> </span><span class="c8 c54">0x0C</span><span class="c42 c8 c76">   ;</span></p><p class="c19"><span class="c9">DECFSZ</span><span class="c8"> </span><span class="c8 c54">0x0C</span><span class="c8">, </span><span class="c8 c54">0</span><span class="c42 c8 c76"> ; &gt;---+</span></p><p class="c19"><span class="c42 c8 c76">         ;   |</span></p><p class="c19"><span class="c9">CLRW</span><span class="c42 c8 c76">       ;   |</span></p><p class="c19"><span class="c42 c8 c76">         ;   |</span></p><p class="c19"><span class="c9">CLRF</span><span class="c8">  </span><span class="c8 c54">0x0C</span><span class="c42 c8 c76">   ; &lt;---+</span></p><p class="c19 c14"><span class="c2"></span></p></td></tr></tbody></table><p class="c11 c14"><span class="c5"></span></p><hr style="page-break-before:always;display:none;"><h1 class="c75 c35" id="h.gtjslkauy293"><span class="c28 c87"></span></h1><h1 class="c95 c35" id="h.hq5lx0p01lhe"><span>Epis&oacute;dio 9: Conhecendo as instru&ccedil;&otilde;es </span><span class="c8">CLRF</span><span>, </span><span class="c8">CLRW</span><span>, </span><span class="c8">NOP</span><span>, </span><span class="c8">RLF</span><span>, </span><span class="c8">RRF</span><span>e </span><span class="c8">SWAPF</span><span class="c28 c87">para o PIC16F628A</span></h1><p class="c11">Neste epis&oacute;dio veremos instru&ccedil;&otilde;es com prop&oacute;sitos interessantes sobre bits (sendo que uma delas n&atilde;o afeta bits diretamente), sendo elas </span><span class="c3">CLRF</span>, </span><span class="c3">CLRW</span>, </span><span class="c3">NOP</span>, </span><span class="c3">RLF</span>, </span><span class="c3">RRF</span>e </span><span class="c3">SWAPF</p><p class="c11">A instru&ccedil;&atilde;o </span><span class="c3">CLRF</span><span class="c47 c6 c34">f</span>&eacute; respons&aacute;vel por limpar (</span><i>clear</span>) o valor do registrador de endere&ccedil;o/nome <span class="c47 c6 c34">f</span>, isto &eacute;, zerar o valor do registrador de endere&ccedil;o/nome <span class="c47 c6 c34">f</span>. A instru&ccedil;&atilde;o afeta o bit <span class="c47 c6 c34">Z</span>do registrador <span class="c47 c6 c34">STATUS</span>. O C&oacute;digo 9.1 mostra o uso da instru&ccedil;&atilde;o.</p><p class="c12"><span class="c34">C&oacute;digo 9.1 -</span>Exemplo do uso da instru&ccedil;&atilde;o </span><span class="c3">CLRF</span></p><a id="t.c819fc36c2e3c351da5e6db4219b8216778d9738"></a><a id="t.104"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c42 c8 c76">; INSTRUCAO: CLRF</span></p><p class="c19"><span class="c42 c8 c76">; LIMPA O REGISTRADOR f</span></p><p class="c19"><span class="c9">MOVLW</span><span class="c8"> </span><span class="c42 c8 c54">.7</span></p><p class="c19"><span class="c9">MOVWF</span><span class="c8"> </span><span class="c42 c8 c54">0x0C</span></p><p class="c19"><span class="c9">CLRF</span><span class="c8">  </span><span class="c42 c8 c54">0x0C</span></p><p class="c19 c14"><span class="c2"></span></p></td></tr></tbody></table><p class="c11">A instru&ccedil;&atilde;o </span><span class="c3">CLRW</span>&eacute; respons&aacute;vel por limpar (</span><i>clear</span>) o valor do registrador </span><span class="c6 c34 c37">W</span>, isto &eacute;, zerar o valor do registrador </span><span class="c6 c34 c37">W</span>. A instru&ccedil;&atilde;o afeta o bit <span class="c47 c6 c34">Z</span>do registrador <span class="c47 c6 c34">STATUS</span>. O C&oacute;digo 9.2 mostra o uso da instru&ccedil;&atilde;o.</p><p class="c12"><span class="c34">C&oacute;digo 9.2 -</span>Exemplo do uso da instru&ccedil;&atilde;o </span><span class="c3">CLRW</span></p><a id="t.ccda6aa0c530a83ed6c3bf2adbc32b18cde6819d"></a><a id="t.105"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c42 c8 c76">; INSTRUCAO: CLRW</span></p><p class="c19"><span class="c42 c8 c76">; LIMPA O REGISTRADOR W</span></p><p class="c19"><span class="c9">MOVLW</span><span class="c8"> </span><span class="c42 c8 c54">.7</span></p><p class="c19"><span class="c9">MOVWF</span><span class="c8"> </span><span class="c42 c8 c54">0x0C</span></p><p class="c19"><span class="c9">CLRF</span><span class="c8">  </span><span class="c42 c8 c54">0x0C</span></p><p class="c19"><span class="c42 c9">CLRW</span></p><p class="c19 c14"><span class="c2"></span></p><p class="c19 c14"><span class="c2"></span></p></td></tr></tbody></table><p class="c11">A instru&ccedil;&atilde;o </span><span class="c3">RLF</span><span class="c47 c6 c34">f,d</span>&eacute; respons&aacute;vel por rotacionar os bits do registrador de endere&ccedil;o/nome </span><span class="c34">f</span>para a esquerda (</span><i>left</span>). Assim o estado do 1&ordm; bit passa para o 2&ordm; bit, assim sucessivamente at&eacute; o 6&ordm; bit. O estado antigo do 7&ordm; bit passa para o bit <span class="c47 c6 c34">C</span>do registrador <span class="c47 c6 c34">STATUS</span>e o antigo estado do bit <span class="c47 c6 c34">C</span>do registrador <span class="c47 c6 c34">STATUS</span>passa para o 1&ordm; bit do registrador de endere&ccedil;o/nome <span class="c47 c6 c34">f</span>, fechando o ciclo da rota&ccedil;&atilde;o. O resultado desta instru&ccedil;&atilde;o/opera&ccedil;&atilde;o ser&aacute; armazenado no registrador </span><span class="c6 c34 c37">W</span>se <span class="c47 c6 c34">d</span>for igual a 0, mas se <span class="c47 c6 c34">d</span>for igual a 1 o resultado &eacute; armazenado no registrador de endere&ccedil;o/nome <span class="c47 c6 c34">f</span>. A instru&ccedil;&atilde;o afeta o bit <span class="c47 c6 c34">C</span>do registrador <span class="c47 c6 c34">STATUS</span>. O C&oacute;digo 9.3 mostra o uso da instru&ccedil;&atilde;o e a Tabela 9.1 exibe o processo.</p><p class="c12"><span class="c34">C&oacute;digo 9.3 -</span>Exemplo do uso da instru&ccedil;&atilde;o </span><span class="c3">RLF</span></p><a id="t.44a2e32e38a5722a454d14ca999fa3ca5e721e3b"></a><a id="t.106"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c42 c8 c76">; INSTRUCAO: RLF</span></p><p class="c19"><span class="c42 c8 c76">; APLICA O OPERADOR DE ROTACAO A ESQUERDA SOBRE O</span></p><p class="c19"><span class="c42 c8 c76">; CONTEUDO DO REG. f E COLOCA EM d</span></p><p class="c19"><span class="c9">BCF</span><span class="c8">  </span><span class="c47 c34">STATUS</span><span class="c8">, </span><span class="c47 c34">C</span></p><p class="c19"><span class="c9">MOVLW</span><span class="c8"> </span><span class="c42 c8 c54">.197</span></p><p class="c19"><span class="c9">MOVWF</span><span class="c8"> </span><span class="c42 c8 c54">0x0C</span></p><p class="c19"><span class="c9">RLF</span><span class="c8">  </span><span class="c8 c54">0x0C</span><span class="c8">, </span><span class="c42 c8 c54">0</span></p><p class="c19 c14"><span class="c2"></span></p></td></tr></tbody></table><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Tabela 9.1 - </span>Opera&ccedil;&atilde;o de rota&ccedil;&atilde;o &agrave; esquerda do n&uacute;mero 197</span><span class="c6 c62">10</span></p><a id="t.46cf225f460dfc709d2b5f0544984a58122b2e38"></a><a id="t.107"></a><table class="c56"><tbody><tr class="c21"><td class="c22"><p class="c1"><span class="c26">C</span></p></td><td class="c61"><p class="c1"><span class="c26">bit 7</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 6</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 5</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 4</span></p></td><td class="c79"><p class="c1"><span class="c26">bit 3</span></p></td><td class="c46"><p class="c1"><span class="c26">bit 2</span></p></td><td class="c41"><p class="c1"><span class="c26">bit 1</span></p></td><td class="c41"><p class="c1"><span class="c26">bit 0</span></p></td><td class="c106"><p class="c1 c14"><span class="c26"></span></p></td><td class="c41"><p class="c1 c14"><span class="c26"></span></p></td><td class="c88"><p class="c1 c14"><span class="c26"></td>
</tr>
<tr class="c21"><td class="c22 c209"><p class="c1"><span class="c2">0</span></p></td><td class="c61 c188"><p class="c1"><span class="c2">1</span></p></td><td class="c66 c100"><p class="c1"><span class="c2">1</span></p></td><td class="c66 c197"><p class="c1"><span class="c2">0</span></p></td><td class="c66 c141"><p class="c1"><span class="c2">0</span></p></td><td class="c79 c164"><p class="c1"><span class="c2">0</span></p></td><td class="c46 c148"><p class="c1"><span class="c2">1</span></p></td><td class="c41 c116"><p class="c1"><span class="c2">0</span></p></td><td class="c41 c129"><p class="c1"><span class="c2">1</span></p></td><td class="c106"><p class="c1"><span class="c5">=</span></p></td><td class="c41"><p class="c1"><span>197</span><span class="c63 c62 c50 c53 c44">10</span></p></td><td class="c88"><p class="c1"><span class="c2">0xC5</span></p></td></tr><tr class="c51"><td class="c114" colspan="12" rowspan="1"><p class="c1"><span class="c26">ROTA&Ccedil;&Atilde;O &Agrave; ESQUERDA</td>
</tr>
<tr class="c21"><td class="c22 c188"><p class="c1"><span class="c2">1</span></p></td><td class="c61 c100"><p class="c1"><span class="c2">1</span></p></td><td class="c66 c197"><p class="c1"><span class="c2">0</span></p></td><td class="c66 c141"><p class="c1"><span class="c2">0</span></p></td><td class="c66 c164"><p class="c1"><span class="c2">0</span></p></td><td class="c79 c148"><p class="c1"><span class="c2">1</span></p></td><td class="c46 c116"><p class="c1"><span class="c2">0</span></p></td><td class="c41 c129"><p class="c1"><span class="c2">1</span></p></td><td class="c41 c209"><p class="c1"><span class="c2">0</span></p></td><td class="c106"><p class="c1"><span class="c5">=</span></p></td><td class="c41"><p class="c1"><span>138</span><span class="c62">10</span></p></td><td class="c88"><p class="c1"><span class="c2">0x8A</span></p></td></tr></tbody></table><p class="c11 c14"><span class="c5"></span></p><p class="c11">A instru&ccedil;&atilde;o </span><span class="c3">RRF</span><span class="c47 c6 c34">f,d</span>&eacute; respons&aacute;vel por rotacionar os bits do registrador de endere&ccedil;o/nome </span><span class="c34">f</span>para a direita (</span><i>right</span>). Assim o estado do 7&ordm; bit passa para o 6&ordm; bit, assim sucessivamente at&eacute; o 2&ordm; bit. O estado antigo do 1&ordm; bit passa para o bit <span class="c47 c6 c34">C</span>do registrador <span class="c47 c6 c34">STATUS</span>e o antigo estado do bit <span class="c47 c6 c34">C</span>do registrador <span class="c47 c6 c34">STATUS</span>passa para o 7&ordm; bit do registrador de endere&ccedil;o/nome <span class="c47 c6 c34">f</span>, fechando o ciclo da rota&ccedil;&atilde;o. O resultado desta instru&ccedil;&atilde;o/opera&ccedil;&atilde;o ser&aacute; armazenado no registrador </span><span class="c6 c34 c37">W</span>se <span class="c47 c6 c34">d</span>for igual a 0, mas se <span class="c47 c6 c34">d</span>for igual a 1 o resultado &eacute; armazenado no registrador de endere&ccedil;o/nome <span class="c47 c6 c34">f</span>. A instru&ccedil;&atilde;o afeta o bit <span class="c47 c6 c34">C</span>do registrador <span class="c47 c6 c34">STATUS</span>. O C&oacute;digo 9.4 mostra o uso da instru&ccedil;&atilde;o e a Tabela 9.2 exibe o processo.</p><p class="c12"><span class="c34">C&oacute;digo 9.4 -</span>Exemplo do uso da instru&ccedil;&atilde;o </span><span class="c3">RRF</span></p><a id="t.edbe73c4c5e660cc918d954b09bef6551442eef3"></a><a id="t.108"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c42 c8 c76">; INSTRUCAO: RRF</span></p><p class="c19"><span class="c42 c8 c76">; APLICA O OPERADOR DE ROTACAO A DIREITA SOBRE O</span></p><p class="c19"><span class="c42 c8 c76">; CONTEUDO DO REG. f E COLOCA EM d</span></p><p class="c19"><span class="c9">BCF</span><span class="c8">  </span><span class="c47 c34">STATUS</span><span class="c8">, </span><span class="c42 c47 c34 c53">C</span></p><p class="c19"><span class="c9">MOVLW</span><span class="c8"> </span><span class="c42 c8 c54">.197</span></p><p class="c19"><span class="c9">MOVWF</span><span class="c8"> </span><span class="c42 c8 c54">0x0C</span></p><p class="c19"><span class="c9">RRF</span><span class="c8">  </span><span class="c8 c54">0x0C</span><span class="c8">, </span><span class="c42 c8 c54">0</span></p><p class="c19 c14"><span class="c2"></span></p></td></tr></tbody></table><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Tabela 9.2 - </span>Opera&ccedil;&atilde;o de rota&ccedil;&atilde;o &agrave; direita do n&uacute;mero 197</span><span class="c6 c62">10</span></p><a id="t.518f51fb9238594746580b0c788805f9ba28767b"></a><a id="t.109"></a><table class="c56"><tbody><tr class="c21"><td class="c22"><p class="c1"><span class="c26">C</span></p></td><td class="c61"><p class="c1"><span class="c26">bit 7</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 6</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 5</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 4</span></p></td><td class="c79"><p class="c1"><span class="c26">bit 3</span></p></td><td class="c46"><p class="c1"><span class="c26">bit 2</span></p></td><td class="c41"><p class="c1"><span class="c26">bit 1</span></p></td><td class="c41"><p class="c1"><span class="c26">bit 0</span></p></td><td class="c106"><p class="c1 c14"><span class="c26"></span></p></td><td class="c41"><p class="c1 c14"><span class="c26"></span></p></td><td class="c88"><p class="c1 c14"><span class="c26"></td>
</tr>
<tr class="c21"><td class="c22 c209"><p class="c1"><span class="c2">0</span></p></td><td class="c61 c188"><p class="c1"><span class="c2">1</span></p></td><td class="c66 c100"><p class="c1"><span class="c2">1</span></p></td><td class="c66 c197"><p class="c1"><span class="c2">0</span></p></td><td class="c66 c141"><p class="c1"><span class="c2">0</span></p></td><td class="c79 c164"><p class="c1"><span class="c2">0</span></p></td><td class="c46 c148"><p class="c1"><span class="c2">1</span></p></td><td class="c41 c116"><p class="c1"><span class="c2">0</span></p></td><td class="c41 c129"><p class="c1"><span class="c2">1</span></p></td><td class="c106"><p class="c1"><span class="c5">=</span></p></td><td class="c41"><p class="c1"><span>197</span><span class="c63 c62 c50 c53 c44">10</span></p></td><td class="c88"><p class="c1"><span class="c2">0xC5</span></p></td></tr><tr class="c51"><td class="c114" colspan="12" rowspan="1"><p class="c1"><span class="c26">ROTA&Ccedil;&Atilde;O &Agrave; DIREITA</td>
</tr>
<tr class="c21"><td class="c22 c129"><p class="c1"><span class="c2">1</span></p></td><td class="c61 c209"><p class="c1"><span class="c2">0</span></p></td><td class="c66 c188"><p class="c1"><span class="c2">1</span></p></td><td class="c66 c100"><p class="c1"><span class="c2">1</span></p></td><td class="c66 c197"><p class="c1"><span class="c2">0</span></p></td><td class="c79 c141"><p class="c1"><span class="c2">0</span></p></td><td class="c46 c246"><p class="c1"><span class="c2">0</span></p></td><td class="c41 c148"><p class="c1"><span class="c2">1</span></p></td><td class="c41 c116"><p class="c1"><span class="c2">0</span></p></td><td class="c106"><p class="c1"><span class="c5">=</span></p></td><td class="c41"><p class="c1"><span>98</span><span class="c62">10</span></p></td><td class="c88"><p class="c1"><span class="c2">0x62</span></p></td></tr></tbody></table><p class="c11">A instru&ccedil;&atilde;o </span><span class="c3">SWAPF</span><span class="c47 c6 c34">f,d</span>&eacute; respons&aacute;vel por trocar os </span><i>nibbles</span>do registrador de endere&ccedil;o/nome <span class="c47 c6 c34">f</span>, isto &eacute;, os primeiros 4 bits menos significativos do valor armazenado no registrador de endere&ccedil;o/nome <span class="c47 c6 c34">f</span>&eacute; o </span><i>nibble</span>menos significativo do valor do registrador de endere&ccedil;o/nome <span class="c47 c6 c34">f</span>, enquanto que os 4 bits mais significativo do valor do registrador de endere&ccedil;o/nome <span class="c47 c6 c34">f</span>&eacute; o </span><i>nibble</span>mais deste deste valor. Assim, essa instru&ccedil;&atilde;o troca as posi&ccedil;&otilde;es dos </span><i>nibbles</span>. Nenhum bit do registrador <span class="c47 c6 c34">STATUS</span>&eacute; afetado por esta instru&ccedil;&atilde;o. O C&oacute;digo 9.5 mostra o uso da instru&ccedil;&atilde;o e a Tabela 9.3 exibe o processo.</p><p class="c12"><span class="c34">C&oacute;digo 9.5 -</span>Exemplo do uso da instru&ccedil;&atilde;o </span><span class="c3">SWAPF</span></p><a id="t.b388885816e07d1917c4781ed89588f1834d8172"></a><a id="t.110"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c42 c8 c76">; INSTRUCAO: SWAPF</span></p><p class="c19"><span class="c42 c8 c76">; TROCA OS NIBBLES (GRUPO DE 4 BITS) MAIS SIGNIFICATIVO</span></p><p class="c19"><span class="c42 c8 c76">; PARA O MENOS SIGNIFICATIVO SOBRE O CONTEUDO DO REG. f</span></p><p class="c19"><span class="c42 c8 c76">; E COLOCA EM d</span></p><p class="c19"><span class="c9">MOVLW</span><span class="c8"> </span><span class="c42 c8 c54">.197</span></p><p class="c19"><span class="c9">MOVWF</span><span class="c8"> </span><span class="c42 c8 c54">0x0C</span></p><p class="c19"><span class="c9">SWAPF</span><span class="c8"> </span><span class="c8 c54">0x0C</span><span class="c8">, </span><span class="c42 c8 c54">0</span></p><p class="c19 c14"><span class="c2"></span></p></td></tr></tbody></table><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Tabela 9.3 - </span>Opera&ccedil;&atilde;o de troca de nibbles do n&uacute;mero 197</span><span class="c6 c62">10</span></p><a id="t.dab3f68360cb522ee512e60b6368cc54877cd715"></a><a id="t.111"></a><table class="c56"><tbody><tr class="c21"><td class="c61"><p class="c1"><span class="c26">bit 7</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 6</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 5</span></p></td><td class="c66"><p class="c1"><span class="c26">bit 4</span></p></td><td class="c79"><p class="c1"><span class="c26">bit 3</span></p></td><td class="c46"><p class="c1"><span class="c26">bit 2</span></p></td><td class="c41"><p class="c1"><span class="c26">bit 1</span></p></td><td class="c41"><p class="c1"><span class="c26">bit 0</span></p></td><td class="c106"><p class="c1 c14"><span class="c26"></span></p></td><td class="c41"><p class="c1 c14"><span class="c26"></span></p></td><td class="c88"><p class="c1 c14"><span class="c26"></td>
</tr>
<tr class="c21"><td class="c61 c197"><p class="c1"><span class="c2">1</span></p></td><td class="c66 c197"><p class="c1"><span class="c2">1</span></p></td><td class="c66 c197"><p class="c1"><span class="c2">0</span></p></td><td class="c66 c197"><p class="c1"><span class="c2">0</span></p></td><td class="c79 c138"><p class="c1"><span class="c2">0</span></p></td><td class="c46 c138"><p class="c1"><span class="c2">1</span></p></td><td class="c41 c138"><p class="c1"><span class="c2">0</span></p></td><td class="c41 c138"><p class="c1"><span class="c2">1</span></p></td><td class="c106"><p class="c1"><span class="c5">=</span></p></td><td class="c41"><p class="c1"><span>197</span><span class="c63 c62 c50 c53 c44">10</span></p></td><td class="c88"><p class="c1"><span class="c2">0xC5</span></p></td></tr><tr class="c51"><td class="c251" colspan="11" rowspan="1"><p class="c1"><span class="c26">TROCA NIBBLES</td>
</tr>
<tr class="c21"><td class="c61 c138"><p class="c1"><span class="c2">0</span></p></td><td class="c66 c138"><p class="c1"><span class="c2">1</span></p></td><td class="c66 c138"><p class="c1"><span class="c2">0</span></p></td><td class="c66 c138"><p class="c1"><span class="c2">1</span></p></td><td class="c79 c197"><p class="c1"><span class="c2">1</span></p></td><td class="c46 c197"><p class="c1"><span class="c2">1</span></p></td><td class="c41 c197"><p class="c1"><span class="c2">0</span></p></td><td class="c41 c197"><p class="c1"><span class="c2">0</span></p></td><td class="c106"><p class="c1"><span class="c5">=</span></p></td><td class="c41"><p class="c1"><span>92</span><span class="c62">10</span></p></td><td class="c88"><p class="c1"><span class="c2">0x5C</span></p></td></tr></tbody></table><p class="c11">E por &uacute;ltimo temos a instru&ccedil;&atilde;o </span><span class="c6 c34 c37">NOP</span>que &eacute; respons&aacute;vel por apenas consumir um ciclo de opera&ccedil;&atilde;o, sendo definida como &ldquo;</span><i>No OPeration</span>&rdquo; (nenhuma opera&ccedil;&atilde;o). &Eacute; muito usada em estruturas de </span><i>delay</span>. O C&oacute;digo 9.6 mostra o uso da instru&ccedil;&atilde;o.</p><p class="c12"><span class="c34">C&oacute;digo 9.6 -</span>Exemplo do uso da instru&ccedil;&atilde;o </span><span class="c3">NOP</span></p><a id="t.61bc5a32e67f03081ffdb9aa49048fc5114496c5"></a><a id="t.112"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c42 c8 c76">; INSTRUCAO: NOP</span></p><p class="c19"><span class="c42 c8 c76">; EXECUTA UM CICLO DE MAQUINA. NAO PROCESSA NENHUM</span></p><p class="c19"><span class="c42 c8 c76">; CALCULO ARITMETICO OU LOGICO</span></p><p class="c19"><span class="c42 c9">NOP</span></p><p class="c19 c14"><span class="c2"></span></p></td></tr></tbody></table><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><hr style="page-break-before:always;display:none;"><h1 class="c75 c35" id="h.3et4er6p39fp"><span class="c28 c87"></span></h1><h1 class="c95 c35" id="h.elclzztxr9nq"><span class="c28 c87">Epis&oacute;dio 10: Exemplo 2 - Criando delay no PIC16F628A</span></h1><p class="c11">Aqui neste epis&oacute;dio se abordar&aacute; o processo para &ldquo;pausa&rdquo; na execu&ccedil;&atilde;o de algumas tarefas desejadas</p><p class="c11">No microcontrolador existem duas formas de &ldquo;parar&rdquo; de fazer algo que afeta o computador, sendo que a primeira &eacute; via instru&ccedil;&atilde;o </span><span class="c3">NOP</span>ou pela instru&ccedil;&atilde;o </span><span class="c3">SLEEP</span>que ser&aacute; vista no epis&oacute;dio 26. Aqui, veremos uma pausa por certo tempo, assim precisamos entender de ciclo de instru&ccedil;&atilde;o</p><p class="c11">A Figura 10.1 exibe as instru&ccedil;&otilde;es e seus devidos ciclos.</p><p class="c12"><span class="c34">Figura 10.1</span>- Conjunto de instru&ccedil;&otilde;es do PIC16F628A</span></p><a id="t.3c9232b2d5d9ea2a259f8403ad80b64e9db35916"></a><a id="t.113"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c11"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 590.00px; height: 517.33px;"><img alt="" src="images/image30.png" style="width: 590.00px; height: 517.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr></tbody></table><p class="c19"><span class="citacaoFigura">Fonte: MICROCHIP 2020 (b) p&aacute;gina 117</span></p><p class="c11">O microcontrolador PIC16F628A executa cada instru&ccedil;&atilde;o em um (ou dois, dependendo da instru&ccedil;&atilde;o) ciclo e cada ciclo de instru&ccedil;&atilde;o consome &eacute; dada pela equa&ccedil;&atilde;o, em segundos, da Figura 10.2.</p><p class="c12"><span class="c34">Figura 10.2</span>- Tempo de execu&ccedil;&atilde;o de um ciclo no PIC16F628A</span></p><a id="t.3c9232b2d5d9ea2a259f8403ad80b64e9db35916"></a><a id="t.114"></a><table class="c7"><tbody><tr class="c21"><td class="c247"><p class="c12"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 383.00px; height: 57.00px;"><img alt="" src="images/image40.png" style="width: 383.00px; height: 57.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr></tbody></table><p class="c24">    </span><span class="citacaoFigura">Fonte: Pr&oacute;prio autor</span></p><p class="c11">Conforme datasheet do PIC16F628A na se&ccedil;&atilde;o &ldquo;3.2 Instruction Flow/Pipelining&ldquo;, uma instru&ccedil;&atilde;o consiste de quatro ciclos Q (Q1, Q2, Q3 e Q4) onde a instru&ccedil;&atilde;o &eacute; buscada e executada em cada ciclo de instru&ccedil;&atilde;o, isto &eacute;, enquanto uma instru&ccedil;&atilde;o est&aacute; sendo buscada a seguinte que j&aacute; foi buscada est&aacute; sendo executada e isto &eacute; considerada na Figura 10.3 (Figura 2.10 sobre </span><i>Clock</span>e ciclo de instru&ccedil;&atilde;o) onde se tem quatro tempos Q1 a Q4.</p><p class="c12"><span class="c34">Figura 10.3</span>- Ciclo de clock e instru&ccedil;&atilde;o de execu&ccedil;&atilde;o do PIC16F628A</span></p><a id="t.3c9232b2d5d9ea2a259f8403ad80b64e9db35916"></a><a id="t.115"></a><table class="c56"><tbody><tr class="c238"><td class="c68"><p class="c11"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 590.00px; height: 208.00px;"><img alt="" src="images/image74.png" style="width: 590.00px; height: 208.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr></tbody></table><p class="c19"><span class="citacaoFigura">Fonte: MICROCHIP 2020 (b) p&aacute;gina 15</span></p><p class="c11">Por exemplo, a instru&ccedil;&atilde;o </span><span class="c3">NOP</span>consome 1 ciclo de instru&ccedil;&atilde;o conforme Figura 10.1. Assim, para uma frequ&ecirc;ncia de clock de 4 MHz, o tempo de execu&ccedil;&atilde;o de uma instru&ccedil;&atilde;o </span><span class="c3">NOP</span>&eacute; de 1 &mu;s, conforme Figura 10.4 e se&ccedil;&atilde;o &ldquo;15.1 Read-Modify-Write Operations&rdquo; do datasheet do PIC16F628A.</p><p class="c12"><span class="c34">Figura 10.4</span>- Tempo de execu&ccedil;&atilde;o da instru&ccedil;&atilde;o </span><span class="c3 c60">NOP</span></p><a id="t.3c9232b2d5d9ea2a259f8403ad80b64e9db35916"></a><a id="t.116"></a><table class="c7"><tbody><tr class="c21"><td class="c68"><p class="c12"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 383.00px; height: 255.00px;"><img alt="" src="images/image25.png" style="width: 383.00px; height: 255.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr></tbody></table><p class="c24"><span class="textoVermelho">Fonte: Pr&oacute;prio autor</span></p><p class="c12 c14"></p><p class="c11">Agora se a frequ&ecirc;ncia do clock for de 16 MHz ou 20 MHz a mesma instru&ccedil;&atilde;o ter&atilde;o o tempo de execu&ccedil;&atilde;o de 250 ns e 200 ns respectivamente</p><p class="c11">Com essas informa&ccedil;&otilde;es pode-se projetar delay, baseando na quantidade de ciclos executados e na frequ&ecirc;ncia de clock utilizada no microcontrolador</p><p class="c11">Vamos aos exemplos usando como base a frequ&ecirc;ncia de clock igual a 4 MHz, logo cada ciclo &eacute; executado em 1 &#x1d707;s</p><p class="c11"><span class="c34">EXEMPLO 10.1 - </span>Neste exemplo queremos criar um delay de 100 &#x1d707;s, no qual se usa a frequ&ecirc;ncia de clock de 4 MHz no microcontrolador. Pelo comentado anteriormente, se o clock do PIC16F628A &eacute; de 4 MHz, temos que cada ciclo de instru&ccedil;&atilde;o &eacute; executado em 1 &#x1d707;s, e como queremos 100 &#x1d707;s, decorre que precisamos de &ldquo;consumir&rdquo; 100 ciclos. O C&oacute;digo 10.1 exibe uma solu&ccedil;&atilde;o para esta proposta de delay de 100 &#x1d707;s.</p><p class="c12"><span class="c34">C&oacute;digo 10.1 -</span>Exemplo de delay de 100 &#x1d707;s</span></p><a id="t.9eb5940fa1ba8cfcc52b96175ef99792cda15385"></a><a id="t.117"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c11 c14"><span class="c2"></span></p><p class="c11"><span class="c42 c8 c76">; inicia registrador de uso geral 0x20</span></p><p class="c11"><span class="c42 c8 c76">; com o valor 33 em decimal</span></p><p class="c11"><span class="c8">  </span><span class="c9">MOVLW</span><span class="c8">   </span><span class="c8 c54">.33</span><span class="c8">    </span><span class="c42 c8 c76">; 1 ciclo</span></p><p class="c11"><span class="c8">  </span><span class="c9">MOVWF</span><span class="c8">   </span><span class="c8 c54">0x20</span><span class="c8">   </span><span class="c42 c8 c76">; 1 ciclo</span></p><p class="c11"><span class="c8">loop</span><span class="c2">:</span></p><p class="c11"><span class="c8">  </span><span class="c9">DECFSZ</span><span class="c8">   </span><span class="c8 c54">0x20</span><span class="c8">   </span><span class="c42 c8 c76">; 1 ciclo  &gt;---+--+  &lt;--+</span></p><p class="c11"><span class="c8">              </span><span class="c42 c8 c76">;        | |    |</span></p><p class="c11"><span class="c8">  </span><span class="c9">GOTO</span><span class="c8">    </span><span class="c8">loop</span><span class="c8">   </span><span class="c42 c8 c76">; 2 ciclos &lt;---+ |  &gt;--+</span></p><p class="c11"><span class="c8">              </span><span class="c42 c8 c76">;         |</span></p><p class="c11"><span class="c8">  </span><span class="c9">NOP</span><span class="c8">          </span><span class="c42 c8 c76">; 1 ciclo  &lt;------+</span></p><p class="c67 c14"><span class="c5"></span></p></td></tr></tbody></table><p class="c11">Pelo C&oacute;digo 10.1 pode ser feita a seguinte an&aacute;lise baseada na Tabela 10.1</span></p><p class="c12"><span class="c34">Tabela 10.1 -</span>An&aacute;lise dos ciclos de execu&ccedil;&atilde;o das instru&ccedil;&otilde;es do C&oacute;digo 10.1</span></p><a id="t.f282bba70195d63e1bff883a84f356032210eaad"></a><a id="t.118"></a><table class="c56"><tbody><tr class="c21"><td class="c119"><p class="c1"><span class="c26">INSTRU&Ccedil;&Atilde;O</span></p></td><td class="c125"><p class="c1"><span class="c26">CICLO/INSTRU&Ccedil;&Atilde;O</span></p></td><td class="c64"><p class="c1"><span class="c26">QUANT. EXECUTADA</span></p></td><td class="c90"><p class="c1"><span class="c26">TOTAL</td>
</tr>
<tr class="c21"><td class="c119"><p class="c1"><span class="c3 c60">MOVLW</span></p></td><td class="c125"><p class="c1"><span class="c5">1 ciclo</span></p></td><td class="c64"><p class="c1"><span class="c5">1 &#8729; 1 ciclo</span></p></td><td class="c90"><p class="c1"><span class="c5">1 ciclo</td>
</tr>
<tr class="c21"><td class="c119"><p class="c1"><span class="c3 c60">MOVWF</span></p></td><td class="c125"><p class="c1"><span class="c5">1 ciclo</span></p></td><td class="c64"><p class="c1"><span class="c5">1 &#8729; 1 ciclo</span></p></td><td class="c90"><p class="c1"><span class="c5">1 ciclo</td>
</tr>
<tr class="c21"><td class="c119"><p class="c1"><span class="c3 c60">DECFSZ</span></p></td><td class="c125"><p class="c1"><span class="c5">1 ciclo</span></p></td><td class="c64"><p class="c1"><span class="c5">33 &#8729; 1 ciclo</span></p></td><td class="c90"><p class="c1"><span class="c5">33 ciclos</td>
</tr>
<tr class="c21"><td class="c119"><p class="c1"><span class="c3 c60">GOTO</span></p></td><td class="c125"><p class="c1"><span class="c5">2 ciclo</span></p></td><td class="c64"><p class="c1"><span class="c5">32 &#8729; 2 ciclos</span></p></td><td class="c90"><p class="c1"><span class="c5">64 ciclos</td>
</tr>
<tr class="c21"><td class="c119"><p class="c1"><span class="c3 c60">NOP</span></p></td><td class="c125"><p class="c1"><span class="c5">1 ciclo</span></p></td><td class="c64"><p class="c1"><span class="c5">1 &#8729; 1 ciclo</span></p></td><td class="c90"><p class="c1"><span class="c5">1 ciclo</td>
</tr>
<tr class="c21"><td class="c119"><p class="c67 c14"><span class="c5"></span></p></td><td class="c125"><p class="c67 c14"><span class="c5"></span></p></td><td class="c64 c219"><p class="c175"><span class="c42 c34 c50 c191">TOTAL</span></p></td><td class="c90 c219"><p class="c67"><span class="c42 c34 c50 c191">100 ciclos = 100 &#x1d707;s</span></p></td></tr></tbody></table><p class="c11"><span class="citacaoFigura">Fonte: Proprio autor</span></p><p class="c11"><span class="c34">EXEMPLO 10.2 - </span>Neste exemplo queremos criar um delay de 1000 &#x1d707;s (1 ms), no qual usando a frequ&ecirc;ncia de clock de 4 MHz, teremos que 1000 &#x1d707;s &eacute; igual a 1000 ciclos. </span>Vejamos o C&oacute;digo 10.2 esse delay.</p><p class="c12"><span class="c34">C&oacute;digo 10.2 -</span>Exemplo de delay de 1000 &#x1d707;s (1 ms)</span></p><a id="t.63f01c3461a785b5002027589c1e298f0365502b"></a><a id="t.119"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c11 c14"><span class="c2"></span></p><p class="c11"><span class="c42 c8 c76">; inicia registrador de uso geral 0x20</span></p><p class="c11"><span class="c42 c8 c76">; com o valor 250 em decimal</span></p><p class="c11"><span class="c8">  </span><span class="c9">MOVLW</span><span class="c8">   </span><span class="c8 c54">.250</span><span class="c8">   </span><span class="c42 c8 c76">; 1 ciclo</span></p><p class="c11"><span class="c8">  </span><span class="c9">MOVWF</span><span class="c8">   </span><span class="c8 c54">0x20</span><span class="c8">   </span><span class="c42 c8 c76">; 1 ciclo</span></p><p class="c11"><span class="c2">loop:</span></p><p class="c11"><span class="c8">  </span><span class="c9">NOP</span><span class="c8">          </span><span class="c42 c8 c76">; 1 ciclo  &lt;--------------+</span></p><p class="c11"><span class="c8">              </span><span class="c13 c8">;              |</span></p><p class="c11"><span class="c8">  </span><span class="c9">DECFSZ</span><span class="c8">   </span><span class="c8 c54">0x20</span><span class="c8">   </span><span class="c42 c8 c76">; 1 ciclo;  &gt;---+--+    |</span></p><p class="c11"><span class="c8">              </span><span class="c8 c76">;        | |    |</span></p><p class="c11"><span class="c8">  </span><span class="c9">GOTO</span><span class="c8">    </span><span class="c8">loop</span><span class="c8">   </span><span class="c42 c8 c76">; 2 ciclos  &lt;---+ |  &gt;--+</span></p><p class="c11"><span class="c8">              </span><span class="c8 c115">;</span><span class="c42 c8 c76">         |</span></p><p class="c11"><span class="c8">  </span><span class="c9">NOP</span><span class="c8">          </span><span class="c8 c115">;</span><span class="c42 c8 c76">      &lt;------+ </span></p><p class="c19 c14"><span class="c5"></span></p></td></tr></tbody></table><p class="c11">Pelo C&oacute;digo 10.2 pode ser feita a seguinte an&aacute;lise baseada na Tabela 10.2.</p><p class="c12"><span class="c34">Tabela 10.2 -</span>An&aacute;lise dos ciclos de execu&ccedil;&atilde;o das instru&ccedil;&otilde;es do C&oacute;digo 10.2</span></p><a id="t.548f69f03ecd7ab249a2ba9dc21f740bbb69ce6f"></a><a id="t.120"></a><table class="c56"><tbody><tr class="c21"><td class="c119"><p class="c1"><span class="c26">INSTRU&Ccedil;&Atilde;O</span></p></td><td class="c125"><p class="c1"><span class="c26">CICLO/INSTRU&Ccedil;&Atilde;O</span></p></td><td class="c64"><p class="c1"><span class="c26">QUANT. EXECUTADA</span></p></td><td class="c90"><p class="c1"><span class="c26">TOTAL</td>
</tr>
<tr class="c21"><td class="c119"><p class="c1"><span class="c3 c60">MOVLW</span></p></td><td class="c125"><p class="c1"><span class="c5">1 ciclo</span></p></td><td class="c64"><p class="c1"><span class="c5">1 &#8729; 1 ciclo</span></p></td><td class="c90"><p class="c1"><span class="c5">1 ciclo</td>
</tr>
<tr class="c21"><td class="c119"><p class="c1"><span class="c3 c60">MOVWF</span></p></td><td class="c125"><p class="c1"><span class="c5">1 ciclo</span></p></td><td class="c64"><p class="c1"><span class="c5">1 &#8729; 1 ciclo</span></p></td><td class="c90"><p class="c1"><span class="c5">1 ciclo</td>
</tr>
<tr class="c21"><td class="c119"><p class="c1"><span class="c3 c60">NOP</span></p></td><td class="c125"><p class="c1"><span class="c5">1 ciclo</span></p></td><td class="c64"><p class="c1"><span class="c5">250 &#8729; 1 ciclo</span></p></td><td class="c90"><p class="c1"><span class="c5">250 ciclos</td>
</tr>
<tr class="c21"><td class="c119"><p class="c1"><span class="c3 c60">DECFSZ</span></p></td><td class="c125"><p class="c1"><span class="c5">1 ciclo</span></p></td><td class="c64"><p class="c1"><span class="c5">250 &#8729; 1 ciclo</span></p></td><td class="c90"><p class="c1"><span class="c5">250 ciclos</td>
</tr>
<tr class="c21"><td class="c119"><p class="c1"><span class="c3 c60">GOTO</span></p></td><td class="c125"><p class="c1"><span class="c5">2 ciclo</span></p></td><td class="c64"><p class="c1"><span class="c5">249 &#8729; 2 ciclos</span></p></td><td class="c90"><p class="c1"><span class="c5">498 ciclos</td>
</tr>
<tr class="c21"><td class="c119"><p class="c67 c14"><span class="c5"></span></p></td><td class="c125"><p class="c1 c14"><span class="c5"></span></p></td><td class="c64 c219"><p class="c175"><span class="c42 c34 c50 c191">TOTAL</span></p></td><td class="c90 c219"><p class="c67"><span class="c42 c34 c50 c191">1000 ciclos = 1 ms</span></p></td></tr></tbody></table><p class="c11"><span class="textoVermelho">Fonte: Pr&oacute;prio autor</span></p><p class="c11">Agora vejamos exemplos de loops em 1, 2 e 3 n&iacute;veis para que possamos calcular tempos. Vejamos o Exemplo 10.3, Exemplo 10.4 e Exemplo 10.5 que tratar&atilde;o de equacionar esses tempos</p><p class="c11"><span class="c34">Exemplo 10.3 - </span>Loop com 1 n&iacute;vel</span></p><p class="c12"><span class="c34">C&oacute;digo 10.3 -</span>Exemplo de delay com 1 n&iacute;vel</span></p><a id="t.2ad422c08ce5457b00b3f7cf7d70def387492e06"></a><a id="t.121"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c11 c14"><span class="c2"></span></p><p class="c11"><span class="c8">  </span><span class="c9">MOVLW</span><span class="c8"> </span><span class="c8 c54">.250</span><span class="c8"> </span><span class="c42 c8 c76">; (1)         ; 1 ciclo</span></p><p class="c11"><span class="c8">  </span><span class="c9">MOVWF</span><span class="c8"> </span><span class="c8 c54">0x20</span><span class="c8"> </span><span class="c42 c8 c76">; (2)         ; 1 ciclo</span></p><p class="c11"><span class="c8">loop:       </span><span class="c42 c8 c76">; (3) &lt;-------------+ ;</span></p><p class="c11"><span class="c8">  </span><span class="c42 c8 c76">; ...     ; (4)        | ; 250 por cada instrucao</span></p><p class="c11"><span class="c8">         </span><span class="c42 c8 c76">; (5)        | ;</span></p><p class="c11"><span class="c8">  </span><span class="c9">DECFSZ</span><span class="c8"> </span><span class="c8 c54">0x20</span><span class="c8"> </span><span class="c42 c8 c76">; (6) &gt;---+---+   | ; 250 * 1 ciclo = 250 ciclos</span></p><p class="c11"><span class="c8">         </span><span class="c42 c8 c76">; (7)   |  |   | ;</span></p><p class="c11"><span class="c8">  </span><span class="c9">GOTO</span><span class="c8">  loop </span><span class="c42 c8 c76">; (8) &lt;---+  | &gt;---+ ; 249 * 2 ciclos = 498 ciclos</span></p><p class="c19"><span class="c8">         </span><span class="c42 c8 c76">; (9)     |    ;</span></p><p class="c19"><span class="c8">  </span><span class="c8"> </span><span class="c8">     </span><span class="c42 c8 c76">; (10) &lt;------+    ; TOTAL = 750 ciclos</span></p><p class="c19 c14"><span class="c2"></span></p></td></tr></tbody></table><p class="c11">Assim, o total de ciclos para o Exemplo 10.3 &eacute; dada por</span></p><p class="c11"><span class="c2">TOTAL CICLOS = 2 ciclos + valor * 1 ciclo + (valor - 1) * 2 ciclos</span></p><p class="c11"><span class="c2">      = 2 ciclos + valor * 1 ciclo + valor * 2 ciclos - 1 * 2 ciclos</span></p><p class="c11"><span class="c2">      = 3 * valor [ciclos]</span></p><p class="c11">Assim, pelo C&oacute;digo 10.3, tem-se que o valor armazenado no registrador de endere&ccedil;o <span class="definesASM1">0x20</span>&eacute; 250</span><span class="c6 c62">10</span>. Logo o total de ciclos &eacute; calculado como</span></p><p class="c11"><span class="c2">TOTAL CICLOS = 3 * valor [ciclos]</span></p><p class="c11"><span class="c2">      = 3 * 250 [ciclos]</span></p><p class="c11"><span class="c2">      = 750 [ciclos]</span></p><p class="c11">Na linha 4 do C&oacute;digo 10.3, foi colocado retic&ecirc;ncias para dizer que podem haver mais instru&ccedil;&otilde;es. Assim se houver </span><i>n</span>instru&ccedil;&otilde;es de 1 ciclo de instru&ccedil;&atilde;o entre as linhas 3 e 6 a express&atilde;o de <span class="definesASM1">TOTAL CICLOS</span>ficar&aacute;</span></p><p class="c11"><span class="c2">TOTAL CICLOS = 2 ciclos + n * valor * 1 ciclo + valor * 1 ciclo +</span></p><p class="c11"><span class="c2">                     + (valor -1) * 2 ciclos</span></p><p class="c11 c14"><span class="c2"></span></p><p class="c11"><span class="c2">      = 2 ciclos + valor * n * 1 ciclo + valor * 1 ciclo +</span></p><p class="c11"><span class="c2">                + valor * 2 ciclos - 1 * 2 ciclos</span></p><p class="c11 c14"><span class="c2"></span></p><p class="c11"><span class="c2">      = valor * n ciclos + 3 * valor ciclos</span></p><p class="c11 c14"><span class="c2"></span></p><p class="c11"><span class="c2">      = (3 + n) * valor [ciclos]</span></p><p class="c11">Assim, se utilizarmos duas instru&ccedil;&otilde;es </span><span class="c3">NOP</span>entre as linhas 3 e 6 do C&oacute;digo 10.3, teremos um total de </span></p><p class="c11"><span class="c2">TOTAL CICLOS = (3 + n) * valor [ciclos]</span></p><p class="c11"><span class="c2">      = (3 + 2) * 250 [ciclos]</span></p><p class="c11"><span class="c2">      = 1250 [ciclos]</span></p><p class="c11">Agora veremos o Exemplo 10.4 o qual tratar&aacute; de delay com 2 n&iacute;veis, isto &eacute;, duas estruturas de repeti&ccedil;&atilde;o no c&oacute;digo</p><p class="c11"><span class="c34">Exemplo 10.4 -</span>Neste exemplo veremos um delay com lo</span>op com 2 n&iacute;veis, como forma de aumentar o intervalo de tempo consumido. Veja o C&oacute;digo 10.4 o qual tem a implementa&ccedil;&atilde;o para esse delay fazendo uso de dois valores: 10</span><span class="c6 c62">10</span>e 200</span><span class="c6 c62">10.</p><p class="c12"><span class="c34">C&oacute;digo 10.4 -</span>Exemplo de delay com dois n&iacute;veis</span></p><a id="t.d4df99def04bf268666bdaad436808a0dc71006e"></a><a id="t.122"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c11 c14"><span class="c2"></span></p><p class="c11"><span class="c8">  </span><span class="c9">MOVLW</span><span class="c8"> </span><span class="c8 c54">.10</span><span class="c8"> </span><span class="c42 c8 c76">; (1)</span></p><p class="c11"><span class="c8">  </span><span class="c9">MOVWF</span><span class="c8"> </span><span class="c8 c54">0x20</span><span class="c8"> </span><span class="c42 c8 c76">; (2)</span></p><p class="c11"><span class="c8">  </span><span class="c9">MOVLW</span><span class="c8"> </span><span class="c8 c54">.200</span><span class="c8"> </span><span class="c42 c8 c76">; (3)</span></p><p class="c11"><span class="c8">  </span><span class="c9">MOVWF</span><span class="c8"> </span><span class="c8 c54">0x21</span><span class="c8"> </span><span class="c42 c8 c76">; (4)</span></p><p class="c11"><span class="c8">loop:       </span><span class="c42 c8 c76">; (5) &lt;---+ &lt;------------------+</span></p><p class="c11"><span class="c8">         </span><span class="c42 c8 c76">; (6)   |          |</span></p><p class="c11"><span class="c8">  </span><span class="c9">DECFSZ</span><span class="c8"> </span><span class="c8 c54">0x20</span><span class="c8"> </span><span class="c42 c8 c76">; (7)   | &gt;---+       |</span></p><p class="c11"><span class="c8">         </span><span class="c42 c8 c76">; (8)   |   |       |</span></p><p class="c11"><span class="c8">  </span><span class="c9">GOTO</span><span class="c8">  loop </span><span class="c42 c8 c76">; (9) &gt;---+   |       |</span></p><p class="c11"><span class="c8">         </span><span class="c42 c8 c76">; (10)     |       |</span></p><p class="c11"><span class="c8">  </span><span class="c9">DECFSZ</span><span class="c8"> </span><span class="c8 c54">0x21</span><span class="c8"> </span><span class="c42 c8 c76">; (11) &lt;--------+ &gt;--+----+  |</span></p><p class="c11"><span class="c8">         </span><span class="c42 c8 c76">; (12)        |  |  |</span></p><p class="c11"><span class="c8">  </span><span class="c9">GOTO</span><span class="c8">  loop </span><span class="c42 c8 c76">; (13) &lt;-------------+  | &gt;--+</span></p><p class="c19"><span class="c8">         </span><span class="c42 c8 c76">; (14)          |</span></p><p class="c19"><span class="c8">  </span><span class="c8"> </span><span class="c8">     </span><span class="c42 c8 c76">; (15) &lt;------------------+</span></p><p class="c19 c14"><span class="c2"></span></p></td></tr></tbody></table><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Assim, pela Tabela 10.3, pode-se ver a an&aacute;lise da quantidade de ciclos utilizados nesta rotina de delay.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Tabela 10.2 -</span>An&aacute;lise dos ciclos de execu&ccedil;&atilde;o das instru&ccedil;&otilde;es do C&oacute;digo 10.4</span></p><a id="t.4016f24767f6ebbbab1c424476c2c0814f4fdfa3"></a><a id="t.123"></a><table class="c56"><tbody><tr class="c21"><td class="c70"><p class="c1"><span class="c26">Linha</span></p></td><td class="c143"><p class="c1"><span class="c26">Instru&ccedil;&atilde;o</span></p></td><td class="c151"><p class="c1"><span class="c26">Quant. ciclos</td>
</tr>
<tr class="c21"><td class="c70"><p class="c1"><span class="c5">1</span></p></td><td class="c143"><p class="c1"><span class="c3 c60">MOVLW</span></p></td><td class="c151"><p class="c1"><span class="c5">1</td>
</tr>
<tr class="c21"><td class="c70"><p class="c1"><span class="c5">2</span></p></td><td class="c143"><p class="c1"><span class="c3 c60">MOVWF</span></p></td><td class="c151"><p class="c1"><span class="c5">1</td>
</tr>
<tr class="c21"><td class="c70"><p class="c1"><span class="c5">3</span></p></td><td class="c143"><p class="c1"><span class="c3 c60">MOVLW</span></p></td><td class="c151"><p class="c1"><span class="c5">1</td>
</tr>
<tr class="c21"><td class="c70"><p class="c1"><span class="c5">4</span></p></td><td class="c143"><p class="c1"><span class="c3 c60">MOVWF</span></p></td><td class="c151"><p class="c1"><span class="c5">1</td>
</tr>
<tr class="c21"><td class="c70"><p class="c1"><span class="c5">7</span></p></td><td class="c143"><p class="c1"><span class="c3 c60">DECFSZ</span></p></td><td class="c151"><p class="c1"><span class="c5">valor1 * 1 ciclo + 255 * 1 ciclo * valor2</td>
</tr>
<tr class="c21"><td class="c70"><p class="c1"><span class="c5">9</span></p></td><td class="c143"><p class="c1"><span class="c3 c60">GOTO</span></p></td><td class="c151"><p class="c1"><span class="c5">(valor1 - 1) * 2 ciclos + 254 * 2 ciclos * valor2</td>
</tr>
<tr class="c21"><td class="c70"><p class="c1"><span class="c5">11</span></p></td><td class="c143"><p class="c1"><span class="c3 c60">DECFSZ</span></p></td><td class="c151"><p class="c1"><span class="c5">valor2 * 1 ciclo</td>
</tr>
<tr class="c21"><td class="c70"><p class="c1"><span class="c5">13</span></p></td><td class="c143"><p class="c1"><span class="c3 c60">GOTO</span></p></td><td class="c151"><p class="c1"><span class="c5">(valor2 - 1) * 2 ciclos</span></p></td></tr></tbody></table><p class="c11"><span class="textoVermelho">Fonte: Pr&oacute;prio autor</span></p><p class="c11">Assim, o total de ciclos para o exemplo &eacute; dada por</span></p><p class="c24"><span class="c2">TOTAL CICLOS = 4 ciclos + valor1 * 1 ciclo + 255 * 1 ciclo * valor2 +</span></p><p class="c24"><span class="c2">       + (valor1 - 1) * 2 ciclos + 254 * 2 ciclos * valor2 +</span></p><p class="c24"><span class="c2">       + valor2 * 1 ciclo + (valor2 - 1) * 2 ciclos</span></p><p class="c24 c14"><span class="c2"></span></p><p class="c24"><span class="c2">      = 4 + valor1 + 255 * valor2 + 2 * valor1 - 2 + 508 * valor2 +</span></p><p class="c24"><span class="c2">       + valor2 + 2 * valor2 - 2</span></p><p class="c24 c14"><span class="c2"></span></p><p class="c24"><span class="c2">      = 3 * valor1 + 766 * valor2 [ciclos]</span></p><p class="c11">Para o C&oacute;digo 10.4, o total de ciclos ser&aacute; de </span></p><p class="c24"><span class="c2">TOTAL CICLOS = 3 * valor1 + 766 * valor2 [ciclos]</span></p><p class="c24"><span class="c2">      = 3 * 10 + 766 * 200 [ciclos]</span></p><p class="c24"><span class="c2">      = 153230 [ciclos]</span></p><p class="c11">E por &uacute;ltimo, veremos um exemplo de loop com 3 n&iacute;veis. Nesta s&eacute;rie, baseamos os c&aacute;lculos em apenas 3 n&iacute;veis, mas o leitor pode estender isso para mais n&iacute;veis, aumentando gradualmente o intervalo de delay</p><p class="c11"><span class="c34">Exemplo 10.5 -</span>Neste exemplo veremos um loo</span>p com 3 n&iacute;veis, que ser&aacute; o maior utilizado e comentado nos nossos exemplos desta s&eacute;rie. Os valores usados neste exemplo s&atilde;o: 10</span><span class="c6 c62">10</span>, 200</span><span class="c6 c62">10</span>e 133</span><span class="c6 c62">10.</p><p class="c12"><span class="c34">C&oacute;digo 10.5 -</span>Exemplo de delay com tr&ecirc;s n&iacute;veis</span></p><a id="t.89b83f9155939f0762daa7a1e9c18c1a923e58d6"></a><a id="t.124"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c11 c14"><span class="c2"></span></p><p class="c11"><span class="c8">  </span><span class="c9">MOVLW</span><span class="c8"> </span><span class="c8 c54">.10</span><span class="c8"> </span><span class="c42 c8 c76">; (1)</span></p><p class="c11"><span class="c8">  </span><span class="c9">MOVWF</span><span class="c8"> </span><span class="c8 c54">0x20</span><span class="c8"> </span><span class="c42 c8 c76">; (2)</span></p><p class="c11"><span class="c8">  </span><span class="c9">MOVLW</span><span class="c8"> </span><span class="c8 c54">.200</span><span class="c8"> </span><span class="c42 c8 c76">; (3)</span></p><p class="c11"><span class="c8">  </span><span class="c9">MOVWF</span><span class="c8"> </span><span class="c8 c54">0x21</span><span class="c8"> </span><span class="c42 c8 c76">; (4)</span></p><p class="c11"><span class="c8">  </span><span class="c9">MOVLW</span><span class="c8"> </span><span class="c8 c54">.133</span><span class="c8"> </span><span class="c42 c8 c76">; (5)</span></p><p class="c11"><span class="c8">  </span><span class="c9">MOVWF</span><span class="c8"> </span><span class="c8 c54">0x22</span><span class="c8"> </span><span class="c8 c76">; (6)</span></p><p class="c11"><span class="c8">loop:       </span><span class="c42 c8 c76">; (7) &lt;------------+ &lt;--+ &lt;--+</span></p><p class="c11"><span class="c8">         </span><span class="c42 c8 c76">; (8)        |  |  |</span></p><p class="c11"><span class="c8">  </span><span class="c9">DECFSZ</span><span class="c8"> </span><span class="c8 c54">0x20</span><span class="c8"> </span><span class="c42 c8 c76">; (9) &gt;--+----+  |  |  |</span></p><p class="c11"><span class="c8">         </span><span class="c42 c8 c76">; (10)  |  |  |  |  |</span></p><p class="c11"><span class="c8">  </span><span class="c9">GOTO</span><span class="c8">  loop </span><span class="c42 c8 c76">; (11) &lt;--+  | &gt;--+  |  |</span></p><p class="c11"><span class="c8">         </span><span class="c42 c8 c76">; (12)     |     |  |</span></p><p class="c11"><span class="c8">  </span><span class="c9">DECFSZ</span><span class="c8"> </span><span class="c8 c54">0x21</span><span class="c8"> </span><span class="c42 c8 c76">; (13) &gt;--+ &lt;--+ &gt;--+  |  |</span></p><p class="c11"><span class="c8">         </span><span class="c42 c8 c76">; (14)  |     |  |  |</span></p><p class="c11"><span class="c8">  </span><span class="c9">GOTO</span><span class="c8">  loop </span><span class="c42 c8 c76">; (15) &lt;--+     | &gt;--+  |</span></p><p class="c11"><span class="c8">         </span><span class="c42 c8 c76">; (16)       |     |</span></p><p class="c11"><span class="c8">  </span><span class="c9">DECFSZ</span><span class="c8"> </span><span class="c8 c54">0x22</span><span class="c8"> </span><span class="c42 c8 c76">; (17) &gt;--+ &lt;-------+ &gt;--+  |</span></p><p class="c11"><span class="c8">         </span><span class="c42 c8 c76">; (18)  |       |  |</span></p><p class="c11"><span class="c8">  </span><span class="c9">GOTO</span><span class="c8">  loop </span><span class="c42 c8 c76">; (19) &lt;--+       | &gt;--+</span></p><p class="c19"><span class="c8">         </span><span class="c42 c8 c76">; (20)          |</span></p><p class="c19"><span class="c8">  </span><span class="c8"></span><span class="c8">      </span><span class="c42 c8 c76">; (21) &lt;-----------------+</span></p><p class="c19 c14"><span class="c2"></span></p></td></tr></tbody></table><p class="c11">Assim, baseado no C&oacute;digo 10.5, constr&oacute;i-se a Tabela 10.3 a qual faz a an&aacute;lise do total de ciclos deste fragmento de c&oacute;digo.</p><p class="c12"><span class="c34">Tabela 10.3 -</span>An&aacute;lise dos ciclos de execu&ccedil;&atilde;o das instru&ccedil;&otilde;es do C&oacute;digo 10.5</span></p><a id="t.7e1625cf296453e5ad0fbe3620907553c732ba5c"></a><a id="t.125"></a><table class="c56"><tbody><tr class="c21"><td class="c70"><p class="c1"><span class="c26">Linha</span></p></td><td class="c143"><p class="c1"><span class="c26">Instru&ccedil;&atilde;o</span></p></td><td class="c151"><p class="c1"><span class="c26">Quant. ciclos</td>
</tr>
<tr class="c21"><td class="c70"><p class="c1"><span class="c5">1</span></p></td><td class="c143"><p class="c1"><span class="c3 c60">MOVLW</span></p></td><td class="c151"><p class="c1"><span class="c5">1</td>
</tr>
<tr class="c21"><td class="c70"><p class="c1"><span class="c5">2</span></p></td><td class="c143"><p class="c1"><span class="c3 c60">MOVWF</span></p></td><td class="c151"><p class="c1"><span class="c5">1</td>
</tr>
<tr class="c21"><td class="c70"><p class="c1"><span class="c5">3</span></p></td><td class="c143"><p class="c1"><span class="c3 c60">MOVLW</span></p></td><td class="c151"><p class="c1"><span class="c5">1</td>
</tr>
<tr class="c21"><td class="c70"><p class="c1"><span class="c5">4</span></p></td><td class="c143"><p class="c1"><span class="c3 c60">MOVWF</span></p></td><td class="c151"><p class="c1"><span class="c5">1</td>
</tr>
<tr class="c21"><td class="c70"><p class="c1"><span class="c5">5</span></p></td><td class="c143"><p class="c1"><span class="c3 c60">MOVLW</span></p></td><td class="c151"><p class="c1"><span class="c5">1</td>
</tr>
<tr class="c21"><td class="c70"><p class="c1"><span class="c5">6</span></p></td><td class="c143"><p class="c1"><span class="c3 c60">MOVWF</span></p></td><td class="c151"><p class="c1"><span class="c5">1</td>
</tr>
<tr class="c21"><td class="c70"><p class="c1"><span class="c5">9</span></p></td><td class="c143"><p class="c1"><span class="c3 c60">DECFSZ</span></p></td><td class="c151"><p class="c1"><span class="c5">valor1 * 1 ciclo + 255 * valor2 * valor3 * 1 ciclo</td>
</tr>
<tr class="c21"><td class="c70"><p class="c1"><span class="c5">11</span></p></td><td class="c143"><p class="c1"><span class="c3 c60">GOTO</span></p></td><td class="c151"><p class="c1"><span class="c5">(valor1 - 1) * 2 ciclos + 254 * valor2 * valor3 * 2 ciclos</td>
</tr>
<tr class="c21"><td class="c70"><p class="c1"><span class="c5">13</span></p></td><td class="c143"><p class="c1"><span class="c3 c60">DECFSZ</span></p></td><td class="c151"><p class="c1"><span class="c5">valor2 * 1 ciclo + 255 * valor3 * 1 ciclo</td>
</tr>
<tr class="c21"><td class="c70"><p class="c1"><span class="c5">15</span></p></td><td class="c143"><p class="c1"><span class="c3 c60">GOTO</span></p></td><td class="c151"><p class="c1"><span class="c5">(valor1 - 1) * 2 ciclos + 254 * valor3 * 2 ciclos</td>
</tr>
<tr class="c21"><td class="c70"><p class="c1"><span class="c5">17</span></p></td><td class="c143"><p class="c1"><span class="c3 c60">DECFSZ</span></p></td><td class="c151"><p class="c1"><span class="c5">valor3 * 1 ciclo</td>
</tr>
<tr class="c21"><td class="c70"><p class="c1"><span class="c5">19</span></p></td><td class="c143"><p class="c1"><span class="c3 c60">GOTO</span></p></td><td class="c151"><p class="c1"><span class="c5">(valor3 - 1) * 2 ciclos</span></p></td></tr></tbody></table><p class="c11">Com isso, o total de ciclos &eacute; dada por</span></p><p class="c24"><span class="c2">TOTAL CICLOS = 4 + valor1 + 255 * valor2 * valor3 + (valor1 - 1) * 2 +</span></p><p class="c24"><span class="c2">       + 254 * valor2 * valor3 * 2 + valor2 + 255 * valor3 +</span></p><p class="c24"><span class="c2">       + (valor1 - 1) * 2 + 254 * valor3 * 2 + valor3 +</span></p><p class="c24"><span class="c2">       + (valor3 - 1) * 2</span></p><p class="c24 c14"><span class="c2"></span></p><p class="c24"><span class="c2">      = -2 + 3 * valor1 + 3 * valor2 + (763 * valor2 + 766) * valor3</span></p><p class="c11">Logo, para o C&oacute;digo 10.5 tem-se que o total de ciclos &eacute; igual a</span></p><p class="c24"><span class="c2">TOTAL CICLOS = -2 + 3 * valor1 + 3 * valor2 + (763 * valor2 + 766) * valor3</span></p><p class="c24"><span class="c2">      = -2 + 3 * 10   + 3 * 200  + (763 * 200  + 766) * 133</span></p><p class="c24"><span class="c2">      = 20398306 [ciclos]</span></p><p class="c11">Se neste exemplo a frequ&ecirc;ncia do clock do PIC16F628A for de 4 MHz, esse delay ser&aacute; de 20398306 &mu;s, que &eacute; aproximadamente, 20 segundos</p><p class="c11">No Exemplo 10.3, Exemplo 10.4 e Exemplo 10.5 vimos que pelo padr&atilde;o gerado, temos associado as seguintes equa&ccedil;&otilde;es na Tabela 10.4.</p><p class="c12"><span class="c34">Tabela 10.4 -</span>Quantidade de ciclos em fun&ccedil;&atilde;o da quantidade de n&iacute;veis</span></p><a id="t.5499abf9c64e907c4c84cae689b256c15ec1648e"></a><a id="t.126"></a><table class="c7"><tbody><tr class="c21"><td class="c48"><p class="c1">Quant. n&iacute;veis</span></p></td><td class="c102"><p class="c1">Quant. ciclos</td>
</tr>
<tr class="c21"><td class="c48"><p class="c1">1</span></p></td><td class="c102"><p class="c11">3 * n</span><span class="c131 c6 c62 c50 c53 c44">1</td>
</tr>
<tr class="c21"><td class="c48"><p class="c1">2</span></p></td><td class="c102"><p class="c24">3 * n</span><span class="c6 c62">1</span>+ 766 * n</span><span class="c131 c6 c62 c50 c53 c44">2</td>
</tr>
<tr class="c21"><td class="c48"><p class="c1">3</span></p></td><td class="c102"><p class="c24">-2 + 3 * n</span><span class="c6 c62">1</span>+ 3 * n</span><span class="c6 c62">2</span>+ 763 * n</span><span class="c6 c62">2</span>* n</span><span class="c6 c62">3</span>+ 766 * n</span><span class="c131 c6 c62 c50 c53 c44">3</span></p></td></tr></tbody></table><p class="c12 c14"></p><p class="c11">Assim, para os n&iacute;veis 2 e 3 podem-se ter v&aacute;rias combina&ccedil;&otilde;es de n</span><span class="c6 c62">1</span>,n</span><span class="c6 c62">2</span>e n</span><span class="c6 c62">3</span>que geram a mesma quantidade de ciclos totais. Sabendo que tanto n</span><span class="c6 c62">1</span>, n</span><span class="c6 c62">2</span>, n</span><span class="c6 c62">3</span>e a quantidade de ciclos s&atilde;o n&uacute;meros naturais (n&uacute;mero inteiro positivo ou nulo), precisamos resolver a equa&ccedil;&atilde;o dada a quantidade total de ciclos desejada</p><p class="c11"><span class="c34">Exemplo 10.6 -</span>Neste exemplo desejamos a quantidade de 2783 ciclos, 700 ciclos e 196095 ciclos para loop em dois n&iacute;veis. Para isso, temos que encontrar quais s&atilde;o os valores inteiros n</span><span class="c6 c62">1</span></span>e n</span><span class="c6 c62">2</span>que produzem um resultado pr&oacute;ximo de 2873 ciclos, 700 ciclos e 196095 ciclos</p><p class="c11">Resolu&ccedil;&atilde;o: Para come&ccedil;ar a resolu&ccedil;&atilde;o temos que procurar saber quanto o maior parte (766) cabe dentro de cada um e o que sobrar veja quanto cabem a outra parte O importante &eacute; saber que n</span><span class="c6 c62">1</span>e n</span><span class="c6 c62">2</span>deve estar entre 0 (incluindo) e 255 (incluso tamb&eacute;m). Vejamos os c&aacute;lculos:</span></p><ul class="c80 lst-kix_ms4xrytks1z8-0 start"><li class="c31">2783 ciclos</span></li></ul><p class="c11 c23">2783 = 3 * 766 + 485</span></p><p class="c11 c23"> 485 = 161 * 3 + 2</span></p><p class="c11 c23 c14"></p><p class="c11 c23">2783 = (3 * 161) + (766 * 3) + 2</span></p><p class="c11 c23">2783 = 2781 + 2</span></p><p class="c11 c23 c14"></p><p class="c11 c23">Com isso</span></p><p class="c12 c23">0 &lt;= </span><span class="c34">n</span><span class="c6 c34 c62">1</span><span class="c34">=161</span>&lt;= 255</span></p><p class="c12 c23">0 &lt;= </span><span class="c34">n</span><span class="c6 c34 c62">2</span><span class="c34">=3</span>&lt;= 255</span></p><p class="c12 c14 c23"></p><p class="c11 c23">Esses dois ciclos podem ser conseguidos por duas instru&ccedil;&otilde;es </span><span class="c3">NOP</span>ou uma instru&ccedil;&atilde;o </span><span class="c3">GOTO $+1</span>ao final da estrutura de repeti&ccedil;&atilde;o.</span></p><p class="c11 c23 c14"></p><ul class="c80 lst-kix_ms4xrytks1z8-0"><li class="c31">700 ciclos</span></li></ul><p class="c11 c23">700 = 0 * 766 + 700</span></p><p class="c11 c23"> 700 = 233 * 3 + 1</span></p><p class="c11 c23 c14"></p><p class="c11 c23">700 = (3 * 233) + (766 * 0) + 1</span></p><p class="c11 c23">2783 = 2781 + 2</span></p><p class="c11 c23 c14"></p><p class="c11 c23">Com isso</span></p><p class="c12 c23">0 &lt;= </span><span class="c34">n</span><span class="c6 c34 c62">1</span><span class="c34">=233</span>&lt;= 255</span></p><p class="c12 c23">0 &lt;= </span><span class="c34">n</span><span class="c6 c34 c62">2</span><span class="c34">=0</span>&lt;= 255</span></p><p class="c11 c23 c14"></p><p class="c11 c23">Esse um ciclo faltante pode ser conseguido por uma instru&ccedil;&atilde;o </span><span class="c3">NOP.</span></p><p class="c11 c23 c14"></p><ul class="c80 lst-kix_ms4xrytks1z8-0"><li class="c31"><span class="c34">196095</span>ciclos</span></li></ul><p class="c11 c23">196095 = 255 * 766 + 765</span></p><p class="c11 c23"> 765 = 255 * 3 + 0</span></p><p class="c11 c23 c14"></p><p class="c11 c23">196095 = (3 * 255) + (766 * 255)</span></p><p class="c11 c23 c14"></p><p class="c11 c23">Com isso</span></p><p class="c12 c23">0 &lt;= </span><span class="c34">n</span><span class="c6 c34 c62">1</span><span class="c34">=255</span>&lt;= 255</span></p><p class="c12 c23">0 &lt;= </span><span class="c34">n</span><span class="c6 c34 c62">2</span><span class="c34">=255</span>&lt;= 255</span></p><p class="c11 c23 c14"></p><p class="c11 c23">Neste exemplo pode-se ver que a maior quantidade de ciclos obtidos sem modifica&ccedil;&atilde;o do exemplo 4 &eacute; de 196095 ciclos, por&eacute;m esta quantidade pode ser aumentada adicionando instru&ccedil;&otilde;es dentro da estrutura de repeti&ccedil;&atilde;o do exemplo 10.4</p><p class="c11"><span class="citacaoFigura">RETIRAR</span></p><p class="c11"><span class="textoVermelho">Para a resolu&ccedil;&atilde;o desse problema, faremos uso de equia&ccedil;&otilde;es diofantinas (para saber um pouquinho mais sobre o assunto, acesse os links </span><span class="c59 c6 c39"><a href="https://www.google.com/url?q=https://pt.wikipedia.org/wiki/Equa%25C3%25A7%25C3%25A3o_diofantina&amp;sa=D&amp;source=editors&amp;ust=1619797899721000&amp;usg=AOvVaw3j400WHLS7FPijjwQvAqwP">https://pt.wikipedia.org/wiki/Equa&ccedil;&atilde;o_diofantina</a></span><span class="textoVermelho">, </span><span class="c59 c6 c39"><a href="https://www.google.com/url?q=https://rpm.org.br/cdrpm/19/9.htm&amp;sa=D&amp;source=editors&amp;ust=1619797899721000&amp;usg=AOvVaw323Zxf0fILJujnlpq4Xu7M">https://rpm.org.br/cdrpm/19/9.htm</a></span><span class="textoVermelho">e </span><span class="c59 c6 c39"><a href="https://www.google.com/url?q=https://www.ufsj.edu.br/portal2-repositorio/File/comat/tcc_Ricardo.pdf&amp;sa=D&amp;source=editors&amp;ust=1619797899721000&amp;usg=AOvVaw1eiXwbN-tQU6C5Fj-SYb01">https://www.ufsj.edu.br/portal2-repositorio/File/comat/tcc_Ricardo.pdf</a></span><span class="citacaoFigura">) no qual necessitamos encontrar os n&uacute;meros inteiros positivos que satisfa&ccedil;am a equa&ccedil;&atilde;o de 2 n&iacute;veis de loop para uma quantidade dada de total de ciclos.</span></p><p class="c11 c14"><span class="citacaoFigura"></span></p><p class="c11"><span class="textoVermelho">Assim, a equa&ccedil;&atilde;o </span><span class="c6 c39 c34 c37">3 * a + 766 * b = 2783</span><span class="citacaoFigura">precisa ser resolvida para podermos encontrar a e b.</span></p><p class="c11 c14"><span class="citacaoFigura"></span></p><p class="c11"><span class="citacaoFigura">Primeiramente precisamos saber se a equa&ccedil;&atilde;o tem solu&ccedil;&atilde;o para esse valor de 2783 ciclos e para isso aplicamos o processo de exist&ecirc;ncia de solu&ccedil;&atilde;o de uma equa&ccedil;&atilde;o diofantina.</span></p><p class="c11 c14"><span class="citacaoFigura"></span></p><p class="c11"><span class="textoVermelho">Para que uma equa&ccedil;&atilde;o diofantina tenha solu&ccedil;&atilde;o, o MDC (M&aacute;ximo Divisor Comum) dos valores 3 e 766 tem que dividir o valor 2783. Neste caso calculamos o MDC de 3 e 766 (que &eacute; o mesmo c&aacute;lculo do MDC de 766 e 3) utilizando o Algoritmo de Euclides (</span><span class="c59 c6 c39"><a href="https://www.google.com/url?q=https://pt.wikipedia.org/wiki/Algoritmo_de_Euclides&amp;sa=D&amp;source=editors&amp;ust=1619797899722000&amp;usg=AOvVaw1DmfW6L3xYRUZ5hmRpcJJ9">https://pt.wikipedia.org/wiki/Algoritmo_de_Euclides</a></span><span class="citacaoFigura">) tem-se:</span></p><p class="c11 c14"><span class="citacaoFigura"></span></p><p class="c12"><span class="c6 c39 c34">Tabela 10.5 -</span><span class="citacaoFigura">C&aacute;lculo do MDC de 766 e 3 </span></p><a id="t.70a4884e8b8332bf319b102196648b9330e7506f"></a><a id="t.127"></a><table class="c7"><tbody><tr class="c21"><td class="c217"><p class="c1"><span class="c60 c6 c39 c34 c50">quociente</span></p></td><td class="c158"><p class="c1"><span class="citacaoFigura">255</span></p></td><td class="c140"><p class="c1"><span class="citacaoFigura">3</td>
</tr>
<tr class="c21"><td class="c168 c217"><p class="c1"><span class="citacaoFigura">766</span></p></td><td class="c158 c168"><p class="c1"><span class="citacaoFigura">3</span></p></td><td class="c140 c168"><p class="c1"><span class="citacaoFigura">1</td>
</tr>
<tr class="c21"><td class="c153"><p class="c1"><span class="c60 c6 c39 c34 c50">resto</span></p></td><td class="c158 c234"><p class="c1"><span class="citacaoFigura">1</span></p></td><td class="c140 c234"><p class="c1"><span class="citacaoFigura">0</span></p></td></tr></tbody></table><p class="c11"><span class="citacaoFigura">                   Fonte: Pr&oacute;prio autor</span></p><p class="c11 c14"><span class="citacaoFigura"></span></p><p class="c11"><span class="citacaoFigura">O processo visto na Tabela 10.5 pode ser escrito como</span></p><p class="c12 c14"><span class="citacaoFigura"></span></p><a id="t.62ef4258fd5c1c5db2887085a6129bb955f69ace"></a><a id="t.128"></a><table class="c7"><tbody><tr class="c21"><td class="c136"><p class="c175"><span class="citacaoFigura">766</span></p></td><td class="c204"><p class="c1"><span class="citacaoFigura">=</span></p></td><td class="c192"><p class="c19"><span class="citacaoFigura">3 * 255 + 1</td>
</tr>
<tr class="c21"><td class="c136"><p class="c175"><span class="citacaoFigura">3</span></p></td><td class="c204"><p class="c1"><span class="citacaoFigura">=</span></p></td><td class="c192"><p class="c19"><span class="citacaoFigura">1 + 0</span></p></td></tr></tbody></table><p class="c11 c14"><span class="citacaoFigura"></span></p><p class="c11"><span class="textoVermelho">Assim o MDC de 766 e 3 &eacute; 1 conforme a Tabela 10.5 e a verifica&ccedil;&atilde;o e c&aacute;lculo de outros MDC pode ser feita no link </span><span class="c59 c6 c39"><a href="https://www.google.com/url?q=http://www.matematicadidatica.com.br/CalculadoraMMCMDC.aspx&amp;sa=D&amp;source=editors&amp;ust=1619797899727000&amp;usg=AOvVaw2yE6_PksyTo-zkxGSVyMJ2">http://www.matematicadidatica.com.br/CalculadoraMMCMDC.aspx</a></span><span class="citacaoFigura">.</span></p><p class="c11 c14"><span class="citacaoFigura"></span></p><p class="c11"><span class="c6 c39 c50 c44 c60">Agora o c&aacute;lculo dos valores de a&rsquo; e b&rsquo; &eacute; dado pelo processo inverso do Algoritmo de Euclides:</span></p><p class="c19 c14"><span class="citacaoFigura"></span></p><p class="c1"><span class="citacaoFigura">1 = 1 * 766 - 255 * 3</span></p><p class="c11 c14"><span class="citacaoFigura"></span></p><p class="c11"><span class="citacaoFigura">Ap&oacute;s obter o MDC de 766 e 3 que &eacute; 1, pode-se observar que 1 divide 2783. Portanto a equa&ccedil;&atilde;o acima sempre ter&aacute; solu&ccedil;&atilde;o pois o MDC de 3 e 766 &eacute; 1, limitando ao intervalo m&aacute;ximo obtido com delay de dois n&iacute;veis.</span></p><p class="c11 c14"><span class="citacaoFigura"></span></p><p class="c11"><span class="citacaoFigura">Assim, a solu&ccedil;&atilde;o da equa&ccedil;&atilde;o inicial do exemplo &eacute;</span></p><p class="c11 c14"><span class="citacaoFigura"></span></p><p class="c12 c14"><span class="citacaoFigura"></span></p><a id="t.314c2ca64bc79d8e966167b7adf64007cd06d5b7"></a><a id="t.129"></a><table class="c7"><tbody><tr class="c21"><td class="c118"><p class="c175"><span class="citacaoFigura">1</span></p></td><td class="c183"><p class="c1"><span class="citacaoFigura">=</span></p></td><td class="c203"><p class="c19"><span class="citacaoFigura">1 * 766 - 255 * 3</td>
</tr>
<tr class="c21"><td class="c118"><p class="c175"><span class="citacaoFigura">2783 * 1</span></p></td><td class="c183"><p class="c1"><span class="citacaoFigura">=</span></p></td><td class="c203"><p class="c19"><span class="citacaoFigura">2783 * 1 * 766 - 2783 * 255 * 3</td>
</tr>
<tr class="c21"><td class="c118"><p class="c175"><span class="citacaoFigura">2783</span></p></td><td class="c183"><p class="c1"><span class="citacaoFigura">=</span></p></td><td class="c203"><p class="c19"><span class="citacaoFigura">2783 * 766 - 709665 * 3</td>
</tr>
<tr class="c21"><td class="c118"><p class="c175"><span class="citacaoFigura">2783</span></p></td><td class="c183"><p class="c1"><span class="citacaoFigura">=</span></p></td><td class="c203"><p class="c19"><span class="citacaoFigura">- 709665 * 3 + 2783 * 766</td>
</tr>
<tr class="c21"><td class="c118"><p class="c175"><span class="citacaoFigura">2783</span></p></td><td class="c183"><p class="c1"><span class="citacaoFigura">=</span></p></td><td class="c203"><p class="c19"><span class="citacaoFigura">a0 * 3 + b0 * 766</span></p></td></tr></tbody></table><p class="c12 c14"><span class="citacaoFigura"></span></p><p class="c67"><span class="citacaoFigura">Assim os valores de a0 = -709665 e b0 = 2783. Por&eacute;m estes valores est&atilde;o fora do limite que s&atilde;o maior ou igual a zero e menor ou igual a 255.</span></p><p class="c67 c14"><span class="citacaoFigura"></span></p><p class="c67"><span class="citacaoFigura">As solu&ccedil;&otilde;es s&atilde;o da forma</span></p><p class="c1"><span class="citacaoFigura">a = -709665 + 766 * k</span></p><p class="c1"><span class="citacaoFigura">b = 2783 - 3 * k</span></p><p class="c67 c14"><span class="citacaoFigura"></span></p><p class="c67"><span class="citacaoFigura">A Tabela 10.6 exibe os valores e escolhemos a solu&ccedil;&atilde;o que satisfa&ccedil;a o limite permitido dos registradores do PIC16F628A.</span></p><p class="c67 c14"><span class="citacaoFigura"></span></p><p class="c12"><span class="c6 c39 c34">Tabela 10.6 -</span><span class="citacaoFigura">C&aacute;lculo dos valores da solu&ccedil;&atilde;o</span></p><a id="t.f695886761a10faf2bcaef797d46d922713ee2ae"></a><a id="t.130"></a><table class="c7"><tbody><tr class="c21"><td class="c158"><p class="c1"><span class="c60 c6 c39 c34 c50">k</span></p></td><td class="c10"><p class="c1"><span class="c60 c6 c39 c34 c50">a</span></p></td><td class="c10"><p class="c1"><span class="c60 c6 c39 c34 c50">b</td>
</tr>
<tr class="c21"><td class="c158"><p class="c1"><span class="citacaoFigura">1</span></p></td><td class="c10"><p class="c1"><span class="citacaoFigura">-708899</span></p></td><td class="c10"><p class="c1"><span class="citacaoFigura">2780</td>
</tr>
<tr class="c21"><td class="c158"><p class="c1"><span class="citacaoFigura">2</span></p></td><td class="c10"><p class="c1"><span class="citacaoFigura">-708133</span></p></td><td class="c10"><p class="c1"><span class="citacaoFigura">2777</td>
</tr>
<tr class="c21"><td class="c158"><p class="c1"><span class="citacaoFigura">3</span></p></td><td class="c10"><p class="c1"><span class="citacaoFigura">-707367</span></p></td><td class="c10"><p class="c1"><span class="citacaoFigura">2774</td>
</tr>
<tr class="c21"><td class="c158"><p class="c1"><span class="citacaoFigura">...</span></p></td><td class="c10"><p class="c1"><span class="citacaoFigura">...</span></p></td><td class="c10"><p class="c1"><span class="citacaoFigura">...</td>
</tr>
<tr class="c21"><td class="c158"><p class="c1"><span class="citacaoFigura">255</span></p></td><td class="c10"><p class="c1"><span class="citacaoFigura">-514335</span></p></td><td class="c10"><p class="c1"><span class="citacaoFigura">2018</td>
</tr>
<tr class="c21"><td class="c158"><p class="c1"><span class="citacaoFigura">...</span></p></td><td class="c10"><p class="c1"><span class="citacaoFigura">...</span></p></td><td class="c10"><p class="c1"><span class="citacaoFigura">...</span></p></td></tr></tbody></table><p class="c12 c14"><span class="citacaoFigura"></span></p><p class="c67 c14"><span class="citacaoFigura"></span></p><p class="c67"><span class="citacaoFigura">Para encontrar uma solu&ccedil;&atilde;o vi&aacute;vel,</span></p><p class="c67 c14"><span class="citacaoFigura"></span></p><p class="c1"><span class="citacaoFigura">0 &lt;= -709665 + 766 * k &lt;= 255</span></p><p class="c1 c14"><span class="citacaoFigura"></span></p><p class="c1"><span class="citacaoFigura">709665 &lt;= 766 * k &lt;= 709920</span></p><p class="c1 c14"><span class="citacaoFigura"></span></p><p class="c1"><span class="citacaoFigura">709665/766 &lt;= k &lt;= 709920/766</span></p><p class="c1 c14"><span class="citacaoFigura"></span></p><p class="c1"><span class="citacaoFigura">926.45 &lt;= k &lt;= 926.79</span></p><p class="c1 c14"><span class="citacaoFigura"></span></p><p class="c67"><span class="citacaoFigura">que neste caso n&atilde;o teremos pois n&atilde;o existe um valor de k natural que satisfa&ccedil;a 926.45 &lt;= k &lt;= 926.79. Assim devemos subtrair em 1 unidade o valor anterior de 2783 ciclos, para come&ccedil;ar novamente o c&aacute;lculo com 2782 ciclos.</span></p><p class="c11 c14"><span class="citacaoFigura"></span></p><p class="c11 c14"><span class="citacaoFigura"></span></p><p class="c11"><span class="c60 c6 c39 c34 c50">[COLOCAR AQUI EQUA&Ccedil;&Otilde;ES DIOFANTINAS] https://arxiv.org/ftp/arxiv/papers/0910/0910.2246.pdf</span></p><p class="c11 c14"><span class="citacaoFigura"></span></p><p class="c11"><span class="citacaoFigura">Com essas express&otilde;es pode-se obter tempos pr&oacute;ximos e adaptando-se isso, consegue-se valor exatos de tempo.</span></p><p class="c11 c14"><span class="citacaoFigura"></span></p><p class="c11"><span class="textoVermelho">O exemplo cria um projeto conhecido como &ldquo;blink&rdquo; semelhante ao &ldquo;blink&rdquo; do Arduino. (</span><span class="c6 c39 c34">coloca-se o link do projeto Arduino</span><span class="citacaoFigura">)</p><p class="c11">Agora vejamos o exemplo 10.7 no qual cria-se um pisca-pisca com tempo aproximado de 1 segundo ligado e 500 milisegundos desligado</p><p class="c11"><span class="c34">Exemplo 10.7 -</span>Seja o circuito da Figura 10.5 no qual deseja-se que o LED fique aceso por aproximadamente 1 segundo e fique apagado 0.5 segundo. O PIC16F628A est&aacute; usando o oscilador interno de 4 MHz. O processo deve ser repetido continuamente, produzindo um pisca-pisca.</p><p class="c12"><span class="c34">Figura 10.5 -</span>Circuito para pisca-pisca</span></p><a id="t.3c9232b2d5d9ea2a259f8403ad80b64e9db35916"></a><a id="t.131"></a><table class="c7"><tbody><tr class="c21"><td class="c221"><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 321.11px; height: 274.20px;"><img alt="" src="images/image62.png" style="width: 321.11px; height: 274.20px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr></tbody></table><p class="c24">               </span><span class="citacaoFigura">Fonte: Pr&oacute;prio autor(2021)</span></p><p class="c11">Para a resolu&ccedil;&atilde;o deste exemplo precisamos calcular os valores de n</span><span class="c6 c62">1</span>, n</span><span class="c6 c62">2</span>e n</span><span class="c6 c62">3</span>da express&atilde;o -2 + 3 * n</span><span class="c6 c62">1</span>+ 3 * n</span><span class="c6 c62">2</span>+ 763 * n</span><span class="c6 c62">2</span>* n</span><span class="c6 c62">3</span>+ 766 * n</span><span class="c6 c62">3</span>, pois como visto no exemplo 10.6, a express&atilde;o 3 * n</span><span class="c6 c62">1</span>+ 766 * n</span><span class="c6 c62">2</span>gera no m&aacute;ximo a quantidade de 196095 ciclos de m&aacute;quina. </span></p><p class="c11">Como a frequ&ecirc;ncia do clock &eacute; de 4 MHz, cada ciclo de instru&ccedil;&atilde;o &eacute; de 1 &mu;s, ent&atilde;o para:</span></p><ul class="c80 lst-kix_b2e26t3nqqtd-0 start"><li class="c31">1 segundo necessitamos de 1.000.000 &mu;s (1.000.000 ciclos em 4 MHz);</span></li><li class="c31">0,5 segundos necessitamos de 500.000 &mu;s (500.000 ciclos em 4 MHz);</span></li></ul><p class="c11">Portanto para:</span></p><ul class="c80 lst-kix_qhp3eq6k0gc0-0 start"><li class="c31">1 segundo</span></li></ul><p class="c12 c49">-2 + 3 * n</span><span class="c6 c62">1</span>+ 3 * n</span><span class="c6 c62">2</span>+ 763 * n</span><span class="c6 c62">2</span>* n</span><span class="c6 c62">3</span>+ 766 * n</span><span class="c6 c62">3</span>= 1.000.000</span></p><p class="c12 c49">-2 + 3 * n</span><span class="c6 c62">1</span>+ 3 * n</span><span class="c6 c62">2</span>+ 763 * n</span><span class="c6 c62">2</span>* n</span><span class="c6 c62">3</span>+ 766 * n</span><span class="c6 c62">3</span>&lt;</span>= 1.000.000</span></p><p class="c12 c49">3 * n</span><span class="c6 c62">1</span>+ 3 * n</span><span class="c6 c62">2</span>+ 763 * n</span><span class="c6 c62">2</span>* n</span><span class="c6 c62">3</span>+ 766 * n</span><span class="c6 c62">3</span>&lt;= 999.998</span></p><p class="c12 c49 c14"></p><p class="c12 c49"><span class="c60 c39 c50 c44 c149">ENCONTRAR UM JEITO DE RESOLVER ESTE PROBLEMA APLICANDO PROBLEMA DA MOCHILA INTEIRA.</span></p><ul class="c80 lst-kix_qhp3eq6k0gc0-0"><li class="c31">0,5 segundos</span></li></ul><p class="c12 c49">-2 + 3 * n</span><span class="c6 c62">1</span>+ 3 * n</span><span class="c6 c62">2</span>+ 763 * n</span><span class="c6 c62">2</span>* n</span><span class="c6 c62">3</span>+ 766 * n</span><span class="c6 c62">3</span>= 500.000</span></p><p class="c12 c49">-2 + 3 * n</span><span class="c6 c62">1</span>+ 3 * n</span><span class="c6 c62">2</span>+ 763 * n</span><span class="c6 c62">2</span>* n</span><span class="c6 c62">3</span>+ 766 * n</span><span class="c6 c62">3</span>&lt;= 500.000</span></p><p class="c12 c49">3 * n</span><span class="c6 c62">1</span>+ 3 * n</span><span class="c6 c62">2</span>+ 763 * n</span><span class="c6 c62">2</span>* n</span><span class="c6 c62">3</span>+ 766 * n</span><span class="c6 c62">3</span>&lt;= 499.998</span></p><p class="c12 c49 c14"></p><p class="c12 c49"><span class="c60 c39 c149 c50 c44">ENCONTRAR UM JEITO DE RESOLVER ESTE PROBLEMA APLICANDO PROBLEMA DA MOCHILA INTEIRA</p><p class="c11">Assim, o C&oacute;digo 10.5 exibe um exemplo de uso de delay com tr&ecirc;s n&iacute;veis.</p><p class="c12"><span class="c34">C&oacute;digo 10.5 -</span>Exemplo de delay com tr&ecirc;s n&iacute;veis</span></p><a id="t.6a01ceffbbe6b4e8db0195d7c12400320e994a11"></a><a id="t.132"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c11 c14"><span class="c2"></span></p><p class="c19"><span class="c13 c8"> ; DESENVOLVIDO POR EVERTON P. CRUZ</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; COM O PROPOSITO DE USO BASE PARA OS EPISODIOS</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; DA SERIE CONHECENDO O MICROCONTROLADOR PIC16F628A</span></p><p class="c19"><span class="c8"> </span><span class="c8 c20">#INCLUDE</span><span class="c8"></span><span class="c42 c8 c181">&lt;P16F628A.INC&gt;</span></p><p class="c19"><span class="c8"> </span><span class="c8 c20">LIST</span><span class="c8"></span><span class="c8 c18">P</span><span class="c8">=</span><span class="c42 c8 c18">16F628A</span></p><p class="c19"><span class="c8"> </span><span class="c8 c20">__CONFIG</span><span class="c8"></span><span class="c8 c18">_BOREN_ON</span><span class="c8">&amp; </span><span class="c8 c18">_CP_OFF</span><span class="c8">&amp; </span><span class="c8 c18">_PWRTE_ON</span><span class="c8">&amp; </span><span class="c8 c18">_WDT_OFF</span><span class="c8">&amp; </span><span class="c8 c18">_LVP_OFF</span><span class="c8">&amp; </span><span class="c8 c18">_MCLRE_OFF</span><span class="c8">&amp; </span><span class="c42 c8 c18">_INTRC_OSC_NOCLKOUT</span></p><p class="c19"><span class="c2"></span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; DEFINICAO DE VARIAVEIS</span></p><p class="c19"><span class="c8"> </span><span class="c8 c20">#DEFINE</span><span class="c8"></span><span class="c8 c18">N1</span><span class="c8"> 0x20    </span><span class="c13 c8">; VARIAVEL DE TEMPO N1</span></p><p class="c19"><span class="c8"> </span><span class="c8 c20">#DEFINE</span><span class="c8"></span><span class="c8 c18">N2</span><span class="c8"> 0x21    </span><span class="c13 c8">; VARIAVEL DE TEMPO N2</span></p><p class="c19"><span class="c8"> </span><span class="c8 c20">#DEFINE</span><span class="c8"></span><span class="c8 c18">N3</span><span class="c8"> 0x22    </span><span class="c13 c8">; VARIAVEL DE TEMPO N3</span></p><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c8"> </span><span class="c38 c44">#DEFINE</span><span class="c8"></span><span class="c8 c18">LED</span><span class="c8">PORTA, RA0 </span><span class="c8 c115">; PINO DO LED</span><span class="c2"> </span></p><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c8"> </span><span class="c8 c20">ORG</span><span class="c8">  0x00    </span><span class="c13 c8">; TRATAMENTO DO RESET</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">GOTO</span><span class="c8">  </span><span class="c42 c8 c18">SETUP_PROCESSO</span></p><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c8"> </span><span class="c8 c20">ORG</span><span class="c8">  0x04    </span><span class="c13 c8">; TRATAMENTO DAS INTERRUPCOES</span></p><p class="c19"><span class="c8"> </span><span class="c42 c38 c34">RETFIE</span></p><p class="c19"><span class="c2">  </span></p><p class="c19"><span class="c2">SETUP_PROCESSO:</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; SELECIONA O BANCO 1 DE MEMORIA</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c2"> STATUS, RP1</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> STATUS, RP0</span></p><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c8">PCON, OSCF </span><span class="c13 c8">; CONF. FREQ&Uuml;&Ecirc;NCIA DO OSCILADOR INTERNO EM 4 MHz</span></p><p class="c19"><span class="c2"> </span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; CONFIGURACOES DO REGISTRADOR OPTION</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">MOVLW</span><span class="c2">B&#39;10000000&#39;</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">MOVWF</span><span class="c2">OPTION_REG</span></p><p class="c19"><span class="c2">  </span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; MODIFICA O COMPORTAMENTO DO PORTA</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">MOVLW</span><span class="c2">B&#39;11111110&#39;</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">MOVWF</span><span class="c8">TRISA</span></p><p class="c19"><span class="c2">  </span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; MODIFICA O COMPORTAMENTO DO PORTB</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">MOVLW</span><span class="c8">B&#39;11111111&#39;</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">MOVWF</span><span class="c8">TRISB</span></p><p class="c19"><span class="c2">  </span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; SELECIONA O BANCO 0 DE MEMORIA</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c2"> STATUS, RP1</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c2"> STATUS, RP0  </span></p><p class="c19"><span class="c2">  </span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; DEFINE O MODO DE OPERACAO DO COMP. ANALOG. DESLIGADOS</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">MOVLW</span><span class="c2">B&#39;00000111&#39;</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">MOVWF</span><span class="c2">CMCON  </span></p><p class="c19"><span class="c2">  </span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; CONFIGURACOES DE INTERRUPCOES</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">MOVLW</span><span class="c8"></span><span class="c2">B&#39;00000000&#39;</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">MOVWF</span><span class="c8">INTCON</span></p><p class="c19"><span class="c2"> </span></p><p class="c19"><span class="c2">PRINCIPAL:</span></p><p class="c19"><span class="c8"> </span><span class="c8 c115">; DELAY DE 1 SEGUNDO</span></p><p class="c11"><span class="c8"> </span><span class="c9">MOVLW</span><span class="c8"> </span><span class="c8 c54">.</span><span class="c8 c54 c179">10</span><span class="c8"> </span><span class="c13 c8">; VALOR PARA N1</span></p><p class="c11"><span class="c8"> </span><span class="c9">MOVWF</span><span class="c8"> </span><span class="c42 c8 c18">N1</span></p><p class="c11"><span class="c8"> </span><span class="c9">MOVLW</span><span class="c8"> </span><span class="c8 c54">.</span><span class="c8 c54 c179">10</span><span class="c8"> </span><span class="c13 c8">; VALOR PARA N2</span></p><p class="c11"><span class="c8"> </span><span class="c9">MOVWF</span><span class="c8"> </span><span class="c42 c8 c18">N2</span></p><p class="c11"><span class="c8"> </span><span class="c9">MOVLW</span><span class="c8"> </span><span class="c8 c54">.</span><span class="c8 c54 c179">10</span><span class="c8"> </span><span class="c13 c8">; VALOR PARA N3</span></p><p class="c11"><span class="c8"> </span><span class="c9">MOVWF</span><span class="c8"> </span><span class="c42 c8 c18">N3</span></p><p class="c11"><span class="c8">loop1:</span></p><p class="c11"><span class="c8"> </span><span class="c9">DECFSZ</span><span class="c8"> </span><span class="c42 c8 c18">N1</span></p><p class="c11"><span class="c8"> </span><span class="c9">GOTO</span><span class="c8">  loop1</span></p><p class="c11"><span class="c8"> </span><span class="c9">DECFSZ</span><span class="c8"> </span><span class="c8 c18">N2</span></p><p class="c11"><span class="c8"> </span><span class="c9">GOTO</span><span class="c8">  loop1</span></p><p class="c11"><span class="c8"> </span><span class="c9">DECFSZ</span><span class="c8"> </span><span class="c8 c18">N3</span></p><p class="c11"><span class="c8"> </span><span class="c9">GOTO</span><span class="c2">  loop1</span></p><p class="c11"><span class="c2"> </span></p><p class="c11"><span class="c8"> </span><span class="c13 c8">; LIGA LED</span></p><p class="c11"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2">  LED</span></p><p class="c11 c14"><span class="c2"></span></p><p class="c11"><span class="c8"> </span><span class="c8 c115">; DELAY DE 0.5 SEGUNDO</span></p><p class="c11"><span class="c8"> </span><span class="c9">MOVLW</span><span class="c8"> </span><span class="c8 c54">.</span><span class="c8 c54 c179">10</span><span class="c8"> </span><span class="c13 c8">; VALOR PARA N1</span></p><p class="c11"><span class="c8"> </span><span class="c9">MOVWF</span><span class="c8"> </span><span class="c42 c8 c18">N1</span></p><p class="c11"><span class="c8"> </span><span class="c9">MOVLW</span><span class="c8"> </span><span class="c8 c54">.</span><span class="c8 c54 c179">10</span><span class="c8"> </span><span class="c13 c8">; VALOR PARA N2</span></p><p class="c11"><span class="c8"> </span><span class="c9">MOVWF</span><span class="c8"> </span><span class="c42 c8 c18">N2</span></p><p class="c11"><span class="c8"> </span><span class="c9">MOVLW</span><span class="c8"> </span><span class="c8 c54">.</span><span class="c8 c54 c179">10</span><span class="c8"> </span><span class="c13 c8">; VALOR PARA N3</span></p><p class="c11"><span class="c8"> </span><span class="c9">MOVWF</span><span class="c8"> </span><span class="c42 c8 c18">N3</span></p><p class="c11"><span class="c8">loop2:</span></p><p class="c11"><span class="c8"> </span><span class="c9">DECFSZ</span><span class="c8"> </span><span class="c42 c8 c18">N1</span></p><p class="c11"><span class="c8"> </span><span class="c9">GOTO</span><span class="c8">  loop2</span></p><p class="c11"><span class="c8"> </span><span class="c9">DECFSZ</span><span class="c8"> </span><span class="c8 c18">N2</span></p><p class="c11"><span class="c8"> </span><span class="c9">GOTO</span><span class="c8">  loop2</span></p><p class="c11"><span class="c8"> </span><span class="c9">DECFSZ</span><span class="c8"> </span><span class="c8 c18">N3</span></p><p class="c11"><span class="c8"> </span><span class="c9">GOTO</span><span class="c8">  loop2</span></p><p class="c11"><span class="c2"> </span></p><p class="c11"><span class="c8"> </span><span class="c13 c8">; LIGA LED</span></p><p class="c11"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c2">  LED</span></p><p class="c11"><span class="c2"> </span></p><p class="c19"><span class="c8"> </span><span class="c34 c38">GOTO</span><span class="c8"></span><span class="c42 c8 c18">PRINCIPAL</span></p><p class="c19"><span class="c2"> </span></p><p class="c19"><span class="c8"> END</span></p><p class="c19 c14"><span class="c2"></span></p></td></tr></tbody></table><hr style="page-break-before:always;display:none;"><h1 class="c75 c35" id="h.71w1j1gtar3c"><span class="c28 c87"></span></h1><h1 class="c95 c35" id="h.bscpoad04ftu"><span class="c28 c87">Epis&oacute;dio 11: Criando e chamando subrotinas com CALL, RETURN e RETLW no PIC16F628A</span></h1><p class="c11">Como visto no epis&oacute;dio 10, escrevemos o C&oacute;digo 10.5 de cria&ccedil;&atilde;o de delay (esperar um per&iacute;odo de tempo) e dependendo da aplica&ccedil;&atilde;o, muitos c&oacute;digos podem ser repetidos v&aacute;rias vezes e a&iacute; entra a necessidade de cria&ccedil;&atilde;o de subrotinas como forma de facilitar o desenvolvimento do c&oacute;digo como um todo</p><p class="c11">Como a necessidade de uso repetitivo de fragmentos de c&oacute;digo, uma rotina que &eacute; utilizada em algumas partes do c&oacute;digo &eacute; chamada de subrotina ao fragmento de c&oacute;digo que pode ser chamado v&aacute;rias vezes, no qual se escreve ela apenas uma vez</p><p class="c11">Tomando como exemplo o C&oacute;digo 10.5 para escrever o C&oacute;digo 11.1 a partir da regra que pe&ccedil;a que ele se repita no seguinte padr&atilde;o: esperar 1 segundo e ligar o LED, esperar 500 milissegundos e desligar o LED, esperar 500 milissegundos e ligar o LED, esperar 1 segundo e desligar o LED.</p><p class="c12"><span class="c34">C&oacute;digo 11.1 -</span>Exemplo de uso de subrotinas</span></p><a id="t.ae297f67ac1cee5bbc74199bbadd88da85dd74e7"></a><a id="t.133"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c11 c14"><span class="c2"></span></p><p class="c19"><span class="c13 c8">; DESENVOLVIDO POR EVERTON P. CRUZ</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; COM O PROPOSITO DE USO BASE PARA OS EPISODIOS</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; DA SERIE CONHECENDO O MICROCONTROLADOR PIC16F628A</span></p><p class="c19"><span class="c8"> </span><span class="c8 c20">#INCLUDE</span><span class="c8"></span><span class="c42 c8 c181">&lt;P16F628A.INC&gt;</span></p><p class="c19"><span class="c8"> </span><span class="c8 c20">LIST</span><span class="c8"></span><span class="c8 c18">P</span><span class="c8">=</span><span class="c42 c8 c18">16F628A</span></p><p class="c19"><span class="c8"> </span><span class="c8 c20">__CONFIG</span><span class="c8"></span><span class="c8 c18">_BOREN_ON</span><span class="c8">&amp; </span><span class="c8 c18">_CP_OFF</span><span class="c8">&amp; </span><span class="c8 c18">_PWRTE_ON</span><span class="c8">&amp; </span><span class="c8 c18">_WDT_OFF</span><span class="c8">&amp; </span><span class="c8 c18">_LVP_OFF</span><span class="c8">&amp; </span><span class="c8 c18">_MCLRE_OFF</span><span class="c8">&amp; </span><span class="c42 c8 c18">_INTRC_OSC_NOCLKOUT</span></p><p class="c19"><span class="c2"></span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; DEFINICAO DE VARIAVEIS</span></p><p class="c19"><span class="c8"> </span><span class="c8 c20">#DEFINE</span><span class="c8"></span><span class="c8 c18">N1</span><span class="c8"> 0x20    </span><span class="c13 c8">; VARIAVEL DE TEMPO N1</span></p><p class="c19"><span class="c8"> </span><span class="c8 c20">#DEFINE</span><span class="c8"></span><span class="c8 c18">N2</span><span class="c8"> 0x21    </span><span class="c13 c8">; VARIAVEL DE TEMPO N2</span></p><p class="c19"><span class="c8"> </span><span class="c8 c20">#DEFINE</span><span class="c8"></span><span class="c8 c18">N3</span><span class="c8"> 0x22    </span><span class="c13 c8">; VARIAVEL DE TEMPO N3</span></p><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c8"> </span><span class="c38 c44">#DEFINE</span><span class="c8"></span><span class="c8 c18">LED</span><span class="c8">PORTA, RA0 </span><span class="c8 c115">; PINO DO LED</span><span class="c2"> </span></p><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c8"> </span><span class="c8 c20">ORG</span><span class="c8">  0x00    </span><span class="c13 c8">; TRATAMENTO DO RESET</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">GOTO</span><span class="c8">  </span><span class="c42 c8 c18">SETUP_PROCESSO</span></p><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c8"> </span><span class="c8 c20">ORG</span><span class="c8">  0x04    </span><span class="c13 c8">; TRATAMENTO DAS INTERRUPCOES</span></p><p class="c19"><span class="c8"> </span><span class="c42 c38 c34">RETFIE</span></p><p class="c19"><span class="c2">  </span></p><p class="c19"><span class="c2">SETUP_PROCESSO:</span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; SELECIONA O BANCO 1 DE MEMORIA</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c2"> STATUS, RP1</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c2"> STATUS, RP0</span></p><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c8">PCON, OSCF </span><span class="c13 c8">; CONF. FREQ&Uuml;&Ecirc;NCIA DO OSCILADOR INTERNO EM 4 MHz</span></p><p class="c19"><span class="c2"> </span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; CONFIGURACOES DO REGISTRADOR OPTION</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">MOVLW</span><span class="c2">B&#39;10000000&#39;</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">MOVWF</span><span class="c2">OPTION_REG</span></p><p class="c19"><span class="c2">  </span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; MODIFICA O COMPORTAMENTO DO PORTA</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">MOVLW</span><span class="c2">B&#39;11111110&#39;</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">MOVWF</span><span class="c8">TRISA</span></p><p class="c19"><span class="c2">  </span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; MODIFICA O COMPORTAMENTO DO PORTB</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">MOVLW</span><span class="c8">B&#39;11111111&#39;</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">MOVWF</span><span class="c2">TRISB</span></p><p class="c19"><span class="c2">  </span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; SELECIONA O BANCO 0 DE MEMORIA</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c2"> STATUS, RP1</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c2"> STATUS, RP0  </span></p><p class="c19"><span class="c2">  </span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; DEFINE O MODO DE OPERACAO DO COMP. ANALOG. DESLIGADOS</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">MOVLW</span><span class="c2">B&#39;00000111&#39;</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">MOVWF</span><span class="c2">CMCON  </span></p><p class="c19"><span class="c2">  </span></p><p class="c19"><span class="c8"> </span><span class="c13 c8">; CONFIGURACOES DE INTERRUPCOES</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">MOVLW</span><span class="c2">B&#39;00000000&#39;</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">MOVWF</span><span class="c8">INTCON</span></p><p class="c19"><span class="c2"> </span></p><p class="c19"><span class="c2">PRINCIPAL:</span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">CALL</span><span class="c8">  DELAY_1SEGUNDO    </span><span class="c8 c115">; CHAMA SUBROTINA</span></p><p class="c11"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c8">  LED          </span><span class="c8 c115">; LIGA LED</span></p><p class="c11"><span class="c8"> </span><span class="c38 c34">CALL</span><span class="c8">  DELAY_500MILISEGUNDOS </span><span class="c8 c115">; CHAMA SUBROTINA</span></p><p class="c11"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c8">  LED          </span><span class="c8 c115">; DESLIGA LED</span></p><p class="c11"><span class="c2"> </span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">CALL</span><span class="c8">  DELAY_500MILISEGUNDOS </span><span class="c8 c115">; CHAMA SUBROTINA</span></p><p class="c11"><span class="c8"> </span><span class="c38 c34">BSF</span><span class="c8">  LED          </span><span class="c8 c115">; LIGA LED</span></p><p class="c11"><span class="c8"> </span><span class="c38 c34">CALL</span><span class="c8">  DELAY_1SEGUNDO    </span><span class="c8 c115">; CHAMA SUBROTINA</span></p><p class="c11"><span class="c8"> </span><span class="c38 c34">BCF</span><span class="c8">  LED          </span><span class="c8 c115">; DESLIGA LED</span></p><p class="c11 c14"><span class="c2"></span></p><p class="c19"><span class="c8"> </span><span class="c38 c34">GOTO</span><span class="c8"></span><span class="c42 c8 c18">PRINCIPAL</span></p><p class="c19 c14"><span class="c2"></span></p><p class="c19"><span class="c8 c115">; DELAY DE 1 SEGUNDO</span></p><p class="c19"><span class="c2">DELAY_1SEGUNDO:</span></p><p class="c11"><span class="c8"> </span><span class="c9">MOVLW</span><span class="c8"> </span><span class="c8 c54">.</span><span class="c8 c54 c179">10</span><span class="c8"> </span><span class="c13 c8">; VALOR PARA N1</span></p><p class="c11"><span class="c8"> </span><span class="c9">MOVWF</span><span class="c8"> </span><span class="c42 c8 c18">N1</span></p><p class="c11"><span class="c8"> </span><span class="c9">MOVLW</span><span class="c8"> </span><span class="c8 c54">.</span><span class="c8 c54 c179">10</span><span class="c8"> </span><span class="c13 c8">; VALOR PARA N2</span></p><p class="c11"><span class="c8"> </span><span class="c9">MOVWF</span><span class="c8"> </span><span class="c42 c8 c18">N2</span></p><p class="c11"><span class="c8"> </span><span class="c9">MOVLW</span><span class="c8"> </span><span class="c8 c54">.</span><span class="c8 c54 c179">10</span><span class="c8"> </span><span class="c13 c8">; VALOR PARA N3</span></p><p class="c11"><span class="c8"> </span><span class="c9">MOVWF</span><span class="c8"> </span><span class="c42 c8 c18">N3</span></p><p class="c11"><span class="c8">loop1:</span></p><p class="c11"><span class="c8"> </span><span class="c9">DECFSZ</span><span class="c8"> </span><span class="c8 c18 c42">N1</span></p><p class="c11"><span class="c8"> </span><span class="c9">GOTO</span><span class="c8">  loop1</span></p><p class="c11"><span class="c8"> </span><span class="c9">DECFSZ</span><span class="c8"> </span><span class="c8 c18">N2</span></p><p class="c11"><span class="c8"> </span><span class="c9">GOTO</span><span class="c8">  loop1</span></p><p class="c11"><span class="c8"> </span><span class="c9">DECFSZ</span><span class="c8"> </span><span class="c8 c18">N3</span></p><p class="c11"><span class="c8"> </span><span class="c9">GOTO</span><span class="c2">  loop1</span></p><p class="c11"><span class="c8"> </span><span class="c42 c38 c34">RETURN</span></p><p class="c11 c14"><span class="c2"></span></p><p class="c11"><span class="c8 c115">; DELAY DE 0.5 SEGUNDO = 500 MILISEGUNDOS</span></p><p class="c11"><span class="c2">DELAY_500MILISEGUNDOS:</span></p><p class="c11"><span class="c8"> </span><span class="c9">MOVLW</span><span class="c8"> </span><span class="c8 c54">.</span><span class="c8 c54 c179">10</span><span class="c8"> </span><span class="c13 c8">; VALOR PARA N1</span></p><p class="c11"><span class="c8"> </span><span class="c9">MOVWF</span><span class="c8"> </span><span class="c42 c8 c18">N1</span></p><p class="c11"><span class="c8"> </span><span class="c9">MOVLW</span><span class="c8"> </span><span class="c8 c54">.</span><span class="c8 c54 c179">10</span><span class="c8"> </span><span class="c13 c8">; VALOR PARA N2</span></p><p class="c11"><span class="c8"> </span><span class="c9">MOVWF</span><span class="c8"> </span><span class="c42 c8 c18">N2</span></p><p class="c11"><span class="c8"> </span><span class="c9">MOVLW</span><span class="c8"> </span><span class="c8 c54">.</span><span class="c8 c54 c179">10</span><span class="c8"> </span><span class="c13 c8">; VALOR PARA N3</span></p><p class="c11"><span class="c8"> </span><span class="c9">MOVWF</span><span class="c8"> </span><span class="c42 c8 c18">N3</span></p><p class="c11"><span class="c8">loop2:</span></p><p class="c11"><span class="c8"> </span><span class="c9">DECFSZ</span><span class="c8"> </span><span class="c42 c8 c18">N1</span></p><p class="c11"><span class="c8"> </span><span class="c9">GOTO</span><span class="c8">  loop2</span></p><p class="c11"><span class="c8"> </span><span class="c9">DECFSZ</span><span class="c8"> </span><span class="c8 c18">N2</span></p><p class="c11"><span class="c8"> </span><span class="c9">GOTO</span><span class="c8">  loop2</span></p><p class="c11"><span class="c8"> </span><span class="c9">DECFSZ</span><span class="c8"> </span><span class="c8 c18">N3</span></p><p class="c11"><span class="c8"> </span><span class="c9">GOTO</span><span class="c2">  loop2</span></p><p class="c11"><span class="c8"> </span><span class="c42 c38 c34">RETURN</span></p><p class="c19"><span class="c2"> </span></p><p class="c19"><span class="c2"> END</span></p><p class="c19 c14"><span class="c2"></span></p></td></tr></tbody></table><p class="c11">Um ponto a deixar claro aqui &eacute; que as duas novas instru&ccedil;&otilde;es usadas, </span><span class="c3">CALL</span>e </span><span class="c3">RETURN</span>,</span>executam sobre 2 ciclos, sendo que a primeira, a instru&ccedil;&atilde;o </span><span class="c3">CALL</span>, &eacute; utilizada sempre que quiser chamar uma subrotina. J&aacute; a segunda instru&ccedil;&atilde;o, a instru&ccedil;&atilde;o </span><span class="c3">RETURN</span>&eacute; sempre utilizada para voltar &agrave; pr&oacute;xima instru&ccedil;&atilde;o depois da instru&ccedil;&atilde;o </span><span class="c3">CALL</span>. Existe tamb&eacute;m para uso no c&oacute;digo a instru&ccedil;&atilde;o </span><span class="c3">RETLW</span><span class="c47 c6 c34">k</span>, a qual retorna de uma subrotina, escrevendo o valor <span class="c47 c6 c34">k</span>no registrador <span class="c47 c6 c34">k</span>. A instru&ccedil;&atilde;o </span><span class="c3">RETLW</span>&eacute; interessante quando se quer criar subrotinas que retornam certos valores pr&eacute; definidos</p><p class="c11">Assim, para as subrotinas deve-se contabilizar 4 ciclos a mais por causa das instru&ccedil;&otilde;es </span><span class="c3">CALL</span>e </span><span class="c3">RETURN</span>que s&atilde;o obrigat&oacute;rias quando se quer trabalhar com chamadas e execu&ccedil;&atilde;o de subrotinas</p><p class="c11">A fun&ccedil;&atilde;o da instru&ccedil;&atilde;o CALL k &eacute; de chamar a subrotina de r&oacute;tulo/endere&ccedil;o k desejada enquanto que a instru&ccedil;&atilde;o RETURN &eacute; de retornar &agrave; rotina principal</p><p class="c11">A instru&ccedil;&atilde;o RETLW k tem a fun&ccedil;&atilde;o de retornar de uma subrotina atribuindo ao registrador W o valor literal k</p><p class="c11">Vejamos um exemplo de uso da instru&ccedil;&atilde;o RETLW:</span></p><p class="c11"><span class="c60 c6 c39 c34 c50">colocar aqui um exemplo de uso</span></p><p class="c11 c14"><span class="c5"></span></p><hr style="page-break-before:always;display:none;"><h1 class="c75 c35" id="h.snkkl4wfcx4q"><span class="c28 c87"></span></h1><h1 class="c95 c35" id="h.wqzrj958isdh"><span class="c28 c87">Epis&oacute;dio 12: Conhecendo a interrup&ccedil;&atilde;o externa em RB0 e a instru&ccedil;&atilde;o RETFIE no PIC16F628A</span></h1><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Em algumas aplica&ccedil;&otilde;es onde h&aacute; a necessidade de tomada de uma a&ccedil;&atilde;o de forma instant&acirc;nea, como por exemplo, uma prensa que n&atilde;o pode pressionar a m&atilde;o do utilizador, no qual existir&aacute; um sensor de barreira que enviar&aacute; um sinal ao microcontrolador dizendo que h&aacute; um objeto/m&atilde;o que poder&aacute; sofrer danos.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span>No microcontrolador PIC16F628A existe a interrup&ccedil;&atilde;o que pode ser usada para este processo, e ela &eacute; conhecida por &ldquo;interrup&ccedil;&atilde;o externa&rdquo; associada a pino </span><span class="c47 c34">RB0</span><span>do registrador </span><span class="c47 c34 c37">PORTB</span><span class="c5">e para trabalhar com a interrup&ccedil;&atilde;o externa h&aacute; a necessidade de configura&ccedil;&atilde;o de alguns bits de registradores.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span>O primeiro registrador a ser configurado ser&aacute; o registrador </span><span class="c47 c34 c37">OPTION_REG</span><span class="c5">pois com ele se escolhe o tipo de borda (subida ou descida) que aciona a interrup&ccedil;&atilde;o.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span>No registrador </span><span class="c47 c34 c37">OPTION_REG</span><span>, o bit </span><span class="c47 c34">INTEDG</span><span class="c5">quando setado (valor igual a 1) seleciona a interrup&ccedil;&atilde;o por borda de subida, enquanto que esse bit estiver limpo (valor igual a 0), seleciona a interrup&ccedil;&atilde;o por borda de descida.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Figura 12.1 - </span><span class="c5">Visualiza&ccedil;&atilde;o de borda de subida e descida em um sinal</span></p><a id="t.3c9232b2d5d9ea2a259f8403ad80b64e9db35916"></a><a id="t.134"></a><table class="c7"><tbody><tr class="c21"><td class="c231"><p class="c12"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 359.39px; height: 73.84px;"><img alt="" src="images/image15.png" style="width: 359.39px; height: 73.84px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr></tbody></table><p class="c24"><span>             </span><span class="c42 c39 c50 c44">Fonte: Pr&oacute;prio autor (2020)</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span>Outro registrador a ser configurado &eacute; o registrador </span><span class="c47 c34 c37">INTCON</span><span>em rela&ccedil;&atilde;o aos</span><span>bits </span><span class="c47 c34">INTE</span><span>(flag de ativa&ccedil;&atilde;o da interrup&ccedil;&atilde;o externa), </span><span class="c47 c34">INTF</span><span>(flag de estado se houve ou n&atilde;o a ocorr&ecirc;ncia da interrup&ccedil;&atilde;o externa) e </span><span class="c47 c34">GIE</span><span class="c5">(flag da chave geral de todas as interrup&ccedil;&otilde;es) s&atilde;o os bits importantes para esta interrup&ccedil;&atilde;o.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span>O bit </span><span class="c47 c34">INTE</span><span>&eacute; respons&aacute;vel por ativar se setado (valor igual 1) ou desativar se limpo (valor igual a 0) exclusivamente a interrup&ccedil;&atilde;o externa, enquanto que o bit </span><span class="c47 c34">GIE</span><span class="c5">&eacute; respons&aacute;vel por permitir se setado (valor igual a 1) ou n&atilde;o permitir se limpo (valor igual a 0) todas as interrup&ccedil;&otilde;es, conforme a Figura 12.2.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span>J&aacute; o bit </span><span class="c47 c34">INTF</span><span>&eacute; respons&aacute;vel por informar se houve ou n&atilde;o a ocorr&ecirc;ncia da interrup&ccedil;&atilde;o externa, e isto ocorre, verificando seu valor. Se o bit/flag </span><span class="c47 c34">INTF</span><span class="c5">estiver setado (valor 1), quer dizer que houve a ocorr&ecirc;ncia da interrup&ccedil;&atilde;o externa, e caso esteja limpo (valor 0), n&atilde;o houve a ocorr&ecirc;ncia da interrup&ccedil;&atilde;o externa.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c26"></span></p><a id="t.adf84df8f13e100f53f0786c87332695cc0f32e2"></a><a id="t.135"></a><table class="c56"><tbody><tr class="c21"><td class="c68"><p class="c11"><span class="c115 c34">OBSERVA&Ccedil;&Atilde;O:</span><span class="c5">Os bits terminados em:</span></p><ul class="c80 lst-kix_kyig0s488g25-0 start"><li class="c31"><span class="c34">E</span><span>s&atilde;o bits de </span><span class="c37">Enable</span><span class="c5">(ativar/ativa&ccedil;&atilde;o) utilizados para ativar uma certa a&ccedil;&atilde;o/propriedade no microcontrolador;</span></li><li class="c31"><span class="c34">F</span><span>s&atilde;o bits de </span><span class="c37">Flag</span><span>(bandeira) utilizados para informar se houve ocorr&ecirc;ncia de alguma a&ccedil;&atilde;o/propriedade ativada pelo bit terminado com </span><span class="c34">E</span><span>.</span></li></ul></td></tr></tbody></table><p class="c11 c14"><span class="c26"></span></p><p class="c11"><span>Todo o tratamento de interrup&ccedil;&atilde;o &eacute; feito no endere&ccedil;o </span><span class="c8">0x04</span><span>para o PIC16F628A</span><span class="c39"></span><span>e &eacute; retornado &agrave; rotina principal pela instru&ccedil;&atilde;o </span><span class="c38 c34">RETFIE</span><span class="c5">.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Figura 12.2 -</span><span class="c5">Bits associados &agrave;s interrup&ccedil;&otilde;es no PIC16F628A</span></p><a id="t.3c9232b2d5d9ea2a259f8403ad80b64e9db35916"></a><a id="t.136"></a><table class="c7"><tbody><tr class="c21"><td class="c68"><p class="c11"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 590.00px; height: 193.33px;"><img alt="" src="images/image47.png" style="width: 590.00px; height: 193.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr></tbody></table><p class="c24"><span class="c42 c39 c50 c44">Fonte: MICROCHIP 2020 (b) p&aacute;gina 109</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Vejamos agora um exemplo para exemplificar o uso da interrp&ccedil;&atilde;o externa no PIC16F628A abordado em sistemas de seguran&ccedil;a, conforme Figura 12.3 e Figura 12.4.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Figura 12.3 -</span><span class="c5">Sistema de seguran&ccedil;a com bot&atilde;o de emerg&ecirc;ncia</span></p><a id="t.3c9232b2d5d9ea2a259f8403ad80b64e9db35916"></a><a id="t.137"></a><table class="c7"><tbody><tr class="c21"><td class="c220"><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 393.00px; height: 205.33px;"><img alt="" src="images/image71.jpg" style="width: 393.00px; height: 205.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr></tbody></table><p class="c24"><span>            </span><span class="c39">Fonte: </span><span class="c39 c59"><a href="https://www.google.com/url?q=http://www.serralheriasjcampinas.com.br/laudo-tecnico-nr-12/&amp;sa=D&amp;source=editors&amp;ust=1619797899794000&amp;usg=AOvVaw2oTabPZkA5yCCFhWLgMIZF">http://www.serralheriasjcampinas.com.br/laudo-tecnico-nr-12/</a></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Figura 12.4 - </span><span class="c0">Bot&atilde;o Cogumelo Vermelho com Trava Metaltex P20AKR-R-1B</span></p><a id="t.3c9232b2d5d9ea2a259f8403ad80b64e9db35916"></a><a id="t.138"></a><table class="c7"><tbody><tr class="c21"><td class="c177"><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 278.21px; height: 239.53px;"><img alt="" src="images/image9.jpg" style="width: 278.21px; height: 239.53px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr></tbody></table><p class="c24"><span class="c6 c39 c163 c44">Fonte: </span><span class="c59 c6 c39 c163 c44"><a href="https://www.google.com/url?q=https://www.metaltex.com.br/produtos/automacao/comando/p20-botao-de-comando-plastico-22mm&amp;sa=D&amp;source=editors&amp;ust=1619797899795000&amp;usg=AOvVaw0pGzk42xbiUoR9I9nf-7M2">https://www.metaltex.com.br/produtos/automacao/comando/p20-botao-de-comando-plastico-22mm</a></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c67 c35"><span class="c6 c163 c44">Na Figura 12.5 pode-se ver o circuito projetado no simulador </span><span class="c6 c163 c37 c44">SimulIDE</span><span class="c6 c163 c44">para uso do bot&atilde;o de emerg&ecirc;ncia com a interrup&ccedil;&atilde;o externa, no qual iremos fazer uso da interrup&ccedil;&atilde;o externa na borda de descida (transi&ccedil;&atilde;o do n&iacute;vel alto para baixo).</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c1 c35"><span class="c6 c34 c163">Figura 12.5 &ndash;</span><span class="c6 c163 c44">Circuito de bot&atilde;o de emerg&ecirc;ncia com int. externa</span></p><a id="t.3c9232b2d5d9ea2a259f8403ad80b64e9db35916"></a><a id="t.139"></a><table class="c7"><tbody><tr class="c21"><td class="c215"><p class="c19"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 480.00px; height: 373.33px;"><img alt="" src="images/image4.png" style="width: 480.00px; height: 373.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr></tbody></table><p class="c24"><span>      </span><span class="c42 c39 c50 c44">Fonte: Pr&oacute;prio autor (2021)</span></p><p class="c67 c35"><span class="c0">Na Figura 12.6 est&aacute; o diagrama do processo do uso da interrup&ccedil;&atilde;o externa associado a um bot&atilde;o de emerg&ecirc;ncia. Note que nesta figura existem dois in&iacute;cios de rotinas, sendo elas a principal e a de tratamento de interrup&ccedil;&otilde;es, onde elas s&atilde;o independentes.</span></p><p class="c67 c35 c14"><span class="c0"></span></p><p class="c1 c35"><span class="c6 c34 c163">Figura 12.6 &ndash;</span><span class="c0">Diagrama do processo do bot&atilde;o de emerg&ecirc;ncia com int. externa</span></p><a id="t.3c9232b2d5d9ea2a259f8403ad80b64e9db35916"></a><a id="t.140"></a><table class="c7"><tbody><tr class="c21"><td class="c218"><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 542.00px; height: 657.33px;"><img alt="" src="images/image67.png" style="width: 542.00px; height: 657.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr></tbody></table><p class="c4"><span class="c6 c163 c44">  </span><span class="c60 c6 c39 c163 c44">Fonte: Pr&oacute;prio autor (2021)</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c67 c35"><span class="c0">A rotina principal &eacute; executada ao ligar o PIC, e nela s&atilde;o feitas as seguintes a&ccedil;&otilde;es:</span></p><p class="c67 c35 c14"><span class="c0"></span></p><ol class="c80 lst-kix_gbuhtep1u1xd-0 start" start="1"><li class="c67 c35 c127 c173 li-bullet-0"><span class="c0">Faz-se as configura&ccedil;&otilde;es iniciais dos registradores de controle do PIC, como o INTCON, OPTION, PIE1, entre outros;</span></li></ol><p class="c67 c35 c127 c14"><span class="c0"></span></p><ol class="c80 lst-kix_gbuhtep1u1xd-0" start="2"><li class="c67 c35 c127 c173 li-bullet-0"><span class="c0">Ap&oacute;s isso caso o PIC inicie com o bot&atilde;o de emerg&ecirc;ncia pressionado (acontecer&aacute; quando se desliga o dispositivo com o bot&atilde;o de emerg&ecirc;ncia ligado, e ao religar o dispositivo, o bot&atilde;o encontra-se ligado) seta o bit/flag da interrup&ccedil;&atilde;o externa para que logo que proceda essa instru&ccedil;&atilde;o, chame a rotina de interrup&ccedil;&otilde;es. Caso o bot&atilde;o n&atilde;o esteja pressionado, segue o fluxo normal da rotina principal;</span></li></ol><p class="c67 c35 c14 c127"><span class="c0"></span></p><ol class="c80 lst-kix_gbuhtep1u1xd-0" start="3"><li class="c67 c35 c127 c173 li-bullet-0"><span class="c0">Nesse passo h&aacute; o teste para ver se o LED verde est&aacute; aceso (ligado), e caso esteja continua esse teste indefinidamente. Por&eacute;m, caso o LED esteja apagado (desligado), acende (liga) o LED verde e volta ao teste de verifica&ccedil;&atilde;o do estado (aceso ou apagado).</span></li></ol><p class="c67 c35 c14"><span class="c0"></span></p><p class="c67 c35"><span class="c6 c163 c44">A rotina principal &eacute; pequena e a fun&ccedil;&atilde;o dela &eacute; fazer as configura&ccedil;&otilde;es iniciais e manter o LED verde aceso enquanto estiver o processamento sobre ela.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c67 c35"><span class="c0">A rotina de tratamento das interrup&ccedil;&otilde;es a baseada nos seguintes passos:</span></p><p class="c67 c35 c14"><span class="c0"></span></p><ol class="c80 lst-kix_mp051k212w0m-0 start" start="1"><li class="c17 c173 li-bullet-0"><span class="c6 c163 c44">Salva o estado do registrador </span><span class="c47 c6 c34 c37">W</span><span class="c6 c163 c44">, pois ele poderia estar sendo usado para algum processo aritm&eacute;tico ou l&oacute;gico no momento da chamada da interrup&ccedil;&atilde;o e isso &eacute; importante ter essa informa&ccedil;&atilde;o para que quando voltar para a rotina principal, seus dados estejam &iacute;ntegros, e essa informa&ccedil;&atilde;o &eacute; dada pela pr&oacute;pria documenta&ccedil;&atilde;o da Microchip em </span><span class="c6 c39 c163 c44">DATASHEET PIC16F628A</span><span class="c0">na se&ccedil;&atilde;o 14.6 - Context Saving During Interrupts, na p&aacute;gina 111.</span></li></ol><p class="c17 c14"><span class="c0"></span></p><ol class="c80 lst-kix_mp051k212w0m-0" start="2"><li class="c17 c173 li-bullet-0"><span class="c6 c163 c44">Salva o estado do registrador </span><span class="c47 c6 c34 c37">STATUS</span><span class="c0">, conforme explicado no item 1 acima;</span></li></ol><p class="c17 c14"><span class="c0"></span></p><ol class="c80 lst-kix_mp051k212w0m-0" start="3"><li class="c17 c173 li-bullet-0"><span class="c6 c163 c44">Neste passo queremos fazer o tratamento da interrup&ccedil;&atilde;o externa, e como o endere&ccedil;o <span class="definesASM1">0x04</span><span class="c0">&eacute; o endere&ccedil;o de tratamento de todas as interrup&ccedil;&otilde;es, devemos verificar que a interrup&ccedil;&atilde;o que vamos tratar no primeiro momento &eacute; a interrup&ccedil;&atilde;o externa e para isso temos que fazer essa verifica&ccedil;&atilde;o, e caso seja a interrup&ccedil;&atilde;o externa o processo pula para o passo 4, enquanto que for outra interrup&ccedil;&atilde;o, pula para o passo 9;</span></li></ol><p class="c17 c14"><span class="c0"></span></p><ol class="c80 lst-kix_mp051k212w0m-0" start="4"><li class="c17 c173 li-bullet-0"><span class="c6 c163 c44">Como vamos tratar a interrup&ccedil;&atilde;o externa, primeiramente limpamos o flag <span class="c47 c6 c34">INTF</span><span class="c0">(flag de estado da interrup&ccedil;&atilde;o externa), pois caso deixemos limpo, voltaremos aqui pois eles ainda estar&aacute; setado;</span></li></ol><p class="c17 c14"><span class="c0"></span></p><ol class="c80 lst-kix_mp051k212w0m-0" start="5"><li class="c17 c173 li-bullet-0"><span class="c0">Desligamos o LED verde, pois estamos em &ldquo;estado de emerg&ecirc;ncia&quot;;</span></li></ol><p class="c17 c14"><span class="c0"></span></p><ol class="c80 lst-kix_mp051k212w0m-0" start="6"><li class="c17 c173 li-bullet-0"><span class="c0">Ligamos o LED vermelho para fazer o tratamento da &quot;emerg&ecirc;ncia&quot;;</span></li></ol><p class="c17 c14"><span class="c0"></span></p><ol class="c80 lst-kix_mp051k212w0m-0" start="7"><li class="c17 c173 li-bullet-0"><span class="c0">Neste passo h&aacute; a verifica&ccedil;&atilde;o se o bot&atilde;o continua pressionado, caso verdadeiro, fica neste passo at&eacute; o bot&atilde;o n&atilde;o estiver mais pressionado. Por&eacute;m, se o bot&atilde;o n&atilde;o estiver mais pressionado, iremos para o passo 8;</span></li></ol><p class="c17 c14"><span class="c0"></span></p><ol class="c80 lst-kix_mp051k212w0m-0" start="8"><li class="c17 c173 li-bullet-0"><span class="c0">Neste passo desligamos o LED vermelho e seguimos para o passo seguinte;</span></li></ol><p class="c14 c17"><span class="c0"></span></p><ol class="c80 lst-kix_mp051k212w0m-0" start="9"><li class="c17 c173 li-bullet-0"><span class="c0">Neste passo restauramos o estado do registrador W armazenado no passo 1;</span></li></ol><p class="c17 c14"><span class="c0"></span></p><ol class="c80 lst-kix_mp051k212w0m-0" start="10"><li class="c17 c173 li-bullet-0"><span class="c0">Aqui restauramos o estado do registrador STATUS armazenado no passo 2;</span></li></ol><p class="c17 c14"><span class="c0"></span></p><ol class="c80 lst-kix_mp051k212w0m-0" start="11"><li class="c17 c173 li-bullet-0"><span class="c0">E por &uacute;ltimo sa&iacute;mos da rotina das interrup&ccedil;&otilde;es.</span></li></ol><p class="c67 c35 c14"><span class="c0"></span></p><p class="c67 c35"><span class="c0">O c&oacute;digo associado a Figura 12.5 e Figura 12.6 &eacute; o C&oacute;digo 12.1 no qual relaciona os comportamentos de todos os componentes com uso no microcontrolador PIC16F628A.</span></p><p class="c67 c35 c14"><span class="c0"></span></p><p class="c1 c35"><span class="c6 c34 c163">C&oacute;digo 12.1 &ndash;</span><span class="c0">C&oacute;digo do exemplo de bot&atilde;o de emerg&ecirc;ncia com a int. externa</span></p><a id="t.7e113bfdd864531169e6774d2122f28c470abcaa"></a><a id="t.141"></a><table class="c210"><tbody><tr class="c21"><td class="c122"><p class="c4"><span class="c16 c8">1  #INCLUDE &lt;P16F628A.INC&gt;</span></p><p class="c4"><span class="c16 c8">2  LIST P=16F628A</span></p><p class="c4"><span class="c16 c8">3  __CONFIG _BODEN_ON &amp; _MCLRE_ON &amp; _LVP_OFF &amp; _WDT_OFF &amp; INTOSC &amp; _CP_OFF &amp; _PWRTE_ON</span></p><p class="c4"><span class="c16 c8">4  </span></p><p class="c4"><span class="c16 c8">5  #DEFINE W_TEMP   0x20</span></p><p class="c4"><span class="c16 c8">6  #DEFINE STATUS_TEMP 0x21</span></p><p class="c4"><span class="c16 c8">7  #DEFINE BOTAO    PORTB, RB0</span></p><p class="c4"><span class="c16 c8">8  #DEFINE LED_GREEN  PORTA, RA0</span></p><p class="c4"><span class="c16 c8">9  #DEFINE LED_RED   PORTA, RA1</span></p><p class="c4"><span class="c16 c8">10</span></p><p class="c4"><span class="c16 c8">11  ORG   0x00</span></p><p class="c4"><span class="c16 c8">12  GOTO  INICIAPARAMETROS</span></p><p class="c4"><span class="c16 c8">13  </span></p><p class="c4"><span class="c16 c8">14  ORG   0x04</span></p><p class="c4"><span class="c16 c8">15  MOVWF  W_TEMP</span></p><p class="c4"><span class="c16 c8">16  SWAPF  STATUS, 0</span></p><p class="c4"><span class="c16 c8">17  MOVWF  STATUS_TEMP</span></p><p class="c4"><span class="c16 c8">18  </span></p><p class="c4"><span class="c16 c8">19  BTFSS  INTCON, INTF</span></p><p class="c4"><span class="c16 c8">20  GOTO  SAIDA_INTERRUPCAO</span></p><p class="c4"><span class="c16 c8">21  BCF   INTCON, INTF</span></p><p class="c4"><span class="c16 c8">22  BCF   LED_GREEN</span></p><p class="c4"><span class="c16 c8">23  BSF   LED_RED</span></p><p class="c4"><span class="c16 c8">24  BTFSS  BOTAO</span></p><p class="c4"><span class="c16 c8">25  GOTO  $-1</span></p><p class="c4"><span class="c16 c8">26  BCF   LED_RED</span></p><p class="c4"><span class="c16 c8">27  </span></p><p class="c4"><span class="c16 c8"> SAIDA_INTERRUPCAO:</span></p><p class="c4"><span class="c16 c8">29  SWAPF  STATUS_TEMP, 0</span></p><p class="c4"><span class="c16 c8">30  MOVWF  STATUS</span></p><p class="c4"><span class="c16 c8">31  MOVF  W_TEMP, 0</span></p><p class="c4"><span class="c16 c8">32  RETFIE  </span></p></td><td class="c237"><p class="c67 c35"><span class="c16 c8">33    </span></p><p class="c67 c35"><span class="c16 c8"> INICIAPARAMETROS:</span></p><p class="c67 c35"><span class="c16 c8">35  BCF   STATUS, RP1</span></p><p class="c67 c35"><span class="c16 c8">36  BSF   STATUS, RP0</span></p><p class="c67 c35"><span class="c16 c8">37  </span></p><p class="c67 c35"><span class="c16 c8">38  MOVLW  B&#39;11000000&#39;</span></p><p class="c67 c35"><span class="c16 c8">39  MOVWF  OPTION_REG</span></p><p class="c67 c35"><span class="c16 c8">40  </span></p><p class="c67 c35"><span class="c16 c8">41  CLRF  PIE1</span></p><p class="c67 c35"><span class="c16 c8">42  </span></p><p class="c67 c35"><span class="c16 c8">43  MOVLW  B&#39;11111100&#39;</span></p><p class="c67 c35"><span class="c16 c8">44  MOVWF  TRISA</span></p><p class="c67 c35"><span class="c16 c8">45  </span></p><p class="c67 c35"><span class="c16 c8">46  MOVLW  B&#39;11111111&#39;</span></p><p class="c67 c35"><span class="c16 c8">47  MOVWF  TRISB</span></p><p class="c67 c35"><span class="c16 c8">48  </span></p><p class="c67 c35"><span class="c16 c8">49  BCF   STATUS, RP1</span></p><p class="c67 c35"><span class="c16 c8">50  BCF   STATUS, RP0</span></p><p class="c67 c35"><span class="c16 c8">51  </span></p><p class="c67 c35"><span class="c16 c8">52  MOVLW  B&#39;00000111&#39;</span></p><p class="c67 c35"><span class="c16 c8">53  MOVWF  CMCON</span></p><p class="c67 c35"><span class="c16 c8">54  </span></p><p class="c67 c35"><span class="c16 c8">55  MOVLW  B&#39;10010000&#39;</span></p><p class="c67 c35"><span class="c16 c8">56  MOVWF  INTCON</span></p><p class="c67 c35"><span class="c16 c8">57  </span></p><p class="c67 c35"><span class="c16 c8"> PROGRAMAPRINCIPAL:</span></p><p class="c67 c35"><span class="c16 c8">58  BTFSS  LED_GREEN</span></p><p class="c67 c35"><span class="c16 c8">60  BSF   LED_GREEN</span></p><p class="c67 c35"><span class="c16 c8">61  GOTO  PROGRAMAPRINCIPAL</span></p><p class="c67 c35"><span class="c16 c8">62  </span></p><p class="c67 c35"><span class="c16 c8">63  END</span></p></td></tr></tbody></table><p class="c67 c35 c14"><span class="c5"></span></p><p class="c67 c35"><span class="c6 c163 c44">No C&oacute;digo 12.1 nas linhas 5 e 6 foram definidas duas vari&aacute;veis nos endere&ccedil;os de mem&oacute;ria de uso geral (</span><span class="definesASM1">0x20</span><span class="c6 c163 c44">e <span class="definesASM1">0x21</span><span class="c0">), enquanto nas linhas 7 a 9 est&atilde;o definidas tr&ecirc;s vari&aacute;veis associadas aos pinos que relacionam o bot&atilde;o e os dois LEDs.</span></p><p class="c67 c35 c14"><span class="c0"></span></p><p class="c67 c35"><span class="c6 c44 c163">Nas linhas de 14 a 32 est&atilde;o as linhas de instru&ccedil;&atilde;o sobre a rotina de interrup&ccedil;&atilde;o. A linha 14 &eacute; a linha do in&iacute;cio da tratativa das interrup&ccedil;&otilde;es, enquanto que as linhas 15 a 17 est&atilde;o as instru&ccedil;&otilde;es para armazenamento dos estados dos registradores <span class="c47 c6 c34">W</span><span class="c6 c163 c44">e <span class="c47 c6 c34">STATUS</span><span class="c6 c163 c44">. J&aacute; na linha 19 est&aacute; a instru&ccedil;&atilde;o que avalia se a interrup&ccedil;&atilde;o que ocorreu &eacute; da interrup&ccedil;&atilde;o externa, e nas linhas 21, 22 e 26 est&atilde;o, respectivamente, a instru&ccedil;&atilde;o de limpeza do flag <span class="c47 c6 c34">INTF</span><span class="c6 c163 c44">do registrador <span class="c47 c6 c34">INTCON</span><span class="c0">(pois no momento j&aacute; est&aacute; sendo feita a tratativa dessa interrup&ccedil;&atilde;o), a instru&ccedil;&atilde;o para apagar/desligar o LED verde e a instru&ccedil;&atilde;o para apagar/desligar o LED vermelho. Na linha 23 tem a instru&ccedil;&atilde;o que acende/liga o LED vermelho.</span></p><p class="c67 c35 c14"><span class="c0"></span></p><p class="c67 c35"><span class="c6 c163 c44">Na linha 24 tem a instru&ccedil;&atilde;o para avaliar se o bot&atilde;o de emerg&ecirc;ncia continua pressionado (se ainda est&aacute; com n&iacute;vel baixo o pino <span class="c47 c6 c34">RB0</span><span class="c6 c163 c44">), e caso ainda esteja em n&iacute;vel baixo, o processo continua na linha 25 a qual tem a instru&ccedil;&atilde;o <span class="c47 c6 c34">GOTO</span><span class="definesASM1">$-1</span><span class="c6 c163 c44">, que representa o processo tem que saltar para o endere&ccedil;o atual de execu&ccedil;&atilde;o menos uma unidade, isto &eacute;, retorna para a instru&ccedil;&atilde;o anterior a instru&ccedil;&atilde;o atual, fazendo que o teste se repita at&eacute; que o bot&atilde;o n&atilde;o esteja mais pressionado e com isso saia do processo de repeti&ccedil;&atilde;o (</span><span class="c6 c163 c37 c44">loop</span><span class="c0">).</span></p><p class="c67 c35 c14"><span class="c0"></span></p><p class="c67 c35"><span class="c6 c163 c44">Por &uacute;ltimo, na rotina de interrup&ccedil;&otilde;es, h&aacute; a tratativa de restaura&ccedil;&atilde;o dos registradores <span class="c47 c6 c34">W</span><span class="c6 c163 c44">e <span class="c47 c6 c34">STATUS</span><span class="c0">, que est&atilde;o nas linhas 28 a 32.</span></p><p class="c67 c35 c14"><span class="c0"></span></p><p class="c67 c35"><span class="c0">Agora na rotina principal, que est&aacute; nas linhas 34 a 63, tem-se as sele&ccedil;&otilde;es de bancos de mem&oacute;ria nas linhas 35 e 36 (sele&ccedil;&atilde;o do banco de mem&oacute;ria 1) e linhas 49 e 50 (sele&ccedil;&atilde;o do banco de mem&oacute;ria 0).</span></p><p class="c67 c35 c14"><span class="c0"></span></p><p class="c67 c35"><span class="c6 c163 c44">Neste exemplo de aplica&ccedil;&atilde;o da interrup&ccedil;&atilde;o externa, as linhas de maior relev&acirc;ncia s&atilde;o as linhas 55 e 56 onde se tem a ativa&ccedil;&atilde;o da chave geral das interrup&ccedil;&otilde;es (bit <span class="c47 c6 c34">GIE</span><span class="c6 c163 c44">- 8&ordm; bit do registrador <span class="c47 c6 c34">INTCON</span><span class="c6 c163 c44">) como tamb&eacute;m o bit de ativa&ccedil;&atilde;o da interrup&ccedil;&atilde;o externa (bit <span class="c47 c6 c34">INTE</span><span class="c6 c163 c44">- 5&ordm; bit do registrador <span class="c47 c6 c34">INTCON</span><span class="c0">).</span></p><p class="c67 c35 c14"><span class="c0"></span></p><p class="c67 c35"><span class="c0">Nas linhas de 38 a 53, est&atilde;o linhas padr&otilde;es estudadas em epis&oacute;dios anteriores, no qual daremos &ecirc;nfase nas linhas 59 a 61, respons&aacute;veis pelo controle sobre o LED verde.</span></p><p class="c67 c35 c14"><span class="c0"></span></p><p class="c67 c35"><span class="c0">Na linha 59 tem-se a instru&ccedil;&atilde;o de teste se o LED verde est&aacute; aceso/ligado, se estiver, salta a instru&ccedil;&atilde;o da linha 60 que &eacute; a instru&ccedil;&atilde;o para acender/ligar o LED verde. J&aacute; na linha 61 tem a instru&ccedil;&atilde;o para levar ao in&iacute;cio do processo novamente</span></p><p class="c67 c35 c14"><span class="c0"></span></p><p class="c67 c35 c14"><span class="c0"></span></p><hr style="page-break-before:always;display:none;"><h1 class="c75 c35" id="h.6pp8218syaw3"><span class="c28 c87"></span></h1><h1 class="c95 c35" id="h.58jk4me2xwmk"><span class="c28 c87">Epis&oacute;dio 13: Conhecendo a interrup&ccedil;&atilde;o por mudan&ccedil;a de estados em RB4 a RB7 no PIC16F628A</span></h1><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span>Neste epis&oacute;dio veremos como usar a interrup&ccedil;&atilde;o por mudan&ccedil;as de estados nos pinos </span><span class="c47 c34">RB4</span><span>a </span><span class="c47 c34">RB7</span><span>para um exemplo pr&aacute;tico. Esta interrup&ccedil;&atilde;o &eacute; diferente da interrup&ccedil;&atilde;o externa vista no epis&oacute;dio 12 pois a interrup&ccedil;&atilde;o externa ocorre </span><span>somente sobre a borda </span><span>(subida ou descida) do sinal, enquanto que esta interrup&ccedil;&atilde;o (mudan&ccedil;a de estados) que veremos agora se d&aacute; </span><span>por mudan&ccedil;a de estados l&oacute;gicos</span><span class="c5">, tanto do estado de nivel alto para baixo quanto do n&iacute;vel baixo para alto, e pode-se ver a diferen&ccedil;a pela Figura 13.1.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c5">Figura 13.1 - Bordas e estados l&oacute;gicos de um sinal quadrado</span></p><a id="t.3c9232b2d5d9ea2a259f8403ad80b64e9db35916"></a><a id="t.142"></a><table class="c7"><tbody><tr class="c21"><td class="c206"><p class="c12"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 416.00px; height: 129.33px;"><img alt="" src="images/image38.png" style="width: 416.00px; height: 129.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr></tbody></table><p class="c24"><span>          </span><span class="c42 c39 c50 c44">Fonte: Pr&oacute;prio autor (2020)</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c67 c35"><span>Ao trabalhar com a interrup&ccedil;&atilde;o por mudan&ccedil;a de estados, devem ter em mente que essa interrup&ccedil;&atilde;o est&aacute; associada aos pinos </span><span class="c47 c34">RB4</span><span>a </span><span class="c47 c34">RB7</span><span>, n&atilde;o tendo como associar a um e a outro n&atilde;o. Assim, se ativar a interrup&ccedil;&atilde;o por mudan&ccedil;a de estados no registrador </span><span class="c47 c34">INTCON</span><span>, assim qualquer mudan&ccedil;a de estados em qualquer um dos pinos </span><span class="c47 c34">RB4</span><span>a </span><span class="c47 c34">RB7</span><span>chamar&aacute; o tratamento da interrup&ccedil;&atilde;o se o bit </span><span class="c47 c34">GIE</span><span class="c5">estiver setado.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span>Logo, se alguma das portas </span><span class="c47 c34">RB4</span><span>a </span><span class="c47 c34">RB7</span><span class="c5">tiverem seu estado modificado, a interrup&ccedil;&atilde;o &eacute; chamada e ela pode ser tratada de forma semelhante ao visto no epis&oacute;dio 12.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span>Aqui novamente faz-se uso dos registradores </span><span class="c47 c34">TRISB</span><span>e </span><span class="c47 c34">INTCON</span><span class="c5">para a interrup&ccedil;&atilde;o externa, mudando apenas os bits a serem usados.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span>Assim, come&ccedil;amos com o registrador </span><span class="c47 c34">TRISB</span><span>configurando os comportamentos (pino configurado como entrada ou sa&iacute;da) e o pr&oacute;ximo registrador &eacute; o </span><span class="c47 c34">OPTION_REG</span><span>com os bits </span><span class="c59 c47 c34">RBPU</span><span>no qual definir&aacute; se ir&aacute; ou n&atilde;o ativar os resistores de pull-up dos pinos do </span><span class="c47 c34">PORTB</span><span>e por ultimo o registrador </span><span class="c47 c34">INTCON</span><span>com os bits </span><span class="c47 c34">RBIE</span><span>e </span><span class="c47 c34">GIE</span><span>, e o estado da interrup&ccedil;&atilde;o est&aacute; no bit </span><span class="c47 c34">RBIF</span><span class="c5">.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c67 c35"><span>Aqui veremos um exemplo do uso desta interrup&ccedil;&atilde;o para captura de informa&ccedil;&otilde;es de um teclado, sem a necessidade de uso de um circuito espec&iacute;fico para isso (</span><span class="c39">por exemplo o circuito integrado 8279 da Intel</span><span class="c5">) como forma de refor&ccedil;ar o estudo das interrup&ccedil;&otilde;es.</span></p><p class="c67 c35 c14"><span class="c5"></span></p><p class="c67 c35"><span>Na Figura 13.2 encontra-se o teclado utilizado em nossa aplica&ccedil;&atilde;o e n&atilde;o Figura 13.3 &agrave; disposi&ccedil;&atilde;o dos pinos em rela&ccedil;&atilde;o &agrave;s teclas. Essa disposi&ccedil;&atilde;o &eacute; importante na hora de gerar as conex&otilde;es no microcontrolador PIC16F628A.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c1 c35"><span class="c34">Figura 13.2 &ndash;</span><span class="c5">Teclado com 4 linha e 4 colunas</span></p><a id="t.3c9232b2d5d9ea2a259f8403ad80b64e9db35916"></a><a id="t.143"></a><table class="c7"><tbody><tr class="c228"><td class="c236"><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 297.41px; height: 329.68px;"><img alt="" src="images/image23.png" style="width: 297.41px; height: 329.68px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr></tbody></table><p class="c4"><span>              </span><span class="c39">Fonte: PROCURAR NET</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c1 c35"><span class="c34">Figura 13.3 &ndash; </span><span class="c5">Disposi&ccedil;&atilde;o dos pinos do teclado</span></p><a id="t.3c9232b2d5d9ea2a259f8403ad80b64e9db35916"></a><a id="t.144"></a><table class="c7"><tbody><tr class="c21"><td class="c130"><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 401.81px; height: 208.85px;"><img alt="" src="images/image73.png" style="width: 401.81px; height: 208.85px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr></tbody></table><p class="c4"><span>           </span><span class="c39">Fonte: PROCURAR NET</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c67 c35"><span class="c5">A Figura 13.4 exibe o esquema das conex&otilde;es dos componentes necess&aacute;rios ao funcionamento do nosso exemplo, sendo que o padr&atilde;o de leitura segue a Tabela 13.1.</span></p><p class="c67 c35 c14"><span class="c5"></span></p><p class="c67 c35 c14"><span class="c5"></span></p><p class="c67 c35 c14"><span class="c5"></span></p><p class="c67 c35 c14"><span class="c5"></span></p><p class="c67 c35 c14"><span class="c5"></span></p><p class="c67 c35 c14"><span class="c5"></span></p><p class="c1 c35"><span class="c34">Figura 13.4 &ndash; </span><span class="c5">Disposi&ccedil;&atilde;o das conex&otilde;es dos componentes</span></p><a id="t.3c9232b2d5d9ea2a259f8403ad80b64e9db35916"></a><a id="t.145"></a><table class="c7"><tbody><tr class="c21"><td class="c242"><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 444.00px; height: 366.67px;"><img alt="" src="images/image32.png" style="width: 444.00px; height: 366.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr></tbody></table><p class="c4"><span>         </span><span class="c42 c39 c50 c44">Fonte: Pr&oacute;prio autor (2021)</span></p><p class="c67 c35 c14"><span class="c5"></span></p><p class="c1 c35"><span class="c34">Tabela 13.1 &ndash; </span><span class="c5">Rela&ccedil;&atilde;o do registrador PORTB e as teclas</span></p><a id="t.6c2ddd97295140a3e67d83cdd7d4imagecaa62d99"></a><a id="t.146"></a><table class="c210"><tbody><tr class="c21"><td class="c216"><p class="c1 c35"><span class="c26">Tecla</span></p></td><td class="c216"><p class="c1 c35"><span class="c26">Linha/Coluna</span></p></td><td class="c214"><p class="c1 c35"><span class="c26">PORTB (bin)</span></p></td><td class="c216"><p class="c1 c35"><span class="c26">PORTB (hex)</span></p></td><td class="c248"><p class="c1 c35"><span class="c26">PORTB (dec)</td>
</tr>
<tr class="c21"><td class="c81"><p class="c1 c35"><span class="c16 c8">1</span></p></td><td class="c81"><p class="c1 c35"><span class="c16 c8">1/1</span></p></td><td class="c94"><p class="c1 c35"><span class="c16 c8">0001.0001</span></p></td><td class="c81"><p class="c1 c35"><span class="c16 c8">11</span></p></td><td class="c113"><p class="c1 c35"><span class="c16 c8">17</td>
</tr>
<tr class="c21"><td class="c81"><p class="c1 c35"><span class="c16 c8">2</span></p></td><td class="c81"><p class="c1 c35"><span class="c16 c8">1/2</span></p></td><td class="c94"><p class="c1 c35"><span class="c16 c8">0010.0001</span></p></td><td class="c81"><p class="c1 c35"><span class="c16 c8">21</span></p></td><td class="c113"><p class="c1 c35"><span class="c16 c8">33</td>
</tr>
<tr class="c21"><td class="c81"><p class="c1 c35"><span class="c16 c8">3</span></p></td><td class="c81"><p class="c1 c35"><span class="c16 c8">1/3</span></p></td><td class="c94"><p class="c1 c35"><span class="c16 c8">0100.0001</span></p></td><td class="c81"><p class="c1 c35"><span class="c16 c8">41</span></p></td><td class="c113"><p class="c1 c35"><span class="c16 c8">65</td>
</tr>
<tr class="c21"><td class="c81"><p class="c1 c35"><span class="c16 c8">A</span></p></td><td class="c81"><p class="c1 c35"><span class="c16 c8">1/4</span></p></td><td class="c94"><p class="c1 c35"><span class="c16 c8">1000.0001</span></p></td><td class="c81"><p class="c1 c35"><span class="c16 c8">81</span></p></td><td class="c113"><p class="c1 c35"><span class="c16 c8">129</td>
</tr>
<tr class="c21"><td class="c81"><p class="c1 c35"><span class="c16 c8">4</span></p></td><td class="c81"><p class="c1 c35"><span class="c16 c8">2/1</span></p></td><td class="c94"><p class="c1 c35"><span class="c16 c8">0001.0010</span></p></td><td class="c81"><p class="c1 c35"><span class="c16 c8">12</span></p></td><td class="c113"><p class="c1 c35"><span class="c16 c8">18</td>
</tr>
<tr class="c21"><td class="c81"><p class="c1 c35"><span class="c16 c8">5</span></p></td><td class="c81"><p class="c1 c35"><span class="c16 c8">2/2</span></p></td><td class="c94"><p class="c1 c35"><span class="c16 c8">0010.0010</span></p></td><td class="c81"><p class="c1 c35"><span class="c16 c8">22</span></p></td><td class="c113"><p class="c1 c35"><span class="c16 c8">34</td>
</tr>
<tr class="c21"><td class="c81"><p class="c1 c35"><span class="c16 c8">6</span></p></td><td class="c81"><p class="c1 c35"><span class="c16 c8">2/3</span></p></td><td class="c94"><p class="c1 c35"><span class="c16 c8">0100.0010</span></p></td><td class="c81"><p class="c1 c35"><span class="c16 c8">42</span></p></td><td class="c113"><p class="c1 c35"><span class="c16 c8">66</td>
</tr>
<tr class="c21"><td class="c81"><p class="c1 c35"><span class="c16 c8">B</span></p></td><td class="c81"><p class="c1 c35"><span class="c16 c8">2/4</span></p></td><td class="c94"><p class="c1 c35"><span class="c16 c8">1000.0010</span></p></td><td class="c81"><p class="c1 c35"><span class="c16 c8">82</span></p></td><td class="c113"><p class="c1 c35"><span class="c16 c8">130</td>
</tr>
<tr class="c21"><td class="c81"><p class="c1 c35"><span class="c16 c8">7</span></p></td><td class="c81"><p class="c1 c35"><span class="c16 c8">3/1</span></p></td><td class="c94"><p class="c1 c35"><span class="c16 c8">0001.0100</span></p></td><td class="c81"><p class="c1 c35"><span class="c16 c8">14</span></p></td><td class="c113"><p class="c1 c35"><span class="c16 c8">20</td>
</tr>
<tr class="c21"><td class="c81"><p class="c1 c35"><span class="c16 c8">8</span></p></td><td class="c81"><p class="c1 c35"><span class="c16 c8">3/2</span></p></td><td class="c94"><p class="c1 c35"><span class="c16 c8">0010.0100</span></p></td><td class="c81"><p class="c1 c35"><span class="c16 c8">24</span></p></td><td class="c113"><p class="c1 c35"><span class="c16 c8">36</td>
</tr>
<tr class="c21"><td class="c81"><p class="c1 c35"><span class="c16 c8">9</span></p></td><td class="c81"><p class="c1 c35"><span class="c16 c8">3/3</span></p></td><td class="c94"><p class="c1 c35"><span class="c16 c8">0100.0100</span></p></td><td class="c81"><p class="c1 c35"><span class="c16 c8">44</span></p></td><td class="c113"><p class="c1 c35"><span class="c16 c8">68</td>
</tr>
<tr class="c21"><td class="c81"><p class="c1 c35"><span class="c16 c8">C</span></p></td><td class="c81"><p class="c1 c35"><span class="c16 c8">3/4</span></p></td><td class="c94"><p class="c1 c35"><span class="c16 c8">1000.0100</span></p></td><td class="c81"><p class="c1 c35"><span class="c16 c8">84</span></p></td><td class="c113"><p class="c1 c35"><span class="c16 c8">132</td>
</tr>
<tr class="c21"><td class="c81"><p class="c1 c35"><span class="c16 c8">*</span></p></td><td class="c81"><p class="c1 c35"><span class="c16 c8">4/1</span></p></td><td class="c94"><p class="c1 c35"><span class="c16 c8">0001.1000</span></p></td><td class="c81"><p class="c1 c35"><span class="c16 c8">18</span></p></td><td class="c113"><p class="c1 c35"><span class="c16 c8">24</td>
</tr>
<tr class="c21"><td class="c81"><p class="c1 c35"><span class="c16 c8">0</span></p></td><td class="c81"><p class="c1 c35"><span class="c16 c8">4/2</span></p></td><td class="c94"><p class="c1 c35"><span class="c16 c8">0010.1000</span></p></td><td class="c81"><p class="c1 c35"><span class="c16 c8">28</span></p></td><td class="c113"><p class="c1 c35"><span class="c16 c8">40</td>
</tr>
<tr class="c21"><td class="c81"><p class="c1 c35"><span class="c16 c8">#</span></p></td><td class="c81"><p class="c1 c35"><span class="c16 c8">4/3</span></p></td><td class="c94"><p class="c1 c35"><span class="c16 c8">0100.1000</span></p></td><td class="c81"><p class="c1 c35"><span class="c16 c8">48</span></p></td><td class="c113"><p class="c1 c35"><span class="c16 c8">72</td>
</tr>
<tr class="c21"><td class="c81"><p class="c1 c35"><span class="c16 c8">D</span></p></td><td class="c81"><p class="c1 c35"><span class="c16 c8">4/4</span></p></td><td class="c94"><p class="c1 c35"><span class="c16 c8">1000.1000</span></p></td><td class="c81"><p class="c1 c35"><span class="c16 c8">88</span></p></td><td class="c113"><p class="c1 c35"><span class="c16 c8">136</span></p></td></tr></tbody></table><p class="c4"><span class="c42 c39 c50 c44">Fonte: Pr&oacute;prio autor (2021)</span></p><p class="c67 c35 c14"><span class="c5"></span></p><p class="c67 c35 c14"><span class="c5"></span></p><p class="c67 c35 c14"><span class="c5"></span></p><p class="c1 c35"><span class="c34">Figura 13.5 &ndash; </span><span class="c5">Fluxograma da solu&ccedil;&atilde;o para controle de acesso por teclado</span></p><a id="t.3c9232b2d5d9ea2a259f8403ad80b64e9db35916"></a><a id="t.147"></a><table class="c7"><tbody><tr class="c21"><td class="c68"><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 536.52px; height: 810.55px;"><img alt="" src="images/image70.png" style="width: 536.52px; height: 810.55px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p></td></tr></tbody></table><p class="c4"><span class="c42 c39 c50 c44">Fonte: Pr&oacute;prio autor (2021)</span></p><p class="c67 c35 c14"></p><p class="c67 c35"><span>Na Tabela 13.1 o </span><span class="c37">nibble</span><span>mais significativo est&aacute; associado aos pinos </span><span class="c47 c34">RB4</span><span>a </span><span class="c47 c34">RB7</span><span>que s&atilde;o os pinos de entrada (</span><span class="c37">input</span><span>) que ser&atilde;o lidos para saber se est&aacute; entrando o n&iacute;vel alto ao pressionar alguma tecla associada a coluna dada por eles. J&aacute; os pinos </span><span class="c47 c34">RB0</span><span>a </span><span class="c47 c34">RB3</span><span>ser&atilde;o pinos de sa&iacute;das para &ldquo;injetar&rdquo; sinal alto nas devidas linhas e poder associar com as colunas relacionadas com os pinos </span><span class="c47 c34">RB4</span><span>a </span><span class="c47 c34">RB7</span><span class="c5">.</span></p><p class="c67 c35 c14"><span class="c5"></span></p><p class="c67 c35"><span>A Figura 13.5 exibe o fluxograma da solu&ccedil;&atilde;o para esse exemplo no qual especifica a rotina principal e a rotina de interrup&ccedil;&atilde;o. Nesta fgura pode-se ver que neste exemplo fazemos a limpeza do flag de estado da interrup&ccedil;&atilde;o de mudan&ccedil;a (</span><span class="c47 c34">RBIF</span><span>) ap&oacute;s todas as verifica&ccedil;&otilde;es, por causa de alguns </span><span class="c37">delays</span><span class="c5">que podem ocorrer no percurso do processo. Tamb&eacute;m h&aacute; v&aacute;rios testes baseados nos valores da Tabela 13.1 para interpretar as teclas clicadas.</span></p><p class="c67 c35 c14"><span class="c5"></span></p><p class="c67 c35"><span class="c5">No C&oacute;digo 13.1 h&aacute; a implementa&ccedil;&atilde;o da solu&ccedil;&atilde;o em assembly associado ao fluxograma da Figura 13.5 e do circuito da Figura 13.4.</span></p><p class="c67 c35 c14"><span class="c5"></span></p><p class="c1 c35"><span class="c34">C&oacute;digo 13.1 &ndash;</span><span class="c5">Implementa&ccedil;&atilde;o do exemplo de aplica&ccedil;&atilde;o da int. de mudan&ccedil;a de estados</span></p><a id="t.9540a7be3de57a59b1bfe4d15a2f61d1666c67dd"></a><a id="t.148"></a><table class="c210"><tbody><tr class="c21"><td class="c201"><p class="c4"><span class="c30 c8"> 1  #INCLUDE &lt;P16F628A.INC&gt;</span></p><p class="c4"><span class="c30 c8"> 2  LIST P=16F628A</span></p><p class="c4"><span class="c30 c8"> 3  __CONFIG _BODEN_ON &amp; _MCLRE_ON &amp; _LVP_OFF &amp; _WDT_OFF &amp; INTOSC &amp; _CP_OFF &amp; _PWRTE_ON</span></p><p class="c4"><span class="c30 c8"> 4</span></p><p class="c4"><span class="c30 c8"> 5  #DEFINE W_TEMP    0x20</span></p><p class="c4"><span class="c30 c8"> 6  #DEFINE STATUS_TEMP  0x21</span></p><p class="c4"><span class="c30 c8"> 7  #DEFINE COUNTER    0x22</span></p><p class="c4"><span class="c30 c8"> 8  #DEFINE PASS_LIM_LOW 0x23</span></p><p class="c4"><span class="c30 c8"> 9  #DEFINE PASS_LIM_HIGH 0x26</span></p><p class="c4"><span class="c30 c8">10  #DEFINE ROW_1     PORTB, RB0</span></p><p class="c4"><span class="c30 c8">11  #DEFINE ROW_2     PORTB, RB1</span></p><p class="c4"><span class="c30 c8">12  #DEFINE ROW_3     PORTB, RB2</span></p><p class="c4"><span class="c30 c8">13  #DEFINE ROW_4     PORTB, RB3</span></p><p class="c4"><span class="c30 c8">14  ;#DEFINE COLUMN_1   PORTB, RB4</span></p><p class="c4"><span class="c30 c8">15  ;#DEFINE COLUMN_2   PORTB, RB5</span></p><p class="c4"><span class="c30 c8">16  ;#DEFINE COLUMN_3   PORTB, RB6</span></p><p class="c4"><span class="c30 c8">17  ;#DEFINE COLUMN_4   PORTB, RB7</span></p><p class="c4"><span class="c30 c8">18  #DEFINE DOOR     PORTA, RA0</span></p><p class="c4"><span class="c30 c8">19  #DEFINE LED_STOP   PORTA, RA1</span></p><p class="c4"><span class="c30 c8">20  #DEFINE LED_GO    PORTA, RA2</span></p><p class="c4"><span class="c30 c8">21  #DEFINE PASS_VALUE_1 0X11 ; VALUE 1</span></p><p class="c4"><span class="c30 c8">22  #DEFINE PASS_VALUE_2 0X22 ; VALUE 5</span></p><p class="c4"><span class="c30 c8">23  #DEFINE PASS_VALUE_3 0X44 ; VALUE 9</span></p><p class="c4"><span class="c30 c8">24  #DEFINE PASS_VALUE_4 0X88 ; VALUE D</span></p><p class="c4"><span class="c30 c8">25</span></p><p class="c4"><span class="c30 c8">26  ORG   0x00</span></p><p class="c4"><span class="c30 c8">27  GOTO  INICIAPARAMETROS</span></p><p class="c4"><span class="c30 c8">28</span></p><p class="c4"><span class="c30 c8">29  ORG   0x04</span></p><p class="c4"><span class="c30 c8">30  MOVWF  W_TEMP</span></p><p class="c4"><span class="c30 c8">31  SWAPF  STATUS, 0</span></p><p class="c4"><span class="c30 c8">32  MOVWF  STATUS_TEMP</span></p><p class="c4"><span class="c30 c8">33</span></p><p class="c4"><span class="c30 c8">34  BTFSS  INTCON, RBIF</span></p><p class="c4"><span class="c30 c8">35  GOTO  SAIDA_INTERRUPCAO</span></p><p class="c4"><span class="c30 c8">36</span></p><p class="c4"><span class="c30 c8">37  INCF  COUNTER</span></p><p class="c4"><span class="c30 c8">38</span></p><p class="c4"><span class="c30 c8"> KEY_1:</span></p><p class="c4"><span class="c30 c8">40  MOVLW  0x11 ; KEY 1</span></p><p class="c4"><span class="c30 c8">41  XORWF  PORTB, 0</span></p><p class="c4"><span class="c30 c8">42  BTFSS  STATUS, Z</span></p><p class="c4"><span class="c30 c8">43  GOTO  KEY_2</span></p><p class="c4"><span class="c30 c8">44  GOTO  STEP_COUNTER</span></p><p class="c4"><span class="c30 c8">45</span></p><p class="c4"><span class="c30 c8"> KEY_2:</span></p><p class="c4"><span class="c30 c8">47  MOVLW  0x21 ; KEY 2</span></p><p class="c4"><span class="c30 c8">48  XORWF  PORTB, 0</span></p><p class="c4"><span class="c30 c8">49  BTFSS  STATUS, Z</span></p><p class="c4"><span class="c30 c8">50  GOTO  KEY_3</span></p><p class="c4"><span class="c30 c8">51  GOTO  STEP_COUNTER</span></p><p class="c4"><span class="c30 c8">52</span></p><p class="c4"><span class="c30 c8"> KEY_3:</span></p><p class="c4"><span class="c30 c8">54  MOVLW  0x41 ; KEY 3</span></p><p class="c4"><span class="c30 c8">55  XORWF  PORTB, 0</span></p><p class="c4"><span class="c30 c8">56  BTFSS  STATUS, Z</span></p><p class="c4"><span class="c30 c8">57  GOTO  KEY_A</span></p><p class="c4"><span class="c30 c8">58  GOTO  STEP_COUNTER</span></p><p class="c4"><span class="c30 c8">59</span></p><p class="c4"><span class="c30 c8"> KEY_A:</span></p><p class="c4"><span class="c30 c8">61  MOVLW  0x81 ; KEY A</span></p><p class="c4"><span class="c30 c8">62  XORWF  PORTB, 0</span></p><p class="c4"><span class="c30 c8">63  BTFSS  STATUS, Z</span></p><p class="c4"><span class="c30 c8">64  GOTO  KEY_4</span></p><p class="c4"><span class="c30 c8">65  GOTO  STEP_COUNTER</span></p><p class="c4"><span class="c30 c8">66  </span></p><p class="c4"><span class="c30 c8"> KEY_4:</span></p><p class="c4"><span class="c30 c8">68  MOVLW  0x12 ; KEY 4</span></p><p class="c4"><span class="c30 c8">69  XORWF  PORTB, 0</span></p><p class="c4"><span class="c30 c8">70  BTFSS  STATUS, Z</span></p><p class="c4"><span class="c30 c8">71  GOTO  KEY_5</span></p><p class="c4"><span class="c30 c8">72  GOTO  STEP_COUNTER</span></p><p class="c4"><span class="c30 c8">73</span></p><p class="c4"><span class="c30 c8"> KEY_5:</span></p><p class="c4"><span class="c30 c8">75  MOVLW  0x22 ; KEY 5</span></p><p class="c4"><span class="c30 c8">76  XORWF  PORTB, 0</span></p><p class="c4"><span class="c30 c8">77  BTFSS  STATUS, Z</span></p><p class="c4"><span class="c30 c8">78  GOTO  KEY_6</span></p><p class="c4"><span class="c30 c8">79  GOTO  STEP_COUNTER</span></p><p class="c4"><span class="c30 c8">80</span></p><p class="c4"><span class="c30 c8"> KEY_6:</span></p><p class="c4"><span class="c30 c8">82  MOVLW  0x42 ; KEY 6</span></p><p class="c4"><span class="c30 c8">83  XORWF  PORTB, 0</span></p><p class="c4"><span class="c30 c8">84  BTFSS  STATUS, Z</span></p><p class="c4"><span class="c30 c8">85  GOTO  KEY_B</span></p><p class="c4"><span class="c30 c8">86  GOTO  STEP_COUNTER</span></p><p class="c4"><span class="c30 c8">87</span></p><p class="c4"><span class="c30 c8"> KEY_B:</span></p><p class="c4"><span class="c30 c8">89  MOVLW  0x82 ; KEY B</span></p><p class="c4"><span class="c30 c8">90  XORWF  PORTB, 0</span></p><p class="c4"><span class="c30 c8">91  BTFSS  STATUS, Z</span></p><p class="c4"><span class="c30 c8">92  GOTO  KEY_7</span></p><p class="c4"><span class="c30 c8">93  GOTO  STEP_COUNTER</span></p><p class="c4"><span class="c30 c8">94</span></p></td><td class="c159"><p class="c4"><span class="c30 c8"> KEY_7:</span></p><p class="c4"><span class="c30 c8">96  MOVLW  0x14 ; KEY 7</span></p><p class="c4"><span class="c30 c8">97  XORWF  PORTB, 0</span></p><p class="c4"><span class="c30 c8">98  BTFSS  STATUS, Z</span></p><p class="c4"><span class="c30 c8">99  GOTO  KEY_8</span></p><p class="c4"><span class="c30 c8">100  GOTO  STEP_COUNTER</span></p><p class="c4"><span class="c30 c8">101</span></p><p class="c4"><span class="c30 c8"> KEY_8:</span></p><p class="c4"><span class="c30 c8">103  MOVLW  0x24 ; KEY 8</span></p><p class="c4"><span class="c30 c8">104  XORWF  PORTB, 0</span></p><p class="c4"><span class="c30 c8">105  BTFSS  STATUS, Z</span></p><p class="c4"><span class="c30 c8">106  GOTO  KEY_9</span></p><p class="c4"><span class="c30 c8">107  GOTO  STEP_COUNTER</span></p><p class="c4"><span class="c30 c8">108</span></p><p class="c4"><span class="c30 c8"> KEY_9:</span></p><p class="c4"><span class="c30 c8">110  MOVLW  0x44 ; KEY 9</span></p><p class="c4"><span class="c30 c8">111  XORWF  PORTB, 0</span></p><p class="c4"><span class="c30 c8">112  BTFSS  STATUS, Z</span></p><p class="c4"><span class="c30 c8">113  GOTO  KEY_C</span></p><p class="c4"><span class="c30 c8">114  GOTO  STEP_COUNTER</span></p><p class="c4"><span class="c30 c8">115</span></p><p class="c4"><span class="c30 c8"> KEY_C:</span></p><p class="c4"><span class="c30 c8">117  MOVLW  0x84 ; KEY C</span></p><p class="c4"><span class="c30 c8">118  XORWF  PORTB, 0</span></p><p class="c4"><span class="c30 c8">119  BTFSS  STATUS, Z</span></p><p class="c4"><span class="c30 c8">120  GOTO  KEY_ASTERISC</span></p><p class="c4"><span class="c30 c8">121  GOTO  STEP_COUNTER</span></p><p class="c4"><span class="c30 c8">122</span></p><p class="c4"><span class="c30 c8"> KEY_ASTERISC:</span></p><p class="c4"><span class="c30 c8">124  MOVLW  0x18 ; KEY *</span></p><p class="c4"><span class="c30 c8">125  XORWF  PORTB, 0</span></p><p class="c4"><span class="c30 c8">126  BTFSS  STATUS, Z</span></p><p class="c4"><span class="c30 c8">127  GOTO  KEY_0</span></p><p class="c4"><span class="c30 c8">128  GOTO  STEP_COUNTER</span></p><p class="c4"><span class="c30 c8">129</span></p><p class="c4"><span class="c30 c8"> KEY_0:</span></p><p class="c4"><span class="c30 c8">131  MOVLW  0x28 ; KEY 0</span></p><p class="c4"><span class="c30 c8">132  XORWF  PORTB, 0</span></p><p class="c4"><span class="c30 c8">133  BTFSS  STATUS, Z</span></p><p class="c4"><span class="c30 c8">134  GOTO  KEY_HASH</span></p><p class="c4"><span class="c30 c8">135  GOTO  STEP_COUNTER</span></p><p class="c4"><span class="c30 c8">136</span></p><p class="c4"><span class="c30 c8"> KEY_HASH:</span></p><p class="c4"><span class="c30 c8">138  MOVLW  0x48 ; KEY #</span></p><p class="c4"><span class="c30 c8">139  XORWF  PORTB, 0</span></p><p class="c4"><span class="c30 c8">140  BTFSS  STATUS, Z</span></p><p class="c4"><span class="c30 c8">141  GOTO  KEY_D</span></p><p class="c4"><span class="c30 c8">142  GOTO  STEP_COUNTER</span></p><p class="c4"><span class="c30 c8">143</span></p><p class="c4"><span class="c30 c8"> KEY_D:</span></p><p class="c4"><span class="c30 c8">145  MOVLW  0x88 ; KEY D</span></p><p class="c4"><span class="c30 c8">146  XORWF  PORTB, 0</span></p><p class="c4"><span class="c30 c8">147  BTFSS  STATUS, Z</span></p><p class="c4"><span class="c30 c8">148  GOTO  CLEAR_FLAG_STATE_CHANGE</span></p><p class="c4"><span class="c30 c8">149  ;GOTO  STEP_COUNTER</span></p><p class="c4"><span class="c30 c8">150  </span></p><p class="c4"><span class="c30 c8"> STEP_COUNTER:</span></p><p class="c4"><span class="c30 c8">152  MOVF  PORTB, 0</span></p><p class="c4"><span class="c30 c8">153  MOVWF  COUNTER</span></p><p class="c4"><span class="c30 c8">154  MOVLW  PASS_M_4</span></p><p class="c4"><span class="c30 c8">155  XORLW  COUNTER</span></p><p class="c4"><span class="c30 c8">156  BTFSS  STATUS, Z</span></p><p class="c4"><span class="c30 c8">157  GOTO  CLEAR_FLAG_STATE_CHANGE</span></p><p class="c4"><span class="c30 c8">158  </span></p><p class="c4"><span class="c30 c8">159  ; VERIFY PASSWORD</span></p><p class="c4"><span class="c30 c8">160  MOVLW  PASS_V_1</span></p><p class="c4"><span class="c30 c8">161  XORWF  PASS_M_1, 0</span></p><p class="c4"><span class="c30 c8">162  BTFSS  STATUS, Z</span></p><p class="c4"><span class="c30 c8">163  GOTO  NO_ACCESS</span></p><p class="c4"><span class="c30 c8">164  </span></p><p class="c4"><span class="c30 c8">165  MOVLW  PASS_V_2</span></p><p class="c4"><span class="c30 c8">166  XORWF  PASS_M_2, 0</span></p><p class="c4"><span class="c30 c8">167  BTFSS  STATUS, Z</span></p><p class="c4"><span class="c30 c8">168  GOTO  NO_ACCESS</span></p><p class="c4"><span class="c30 c8">169  </span></p><p class="c4"><span class="c30 c8">170  MOVLW  PASS_V_3</span></p><p class="c4"><span class="c30 c8">170  XORWF  PASS_M_3, 0</span></p><p class="c4"><span class="c30 c8">170  BTFSS  STATUS, Z</span></p><p class="c4"><span class="c30 c8">170  GOTO  NO_ACCESS</span></p><p class="c4"><span class="c30 c8">170  </span></p><p class="c4"><span class="c30 c8">170  MOVLW  PASS_V_4</span></p><p class="c4"><span class="c30 c8">170  XORWF  PASS_M_4, 0</span></p><p class="c4"><span class="c30 c8">170  BTFSS  STATUS, Z</span></p><p class="c4"><span class="c30 c8">170  GOTO  NO_ACCESS</span></p><p class="c4"><span class="c30 c8">170  ;GOTO  YES_ACCESS</span></p><p class="c4"><span class="c30 c8">180  </span></p><p class="c4"><span class="c30 c8"> YES_ACCESS:</span></p><p class="c4"><span class="c30 c8">182  BSF   LED_GO</span></p><p class="c4"><span class="c30 c8">183  BSF   DOOR</span></p><p class="c4"><span class="c30 c8">184  CALL  WAIT_1_SECONDS</span></p><p class="c4"><span class="c30 c8">185  BCF   LED_GO</span></p><p class="c4"><span class="c30 c8">186  BCF   DOOR</span></p><p class="c4"><span class="c30 c8">187  GOTO  RESET_COUNTER </span></p><p class="c4"><span class="c30 c8">188</span></p></td><td class="c159"><p class="c4"><span class="c30 c8"> NO_ACCESS:</span></p><p class="c4"><span class="c30 c8">190  BSF   LED_STOP</span></p><p class="c4"><span class="c30 c8">191  BCF   DOOR</span></p><p class="c4"><span class="c30 c8">192  CALL  WAIT_1_SECONDS</span></p><p class="c4"><span class="c30 c8">193  BCF   LED_STOP</span></p><p class="c4"><span class="c30 c8">194  ;GOTO  RESET_COUNTER</span></p><p class="c4"><span class="c30 c8">195</span></p><p class="c4"><span class="c30 c8"> RESET_COUNTER:</span></p><p class="c4"><span class="c30 c8">197  MOVLW  PASS_M_1</span></p><p class="c4"><span class="c30 c8">198  MOVWF  COUNTER</span></p><p class="c4"><span class="c30 c8">199  </span></p><p class="c4"><span class="c30 c8"> CLEAR_FLAG_STATE_CHANGE:</span></p><p class="c4"><span class="c30 c8">201  BCF   INTCON, RBIF</span></p><p class="c4"><span class="c30 c8">202</span></p><p class="c4"><span class="c8 c30"> SAIDA_INTERRUPCAO:</span></p><p class="c4"><span class="c30 c8">204  SWAPF  STATUS_TEMP, 0</span></p><p class="c4"><span class="c30 c8">205  MOVWF  STATUS</span></p><p class="c4"><span class="c30 c8">206  MOVF  W_TEMP, 0</span></p><p class="c4"><span class="c30 c8">207  RETFIE</span></p><p class="c4"><span class="c30 c8">208</span></p><p class="c4"><span class="c30 c8"> WAIT_1_SECONDS:</span></p><p class="c4"><span class="c30 c8">210  NOP</span></p><p class="c4"><span class="c30 c8">211  RETURN</span></p><p class="c4"><span class="c30 c8">212  </span></p><p class="c4"><span class="c30 c8"> INICIAPARAMETROS:</span></p><p class="c4"><span class="c30 c8">214  BCF   STATUS, RP1</span></p><p class="c4"><span class="c30 c8">215  BSF   STATUS, RP0</span></p><p class="c4"><span class="c30 c8">216  </span></p><p class="c4"><span class="c30 c8">217  MOVLW  B&#39;10000000&#39;</span></p><p class="c4"><span class="c30 c8">218  MOVWF  OPTION_REG</span></p><p class="c4"><span class="c30 c8">219  </span></p><p class="c4"><span class="c30 c8">220  CLRF  PIE1</span></p><p class="c4"><span class="c30 c8">221  </span></p><p class="c4"><span class="c30 c8">222  MOVLW  B&#39;11111000&#39;</span></p><p class="c4"><span class="c30 c8">223  MOVWF  TRISA</span></p><p class="c4"><span class="c30 c8">224  </span></p><p class="c4"><span class="c30 c8">225  MOVLW  B&#39;11110000&#39;</span></p><p class="c4"><span class="c30 c8">226  MOVWF  TRISB</span></p><p class="c4"><span class="c30 c8">227  </span></p><p class="c4"><span class="c30 c8">228  BCF   STATUS, RP1</span></p><p class="c4"><span class="c30 c8">229  BCF   STATUS, RP0</span></p><p class="c4"><span class="c30 c8">230  </span></p><p class="c4"><span class="c30 c8">231  MOVLW  B&#39;00000111&#39;</span></p><p class="c4"><span class="c30 c8">232  MOVWF  CMCON</span></p><p class="c4"><span class="c30 c8">233  </span></p><p class="c4"><span class="c30 c8">234  MOVLW  PASS_M_1</span></p><p class="c4"><span class="c30 c8">235  MOVWF  COUNTER</span></p><p class="c4"><span class="c30 c8">236  </span></p><p class="c4"><span class="c30 c8">237  MOVLW  B&#39;10001000&#39;</span></p><p class="c4"><span class="c30 c8">238  MOVWF  INTCON</span></p><p class="c4"><span class="c30 c8">239  </span></p><p class="c4"><span class="c30 c8"> PROGRAMAPRINCIPAL:</span></p><p class="c4"><span class="c30 c8">241  BSF   ROW_1</span></p><p class="c4"><span class="c30 c8">242  ;CALL  ESPERA_1_MS</span></p><p class="c4"><span class="c30 c8">243  BCF   ROW_1</span></p><p class="c4"><span class="c30 c8">244  </span></p><p class="c4"><span class="c30 c8">245  BSF   ROW_2</span></p><p class="c4"><span class="c30 c8">246  ;CALL  ESPERA_1_MS</span></p><p class="c4"><span class="c30 c8">247  BCF   ROW_2</span></p><p class="c4"><span class="c30 c8">248  </span></p><p class="c4"><span class="c30 c8">249  BSF   ROW_3</span></p><p class="c4"><span class="c30 c8">250  ;CALL  ESPERA_1_MS</span></p><p class="c4"><span class="c30 c8">251  BCF   ROW_3</span></p><p class="c4"><span class="c30 c8">252  </span></p><p class="c4"><span class="c30 c8">253  BSF   ROW_4</span></p><p class="c4"><span class="c30 c8">254  ;CALL  ESPERA_1_MS</span></p><p class="c4"><span class="c30 c8">255  BCF   ROW_4</span></p><p class="c4"><span class="c30 c8">256  </span></p><p class="c4"><span class="c30 c8">257  GOTO  PROGRAMAPRINCIPAL</span></p><p class="c4"><span class="c30 c8">258</span></p><p class="c4"><span class="c30 c8"> ;ESPERA_1_MS:</span></p><p class="c4"><span class="c30 c8">260;  NOP   ; IMPLEMENTAR O DELAY</span></p><p class="c4"><span class="c30 c8">261;  RETURN</span></p><p class="c4"><span class="c30 c8">262  </span></p><p class="c4"><span class="c30 c8">263  END</span></p></td></tr></tbody></table><p class="c67 c35"><span class="citacaoFigura">Fonte: Pr&oacute;prio autor (2021)</span></p><p class="c67 c35 c14"></p><p class="c67 c35">O ponto forte no C&oacute;digo 13.1 est&aacute; na ativa&ccedil;&atilde;o da interrup&ccedil;&atilde;o pelos bits <span class="c47 c6 c34">GIE</span>e <span class="c47 c6 c34">RBIE</span>no registrador <span class="c47 c6 c34">INTCON</span>, na verifica&ccedil;&atilde;o que a interrup&ccedil;&atilde;o gerada foi da mudan&ccedil;a de estados, dada pelo bit <span class="c47 c6 c34">RBIF</span>do registrador <span class="c47 c6 c34">INTCON</span>. As outras linhas no C&oacute;digo 13.1 relacionam com a configura&ccedil;&atilde;o do microcontrolador e tamb&eacute;m com a l&oacute;gica usada para mapear o teclado e verifica&ccedil;&atilde;o de valida&ccedil;&atilde;o da senha.</span></p><p class="c67 c35 c14"></p><p class="c67 c35 c14"></p><hr style="page-break-before:always;display:none;"><p class="c11 c14"><span class="c5"></span></p><h1 class="c95 c35" id="h.9jbmwmyno0j"><span class="c28 c87">Epis&oacute;dio 14: Conhecendo a interrup&ccedil;&atilde;o por estouro em Timer0 (registrador TMR0 de 8 bits) de 8 bits no PIC16F628A</span></h1><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Neste episodio veremos o uso do registrador TMR0 e da interrup&ccedil;&atilde;o associada a ele no qual pode ser usado em rotinas de temporizadores (contadores de tempo) mais precisos quanto tamb&eacute;m contadores associado ao pino RA4/T0CKI.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">O registrador TMR0 SEMPRE &eacute; incrementado e cabe ao desenvolvedor do software fazer a escolha por incremento por pulso externo dado no pino RA4/T0CKI ou por um incremento dado por ciclo de instru&ccedil;&atilde;o.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">O registrador TMR0 pode ser zerado (limpo - clear) usando a instru&ccedil;&atilde;o</span></p><p class="c12"><span class="c5">CLRF TMR0</span></p><p class="c11"><span class="c5">como tamb&eacute;m pode ser atualizado para um valor pelas instru&ccedil;&otilde;es</span></p><p class="c12"><span class="c5">MOVLW  0x0A</span></p><p class="c12"><span class="c5">MOVWF  TMR0</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">A escolha para a defini&ccedil;&atilde;o de qual ser&aacute; a fonte de incremento &eacute; dada por</span></p><ul class="c80 lst-kix_rfoy0kcgwpz6-0 start"><li class="c31"><span class="c5">externa no pino RA4/T0CKI</span></li></ul><p class="c11"><span>      </span><span class="c2">BSF OPTION_REG, T0CS</span></p><p class="c11"><span class="c2">      ; incremento na transicao de alto para baixo</span></p><p class="c11"><span class="c2">      ; sobre o pino RA4/T0CKI</span></p><p class="c11"><span class="c2">      BSF OPTION_REG, T0SE</span></p><p class="c11 c14"><span class="c2"></span></p><p class="c11"><span class="c5">ou</span></p><p class="c11"><span>      </span><span class="c2">BSF OPTION_REG, T0CS</span></p><p class="c11"><span class="c2">      ; incremento na transicao de baixo para alto</span></p><p class="c11"><span class="c2">      ; sobre o pino RA4/T0CKI</span></p><p class="c11"><span class="c2">      BCF OPTION_REG, T0SE</span></p><p class="c11 c14"><span class="c5"></span></p><ul class="c80 lst-kix_4vkmwbaar27n-0 start"><li class="c31"><span class="c5">ciclo de instru&ccedil;&atilde;o interna (CLKOUT)</span></li></ul><p class="c11"><span>      </span><span class="c8">BCF OPTION_REG, T0CS</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">H&aacute; tamb&eacute;m uma configura&ccedil;&atilde;o importante que &eacute; a raz&atilde;o (taxa) de incremento do registrador TMR0</p><p class="c11"><span class="c5">O bit PSA do registrador OPTION_REG &eacute; o bit de atribui&ccedil;&atilde;o do Prescaler (Pr&eacute; escala) que pode ser atribuido ao TImer0 ou ao Watchdog Timer (que ser&aacute; visto no episodio 25)</p><p class="c11"><span class="c5">Se o Prescaler n&atilde;o for atribuido ao TImer0, usando a instru&ccedil;&atilde;o</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span>      </span><span class="c8">BSF OPTION_REG, PSA</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">o Prescaler ser&aacute; atribuido ao WDT (Watchdog Timer) e a taxa de incremento do registrador TMR0 ser&aacute; de 1:1 [contagem 0x00 at&eacute; 0xFF(255)]</span></p><p class="c11"><span class="c5">Se os Prescaler for atribu&iacute;do ao Timer0 a rela&ccedil;&atilde;o de incremento do registrador TMR0 ser&aacute; baseada na Tabela 1.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Tabela 1</span><span class="c5">- Rela&ccedil;&atilde;o de incremento</span></p><a id="t.053af01dc13882e0de5e7becb5c299c97155b232"></a><a id="t.149"></a><table class="c56"><tbody><tr class="c21"><td class="c36"><p class="c1"><span class="c26">PS2</span></p></td><td class="c36"><p class="c1"><span class="c26">PS1</span></p></td><td class="c36"><p class="c1"><span class="c26">PS0</span></p></td><td class="c36"><p class="c1"><span class="c26">TAXA TMR0</td>
</tr>
<tr class="c21"><td class="c36"><p class="c1"><span class="c5">0</span></p></td><td class="c36"><p class="c1"><span class="c5">0</span></p></td><td class="c36"><p class="c1"><span class="c5">0</span></p></td><td class="c36"><p class="c1"><span class="c5">1:2</td>
</tr>
<tr class="c21"><td class="c36"><p class="c1"><span class="c5">0</span></p></td><td class="c36"><p class="c1"><span class="c5">0</span></p></td><td class="c36"><p class="c1"><span class="c5">1</span></p></td><td class="c36"><p class="c1"><span class="c5">1:4</td>
</tr>
<tr class="c21"><td class="c36"><p class="c1"><span class="c5">0</span></p></td><td class="c36"><p class="c1"><span class="c5">1</span></p></td><td class="c36"><p class="c1"><span class="c5">0</span></p></td><td class="c36"><p class="c1"><span class="c5">1:8</td>
</tr>
<tr class="c21"><td class="c36"><p class="c1"><span class="c5">0</span></p></td><td class="c36"><p class="c1"><span class="c5">1</span></p></td><td class="c36"><p class="c1"><span class="c5">1</span></p></td><td class="c36"><p class="c1"><span class="c5">1:16</td>
</tr>
<tr class="c21"><td class="c36"><p class="c1"><span class="c5">1</span></p></td><td class="c36"><p class="c1"><span class="c5">0</span></p></td><td class="c36"><p class="c1"><span class="c5">0</span></p></td><td class="c36"><p class="c1"><span class="c5">1:32</td>
</tr>
<tr class="c21"><td class="c36"><p class="c1"><span class="c5">1</span></p></td><td class="c36"><p class="c1"><span class="c5">0</span></p></td><td class="c36"><p class="c1"><span class="c5">1</span></p></td><td class="c36"><p class="c1"><span class="c5">1:64</td>
</tr>
<tr class="c21"><td class="c36"><p class="c1"><span class="c5">1</span></p></td><td class="c36"><p class="c1"><span class="c5">1</span></p></td><td class="c36"><p class="c1"><span class="c5">0</span></p></td><td class="c36"><p class="c1"><span class="c5">1:128</td>
</tr>
<tr class="c21"><td class="c36"><p class="c1"><span class="c5">1</span></p></td><td class="c36"><p class="c1"><span class="c5">1</span></p></td><td class="c36"><p class="c1"><span class="c5">1</span></p></td><td class="c36"><p class="c1"><span class="c5">1:256</span></p></td></tr></tbody></table><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span>Assim, por exemplo, se PS&lt;2:0&gt; = 001 e T0CS = 1, a cada 4 pulsos no pino RA4/T0CKI h&aacute; o incremento de 1 unidade no registrador TMR0. Agora se PS&lt;2:0&gt; = 110 e T0CS = 1, a cada 120 pulsos no pino RA4/T0CKI h&aacute; o incremento de 1 unidade no registrador TMR0, assim pode-se contar valor de </span><span class="c39">0 at&eacute; 128*255 itens completos</span><span class="c5">.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">O acionamento da interrup&ccedil;&atilde;o associado ao Timer0 se d&aacute; pelo estouro (passagem do valor de 0xFF,equivalente a 255, para o valor 0x00) do registrador TMR0 e a ativava&ccedil;&atilde;o desta interrup&ccedil;&atilde;o se d&aacute; pelos bits GIE e T0IE do registrador INTCON conforme Figura 1</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 604.72px; height: 198.67px;"><img alt="" src="images/image47.png" style="width: 604.72px; height: 198.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">O bit/flag T0IF do registrador INTCON d&aacute; o estado da interrup&ccedil;&atilde;o, onde se ao ler o estado do bit/flag T0IF for igual a 1, houve um estouro do registrador TMR0, caso T0IF for igual a 0, n&atilde;o houve um estouro no registrador TMR0.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Seja o circuito eletr&ocirc;nico da Figura 2 no qual tem a fun&ccedil;&atilde;o de contagem de objetos/pessoas ao passar pelo sensor fotoeletronico.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c42 c39 c34 c50">COLOCAR AQUI O DESENHO DO CIRCUITO</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Neste exemplo queremos contar a quantidade de 37 objetos/pessoas ao passar pelo sensor. Ao obter a quantidade desejada o led ligado ao pino RB3 deve ser ligado e reiniciado a contagem</p><p class="c11"><span class="c5">O led permanecer&aacute; verde at&eacute; termos o 1&ordm; objeto/pessoa passad(a) pelo sensor novamente.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c2">..</p><p class="c11"><span class="c2">ORG 0x00</span></p><p class="c11"><span class="c2">  GOTO setup</span></p><p class="c11"><span class="c2">ORG 0x04</span></p><p class="c11"><span class="c2">  BTFSC INTCON, T0IF ; testa se interrupcao ocorreu por causa de Timer0</span></p><p class="c11"><span class="c2">  GOTO tratamento_Timer_0 ; se sim, salta p/ tratamento Timer0</span></p><p class="c11"><span class="c2">  GOTO sai_interrupcao</span></p><p class="c11"><span class="c2">tratamento_Timer_0:</span></p><p class="c11"><span class="c2">  BCF  INTCON, T0IF    ; desliga flag</span></p><p class="c11"><span class="c2">  MOVLW .219        ; 256 - 37 = 219</span></p><p class="c11"><span class="c2">  MOVWF TMR0        ; atualiza TMR0</span></p><p class="c11"><span class="c2">  BSF  PORTB, RB3     ; liga led em RB3 - quantidade satisfeita</span></p><p class="c11"><span class="c2">  BCF  PORTB, RB2     ; desliga led em RB2</span></p><p class="c11"><span class="c2">  CLRW           ; limpa registrador W</span></p><p class="c11"><span class="c2">  GOTO sai_interrupcoes</span></p><p class="c11 c14"><span class="c2"></span></p><p class="c11"><span class="c2">...</span></p><p class="c11 c14"><span class="c2"></span></p><p class="c11"><span class="c2">setup:</span></p><p class="c11"><span class="c2">  BCF STATUS, RP1 ; episodio 3 - selecao de banco de memoria 1</span></p><p class="c11"><span class="c2">  BsF STATUS, RP0 ; episodio 3 - selecao de banco de memoria 1</span></p><p class="c11 c14"><span class="c2"></span></p><p class="c11"><span class="c2">  BSF OPTION_REG, T0CS ; fonte de incremento externo no pino RA4/T0CKI</span></p><p class="c11"><span class="c2">  BCF OPTION_REG, T0SE ; incremento na transicao de nivel baixa </span></p><p class="c11"><span class="c2">             ; para alto no pino RA4/T0CKI</span></p><p class="c11 c14"><span class="c2"></span></p><p class="c11"><span class="c2">  BSF OPTION_REG, PSA ; Prescaler nao atribuido ao Timer0,</span></p><p class="c11"><span class="c2">             ; entao a relacao eh 1:1</span></p><p class="c11 c14"><span class="c2"></span></p><p class="c11"><span class="c2">  BSF PORTA, RA4 ; episodio 4 - RA4 eh um pino de entrada</span></p><p class="c11"><span class="c2">  BCF PORTB, RB2 ; episodio 4 - RB2 eh um pino de saida</span></p><p class="c11"><span class="c2">  BCF PORTB, RB3 ; episodio 4 - RB3 eh um pino de saida</span></p><p class="c11 c14"><span class="c2"></span></p><p class="c11"><span class="c2">  BCF STATUS, RP0 ; selecao do banco de memoria 0</span></p><p class="c11 c14"><span class="c2"></span></p><p class="c11"><span class="c2">  MOVLW .219  ; 256 - 37 = 219</span></p><p class="c11"><span class="c2">  MOVWF TMR0 ; atualiza o registrador TMR0</span></p><p class="c11"><span class="c2">  </span></p><p class="c11"><span class="c2">  BSF PORTB, RB2; liga led de estado de n&atilde;o completo a contagem</span></p><p class="c11"><span class="c2">  BcF PORTB, RB3; desliga led de estado de completo a contagem</span></p><p class="c11 c14"><span class="c2"></span></p><p class="c11"><span class="c2">  MOVLW 0x07   ; 0x07 = 0000.0111 (desliga modulo comparador)</span></p><p class="c11"><span class="c2">  MOVWF CMCON  ; episodio 20 - desligando o modulo comparador</span></p><p class="c11 c14"><span class="c2"></span></p><p class="c11"><span class="c2">  BSF INTCON, T0IE ; ativa a interrupcao do Timer0</span></p><p class="c11"><span class="c2">  BSF INTCON, GIE ; ativa a chave geral das interrupcoes</span></p><p class="c11 c14"><span class="c2"></span></p><p class="c11"><span class="c2">  CLRW</span></p><p class="c11 c14"><span class="c2"></span></p><p class="c11"><span class="c2">main:</span></p><p class="c11"><span class="c2">  XORWF  TMR0, 0  ; se igual, z=1, senao z=0</span></p><p class="c11"><span class="c2">  BTFSC  STATUS, Z</span></p><p class="c11"><span class="c2">  GOTO  main</span></p><p class="c11"><span class="c2">  BSF   PORTB, RB2</span></p><p class="c11"><span class="c2">  BCF   PORTB, RB3</span></p><p class="c11"><span class="c2">  GOTO  main</span></p><p class="c11 c14"><span class="c2"></span></p><p class="c11"><span class="c2">  END</span></p><p class="c11 c14"><span class="c2"></span></p><p class="c12"><span class="c39 c34">COMENTAR SOBRE USO DE TIMER0 SEM USO DA INTERRUP&Ccedil;&Atilde;O</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><hr style="page-break-before:always;display:none;"><h1 class="c75 c35" id="h.xyaq94augh8e"><span class="c28 c87"></span></h1><h1 class="c95 c35" id="h.whu25b1s40xn"><span class="c28 c87">Epis&oacute;dio 15: Conhecendo a interrup&ccedil;&atilde;o por estouro em Timer1 (registradores TMR1H, TMR1L e T1CON de 8 bits) de 16 bits no PIC16F628A</span></h1><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Neste episodio veremos o uso do modulo Timer1 como contador/temporizador de 16 bits e sua interrup&ccedil;&atilde;o associada.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">O processo de configura&ccedil;&atilde; do modulo &eacute; semelante ao TImer0, sendo tratado pelo registrador T1CON (Timer1 Control Register)</p><p class="c11"><span>A configura&ccedil;&atilde;o &eacute; feita pelo registrador T1CON e pelos bits: T1CKPS1, T1CKPS0, </span><span class="c59">T1SYNC</span><span class="c5">, TMR1CS e TMR1ON</p><p class="c11"><span class="c5">A Figura X1 exibe o registrador </span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Figura X1</span><span class="c5">- Registrador T1CON e seus bits</span></p><p class="c12"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 604.72px; height: 64.00px;"><img alt="" src="images/image12.png" style="width: 604.72px; height: 64.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">O bit TMR1ON ser&aacute; confkgurado com 1 se quisermos ativar o modulo Timer1, e com 0 se quisermos parar a atua&ccedil;&atilde;o do Timer1</p><p class="c11"><span><br>J&aacute; o bit TMR1CS seleciona a fonte de incremento, onde se esse bit tiver o valor igual a 1, a fonte ser&aacute; externa no pino RB6/T1OSO/T1CKI/PGC na borda de subida, enquanto se esse bit for 0, a fonte adv&eacute;m do clock interno (F</span><span class="c62">osc</span><span class="c5">/ 4).</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Os bits T1CKP1 e T1CKP0 selecionam a taxa do Prescaler, onde pode-se ver os valores conforme Tabela 1</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Tabela 1</span><span class="c5">- Tabela com combina&ccedil;&atilde;o de taxas de incremento</span></p><a id="t.0ce4935b4d07cc25c3c392eaecaab83821b74cb9"></a><a id="t.150"></a><table class="c56"><tbody><tr>
								<td class="c32"><span class="c26">T1CKP1</span></p></td><td class="c32"><p class="c1"><span class="c26">T1CKP0</span></p></td><td class="c32"><p class="c1"><span class="c26">Valor Prescaler</td>
</tr>
<tr>
								<td class="c32"><span class="c5">0</span></p></td><td class="c32"><p class="c1"><span class="c5">0</span></p></td><td class="c32"><p class="c1"><span class="c5">1:1</td>
</tr>
<tr>
								<td class="c32"><span class="c5">0</span></p></td><td class="c32"><p class="c1"><span class="c5">1</span></p></td><td class="c32"><p class="c1"><span class="c5">1:2</td>
</tr>
<tr>
								<td class="c32"><span class="c5">1</span></p></td><td class="c32"><p class="c1"><span class="c5">0</span></p></td><td class="c32"><p class="c1"><span class="c5">1:4</td>
</tr>
<tr>
								<td class="c32"><span class="c5">1</span></p></td><td class="c32"><p class="c1"><span class="c5">1</span></p></td><td class="c32"><p class="c1"><span class="c5">1:8</span></p></td></tr></tbody></table><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Agora o bit T1OSCEN &eacute; utilizado para ativa&ccedil;&atilde; de uso de clock externo nos pinos RB6/T1OSO e RB7/T1OSI ou n&atilde;o. Se esse bit for igual a 1 est&aacute; ativado o uso do oscilador e 0 caso o contr&aacute;rio.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span>Por ultimo temos o bit </span><span class="c59">T1SYNC</span><span class="c5">reponsavel pelo controle de sincroniza&ccedil;&atilde;o de entrada do clock externo do Timer1. Assim, se TMR1CS = 1, isto &eacute;, faz-se uso de clock externo, ent&atilde;o</span></p><ul class="c80 lst-kix_371ulc8krm8k-0 start"><li class="c31"><span class="c5">T1SYNC = 1, se n&atilde;o quer sincronizar com o clock externo de entrada;</span></li><li class="c31"><span class="c5">T1SYNC = 0, se quer sincronizar com o clock externo de entrada.</span></li></ul><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Porem se TMR1CS = 0, T1SYNC &eacute; ignorado, pois Timer1 faz uso do clock interno.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Ap&oacute;s as devidas configura&ccedil;&otilde;es dos bits anterioes, pode-se a configura&ccedil;&atilde;o dos dois registradores que compoem os 16 bits do Timer1, os registradores TMR1H e TMR1L, onde TMR1H s&atilde;o os 8 bits mais significativos e TMR1L s&atilde;o os 8 bits menos sifnigicativos do n&uacute;mero de 16 bits, sendo que este numero come&ccedil;a em 0x0000 (0) at&eacute; 0xFFFF (65535), sendo que pode ser atribuido Prescaler para aumentar o intervalo de contagem ou temporaizador.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c42 c39 c34 c50">Exemplo semelhante ao do Timer 1, s&oacute; com contagem maior</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><hr style="page-break-before:always;display:none;"><h1 class="c75 c35" id="h.vzy36oqgfrmh"><span class="c28 c87"></span></h1><h1 class="c95 c35" id="h.y6ftgzimznq0"><span class="c28 c87">Epis&oacute;dio 16: Conhecendo a interrup&ccedil;&atilde;o por coincid&ecirc;ncia em Timer2 (registrador TMR2, PR2 e T2CON de 8 bits) de 8 bits no PIC16F628A</span></h1><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Neste episodio conheceremos o modulo Timer2 que &eacute; um temporizador de 8 bits com Prescaler e Postcaler e por um periodo definido pelo desenvolvedor.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">As configura&ccedil;&otilde;es come&ccedil;a pelo registrador T2CON (Timer2 Control Register) o qual &eacute; reponsavel pela configura&ccedil;&atilde;o do Prescaler, Postcaler e se o Timer2 est&aacute; ligado ou delsigado.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Os bits do registrador T2CON est&aacute; disposto na Figura X1</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Figura X1 -</span><span class="c5">Bits do registrador T2CON</span></p><p class="c11"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 604.72px; height: 60.00px;"><img alt="" src="images/image64.png" style="width: 604.72px; height: 60.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">A configura&ccedil;&atilde;o do Prescaler tem o mesmo proposito visto nos Timer0 (episodio 14) e Timer1 (episodio 15) e &eacute; dada pela Tabela X1</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Tabela X1 -</span><span class="c5">Rela&ccedil;&atilde;o do Prescaler para o Timer2</span></p><a id="t.4210952902d31a6b01b08b325d82743be690e878"></a><a id="t.151"></a><table class="c56"><tbody><tr>
								<td class="c32"><span class="c26">T2CKPS1</span></p></td><td class="c32"><p class="c1"><span class="c26">T2CKPS0</span></p></td><td class="c32"><p class="c1"><span class="c26">valor do Prescaler</td>
</tr>
<tr>
								<td class="c32"><span class="c5">0</span></p></td><td class="c32"><p class="c1"><span class="c5">0</span></p></td><td class="c32"><p class="c1"><span class="c5">1:1</td>
</tr>
<tr>
								<td class="c32"><span class="c5">0</span></p></td><td class="c32"><p class="c1"><span class="c5">1</span></p></td><td class="c32"><p class="c1"><span class="c5">1:4</td>
</tr>
<tr>
								<td class="c32"><span class="c5">1</span></p></td><td class="c32"><p class="c1"><span class="c5">x</span></p></td><td class="c32"><p class="c1"><span class="c5">1:16</span></p></td></tr></tbody></table><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">O bit TMR2CON de T2CON &eacute; responsavel por ligar (se setado - valor 1) ou desligar (se limpo - valor 0) enquanto que os bits TOUTPS&lt;3:0&gt; s&atilde;o responsaveis pela configura&ccedil;&atilde;o do Postcaler conforme Tabela X2</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><a id="t.cbd33c525d5b58e01d61cbf14d70b624a27e29e4"></a><a id="t.152"></a><table class="c56"><tbody><tr class="c21"><td class="c27"><p class="c1"><span class="c26">TOUTPS3</span></p></td><td class="c27"><p class="c1"><span class="c26">TOUTPS2</span></p></td><td class="c27"><p class="c1"><span class="c26">TOUTPS1</span></p></td><td class="c27"><p class="c1"><span class="c26">TOUTPS0</span></p></td><td class="c107"><p class="c1"><span class="c26">valor do Postcaler</td>
</tr>
<tr class="c21"><td class="c27"><p class="c1"><span class="c5">0</span></p></td><td class="c27"><p class="c1"><span class="c5">0</span></p></td><td class="c27"><p class="c1"><span class="c5">0</span></p></td><td class="c27"><p class="c1"><span class="c5">0</span></p></td><td class="c107"><p class="c1"><span class="c5">1:1</td>
</tr>
<tr class="c21"><td class="c27"><p class="c1"><span class="c5">0</span></p></td><td class="c27"><p class="c1"><span class="c5">0</span></p></td><td class="c27"><p class="c1"><span class="c5">0</span></p></td><td class="c27"><p class="c1"><span class="c5">1</span></p></td><td class="c107"><p class="c1"><span class="c5">1:2</td>
</tr>
<tr class="c21"><td class="c27"><p class="c1"><span class="c5">0</span></p></td><td class="c27"><p class="c1"><span class="c5">0</span></p></td><td class="c27"><p class="c1"><span class="c5">1</span></p></td><td class="c27"><p class="c1"><span class="c5">0</span></p></td><td class="c107"><p class="c1"><span class="c5">1:3</td>
</tr>
<tr class="c21"><td class="c27"><p class="c1"><span class="c5">0</span></p></td><td class="c27"><p class="c1"><span class="c5">0</span></p></td><td class="c27"><p class="c1"><span class="c5">1</span></p></td><td class="c27"><p class="c1"><span class="c5">1</span></p></td><td class="c107"><p class="c1"><span class="c5">1:4</td>
</tr>
<tr class="c21"><td class="c27"><p class="c1"><span class="c5">0</span></p></td><td class="c27"><p class="c1"><span class="c5">1</span></p></td><td class="c27"><p class="c1"><span class="c5">0</span></p></td><td class="c27"><p class="c1"><span class="c5">0</span></p></td><td class="c107"><p class="c1"><span class="c5">1:5</td>
</tr>
<tr class="c21"><td class="c27"><p class="c1"><span class="c5">0</span></p></td><td class="c27"><p class="c1"><span class="c5">1</span></p></td><td class="c27"><p class="c1"><span class="c5">0</span></p></td><td class="c27"><p class="c1"><span class="c5">1</span></p></td><td class="c107"><p class="c1"><span class="c5">1:6</td>
</tr>
<tr class="c21"><td class="c27"><p class="c1"><span class="c5">0</span></p></td><td class="c27"><p class="c1"><span class="c5">1</span></p></td><td class="c27"><p class="c1"><span class="c5">1</span></p></td><td class="c27"><p class="c1"><span class="c5">0</span></p></td><td class="c107"><p class="c1"><span class="c5">1:7</td>
</tr>
<tr class="c21"><td class="c27"><p class="c1"><span class="c5">0</span></p></td><td class="c27"><p class="c1"><span class="c5">1</span></p></td><td class="c27"><p class="c1"><span class="c5">1</span></p></td><td class="c27"><p class="c1"><span class="c5">1</span></p></td><td class="c107"><p class="c1"><span class="c5">1:8</td>
</tr>
<tr class="c21"><td class="c27"><p class="c1"><span class="c5">1</span></p></td><td class="c27"><p class="c1"><span class="c5">0</span></p></td><td class="c27"><p class="c1"><span class="c5">0</span></p></td><td class="c27"><p class="c1"><span class="c5">0</span></p></td><td class="c107"><p class="c1"><span class="c5">1:9</td>
</tr>
<tr class="c21"><td class="c27"><p class="c1"><span class="c5">1</span></p></td><td class="c27"><p class="c1"><span class="c5">0</span></p></td><td class="c27"><p class="c1"><span class="c5">0</span></p></td><td class="c27"><p class="c1"><span class="c5">1</span></p></td><td class="c107"><p class="c1"><span class="c5">1:10</td>
</tr>
<tr class="c21"><td class="c27"><p class="c1"><span class="c5">1</span></p></td><td class="c27"><p class="c1"><span class="c5">0</span></p></td><td class="c27"><p class="c1"><span class="c5">1</span></p></td><td class="c27"><p class="c1"><span class="c5">0</span></p></td><td class="c107"><p class="c1"><span class="c5">1:11</td>
</tr>
<tr class="c21"><td class="c27"><p class="c1"><span class="c5">1</span></p></td><td class="c27"><p class="c1"><span class="c5">0</span></p></td><td class="c27"><p class="c1"><span class="c5">1</span></p></td><td class="c27"><p class="c1"><span class="c5">1</span></p></td><td class="c107"><p class="c1"><span class="c5">1:12</td>
</tr>
<tr class="c21"><td class="c27"><p class="c1"><span class="c5">1</span></p></td><td class="c27"><p class="c1"><span class="c5">1</span></p></td><td class="c27"><p class="c1"><span class="c5">0</span></p></td><td class="c27"><p class="c1"><span class="c5">0</span></p></td><td class="c107"><p class="c1"><span class="c5">1:13</td>
</tr>
<tr class="c21"><td class="c27"><p class="c1"><span class="c5">1</span></p></td><td class="c27"><p class="c1"><span class="c5">1</span></p></td><td class="c27"><p class="c1"><span class="c5">0</span></p></td><td class="c27"><p class="c1"><span class="c5">1</span></p></td><td class="c107"><p class="c1"><span class="c5">1:14</td>
</tr>
<tr class="c21"><td class="c27"><p class="c1"><span class="c5">1</span></p></td><td class="c27"><p class="c1"><span class="c5">1</span></p></td><td class="c27"><p class="c1"><span class="c5">1</span></p></td><td class="c27"><p class="c1"><span class="c5">0</span></p></td><td class="c107"><p class="c1"><span class="c5">1:15</td>
</tr>
<tr class="c21"><td class="c27"><p class="c1"><span class="c5">1</span></p></td><td class="c27"><p class="c1"><span class="c5">1</span></p></td><td class="c27"><p class="c1"><span class="c5">1</span></p></td><td class="c27"><p class="c1"><span class="c5">1</span></p></td><td class="c107"><p class="c1"><span class="c5">1:16</span></p></td></tr></tbody></table><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><hr style="page-break-before:always;display:none;"><h1 class="c75 c35" id="h.pq58ai1onyv"><span class="c28 c87"></span></h1><h1 class="c95 c35" id="h.m8rchl8n16k9"><span class="c28 c87">Epis&oacute;dio 17: Conhecendo o m&oacute;dulo CCP - Modo capturar e a interrup&ccedil;&atilde;o associada</span></h1><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Neste episodio veremos o uso do m&oacute;dulo CCP (Capture/Compare/PWM) e especificamente o modo Capture (Capturar).</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">O modo Capture tem um registrador de 16 bits composto pelos registradores de 8 bits CCPR1H e CCPR1L, no qual captura a quantidade de ciclos (tempo) sobre o registrador TMR1 quando um evento ocorre sobre o pino RB3/CCP1.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span>Conforme o datasheet (</span><span class="c39 c34">colocar link</span><span class="c5">) um evento &eacute; definido neste modo como decorrente:</span></p><ul class="c80 lst-kix_pztu7jw0yxmt-0 start"><li class="c31"><span>de uma borda de descida </span><span class="c42 c39 c44 c50">(colocar imagem)</span></li><li class="c31"><span>de uma borda de subida </span><span class="c39">(colocar imagem)</span></li><li class="c31"><span>da 4&ordf; borda de subida </span><span class="c39">(colocar imagem)</span></li><li class="c31"><span>da 16&ordf; borda de subida </span><span class="c39">(colocar imagem)</span></li></ul><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">O registrador CCP1CON &eacute; o registrador respons&aacute;vel pelo m&oacute;dulo CCP e neste episodio focaremos nele para o modo de captura.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">O registrador CCP1ON &eacute; visto na Figura X1 abaixo</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Figura X1 -</span><span class="c5">Registrador CCP1ON</span></p><p class="c11"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 604.72px; height: 61.33px;"><img alt="" src="images/image75.png" style="width: 604.72px; height: 61.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">A primeira configura&ccedil;&atilde;o &eacute; feita tornando o pino RB3/CCp1 um pino de entrada.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Outra informa&ccedil;&atilde;o importante &eacute; que o modulo Timer1 &eacute; usado pelo modo capturar, conforme Figura X2</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Figura X2 -</span><span class="c5">Diagrama de bloco de opera&ccedil;&atilde;o do modo de captura</span></p><p class="c11"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 604.72px; height: 302.67px;"><img alt="" src="images/image55.png" style="width: 604.72px; height: 302.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Assim, para definir o comportamento do evento, utiliza-se a Tabela X1.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Tabela X1 -</span><span class="c5">Bits de sele&ccedil;&atilde;o do modo capturar</span></p><a id="t.046932ab868df5494f248b4a63d01780b671dfa1"></a><a id="t.153"></a><table class="c56"><tbody><tr class="c21"><td class="c202"><p class="c1"><span class="c26">CCP1M3</span></p></td><td class="c70"><p class="c1"><span class="c26">CCP1M2</span></p></td><td class="c194"><p class="c1"><span class="c26">CCP1M1</span></p></td><td class="c161"><p class="c1"><span class="c26">CCP1M0</span></p></td><td class="c120"><p class="c1"><span class="c26">Fun&ccedil;&atilde;o</td>
</tr>
<tr class="c21"><td class="c202"><p class="c1"><span class="c5">0</span></p></td><td class="c70"><p class="c1"><span class="c5">0</span></p></td><td class="c194"><p class="c1"><span class="c5">0</span></p></td><td class="c161"><p class="c1"><span class="c5">0</span></p></td><td class="c120"><p class="c1"><span class="c5">desliga o modo capturar</td>
</tr>
<tr class="c21"><td class="c202"><p class="c1"><span class="c5">0</span></p></td><td class="c70"><p class="c1"><span class="c5">1</span></p></td><td class="c194"><p class="c1"><span class="c5">0</span></p></td><td class="c161"><p class="c1"><span class="c5">0</span></p></td><td class="c120"><p class="c1"><span class="c5">modo capturar ativo com borda de descida</td>
</tr>
<tr class="c21"><td class="c202"><p class="c1"><span class="c5">0</span></p></td><td class="c70"><p class="c1"><span class="c5">1</span></p></td><td class="c194"><p class="c1"><span class="c5">0</span></p></td><td class="c161"><p class="c1"><span class="c5">1</span></p></td><td class="c120"><p class="c1"><span class="c5">modo capturar ativo com borda de subida</td>
</tr>
<tr class="c21"><td class="c202"><p class="c1"><span class="c5">0</span></p></td><td class="c70"><p class="c1"><span class="c5">1</span></p></td><td class="c194"><p class="c1"><span class="c5">1</span></p></td><td class="c161"><p class="c1"><span class="c5">0</span></p></td><td class="c120"><p class="c1"><span class="c5">modo capturar ativo com 4&ordf; borda de subida</td>
</tr>
<tr class="c21"><td class="c202"><p class="c1"><span class="c5">0</span></p></td><td class="c70"><p class="c1"><span class="c5">1</span></p></td><td class="c194"><p class="c1"><span class="c5">1</span></p></td><td class="c161"><p class="c1"><span class="c5">1</span></p></td><td class="c120"><p class="c1"><span class="c5">modo capturar ativo com 16&ordf; borda de subida</span></p></td></tr></tbody></table><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Timer1 deve estar executando no modo Timer ou contador sincronizado.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">O tratamento da interrup&ccedil;&atilde;o associado a esse modo &eacute; no bit CCP1IF (bit do registrador PIR1) enquanto sua ativa&ccedil;&atilde;o &eacute; feita no bit CCP1IE (bit do registrador PIE1).</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c34">Exemplo:</span><span class="c5">C&aacute;lculo da frequencia da rede eletrica.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><hr style="page-break-before:always;display:none;"><h1 class="c95 c35" id="h.38y2bb5mcu7t"><span class="c28 c87">Epis&oacute;dio 18: Conhecendo o m&oacute;dulo CCP - Modo comparar e a interrup&ccedil;&atilde;o associada</span></h1><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Neste episodio continuaremos sobre o estudo do modulo CCP, porem abordaremos neste episodio o modo comparar, o qual o valor do resgistrador CCPR1 (CCPR1H e CCPR1L) &eacute; comparado constantemente ao registrador TMR1 (TMR1H e TMR1L).</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Quando ocorre uma combina&ccedil;&atilde;o no pino Rb3/CCP1 pode ser:</span></p><ul class="c80 lst-kix_3fat7z1b6dul-0 start"><li class="c31"><span class="c5">em uma subida;</span></li><li class="c31"><span class="c5">em uma descida;</span></li><li class="c31"><span class="c5">ou continua sem altera&ccedil;&atilde;o em RB3</span></li><li class="c11 c31 c14 li-bullet-0"><span class="c5"></span></li></ul><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Um item importante &eacute; que RB3 deve ser um pino de saida.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">A configura&ccedil;&atilde;o &eacute; conforme a Tabela X1 e a Figura X1 mostra</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Tabela X1 -</span><span class="c5">Bits de sele&ccedil;&atilde;o do modo comparar</span></p><a id="t.0b325361e562d244b0cf0210600aa0e4e7ce616a"></a><a id="t.154"></a><table class="c7"><tbody><tr class="c21"><td class="c72"><p class="c1"><span class="c26">CCP1M3</span></p></td><td class="c72"><p class="c1"><span class="c26">CCP1M2</span></p></td><td class="c72"><p class="c1"><span class="c26">CCP1M1</span></p></td><td class="c72"><p class="c1"><span class="c26">CCP1M0</span></p></td><td class="c112"><p class="c1"><span class="c26">Fun&ccedil;&atilde;o</td>
</tr>
<tr class="c21"><td class="c72"><p class="c1"><span class="c5">0</span></p></td><td class="c72"><p class="c1"><span class="c5">0</span></p></td><td class="c72"><p class="c1"><span class="c5">0</span></p></td><td class="c72"><p class="c1"><span class="c5">0</span></p></td><td class="c112"><p class="c1"><span class="c5">desliga o modo comparar</td>
</tr>
<tr class="c21"><td class="c72"><p class="c1"><span class="c5">1</span></p></td><td class="c72"><p class="c1"><span class="c5">0</span></p></td><td class="c72"><p class="c1"><span class="c5">0</span></p></td><td class="c72"><p class="c1"><span class="c5">0</span></p></td><td class="c112"><p class="c1"><span class="c5">modo comparar ativo com sa&iacute;da setada sobre a combina&ccedil;&atilde;o (CCP1F &eacute; setada)</td>
</tr>
<tr class="c21"><td class="c72"><p class="c1"><span class="c5">1</span></p></td><td class="c72"><p class="c1"><span class="c5">0</span></p></td><td class="c72"><p class="c1"><span class="c5">0</span></p></td><td class="c72"><p class="c1"><span class="c5">1</span></p></td><td class="c112"><p class="c1"><span class="c5">modo comparar ativo com sa&iacute;da limpa sobre a combina&ccedil;&atilde;o (CCP1F &eacute; setada)</td>
</tr>
<tr class="c21"><td class="c72"><p class="c1"><span class="c5">1</span></p></td><td class="c72"><p class="c1"><span class="c5">0</span></p></td><td class="c72"><p class="c1"><span class="c5">1</span></p></td><td class="c72"><p class="c1"><span class="c5">0</span></p></td><td class="c112"><p class="c1"><span>modo comparar ativo com gera&ccedil;&atilde;o de interrup&ccedil;&atilde;o por software sobre a combina&ccedil;&atilde;o </span><span class="c42 c39 c34 c50">(olhar datasheet)</td>
</tr>
<tr class="c21"><td class="c72"><p class="c1"><span class="c5">1</span></p></td><td class="c72"><p class="c1"><span class="c5">0</span></p></td><td class="c72"><p class="c1"><span class="c5">1</span></p></td><td class="c72"><p class="c1"><span class="c5">1</span></p></td><td class="c112"><p class="c1"><span>modo comparar ativo com evento especial de gatilho </span><span class="c39 c34">(olhar datasheet)</span></p></td></tr></tbody></table><p class="c12 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Figura X1 -</span><span class="c5">Diagrama de bloco de opera&ccedil;&atilde;o do modo de comparar</span></p><p class="c11"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 604.72px; height: 244.00px;"><img alt="" src="images/image2.png" style="width: 604.72px; height: 244.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c34">Exemplo:</span><span class="c5">Pulsos gerados periodicamente no pino RB3</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><hr style="page-break-before:always;display:none;"><h1 class="c75 c35" id="h.5yohiqb4mhvt"><span class="c28 c87"></span></h1><h1 class="c95 c35" id="h.j74nqk8f0mt0"><span class="c28 c87">Epis&oacute;dio 19: Conhecendo o m&oacute;dulo CCP - Modo de Modula&ccedil;&atilde;o por Largura de Pulso (PWM)</span></h1><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span>Neste episodio falaremos sobre o ultimo modo sobre o modulo CCP. O modo abordado neste episodio sera o modo PWM</span><sup><a href="#ftnt1" id="ftnt_ref1">[1]</a></sup><span class="c5">(Pulse Width Modulation - Modula&ccedil;&atilde;o por Largura de Pulso) sobre o pino RB3 que deve ser configurado como pino de sa&iacute;da.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">A configura&ccedil;&atilde;o do registrador CCP1CON para trabalhar no modo PWM &eacute; dada pela Tabela X1.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Tabela X1 -</span><span class="c5">Bits de sele&ccedil;&atilde;o do modo PWM</span></p><a id="t.7edab6bfd70b3c8b4909ec3ef098ee8f88563ee0"></a><a id="t.155"></a><table class="c7"><tbody><tr class="c21"><td class="c72"><p class="c1"><span class="c26">CCP1M3</span></p></td><td class="c72"><p class="c1"><span class="c26">CCP1M2</span></p></td><td class="c72"><p class="c1"><span class="c26">CCP1M1</span></p></td><td class="c72"><p class="c1"><span class="c26">CCP1M0</span></p></td><td class="c112"><p class="c1"><span class="c26">Fun&ccedil;&atilde;o</td>
</tr>
<tr class="c21"><td class="c72"><p class="c1"><span class="c5">0</span></p></td><td class="c72"><p class="c1"><span class="c5">0</span></p></td><td class="c72"><p class="c1"><span class="c5">0</span></p></td><td class="c72"><p class="c1"><span class="c5">0</span></p></td><td class="c112"><p class="c1"><span class="c5">desliga o modoPWM</td>
</tr>
<tr class="c21"><td class="c72"><p class="c1"><span class="c5">1</span></p></td><td class="c72"><p class="c1"><span class="c5">1</span></p></td><td class="c72"><p class="c1"><span class="c5">x</span></p></td><td class="c72"><p class="c1"><span class="c5">x</span></p></td><td class="c112"><p class="c1"><span class="c5">liga (ativa) modo PWM</span></p></td></tr></tbody></table><p class="c12 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Conforme Figura X1, a configura&ccedil;&atilde;o &eacute; feita sobre os registradores CCPR1L, os bits CCP1X e CCP1Y (do registrador CCP1CON) e PR2. Tamb&eacute;m h&aacute; a necessidade do Prescaler do Timer2.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Uma sa&iacute;da PWM no pino RB3/CCP1 &eacute; dada pela Figura X2, e assim o calculo do periodo PWM em segundos &eacute; dada pela equa&ccedil;&atilde;o</span></p><p class="c12"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 556.00px; height: 75.00px;"><img alt="" src="images/image60.png" style="width: 556.00px; height: 75.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c11"><span class="c5">A frequencia PWM &eacute; dada por</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c5">frequencia PWM = 1 / (PWM period)</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Se o valor do registrador TMR2 for igual ao valor do registrador PR2, podem ocorrer 3 eventos no proximo ciclo de incremento</span></p><ul class="c80 lst-kix_uq15rfd2l17e-0 start"><li class="c31"><span class="c5">o registrador TMR2 &eacute; limpo;</span></li><li class="c31"><span class="c5">O pino RB3/CCP1 est&aacute; setado (excess&atilde;o: Se o dutty cycle for igual a 0%, o pino RB3/CCP1 n&atilde;o ser&aacute; setado);</span></li><li class="c31"><span class="c5">O dutty cycle do sinal PWm &eacute; colocado do registrador CCPR1L dentro do registrador CCPR1H.</span></li></ul><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">O dutty cycle PWM em segundos &eacute; calculado por</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 531.00px; height: 120.00px;"><img alt="" src="images/image3.png" style="width: 531.00px; height: 120.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span>Note que CCPR1L:CCP1CON&lt;5:4&gt; gera um numero de 10 bits, logo cada intervalo ser&aacute; de V</span><span class="c62">DD</span><span class="c5">/1024.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">A maxima resolu&ccedil;&atilde;o PWM em bits para uma frequencia PWM</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 520.00px; height: 110.00px;"><img alt="" src="images/image26.png" style="width: 520.00px; height: 110.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Conforme o datasheet, o processo de configura&ccedil;&atilde;o da opera&ccedil;&atilde;o PWM &eacute;:</span></p><ol class="c80 lst-kix_n6uxz2i6taog-0 start" start="1"><li class="c31"><span class="c5">Configure o periodo do PWM escrevendo-se no registrador PR2;</span></li><li class="c31"><span class="c5">Configure o dutty cycle do PWM escrevendo-se no registrador CCPR1L e CCP1CON&lt;5:4&gt;;</span></li><li class="c31"><span class="c5">Fa&ccedil;a o pino RB3/CCP1 como pino de sa&iacute;da, limpando o bit TRISB&lt;3&gt;;</span></li><li class="c31"><span class="c5">Configure o vlaor do Prescaler de TMR2 e ative o TImer2 ativando escrevendo em T2CON.</span></li></ol><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span>Vejamos um exemplo para f</span><span class="c62">osc</span><span class="c5">=20 MHz, Timer Prescaler=16 e PR2=0xFF</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c2">Periodo PWM = (PR2 + 1) * 4 * Tosc * (Timer2 Prescaler)</span></p><p class="c11"><span class="c2">      = (255 + 1) * 4 * (1/20*10^6) * 16</span></p><p class="c11"><span class="c2">      = (256 * 16 * 10^-6)/5</span></p><p class="c11"><span class="c2">      = 819,2 * 10^-6 s</span></p><p class="c11"><span class="c2">      = 819,2 &mu;s</span></p><p class="c11 c14"><span class="c2"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c2">Frequencia PWM = 1 / (Periodo PWM)</span></p><p class="c11"><span class="c2">       = 1 / (819,2 &mu;s)</span></p><p class="c11"><span class="c2">       = 1 / (819,2 * 10^-6 s)</span></p><p class="c11"><span class="c2">       = 1220,703125 Hz</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Como a tens&atilde;o VDD = 5 V, se quisermos aproximadamente 1,7 V na saida (pino RB3/CCP1) teremos que aplicar uma regra de 3</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c24"><span class="c2">5,0 V      1023</span></p><p class="c24"><span class="c2">1,7 V      n</span></p><p class="c24 c14"><span class="c2"></span></p><p class="c24"><span class="c2">5 V / 1,7 V = 1023 / n</span></p><p class="c24 c14"><span class="c2"></span></p><p class="c24"><span class="c2">n = (1,7 V / 5 V) * 1023</span></p><p class="c24"><span class="c2">n = 347,82</span></p><p class="c24 c14"><span class="c2"></span></p><p class="c24"><span class="c2">Por&eacute;m esse valor deve ser um numero natural, assim temos dois casos a analizar:</span></p><ul class="c80 lst-kix_d0ecpr1v4udn-0 start"><li class="c24 c31 li-bullet-0"><span class="c2">n = 347, tem-se </span></li></ul><p class="c24 c49 c14"><span class="c2"></span></p><p class="c24 c23"><span class="c2">(5 V * (347 / 1023)) = 1,696 V</span></p><p class="c24 c14"><span class="c2"></span></p><ul class="c80 lst-kix_d0ecpr1v4udn-0"><li class="c24 c31 li-bullet-0"><span class="c2">n = 348, tem-se</span></li></ul><p class="c24 c49 c14"><span class="c2"></span></p><p class="c24 c23"><span class="c2">(5 V * (348 / 1023)) = 1,701 V</span></p><p class="c24 c14"><span class="c2"></span></p><p class="c11"><span class="c5">Supondo que queiramos fazer uso do valor 347, assim</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span>347</span><span class="c62">10</span><span>= 0101.0110.11</span><span class="c62">2</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Os dados para o dutty cycle PWM &eacute;</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c8">CCPR1L:CCP1CON&lt;5:4&gt; = 0101.0110.11</span><span class="c63 c8 c62 c53">2</span></p><p class="c11"><span class="c8">      CCPR1L = 0101.0110</span><span class="c63 c8 c62 c53">2</span></p><p class="c11"><span class="c8">   CCP1CON&lt;5:4&gt; = 11</span><span class="c63 c8 c62 c53">2</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Assim o dutty cycle PWM em segundos &eacute;</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c2">dutty cycle PWM = (347 / 1023) * Periodo PWM</span></p><p class="c11"><span class="c2">        = (347 / 1023) * 819,2 * 10^-6 s</span></p><p class="c11"><span class="c2">        = 277,871 * 10^-6 s</span></p><p class="c11"><span class="c8">        = 277,871 &mu;s</span></p><p class="c11 c14"><span class="c2"></span></p><p class="c11"><span class="c5">A m&aacute;xima resolu&ccedil;&atilde;o PWM &eacute;</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c2">max. resolu&ccedil;&atilde;o PWM = log( fosc / (fPWM * TMR2 Prescaler) ) / log(2)</span></p><p class="c11"><span class="c2">         = log( (20 * 10^6) / (1220,703125 * 16) ) / log(2)</span></p><p class="c11"><span class="c2">         = log( 1024 ) / log(2)</span></p><p class="c11"><span class="c2">         = 10 bits</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span>A Tabela X3 mostra exemplos de frequencias e resolu&ccedil;&otilde;es PWM para f</span><span class="c62">osc</span><span>= 20 MHz</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Tabela X3 -</span><span class="c5">Tabela de frequencias e resolu&ccedil;&atilde;o para fosc = 20 MHz</span></p><a id="t.2639c2ef66086096e2edf254bc287943df9c26a5"></a><a id="t.156"></a><table class="c56"><tbody><tr class="c21"><td class="c82"><p class="c1 c14"><span class="c5"></span></p></td><td class="c82"><p class="c1"><span class="c26">Exemplo 1</span></p></td><td class="c82"><p class="c1"><span class="c26">Exemplo 2</span></p></td><td class="c82"><p class="c1"><span class="c26">Exemplo 3</span></p></td><td class="c82"><p class="c1"><span class="c26">Exemplo 4</span></p></td><td class="c82"><p class="c1"><span class="c26">Exemplo 5</span></p></td><td class="c82"><p class="c1"><span class="c26">Exemplo 6</td>
</tr>
<tr class="c21"><td class="c82"><p class="c1"><span class="c26">Timer Prescaler TMR2</span></p></td><td class="c82"><p class="c1"><span class="c5">16</span></p></td><td class="c82"><p class="c1"><span class="c5">4</span></p></td><td class="c82"><p class="c1"><span class="c5">1</span></p></td><td class="c82"><p class="c1"><span class="c5">1</span></p></td><td class="c82"><p class="c1"><span class="c5">1</span></p></td><td class="c82"><p class="c1"><span class="c5">1</td>
</tr>
<tr class="c21"><td class="c82"><p class="c1"><span class="c26">PR2</span></p></td><td class="c82"><p class="c1"><span class="c5">0xFF</span></p></td><td class="c82"><p class="c1"><span class="c5">0xFF</span></p></td><td class="c82"><p class="c1"><span class="c5">0xFF</span></p></td><td class="c82"><p class="c1"><span class="c5">0x3F</span></p></td><td class="c82"><p class="c1"><span class="c5">0x1F</span></p></td><td class="c82"><p class="c1"><span class="c5">0x17</td>
</tr>
<tr class="c21"><td class="c82"><p class="c1"><span class="c26">Frequ&ecirc;ncia PWM</span></p></td><td class="c82"><p class="c1"><span class="c5">1,22 kHz</span></p></td><td class="c82"><p class="c1"><span class="c5">4,88 kHz</span></p></td><td class="c82"><p class="c1"><span class="c5">19,53 kHz</span></p></td><td class="c82"><p class="c1"><span class="c5">78,12 kHz</span></p></td><td class="c82"><p class="c1"><span class="c5">153,3 kHz</span></p></td><td class="c82"><p class="c1"><span class="c5">208,3 kHz</td>
</tr>
<tr class="c21"><td class="c82"><p class="c1"><span class="c26">Maxima Resolu&ccedil;&atilde;o PWM</span></p></td><td class="c82"><p class="c1"><span class="c5">10</span></p></td><td class="c82"><p class="c1"><span class="c5">10</span></p></td><td class="c82"><p class="c1"><span class="c5">10</span></p></td><td class="c82"><p class="c1"><span class="c5">8</span></p></td><td class="c82"><p class="c1"><span class="c5">7</span></p></td><td class="c82"><p class="c1"><span class="c5">6,5</span></p></td></tr></tbody></table><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">A Tabela X4 mostra exemplos de frequencias e resolu&ccedil;&otilde;es PWM para fosc = 4 MHz</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Tabela X -</span><span class="c5">Tabela de frequencias e resolu&ccedil;&atilde;o para fosc = 4 MHz</span></p><a id="t.9744092ef880f560735c75626ed4ec0373b16041"></a><a id="t.157"></a><table class="c56"><tbody><tr class="c21"><td class="c82"><p class="c1 c14"><span class="c5"></span></p></td><td class="c82"><p class="c1"><span class="c26">Exemplo 1</span></p></td><td class="c82"><p class="c1"><span class="c26">Exemplo 2</span></p></td><td class="c82"><p class="c1"><span class="c26">Exemplo 3</span></p></td><td class="c82"><p class="c1"><span class="c26">Exemplo 4</span></p></td><td class="c82"><p class="c1"><span class="c26">Exemplo 5</span></p></td><td class="c82"><p class="c1"><span class="c26">Exemplo 6</td>
</tr>
<tr class="c21"><td class="c82"><p class="c1"><span class="c26">Timer Prescaler TMR2</span></p></td><td class="c82"><p class="c1"><span class="c5">16</span></p></td><td class="c82"><p class="c1"><span class="c5">4</span></p></td><td class="c82"><p class="c1"><span class="c5">1</span></p></td><td class="c82"><p class="c1"><span class="c5">1</span></p></td><td class="c82"><p class="c1"><span class="c5">1</span></p></td><td class="c82"><p class="c1"><span class="c5">1</td>
</tr>
<tr class="c21"><td class="c82"><p class="c1"><span class="c26">PR2</span></p></td><td class="c82"><p class="c1"><span class="c5">0xFF</span></p></td><td class="c82"><p class="c1"><span class="c5">0xFF</span></p></td><td class="c82"><p class="c1"><span class="c5">0xFF</span></p></td><td class="c82"><p class="c1"><span class="c5">0x3F</span></p></td><td class="c82"><p class="c1"><span class="c5">0x1F</span></p></td><td class="c82"><p class="c1"><span class="c5">0x17</td>
</tr>
<tr class="c21"><td class="c82"><p class="c1"><span class="c26">Frequ&ecirc;ncia PWM</span></p></td><td class="c82"><p class="c1"><span class="c5">244,14 Hz</span></p></td><td class="c82"><p class="c1"><span class="c5">976,56 Hz</span></p></td><td class="c82"><p class="c1"><span class="c5">3,91 kHz</span></p></td><td class="c82"><p class="c1"><span class="c5">15,62 kHz</span></p></td><td class="c82"><p class="c1"><span class="c5">31,25 kHz</span></p></td><td class="c82"><p class="c1"><span class="c5">41,66 kHz</td>
</tr>
<tr class="c21"><td class="c82"><p class="c1"><span class="c26">Maxima Resolu&ccedil;&atilde;o PWM</span></p></td><td class="c82"><p class="c1"><span class="c5">10</span></p></td><td class="c82"><p class="c1"><span class="c5">10</span></p></td><td class="c82"><p class="c1"><span class="c5">10</span></p></td><td class="c82"><p class="c1"><span class="c5">8</span></p></td><td class="c82"><p class="c1"><span class="c5">7</span></p></td><td class="c82"><p class="c1"><span class="c5">6,6</span></p></td></tr></tbody></table><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c42 c39 c34 c50">Exemplo de aplica&ccedil;&atilde;o</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c42 c39 c34 c50">Codigo</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Figura X1 -</span><span class="c5">Diagrama de bloco de opera&ccedil;&atilde;o do modo de PWM</span></p><p class="c11"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 561.00px; height: 500.00px;"><img alt="" src="images/image57.png" style="width: 561.00px; height: 500.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Figura X2 -</span><span class="c5">Saida PWM</span></p><p class="c11"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 531.00px; height: 294.00px;"><img alt="" src="images/image80.png" style="width: 531.00px; height: 294.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><hr style="page-break-before:always;display:none;"><h1 class="c75 c35" id="h.y1ta83frhrx6"><span class="c28 c87"></span></h1><h1 class="c95 c35" id="h.m305xgcjv6z5"><span class="c28 c87">Epis&oacute;dio 20: Conhecendo o m&oacute;dulo Comparador e a interrup&ccedil;&atilde;o associada</span></h1><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Neste episodio veremos o uso de 2 comparadores que compoem o modulo comparador, al&eacute;m de poder fazer uso de interrup&ccedil;&atilde;o associada a esse modulo.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Nos episodios anteriores, para podermos fazer uso dos exemplos, sempre foi feita o desligamento do mudulo comparador.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">A configura&ccedil;&atilde;o do modulo comparador &eacute; feita pelo registrador CMCON (Comparator Configurator Register) enquanto os registradores INTCON (GIE e PEIE), PIE1 (CMIE), PIR1 (CMIF) e TRISA (TRISA&lt;3:0&gt;).</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">O registrador CMCON &eacute; visualizado na Figura X1</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Figura X1 -</span><span class="c5">Registrador CMCON</span></p><p class="c11"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 604.72px; height: 65.33px;"><img alt="" src="images/image39.png" style="width: 604.72px; height: 65.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">e os comparadores s&atilde;o conforme a Figura X2</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Figura X2 -</span><span class="c5">Comparador e seu funcionamento</span></p><p class="c12"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 377.11px; height: 318.39px;"><img alt="" src="images/image43.png" style="width: 377.11px; height: 318.39px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Os bits de configura&ccedil;&atilde;o dos modos de trabalho possiveis s&atilde;o exibidos na Tabela X1</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Tabela X1 -</span><span class="c5">Modos de opera&ccedil;&atilde;o do modulo comparador</span></p><a id="t.219995c084533e9a3cbd686ed3e67b784721a007"></a><a id="t.158"></a><table class="c56"><tbody><tr class="c21"><td class="c111"><p class="c1"><span class="c26">CM2</span></p></td><td class="c111"><p class="c1"><span class="c26">CM1</span></p></td><td class="c111"><p class="c1"><span class="c26">CM0</span></p></td><td class="c29"><p class="c1"><span class="c26">Modo</td>
</tr>
<tr class="c21"><td class="c111"><p class="c1"><span class="c5">0</span></p></td><td class="c111"><p class="c1"><span class="c5">0</span></p></td><td class="c111"><p class="c1"><span class="c5">0</span></p></td><td class="c29"><p class="c19"><span class="c5">Comparadores em reset</td>
</tr>
<tr class="c21"><td class="c111"><p class="c1"><span class="c5">0</span></p></td><td class="c111"><p class="c1"><span class="c5">0</span></p></td><td class="c111"><p class="c1"><span class="c5">1</span></p></td><td class="c29"><p class="c19"><span class="c5">Tr&ecirc;s entradas multiplexadas para dois comparadores</td>
</tr>
<tr class="c21"><td class="c111"><p class="c1"><span class="c5">0</span></p></td><td class="c111"><p class="c1"><span class="c5">1</span></p></td><td class="c111"><p class="c1"><span class="c5">0</span></p></td><td class="c29"><p class="c19"><span class="c5">Quatro entradas multiplexadas para dois comparadores</td>
</tr>
<tr class="c21"><td class="c111"><p class="c1"><span class="c5">0</span></p></td><td class="c111"><p class="c1"><span class="c5">1</span></p></td><td class="c111"><p class="c1"><span class="c5">1</span></p></td><td class="c29"><p class="c19"><span class="c5">Dois comparadores referencia comum</td>
</tr>
<tr class="c21"><td class="c111"><p class="c1"><span class="c5">1</span></p></td><td class="c111"><p class="c1"><span class="c5">0</span></p></td><td class="c111"><p class="c1"><span class="c5">0</span></p></td><td class="c29"><p class="c19"><span class="c5">Dois comparadores independentes</td>
</tr>
<tr class="c21"><td class="c111"><p class="c1"><span class="c5">1</span></p></td><td class="c111"><p class="c1"><span class="c5">0</span></p></td><td class="c111"><p class="c1"><span class="c5">1</span></p></td><td class="c29"><p class="c19"><span class="c5">Um comparador independente</td>
</tr>
<tr class="c21"><td class="c111"><p class="c1"><span class="c5">1</span></p></td><td class="c111"><p class="c1"><span class="c5">1</span></p></td><td class="c111"><p class="c1"><span class="c5">0</span></p></td><td class="c29"><p class="c19"><span class="c5">Dois comparadores referencia comum com saidas</td>
</tr>
<tr class="c21"><td class="c111"><p class="c1"><span class="c5">1</span></p></td><td class="c111"><p class="c1"><span class="c5">1</span></p></td><td class="c111"><p class="c1"><span class="c5">1</span></p></td><td class="c29"><p class="c19"><span class="c5">Comparadores desligados</span></p></td></tr></tbody></table><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Neste momento falaremos dos bits C1OUT, C2OUT, C1INV e C2INV do registrador CMCON pois s&atilde;o fundamentais para a leitura dos estados processados pelos comparadores.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Os bits C1OUT (C2OUT) &eacute; o bit repons&aacute;vel por armazenar o estado da sa&iacute;da do comparador C1 (C2). J&aacute; o bit C1INV (C2INV) &eacute; o bit com a fun&ccedil;&atilde;o de inverter o valor da sa&iacute;da em C1OUT (C2OUT).</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c34">Exemplo:</span><span class="c5">Se a porta n&atilde;o-inversora (VIN+) do comparador 1 (C1) tiver uma tens&atilde;o eletrica aplicada nela de 3,3 V e na porta inversora (VIN-) tiver uma tens&atilde;o eletrica de 1,2 V aplicada, a sa&iacute;da C1OUT do comparador C1 ficar&aacute; em nivel alto - valor 1 se o valor do bit C1INV for igual a 0, por&eacute;m se C1INV for igual a 1 para as mesmas condi&ccedil;&otilde;es (VIN+ = 3,3 V e VIN- = 1,2 V) a sa&iacute;da C1OUT ficar&aacute; em n&iacute;vel baixo - valor 0.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">O primeiro modo de trabalho do modulo comparador &eacute; o modo de reset quando CM&lt;2:0&gt; conforme Figura X1. Neste modo as saidas est&atilde;o em nivel baixo, isto &eacute;, as saidas dos comparadores C1 e C2 tem seus valores zero nos bits C1OUT e c2OUT de CMCON quando os bits C1INV e C2INV s&atilde;o iguais a 0 e os pinos estar&atilde;o trabalhando como pinos analogicos.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Figura X1 -</span><span class="c5">Modo reset do modulo comparador</span></p><p class="c11"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 604.72px; height: 244.00px;"><img alt="" src="images/image72.png" style="width: 604.72px; height: 244.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">O segundo modo &eacute; quando CM&lt;2:0&gt; = 111, no qual os comparadores est&atilde;o desligados e os pinos RA0 e RA3 est&atilde;o trabalhando como pinos digitais e as sa&iacute;das e entradas dos comparadores est&atilde;o em nivel baixo conforme Figura X2.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Figura X2 -</span><span class="c5">Modo desligado do modulo comparador</span></p><p class="c11"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 596.00px; height: 256.00px;"><img alt="" src="images/image36.png" style="width: 596.00px; height: 256.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Vejamos o caso onde h&aacute; necessidade de trabalhar com duas entradas multiplixedas conforme Figura X3 (CM&lt;2:0&gt; = 001) e Figura X4 (CM&lt;2:0&gt; = 010).</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Figura X3 -</span><span class="c5">Tr&ecirc;s entradas multiplexadas para dois comparadores</span></p><p class="c12"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 446.89px; height: 180.40px;"><img alt="" src="images/image68.png" style="width: 446.89px; height: 180.40px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Figura X4 -</span><span>Quatro entradas multiplexadas para dois comparadores</span></p><p class="c12"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 458.00px; height: 224.00px;"><img alt="" src="images/image59.png" style="width: 458.00px; height: 224.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Na Figura X3 est&aacute; sendo usado o modo de tr&ecirc;s entradas multiplexadas CM&lt;2:0&gt; = 001, no qual os pinos RA0 e RA3 ser&atilde;o mupliplexadas, no qual esse controle &eacute; feito pelo bit CIS do registrador CMCON. Assim, se o bit CIS for igual a 0, o pino RA0 ser&aacute; conectador internamente a porta inversora do comparador 1, mas caso CIS for igual a 1, ser&aacute; o pino RA3 conectado internamente a porta inversora do comparador 1.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span>Existem outros modos e voc&ecirc; pode ve-los no datasheet do disposito no </span><span class="c39">[colocar link]</span><span class="c5">na p&aacute;gina 64.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Agora veremos um exemplo para monitorar temperatura por limite inferior e superior dado um sensor de temperatura LM35 com saida analogica e por dois potenciometros usados para em dois divisores de tens&otilde;a. conforme Figura X5 e fazendo uso do modo de dois comparadores referencia comum (CM&lt;2:0&gt; = 011)</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Figura X5 -</span><span class="c5">Esquema eletrico do exemplo</span></p><p class="c12"><span class="c42 c39 c34 c50">COLOCAR AQUI O CIRCUITO ELETRONICO</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">A regra &eacute; que quando a tens&atilde;o nos pinos RA2/RA3 (portas n&atilde;o-inversora):</span></p><ul class="c80 lst-kix_4fdctnvv1za8-0 start"><li class="c31"><span class="c5">for menor que a tens&atilde;o no pino RA0 (porta inversora do comparador C1) ativar o pino RB4, sen&atilde;o desativa RB4;</span></li><li class="c31"><span class="c5">for maior que a tens&atilde;o no pino RA1 (porta inversora do comparador C2) ativa o pino RB5, sen&atilde;o desativa RB5.</span></li></ul><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">A solu&ccedil;&atilde;o &eacute; dada pelo segunte c&acute;dogio:</span></p><p class="c12"><span class="c39 c34">COLOCAR AQUI O CIRCUITO ELETRONICO</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Veremos agora como utilizar a interrup&ccedil;&atilde;o associada a esse modulo.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">A interrup&ccedil;&atilde;o sobre o modulo comparador ocorre quando h&aacute; uma troca de estados nos bits C1OUT ou C2OUT.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">O primeiro bit a ser configurado (setados) &eacute; bit CMIE do registrador PIE1, ap&oacute;s o bit PEIE do registrador INTCON deve ser setado, a interrup&ccedil;&atilde;o j&aacute; estar&aacute; em funcionamento e o bit do registrador PIR1 tem o estado da interrup&ccedil;&atilde;o.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c39 c34">Nota:</span><span class="c42 c39 c50 c44">If a change in the CMCON register (C1OUT or C2OUT) should occur when a read operation is being executed (start of the Q2 cycle), then the CMIF (PIR1&lt;6&gt;) interrupt flag may not get set.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Exemplo: Modifica&ccedil;&atilde;o do exemplo __ aplicando o uso de interrup&ccedil;&atilde;o.</span></p><p class="c24 c14"><span class="c5"></span></p><p class="c24 c14"><span class="c5"></span></p><hr style="page-break-before:always;display:none;"><h1 class="c75 c35" id="h.289guchjb9jj"><span class="c28 c87"></span></h1><h1 class="c95 c35" id="h.l9hau6hf265b"><span class="c28 c87">Epis&oacute;dio 21: Conhecendo o m&oacute;dulo de tens&atilde;o el&eacute;trica de refer&ecirc;ncia</span></h1><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Neste episodio veremos como usar o PIC16F628A para gerar tens&atilde;o eletrica variavel no pino RA2.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">O modulo de tensao eletrica de referencia&eacute; controlado pelo registrador VRCON (Voltage Reference Control Register) o qual pode ser visto na Figura X1.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Figura X1 -</span><span class="c5">Registrador VRCON</span></p><p class="c11"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 604.72px; height: 66.67px;"><img alt="" src="images/image49.png" style="width: 604.72px; height: 66.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">O controle do estado do modulo de tens&atilde;o eletrica de referencia s&atilde;o dados pelos bits VREN e VROE, onde</span></p><ul class="c80 lst-kix_t3aisgctvec8-0 start"><li class="c31"><span class="c5">VREN &eacute; igual a 1 se quer ligar o m&oacute;dulo de tens&atilde;o el&eacute;trica de referencia ou igual a 0 para desligar o modulo;</span></li><li class="c31"><span class="c5">VROE &eacute; o bit reponsavel por ativar (valor igual a 1) ou n&atilde;o (valor igual a 1) a saida no pino RA2.</span></li></ul><p class="c11 c49 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Para a configura&ccedil;&atilde;o do valor da amplitude da tens&atilde;o el&eacute;trica no pino RA2, h&aacute; dois intervalos de trabalho, conhecido como &ldquo;intervalo baixo&rdquo; e &ldquo;intervalo alto&rdquo;.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">A escolha pelo &ldquo;intervalo baixo&rdquo; se d&aacute; limpando (valor igual a 0) o bit VRR do registrador VRCON, enquanto a escolha pelo &rdquo;intervalo alto&rdquo; se d&aacute; setando (valor 1) o bit VRR do registrador VRCON.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">A base para o c&aacute;lculo do valor da tens&atilde;o el&eacute;trica &eacute; dada pelos valores setados (valores 1) ou limpos (valores 0) dos bits VR&lt;3:0&gt; e pelas equa&ccedil;&otilde;es</span></p><ul class="c80 lst-kix_36t8x2wn9cy1-0 start"><li class="c31"><span class="c5">intervalo baixo (VRR = 0)</span></li></ul><p class="c12 c49"><span class="c5">VREF = (VDD/4) + (VR&lt;3:0&gt; / 32) * VDD</span></p><ul class="c80 lst-kix_36t8x2wn9cy1-0"><li class="c31"><span class="c5">intervalo alto (VRR = 1)</span></li></ul><p class="c12 c49"><span class="c5">VREF = (VR&lt;3:0&gt; / 24) * VDD</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">onde 0 &le; VR&lt;3:0&gt; &le; 15 (16 valores possiveis por intervalo).</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">A Figura X2 exibe o funcionamento do modulo e o valor de R &eacute; aproximadamente 2k&#x1d6fa;. </span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Figura X2 -</span><span class="c5">Diagrama de bloco do modulo de referencia de tens&atilde;o eletrica</span></p><p class="c11"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 604.72px; height: 180.00px;"><img alt="" src="images/image35.png" style="width: 604.72px; height: 180.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Os limites de tens&atilde;o de cada intevalo s&atilde;o, baseando-se em VDD = 5,0 V</span></p><p class="c11 c14"><span class="c5"></span></p><ul class="c80 lst-kix_kxspdncckzkc-0 start"><li class="c31"><span class="c5">intervalo baixo (VRR = 0)</span></li></ul><p class="c11 c49 c14"><span class="c5"></span></p><p class="c11 c49"><span class="c34">VR&lt;3:0&gt; = 000</span><span class="c34 c62">2</span><span class="c34">= 0</span><span class="c63 c34 c62 c50 c53">10</span></p><p class="c11 c49"><span class="c26">VDD = 5 V</span></p><p class="c11 c49 c14"><span class="c5"></span></p><p class="c24 c49"><span class="c5">VREF = (VDD/4) + (VR&lt;3:0&gt; / 32) * VDD</span></p><p class="c24 c49"><span class="c5">VREF = (5 V/4) + (0 / 32) * 5 V</span></p><p class="c24 c49"><span class="c5">VREF = 1,25 V + 0 * 5 V</span></p><p class="c24 c49"><span class="c5">VREF = 1,25 V</span></p><p class="c24 c49 c14"><span class="c5"></span></p><p class="c11 c49"><span class="c34">VR&lt;3:0&gt; = 111</span><span class="c34 c62">2</span><span class="c34">= 15</span><span class="c63 c34 c62 c50 c53">10</span></p><p class="c11 c49"><span class="c26">VDD = 5 V</span></p><p class="c24 c49 c14"><span class="c5"></span></p><p class="c24 c49"><span class="c5">VREF = (VDD/4) + (VR&lt;3:0&gt; / 32) * VDD</span></p><p class="c24 c49"><span class="c5">VREF = (5 V/4) + (15 / 32) * 5 V</span></p><p class="c24 c49"><span class="c5">VREF = 1,25 V + 0,46875 * 5 V</span></p><p class="c24 c49"><span class="c5">VREF = 3,594 V</span></p><p class="c24 c49 c14"><span class="c5"></span></p><p class="c24 c49"><span class="c5">Assim para 0 &le; VR&lt;3:0&gt; &le; 15 implica que 1,25 V &le; VREF &le; 3,594 V</span></p><p class="c11 c49 c14"><span class="c5"></span></p><ul class="c80 lst-kix_kxspdncckzkc-0"><li class="c31"><span class="c5">intevalo alto (VRR = 1)</span></li></ul><p class="c11 c49 c14"><span class="c5"></span></p><p class="c11 c49"><span class="c34">VR&lt;3:0&gt; = 000</span><span class="c34 c62">2</span><span class="c34">= 0</span><span class="c63 c34 c62 c50 c53">10</span></p><p class="c11 c49"><span class="c26">VDD = 5 V</span></p><p class="c11 c49 c14"><span class="c5"></span></p><p class="c24 c49"><span class="c5">VREF = (VR&lt;3:0&gt; / 24) * VDD</span></p><p class="c24 c49"><span class="c5">VREF = (0 / 24) * 5 V</span></p><p class="c24 c49"><span class="c5">VREF = 0 V</span></p><p class="c24 c49 c14"><span class="c5"></span></p><p class="c11 c49"><span class="c34">VR&lt;3:0&gt; = 111</span><span class="c34 c62">2</span><span class="c34">= 15</span><span class="c63 c34 c62 c50 c53">10</span></p><p class="c11 c49"><span class="c34">VDD = 5 V</span></p><p class="c24 c49 c14"><span class="c5"></span></p><p class="c24 c49"><span class="c5">VREF = (VR&lt;3:0&gt; / 24) * VDD</span></p><p class="c24 c49"><span class="c5">VREF = (15 / 24) * 5 V</span></p><p class="c24 c49"><span class="c5">VREF = 0,625 * 5 V</span></p><p class="c24 c49"><span class="c5">VREF = 3,125 V</span></p><p class="c24 c49 c14"><span class="c5"></span></p><p class="c24 c49"><span class="c5">Assim para 0 &le; VR&lt;3:0&gt; &le; 15 implica que 0 V &le; VREF &le; 3,125 V</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Veja a Tabela X1 com o valores aproximados possiveis para a tens&atilde;o de referencia</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Tabela X1 - Valores de tens&atilde;o de referencia</span></p><a id="t.d58f7656225445d9314a1f846897f6c94820b44c"></a><a id="t.159"></a><table class="c56"><tbody><tr class="c101"><td class="c165"><p class="c71 c14"><span class="c26"></span></p></td><td class="c239" colspan="2" rowspan="1"><p class="c71"><span class="c26">VREF (volts)</span></p></td></tr><tr class="c101"><td class="c165"><p class="c71"><span class="c34">VR&lt;3:0&gt;</span></p></td><td class="c92"><p class="c71"><span class="c34">intervalo baixo</span></p></td><td class="c86"><p class="c71"><span class="c34">intervalo alto</span></p></td></tr><tr class="c101"><td class="c165"><p class="c71"><span class="c5">0</span></p></td><td class="c92"><p class="c71"><span class="c5">1,2500</span></p></td><td class="c86"><p class="c71"><span class="c5">0,0000</span></p></td></tr><tr class="c101"><td class="c165"><p class="c71"><span class="c5">1</span></p></td><td class="c92"><p class="c71"><span class="c5">1,4063</span></p></td><td class="c86"><p class="c71"><span class="c5">0,2083</span></p></td></tr><tr class="c101"><td class="c165"><p class="c71"><span class="c5">2</span></p></td><td class="c92"><p class="c71"><span class="c5">1,5625</span></p></td><td class="c86"><p class="c71"><span class="c5">0,4167</span></p></td></tr><tr class="c101"><td class="c165"><p class="c71"><span class="c5">3</span></p></td><td class="c92"><p class="c71"><span class="c5">1,7188</span></p></td><td class="c86"><p class="c71"><span class="c5">0,6250</span></p></td></tr><tr class="c101"><td class="c165"><p class="c71"><span class="c5">4</span></p></td><td class="c92"><p class="c71"><span class="c5">1,8750</span></p></td><td class="c86"><p class="c71"><span class="c5">0,8333</span></p></td></tr><tr class="c101"><td class="c165"><p class="c71"><span class="c5">5</span></p></td><td class="c92"><p class="c71"><span class="c5">2,0313</span></p></td><td class="c86"><p class="c71"><span class="c5">1,0417</span></p></td></tr><tr class="c101"><td class="c165"><p class="c71"><span class="c5">6</span></p></td><td class="c92"><p class="c71"><span class="c5">2,1875</span></p></td><td class="c86"><p class="c71"><span class="c5">1,2500</span></p></td></tr><tr class="c101"><td class="c165"><p class="c71"><span class="c5">7</span></p></td><td class="c92"><p class="c71"><span class="c5">2,3438</span></p></td><td class="c86"><p class="c71"><span class="c5">1,4583</span></p></td></tr><tr class="c101"><td class="c165"><p class="c71"><span class="c5">8</span></p></td><td class="c92"><p class="c71"><span class="c5">2,5000</span></p></td><td class="c86"><p class="c71"><span class="c5">1,6667</span></p></td></tr><tr class="c101"><td class="c165"><p class="c71"><span class="c5">9</span></p></td><td class="c92"><p class="c71"><span class="c5">2,6563</span></p></td><td class="c86"><p class="c71"><span class="c5">1,8750</span></p></td></tr><tr class="c101"><td class="c165"><p class="c71"><span class="c5">10</span></p></td><td class="c92"><p class="c71"><span class="c5">2,8125</span></p></td><td class="c86"><p class="c71"><span class="c5">2,0833</span></p></td></tr><tr class="c101"><td class="c165"><p class="c71"><span class="c5">11</span></p></td><td class="c92"><p class="c71"><span class="c5">2,9688</span></p></td><td class="c86"><p class="c71"><span class="c5">2,2917</span></p></td></tr><tr class="c101"><td class="c165"><p class="c71"><span class="c5">12</span></p></td><td class="c92"><p class="c71"><span class="c5">3,1250</span></p></td><td class="c86"><p class="c71"><span class="c5">2,5000</span></p></td></tr><tr class="c101"><td class="c165"><p class="c71"><span class="c5">13</span></p></td><td class="c92"><p class="c71"><span class="c5">3,2813</span></p></td><td class="c86"><p class="c71"><span class="c5">2,7083</span></p></td></tr><tr class="c101"><td class="c165"><p class="c71"><span class="c5">14</span></p></td><td class="c92"><p class="c71"><span class="c5">3,4375</span></p></td><td class="c86"><p class="c71"><span class="c5">2,9167</span></p></td></tr><tr class="c101"><td class="c165"><p class="c71"><span class="c5">15</span></p></td><td class="c92"><p class="c71"><span class="c5">3,5938</span></p></td><td class="c86"><p class="c71"><span class="c5">3,1250</span></p></td></tr></tbody></table><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Aqui vejamos um exemplo de codigo para gerar a tens&atilde;o de referencia baseado no exemplo do datasheet. Neste exemplo a tens&atilde;o de referencia ser&aacute; usada para alimentar o modulo comparador e ter tomadas de decis&otilde;es baseadas em niveis de tens&atilde;o ajustadas internamente. A Figura X3 mostra a modo do modulo comparador que usaremos neste exemplo, onde a tens&atilde;o que ser&aacute; usada na porta n&atilde;o-inversora dos comparadores de tens&atilde;o C1 e C2 vir&aacute; do modulo de refencia de tens&atilde;o.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c34">Figura X3 -</span><span class="c5">Modo de quatro entradas multiplexadas para dois comparadores e tens&atilde;o de refencia</span></p><p class="c11"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 456.00px; height: 222.00px;"><img alt="" src="images/image46.png" style="width: 456.00px; height: 222.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c26">Exemplo:</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c2">MOVLW 0x02    ; 02(16)=0000.0010 =&gt; CM2.CM1.CM0 = 0.1.0</span></p><p class="c11"><span class="c8">MOVWF CMCON    ; </span><span>4 entradas multiplexadas 2 comparadores e tensao de referencia</span></p><p class="c11 c14"><span class="c2"></span></p><p class="c11"><span class="c2">BSF  STATUS, RP0 ; seleciona o banco 1</span></p><p class="c11 c14"><span class="c2"></span></p><p class="c11"><span class="c2">MOVLW 0x07    ; 07(16)=1111.1111(2)</span></p><p class="c11"><span class="c2">MOVWF TRISA    ; RA7~RA0 are entradas</span></p><p class="c11 c14"><span class="c2"></span></p><p class="c11"><span class="c2">MOVLW 0xA6    ; A6(16)=1010.0110(2) =&gt; VREN=1,VROE=0,VRR=1(int. baixo)</span></p><p class="c11"><span class="c2">MOVWF VRCON    ; VR3.VR2.VR1.VR0 = 0110(2) = 6 </span></p><p class="c11 c14"><span class="c2"></span></p><p class="c11"><span class="c2">BCF  STATUS, RP0 ; seleciona o banco 0</span></p><p class="c11"><span class="c2">CALL DELAY10   ; chama uma rotina chamada DELAY10</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><h1 class="c95 c35" id="h.js75nxhbpdh1"><span class="c28 c87">Epis&oacute;dio 22: Conhecendo a escrita e a leitura na mem&oacute;ria EEPROM</span></h1><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Neste episodio aprenderemos a persisitir dados no microcontrolador mesmo que a alimenta&ccedil;&atilde;o seja retirada e fazer a leitura dessas informa&ccedil;&otilde;es quando voltar a alienta&ccedil;&atilde;o.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">A memoria EEPROM do PIC16F628A &eacute; uma memoria de leitura e escrita e todo o processo &eacute; feito sobre os registradores EECON1, EECON2 (este registrador n&atilde;o &eacute; implementado fisicamente), EEDATA e EEADR.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">O PIC16F628A tem 128 bytes endere&ccedil;ados de 0x00 at&eacute; 0x7F e lidos ou escrito no registrador EEDATA de 8 bits e endere&ccedil;ados no registrador EEADR tamb&eacute;m de 8 bits, e processo de leitura e escrita na EEPROM &eacute; feita no registrador EECON1.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">O registrador EECON1 &eacute; exibido na Figura X1</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Figura X1 -</span><span class="c5">Registrador EECON1</span></p><p class="c11"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 604.72px; height: 62.67px;"><img alt="" src="images/image58.png" style="width: 604.72px; height: 62.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">O bit WRERR &eacute; o bit de informa&ccedil;&atilde;o se houve erro na escrita na memoria EEPROM, onde WRERR for igual a 0, quer dizer que n&atilde;o houve erro na escrita e o processo de escrita foi completado com sucesso. Por&eacute;m, se WRERR for igual a 1, o processo de escrita na EEPROM foi terminado prematuramente e isso &eacute; um erro de escrita.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">O bit WREN &eacute; o bit de ativa&ccedil;&atilde;o (permiss&atilde;o) de escrita na memoria EEPROM. Quando esse bit for igual a 0, h&aacute; uma inibi&ccedil;&atilde;o de escrita de dados, enquanto se esse bit for igual a 1, h&aacute; permiss&atilde;o de escrita na EEPROM.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">O bit WR &eacute; o bit de controle de escrita, onde se for igual a 1, inicia o prcesso de grava&ccedil;&atilde;o na memoria EEPROM e ao final do processo esse bit &eacute; limpo (valor igual a 0), e quando WR for igual a 0 o processo de grava&ccedil;&atilde;o na EEPROM est&aacute; completo.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">E por &uacute;ltimo &eacute; o bit RD, onde se for igual a 1, inicia o processo de leitura de dados na EEPROM e ao final esse bit &eacute; limpo (valor igual a 0), e quando RD for igual a 0 o processo de leitura na EEPROM est&aacute; completa.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Come&ccedil;aresmos com o processo de escrita na memoria EEPROM baseando no exemplo contido no datasheet no qual escrevemos o valor 0x3E (valor 62 em decimal e 00111110 em bin&aacute;rio) no endere&ccedil;o de memoria 0x01. O c&oacute;digo comentado &eacute;</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c42 c8 c110">BCF  STATUS, RP1</span></p><p class="c11"><span class="c42 c8 c110">BSF  STATUS, RP0 ; seleciona banco 1</span></p><p class="c11"><span class="c42 c8 c110">MOVLW 0xO1</span></p><p class="c11"><span class="c42 c8 c110">MOVWF EEADR    ; copia o endereco para o registrador EEADR</span></p><p class="c11"><span class="c42 c8 c110">MOVLW 0x3F</span></p><p class="c11"><span class="c42 c8 c110">MOVWF EEDATA    ; copia o dado para o registrador EEDATA</span></p><p class="c11"><span class="c42 c8 c110">BSF  EECON1, WREN ; permissao para escrever</span></p><p class="c11 c14"><span class="c42 c8 c110"></span></p><p class="c11"><span class="c42 c8 c110">BCF  INTCON, GIE ; desativa todas as interrupcoes</span></p><p class="c11"><span class="c42 c8 c110">BTFSC INTCON, GIE ; verifica se a chave geral esta desligada</span></p><p class="c11"><span class="c42 c8 c110">GOTO $ - 2    ; volta 2 instrucoes</span></p><p class="c11 c14"><span class="c42 c8 c110"></span></p><p class="c11"><span class="c42 c8 c110">MOVLW 0x55     ; SEQUENCIA REQUERIDA</span></p><p class="c11"><span class="c42 c8 c110">MOVWF EECON2    ; SEQUENCIA REQUERIDA</span></p><p class="c11"><span class="c42 c8 c110">MOVLW 0xAA     ; SEQUENCIA REQUERIDA</span></p><p class="c11"><span class="c42 c8 c110">MOVWF EECON2    ; SEQUENCIA REQUERIDA</span></p><p class="c11"><span class="c42 c8 c110">BSF  EECON1, WR  ; SEQUENCIA REQUERIDA - inicia processo de escrita</span></p><p class="c11 c14"><span class="c42 c8 c110"></span></p><p class="c11"><span class="c42 c8 c110">BSF  INTCON, GIE ; ativa novamente a chave geral das interrupcoes</span></p><p class="c11 c14"><span class="c2"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Agora veremos o processo de leitura da memoria EEPROM no endere&ccedil;o 0x01.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c42 c8 c110">BCF  STATUS, RP1</span></p><p class="c11"><span class="c42 c8 c110">BSF  STATUS, RP0 ; seleciona banco 1</span></p><p class="c11"><span class="c42 c8 c110">MOVLW 0xO1</span></p><p class="c11"><span class="c42 c8 c110">MOVWF EEADR    ; copia o endereco para o registrador EEADR</span></p><p class="c11"><span class="c42 c8 c110">BSF  EECON1, RD  ; inicia processo de leitura</span></p><p class="c11"><span class="c42 c8 c110">MOVF EEDATA, 0  ; copia o conteudo lido da EEPROM para o registrador W</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">No caso de escrita na memoria EEPROM, h&aacute; dois bits que podem ser usados para verificar o estado do pr9cesso. O primeiro bit que pode ser usado &eacute; o bit WRERR como visto anteriormente se for igual a 1, houve erro na escrita, 0 caso o contrario. O outro bit est&aacute; relacionado a interrup&ccedil;&atilde;o de escrita na memoria EEPROM, sendo o bit EEIF do registrador PIR1, no qual se for igual a 0, a opera&ccedil;&atilde;o de escrita n&atilde;o foi completada ou n&atilde;o foi iniciada, mas se for igual a 1, a opera&ccedil;&atilde;o de escrita foi completada com sucesso e esse bit tem que ser limpo ap&oacute;s tratamento.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Exemplo completo de contagem de objetos, mesmo ap&oacute;s desligar a maquina de contagem.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><hr style="page-break-before:always;display:none;"><h1 class="c75 c35" id="h.jpbduj1wgg5x"><span class="c28 c87"></span></h1><h1 class="c95 c35" id="h.lku7dftewsau"><span class="c28 c87">Epis&oacute;dio 23: Conhecendo o m&oacute;dulo USART - Transmiss&atilde;o ass&iacute;ncrona e a interrup&ccedil;&atilde;o associada</span></h1><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Neste episodio conheceremos o modulo USART (Universal Synchronous Asynchronous Receiver Transmitter) e trabalharemos especificamente neste episodio no modo de transmissao assincrona.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">O modulo USART &eacute; muito importante para trablhar com dispositivos como modulos GSM, GPS, IHM, computadores, entre outros, e utilizam desse meio de comunuca&ccedil;&atilde;o para trocas de dados.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Conforme a Figura X1 exibe o diagrama de transmiss&atilde;o por USART no qual pode-se ver os elementos que o compoem, enquanto que a Figura X2 v&ecirc;-se o processo de envio da informa&ccedil;&atilde;o.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Figura X1 -</span><span class="c5">Diagrama de de transmiss&atilde;o do modulo USART</span></p><p class="c11"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 604.72px; height: 277.33px;"><img alt="" src="images/image78.png" style="width: 604.72px; height: 277.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Figura X2 -</span><span class="c5">Transmiss&atilde;o assincrona do modulo USART</span></p><p class="c11"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 604.72px; height: 197.33px;"><img alt="" src="images/image65.png" style="width: 604.72px; height: 197.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">O primeiro registrador usado no processo de transmiss&atilde;o de dados por USART &eacute; o registrador TXSTA (Transmit Status and Control Register) visto na Figura X3.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Figura X3 -</span><span class="c5">Registrador TXSTA</span></p><p class="c11"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 604.72px; height: 64.00px;"><img alt="" src="images/image63.png" style="width: 604.72px; height: 64.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">O bit CSRC &eacute; o bit responsavel pela sele&ccedil;&atilde;o do clock do processo, no qual n&atilde;o &eacute; aplicado para modo assincrono [COLOCAR AQUI O MOTIVO] usado neste episodio. Se houver uso no modo sincrono, se CSRC for igual a 1, o clock ser&aacute; gerado internamente pelo BRG (USART Baud Rate Generator) no modo Master, mas se CSRC for igual a 0 o clock gerado &eacute; externo e modo &eacute; Slave.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">J&aacute; o bit TX9 &eacute; responsavel por ativar ou n&atilde;o o envio do nono (9&ordm;) bit. Assim se TX9 for igual a 1, o 9&ordm; bit &eacute; que &eacute; o bit TX9D do registrador TXSTA &eacute; enviado, j&aacute; se TX9 for igual a 0 s&atilde;o enviados apenas os 8 bits do registrador TXREG (registrador que armazenado os dados a ser enviados).</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">O bit TXEN &eacute; o bit responsavel pela transmissao, pois quando TXEN &eacute; igual a 1 a transmissa&otilde; est&aacute; ativa, enquanto TXEN for igual a 0 a transmiss&atilde;o est&aacute; desativada.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">O bit SYNC &eacute; o bit de sele&ccedil;&atilde;o de modo do modulo USART usado, onde SYNC &eacute; igual a 1 para uso no modo sincrono ou igual a 0 no modo assincrono.(utilizado neste episodio).</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">O bit BRGH &eacute; o bit da sele&ccedil;&atilde;o de taxa &ldquo;baud&rdquo; alta, onde esse bit &eacute; aplicado somente no modo assincrono. Se esse bit for igual a 1 a taxa ser&aacute; alta, e 0 caso o contrario. Veremos o uso dele posteriormente.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">O bit TRMT &eacute; o bit de status associado ao registrador TSR (registrador de dados a ser enviados). Se esse bit &eacute; 0 o registrador TSR est&aacute; cheio e se TRMT &eacute; igual a 1 o registrador est&aacute; vazio.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Outro importante registrador &eacute; o registrador SPBRG que &eacute; o registrador gerador de taxa de &ldquo;baud&rdquo; e o valor dele &eacute; dado pelas tr&ecirc;s situa&ccedil;&otilde;es a seguir:</span></p><p class="c11 c14"><span class="c5"></span></p><ul class="c80 lst-kix_8qyc6ap9kl6j-0 start"><li class="c31"><span class="c5">modo assincrono ativo (SYNC = 0)</span></li></ul><ul class="c80 lst-kix_8qyc6ap9kl6j-1 start"><li class="c11 c23 c173 li-bullet-0"><span class="c5">baixa velocidade (BRGH = 0)</span></li></ul><p class="c24 c23 c14"><span class="c5"></span></p><p class="c12 c23"><span class="c5">Baud rate = Fosc / (64 * (SPBRG + 1))</span></p><p class="c24 c23 c14"><span class="c5"></span></p><ul class="c80 lst-kix_8qyc6ap9kl6j-1"><li class="c11 c23 c173 li-bullet-0"><span class="c5">alta velocidade (BRGH = 1)</span></li></ul><p class="c11 c23 c14"><span class="c5"></span></p><p class="c12 c23"><span class="c5">Baud rate = Fosc / (16 * (SPBRG + 1))</span></p><p class="c11 c23 c14"><span class="c5"></span></p><ul class="c80 lst-kix_8qyc6ap9kl6j-0"><li class="c31"><span class="c5">modo sincrono ativo (SYNC = 1)</span></li></ul><p class="c11 c49 c14"><span class="c5"></span></p><p class="c12 c23"><span class="c5">Baud rate = Fosc / (4 * (SPBRG + 1))</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">onde 0 &le; SPBRG &le; 255.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span>Vejamos o exemplo para uma comunica&ccedil;&atilde;o (transmiss&atilde;o) USART de 9600 bps com bit de sele&ccedil;&atilde;o de </span><span class="c37">baud rate</span><span class="c5">baixo e frequencia oscila&ccedil;&atilde;o de 16 MHz. Assim, o valor do registrador SPBRG e o erro cometido &eacute;:</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12 c23"><span class="c5">Baud rate = Fosc / (64 * (SPBRG + 1))</span></p><p class="c12 c23 c14"><span class="c5"></span></p><p class="c12 c23"><span class="c5">9600 = (16 * 10^6) / (64 * (SPBRG + 1))</span></p><p class="c12 c23 c14"><span class="c5"></span></p><p class="c12 c23"><span class="c5">SPBRG + 1 = (16 * 10^6) / (64 * 9600)</span></p><p class="c12 c23 c14"><span class="c5"></span></p><p class="c12 c23"><span class="c5">SPBRG + 1 = (16 * 10^6) / (64 * 9600) - 1</span></p><p class="c12 c23 c14"><span class="c5"></span></p><p class="c12 c23"><span class="c5">SPBRG = 25,0416...</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Assim, se SPBRG = 25</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12 c23"><span class="c5">Baud rate = Fosc / (64 * (SPBRG + 1))</span></p><p class="c12 c23"><span class="c5">Baud rate = (16 * 10^6)/ (64 * (25 + 1))</span></p><p class="c12 c23"><span class="c5">Baud rate = 9615,384615</span></p><p class="c12 c23"><span class="c5">Baud rate &asymp; 9615</span></p><p class="c24 c14"><span class="c5"></span></p><p class="c24"><span class="c5">Logo o erro &eacute; calculado como </span></p><p class="c24 c14"><span class="c5"></span></p><p class="c12"><span class="c5">erro = (valor calculado - valor desejado) / valor desejado</span></p><p class="c12"><span class="c5">erro = (9615 - 9600) / 9600</span></p><p class="c12"><span class="c5">erro = 15 / 9600</span></p><p class="c12"><span class="c5">erro = 0,0015625</span></p><p class="c12"><span class="c5">erro &equiv; 0,16 %</span></p><p class="c24 c14"><span class="c5"></span></p><p class="c24"><span class="c5">Agora, se SPBRG = 26</span></p><p class="c24 c14"><span class="c5"></span></p><p class="c12 c23"><span class="c5">Baud rate = Fosc / (64 * (SPBRG + 1))</span></p><p class="c12 c23"><span class="c5">Baud rate = (16 * 10^6)/ (64 * (26 + 1))</span></p><p class="c12 c23"><span class="c5">Baud rate = 9259,259...</span></p><p class="c12 c23"><span class="c5">Baud rate &asymp; 9259</span></p><p class="c24 c14"><span class="c5"></span></p><p class="c24"><span class="c5">Logo o erro &eacute; calculado como </span></p><p class="c24 c14"><span class="c5"></span></p><p class="c12"><span class="c5">erro = (valor calculado - valor desejado) / valor desejado</span></p><p class="c12"><span class="c5">erro = (9259 - 9600) / 9600</span></p><p class="c12"><span class="c5">erro = -341 / 9600</span></p><p class="c12"><span class="c5">erro = -0,035520833</span></p><p class="c12"><span>erro &equiv; -3,5520833 %</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Portanto, o menor erro ocorre para SPBRG = 25 como se observar pelos calculos.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c39 c34">IMPORTANTE:</span><span class="c5">Quando se escreve um novo valor no registrador SPBRG, esse processo provoca o reset (limpa) do timer BRG.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">As Tabelas X1 e X2 que mostram exemplos de valores calculados de SPBRG para algumas frequencias</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Tabela X1 -</span><span class="c5">Modo assincrono para baixa velocidade</span></p><p class="c11"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 604.72px; height: 769.33px;"><img alt="" src="images/image11.png" style="width: 604.72px; height: 769.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Tabela X2 -</span><span class="c5">Modo assincrono para alta velocidade</span></p><p class="c11"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 604.72px; height: 624.00px;"><img alt="" src="images/image54.png" style="width: 604.72px; height: 624.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Assim, conforme se&ccedil;&atilde;o 12,2 (USART Asynchronous Mode) os passos para transmiss&atilde;o no modo assincrono s&atilde;o:</span></p><p class="c11 c14"><span class="c5"></span></p><ol class="c80 lst-kix_j9bzkmn6g15o-0 start" start="1"><li class="c31"><span class="c5">COnfigure o pino RB2/TX como pino de sa&iacute;da;</span></li><li class="c31"><span class="c5">Inicialize o registrador SPBRG com o valor adequado. Seu bit de alta velocidade (bit BRGH do registrador TXSTA) deve ser setado se necess&aacute;rio;</span></li><li class="c31"><span class="c5">Ative a porta serial assincrona limpando o bit SYNC de TXSTA e &ldquo;sete&rdquo; o bit SPEN do registrador RCSTA (veremos no proximo episodio);</span></li><li class="c31"><span class="c5">Se as interrup&ccedil;&otilde;es est&atilde;o ativas, &ldquo;sete&rdquo; o bit TXIE do registrador PIE1, registrador para tratar interrup&ccedil;&otilde;es de transmiss&atilde;o de bytes;</span></li><li class="c31"><span class="c5">Se deseja trabalhar com transmiss&atilde;o de 9 bits, &ldquo;sete&rdquo; o bit TX9 em TXSTA;</span></li><li class="c31"><span class="c5">Ative a transmiss&atilde;o &ldquo;setando&rdquo; o bit TXEN de TXSTA no qual tamb&eacute;m &ldquo;seta&rdquo; o bit TXIF do registrador PIR1;</span></li><li class="c31"><span class="c5">Se utilzar 9 bits na transmiss&atilde;o, escreva o valor do 9&ordm; bit no bit TX9D do registrador TXSTA;</span></li><li class="c31"><span class="c5">Carregue o valor a ser transmitido para o registrador TXREG. Ao escrever o valor, o processo de transmiss&atilde;o se inicia automaticamente.</span></li></ol><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Exemplo: Envio de estados de bot&otilde;es pressionados</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><hr style="page-break-before:always;display:none;"><h1 class="c75 c35" id="h.6hjqys77brp0"><span class="c28 c87"></span></h1><h1 class="c95 c35" id="h.w69xvh7zteyu"><span class="c28 c87">Epis&oacute;dio 24: Conhecendo o m&oacute;dulo USART - Recep&ccedil;&atilde;o ass&iacute;ncrona e a interrup&ccedil;&atilde;o associada</span></h1><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Neste episodio, que &eacute; um complemento do episodio 23 (anterior) que trata da transmiss&atilde;o no modulo USART, vamos aprender a receber dados pelo modulo USART.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">COme&ccedil;aremos conhecendo o registrador RCSTA (Receive Status and Control Register) que fara o controle sobre o processo de recebimento de informa&ccedil;&otilde;es, visto na Figura X1</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Figura X1 -</span><span class="c5">Registrador RCSTA</span></p><p class="c12"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 509.00px; height: 54.00px;"><img alt="" src="images/image48.png" style="width: 509.00px; height: 54.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Comecaremos pelo estudo do bit SPEN o qual &eacute; responsavel por ativar ou desativar a porta serial. Assim seo o bit SPEN for igual a 0 a porta serial est&aacute; desativada, ou se SPEN for igual a 1, a porta serial est&aacute; ativada.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">O bit RX9 &eacute; o bit de permiss&atilde;o para receber um 9&ordm; bit, onde se RX9 for igual a 0, seleciona recep&ccedil;&atilde;o de apenas 8 bits (1 byte), enquanto que, se RX9 for igual a 1, seleciona recep&ccedil;&atilde;o de dados de 9 bits.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span>O proximo bit &eacute; o bit SREN que &eacute; responsavel por permitir o recebimento unico de dados. Ese bit n&atilde;o tem utilidade no modo assincrono (que usaremos nos episodios), como tamb&eacute;m no modo sincrono como </span><span class="c37">Slave</span><span class="c5">.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span>No modo sincrono como </span><span class="c37">Master</span><span class="c5">, se o bit SREN for igual a 0, desativa o recebimento unico de dados, eqnaunto se SREN for igual a 1, ativa o recebimento unico. Este bit &eacute; limpo ap&oacute;s a recep&ccedil;&atilde;o estar completa.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">O bit CREN &eacute; o bit responsavel por ativar ou desativar a recep&ccedil;&atilde;o continua de dados e ele trabalha nos dois modos. Assim, se o modo assincroo estiver ativo, tem-se que a recep&ccedil;&atilde;o continua est&aacute; desativada se CREN for igual a 0 ou ser&aacute; ativada se CREN for igual a 1. Porem, se o modo sincrono estiver ativo, a recep&ccedil;&atilde;o continua de dados esta desativada se CREN for igual a 0, mas se CREN for igual a 1, ativa o recebimento (recep&ccedil;&atilde;o) continuo de dados enquanto o bit CREN est&aacute; limpado.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">O proximo bit a ser configurado &eacute; o bit ADEN o qual &eacute; responsavel por ativar o auto detectar enderecos. Esse bit n&atilde;o &eacute; usado no modo sincrono e nem no modo assincrono com 8 bits (bit RX9 igual a 0).</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">J&aacute; no modo assincrono com 9 bits (RX9 = 1), se ADEN for igual a 0, desativa detec&ccedil;&atilde;o de endereco, e assim todos os bits s&atilde;o recebidos, e o 9&ordm; bit pode ser usado como bit de paridade, mas se ADEN for igual a 1, ativa detec&ccedil;&atilde;o de endere&ccedil;o, ativa interrup&ccedil;&atilde;o e carrega do buffer de recep&ccedil;&atilde;o quando RSR&lt;8&gt; (bit de parada) est&aacute; setado.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span>O bit </span><span class="c39">FERR [verificar tradu&ccedil;&atilde;o correta] </span><span>&eacute; o bit de erro de enquadramento, no qual se esse bit for igual a 0 quer dizer que n&atilde;o houve erro de enquadramento, enquanto se </span><span class="c39">FERR[verificar tradu&ccedil;&atilde;o correta] </span><span class="c5">for igual a 1, n&atilde;o dize que houve erro de enquadramento (pode ser atualizado lendo o registrador RCREG e recever o proximo byte valido).</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span>O bit </span><span class="c39">OERR [verificar tradu&ccedil;&atilde;o correta]</span><span>&eacute; o bit de erro de ultrapassagem, onde ele ser&aacute; igual a 0 se n&atilde;o houve ultrapassagem, enquato se </span><span class="c39">OERR [verificar tradu&ccedil;&atilde;o correta]</span><span class="c5">for igual a 1, houve erro de ultrapassagem e le pode ser limpado, limpando o bit CREN.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">E por ultimo o bit RX9D que &eacute; o 9&ordm; bit de dados recebidos que pode ser um bit de paridade.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">O processo de recep&ccedil;&atilde;o &eacute; visto na Figura X2 e os dados s&atilde;o recebidos o pino RB1/RX.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Figura X2 -</span><span class="c5">Diagrama de blocos de recep&ccedil;&atilde;o do modulo USART</span></p><p class="c11"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 604.72px; height: 504.00px;"><img alt="" src="images/image27.png" style="width: 604.72px; height: 504.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Como j&aacute; mencioado, trabalharemos no modo assincrono (bit SYNC do registrador TXSTA igual a 0) e quando esse modo &eacute; selecionado, fazemos uso da recep&ccedil;&atilde;o continua (bit CREN do registrador RCSTA igual a 1).</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Conforme o datasheet do microcontrolador PIC16F628A, o registrador RSR ( Receive (serial) Shift Register) &eacute; o cora&ccedil;&atilde;o do processo do recebimento dos dados.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Ap&oacute;s o microcontrolador receber o bit de parada, o dado recebido no registrador RSR &eacute; transferido para o registrador RCREG (se ele estiver vazio). Se o processo de transferencia da informa&ccedil;&atilde;o ocorrer com sucesso, o bit RCIF (bit de interrup&ccedil;&atilde;o do modulo USART relativo ao processo de recep&ccedil;&atilde;o e que est&aacute; contido no registrador PIR1) est&aacute; setado e pode ser feito o tratamento se os bits PEIE (INTCON&lt;2&gt;) e RCIE (PIE1&lt;6&gt;) estiverem setados. O bit RCIF &eacute; apenas de leitura e para ser limpo deve-se ler o registrador RCREG e estar vazio porteiormente.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">O registrador RCREG &eacute; um registrador duplo buferizado de 2 niveis de profundidade do tipo FIFO (First Input First Output - Primeiro ao entrar e Primeiro ao sair) no qual &eacute; possivel receber 2 bytes e o terceiro byte estara no registrador RSR.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Na detec&ccedil;&atilde;o do bit de parada do terceiro byte, se o registrador RCREG estiver cheio, ent&atilde;o o bit OERR (Overrun error - erro de ultrapassagem) ser&aacute; setado e a informa&ccedil;&atilde;o no registrador RSR ser&aacute; perdida.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Para recuperar 2 bytes do registrador RCREG, necessita paenas fazer a leitura da infirma&ccedil;&atilde;o duas vezes pois RCREG &eacute; um registrador de comportamento FIFO com dois nvieis.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">A limpeza do registrador OERR (Overrun error bit) &eacute; limpo via software como j&aacute; foi comentado na descri&ccedil;&atilde;o dele, isto &eacute;, o bit OERR ser&aacute; limpo ao limpar e setar o bit CREN.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Agora se o bit OERR est&aacute; setado, o conteudo do registrador RSR ser&aacute; transferido para o registrador RCREG e s&atilde;o inibidos, ent&atilde;o &eacute; essencial para limpar o bit de erro se est&aacute; setado.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">O bit de (Framming error) FERR est&aacute; setado se um bit de parar &eacute; detectado como limpo.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">O os bits FERR e o 9&ordm; bit recebido s&atilde;o buferizados na mesma forma como os dados recebidos.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Lendo o registrador RCREG, carregaremos os bits RX9D e FERR com novos valores, portanto &eacute; essencial para o usuario ler o registrador RCSTA antes do registrador RCREG na ordem para n&atilde;o perder as informa&ccedil;&otilde;es antigas dos bits FERR e RX9D.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Conforme o datasheet, os passos para repec&ccedil;&atilde;o assincrona s&atilde;o:</span></p><p class="c11 c14"><span class="c5"></span></p><ol class="c80 lst-kix_xtmvr39jkk8q-0 start" start="1"><li class="c31"><span class="c5">Configure TRISB1 (RB1/RX) e TRISB2 (RB2/TX) como pinos de entrada;</span></li><li class="c31"><span>Inicialize o registrador SPBRG </span><span class="c39">(registrador para &hellip;)</span><span class="c5">para o apropriado baud rate. Se baud rate de alta velocidade &eacute; desejado &ldquo;sete&rdquo; o bit BRGH conforme epis&oacute;dio 23;</span></li><li class="c31"><span class="c5">Ative a porta serial assincrona limpando o bit SYNC e setando o bit SPEN;</span></li><li class="c31"><span class="c5">Se as interrup&ccedil;&otilde;es s&atilde;o desejadas, ent&atilde;o &ldquo;sete&rdquo; o bit RCIE;</span></li><li class="c31"><span class="c5">Se o 9&ordm; bit &eacute; desejado, ent&atilde;o &ldquo;sete&rdquo; o bit RX9;</span></li><li class="c31"><span class="c5">Ative a recep&ccedil;&atilde;o, setando o bit CREN;</span></li><li class="c31"><span class="c5">O flag ser&aacute; setado quando a recep&ccedil;&atilde;o est&aacute; completa e a interrup&ccedil;&atilde;o ser&aacute; gerada se o bit RCIE for setado;</span></li><li class="c31"><span class="c5">Ler o o conteudo do registrador RCSTA para receber o 9&ordm; digito (se habilitado) e tamb&eacute;m se qualquer erro ocorreu durante a recep&ccedil;&atilde;o;</span></li><li class="c31"><span class="c5">Ler o registrador RCREG que cont&eacute;m o dado recebido de 8 bits;</span></li><li class="c31"><span class="c5">Se um erro OERR ocorrer, limpa o erro pela limpeza e habilita&ccedil;&atilde;o do bit CREN.</span></li></ol><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c34">Exemplo 1:</span><span class="c5">Recebimento de comandos vindo do computador para ligar LEDs</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c34">Exemplo 2:</span><span class="c5">Recebimento de dados de m&oacute;dulo GPS</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><hr style="page-break-before:always;display:none;"><h1 class="c75 c35" id="h.fd6qc41zrstl"><span class="c28 c87"></span></h1><h1 class="c95 c35" id="h.mbompx2djc0b"><span class="c28 c87">Epis&oacute;dio 25: Conhecendo o Watchdog Timer (WDT) e a instru&ccedil;&atilde;o CLRWDT</span></h1><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Neste episodio veremos uma funcionalidade que &eacute; importante em aplica&ccedil;&otilde;es que n&atilde;o podem travar por longos periodos, permintindo resetar a aplica&ccedil;&atilde;o automaticamente.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Conforme datasheet (14.7 pagina 111) o Watchdog Timer (WDT) &eacute; um timer oscilador RC on-chip executando livremente, sem liga&ccedil;&atilde;o com o oscilador principal.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Outro fato importante&eacute; que o WDT varia conforme a temperatura por ser um oscilador RC, al&eacute;m de variar com a tens&atilde;o de alimenta&ccedil;&atilde;o.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">O WDT tem um periodo limite normal de 18 ms, sem uso do Prescaler associado a ele conforme comentados nos episodios 3 e 13.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Pode-se modificar o periodo limite de tempo do WDT, aplicando Prescaler. Assim conforme episodio 3, o bit responsavel por selecionar qual periferico recebe o Prescaler, sabe-se que se PSA = 1, o Prescaler &eacute; atribuido ao Watchdog Timer e posterior taxa de incremento pelos bits PS&lt;2:0&gt; do registrador OPTION_REG, baseando-se na Tabela X1.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><a id="t.1fdd94494778b2d8601b556c5cd06f6486ac0949"></a><a id="t.160"></a><table class="c211"><tbody><tr class="c21"><td class="c93"><p class="c1"><span class="c26">PS2</span></p></td><td class="c93"><p class="c1"><span class="c26">PS1</span></p></td><td class="c93"><p class="c1"><span class="c26">PS0</span></p></td><td class="c198"><p class="c1"><span class="c26">Prescaler WDT</span></p></td><td class="c147"><p class="c1"><span class="c26">Periodo</td>
</tr>
<tr class="c21"><td class="c93"><p class="c1"><span class="c5">0</span></p></td><td class="c93"><p class="c1"><span class="c5">0</span></p></td><td class="c93"><p class="c1"><span class="c5">0</span></p></td><td class="c198"><p class="c1"><span class="c5">1:1</span></p></td><td class="c147"><p class="c1"><span class="c5">18 ms</td>
</tr>
<tr class="c21"><td class="c93"><p class="c1"><span class="c5">0</span></p></td><td class="c93"><p class="c1"><span class="c5">0</span></p></td><td class="c93"><p class="c1"><span class="c5">1</span></p></td><td class="c198"><p class="c1"><span class="c5">1:2</span></p></td><td class="c147"><p class="c1"><span class="c5">36 ms</td>
</tr>
<tr class="c21"><td class="c93"><p class="c1"><span class="c5">0</span></p></td><td class="c93"><p class="c1"><span class="c5">1</span></p></td><td class="c93"><p class="c1"><span class="c5">0</span></p></td><td class="c198"><p class="c1"><span class="c5">1:4</span></p></td><td class="c147"><p class="c1"><span class="c5">72 ms</td>
</tr>
<tr class="c21"><td class="c93"><p class="c1"><span class="c5">0</span></p></td><td class="c93"><p class="c1"><span class="c5">1</span></p></td><td class="c93"><p class="c1"><span class="c5">1</span></p></td><td class="c198"><p class="c1"><span class="c5">1:8</span></p></td><td class="c147"><p class="c1"><span class="c5">144 ms</td>
</tr>
<tr class="c21"><td class="c93"><p class="c1"><span class="c5">1</span></p></td><td class="c93"><p class="c1"><span class="c5">0</span></p></td><td class="c93"><p class="c1"><span class="c5">0</span></p></td><td class="c198"><p class="c1"><span class="c5">1:16</span></p></td><td class="c147"><p class="c1"><span class="c5">288 ms</td>
</tr>
<tr class="c21"><td class="c93"><p class="c1"><span class="c5">1</span></p></td><td class="c93"><p class="c1"><span class="c5">0</span></p></td><td class="c93"><p class="c1"><span class="c5">1</span></p></td><td class="c198"><p class="c1"><span class="c5">1:32</span></p></td><td class="c147"><p class="c1"><span class="c5">576 ms</td>
</tr>
<tr class="c21"><td class="c93"><p class="c1"><span class="c5">1</span></p></td><td class="c93"><p class="c1"><span class="c5">1</span></p></td><td class="c93"><p class="c1"><span class="c5">0</span></p></td><td class="c198"><p class="c1"><span class="c5">1:64</span></p></td><td class="c147"><p class="c1"><span class="c5">1152 ms</td>
</tr>
<tr class="c21"><td class="c93"><p class="c1"><span class="c5">1</span></p></td><td class="c93"><p class="c1"><span class="c5">1</span></p></td><td class="c93"><p class="c1"><span class="c5">1</span></p></td><td class="c198"><p class="c1"><span class="c5">1:128</span></p></td><td class="c147"><p class="c1"><span class="c5">2304 ms</span></p></td></tr></tbody></table><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">O maior periodo limite &eacute; 128 * 18 ms = 2304 ms = 2,304 s.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Esse periodo &eacute; utilizado para reset caso o microcontrolador &ldquo;trave&rdquo;. Assim, se o Prescaler for 1:1, o periodo de reset por WDT &eacute; de 18 ms, necessitando resetar o periodo e para isso conheceremos a instru&ccedil;&atilde;o CLRWDT.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">A instru&ccedil;&atilde;o CLRWDT limpa o Watchdog Timer n&atilde;o permitindo o timer estourar e resetar o microcontrolador.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span>Caso haja um reset por WDT, o bit </span><span class="c59">TO</span><span class="c5">do registrador STATUS ser&aacute; limpo por causa do Watchdog Timer. A Figura X1 exibe o diagrama de blocos do processo do WDT.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c34">Figura X1 -</span><span class="c5">Diagrama de blocos de Watchdog Timer</span></p><p class="c12"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 496.00px; height: 393.00px;"><img alt="" src="images/image19.png" style="width: 496.00px; height: 393.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">A ativa&ccedil;&atilde;o dele &eacute; feita no cabecalho do arquivo do prorama episodio 2.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Agora se nouver necessidade de fazer isso em codigo &eacute; instra&ccedil;&atilde;o</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c12"><span class="c2">BSF CONFIG, WDTE  ; CONFIG esta no end. 0x2007</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span>Exemplo de uso: </span><span class="c42 c39 c34 c50">--------------------</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><hr style="page-break-before:always;display:none;"><h1 class="c75 c35" id="h.isu4owtoxc5g"><span class="c28 c87"></span></h1><h1 class="c95 c35" id="h.c2fmpzgslllm"><span class="c28 c87">Epis&oacute;dio 26: Conhecendo o modo sleep (dormir) e a instru&ccedil;&atilde;o SLEEP</span></h1><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Neste episodio aprenderemos a trabalhar com o modo dormir (sleep) e com isso poupar energia, e usar o processador com intensidade apenas em momentos necess&aacute;rios.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span>O modo sleep (power-down) garante um uso racional da energia onde a fonte energecia &eacute; escassa, como celulas foltovoltaicas e os tratamentos do conhecimento dos estados veremos que advem os bits </span><span class="c59">TO</span><span>e </span><span class="c59">PD</span><span class="c5">do registrador STATUS.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Veremos tamb&eacute;m que algumas interrup&ccedil;&otilde;es n&atilde;o acordam ou algumas tem a capacidade de acordar o microcontrolador do modo sleep.</span></p><ul class="c80 lst-kix_652b7zl1drd9-0 start"><li class="c31"><span class="c5">Timer0 n&atilde;o pode &ldquo;acordar&rdquo; o microcontrolador pois ele dorme tamb&eacute;m, pela dependencia do clock;</span></li><li class="c31"><span class="c5">Timer1 pode acordar dependendo de como &eacute; a fonte de clock;</span></li><li class="c31"><span class="c5">Modulo comparador acorda o PIC</span></li><li class="c31"><span class="c5">Modo assincrono (transmissa&otilde; e recep&ccedil;&atilde;o) &eacute; parado durante sleep</span></li><li class="c31"><span class="c5">Interrup&ccedil;&atilde;o externa acorda o PIC;</span></li></ul><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">CONTINUAR LENDO O ITENM 14.8 para acrescentar algumas ideias</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><hr style="page-break-before:always;display:none;"><h1 class="c35 c75" id="h.7pnexlvp2n87"><span class="c28 c87"></span></h1><h1 class="c95 c35" id="h.bg133axk9izg"><span class="c28 c87">Epis&oacute;dio 27: Exemplo 3 - Integra&ccedil;&atilde;o dos epis&oacute;dios anteriores em um projeto de controle de acesso</span></h1><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Neste episodio veremos a integra&ccedil;&ccedil;&atilde;o de alguns episodios anteriores para compor um projeto de acesso, com contagem de entradas, com atualiza&ccedil;&atilde;o da saida, ativa&ccedil;&atilde;o de ilumina&ccedil;&atilde;o, com acesso mediante senha.</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">O diagrama 27.1 exibe o processo do sistema.</span></p><p class="c11 c14"><span class="c5"></span></p><h1 class="c95 c35" id="h.zgowazyxoqxo"><span class="c28 c87">Epis&oacute;dio 28: Desenvolvimento de c&oacute;digo em C para o PIC16F628A</span></h1><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">TO DO</span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11"><span class="c5">Links de ferramentas usadas:</span></p><p class="c11"><span class="c5">https://latex2png.com/</span></p><p class="c11"><span class="c43"><a href="https://www.google.com/url?q=https://www.codecogs.com/latex/eqneditor.php?lang%3Dpt-br&amp;sa=D&amp;source=editors&amp;ust=1619797900068000&amp;usg=AOvVaw2QAv5YxGmiFg5Vm-91axcv">https://www.codecogs.com/latex/eqneditor.php?lang=pt-br</a></span></p><p class="c11"><span class="c43"><a href="https://www.google.com/url?q=https://latex.codecogs.com/eqneditor/editor.php&amp;sa=D&amp;source=editors&amp;ust=1619797900068000&amp;usg=AOvVaw0S2qCDh_lp88Zpwkbf9EBz">https://latex.codecogs.com/eqneditor/editor.php</a></span></p><p class="c11"><span class="c43"><a href="https://www.google.com/url?q=https://www.latex4technics.com/&amp;sa=D&amp;source=editors&amp;ust=1619797900069000&amp;usg=AOvVaw0isHed2GWO12xhrHSjYzbn">https://www.latex4technics.com/</a></span></p><p class="c11"><span class="c43"><a href="https://www.google.com/url?q=http://www.sciweavers.org/free-online-latex-equation-editor&amp;sa=D&amp;source=editors&amp;ust=1619797900069000&amp;usg=AOvVaw34ajAHf-Maq13zK8cLW86n">http://www.sciweavers.org/free-online-latex-equation-editor</a></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><p class="c11 c14"><span class="c5"></span></p><hr class="c257"><div><p class="c4"><a href="#ftnt_ref1" id="ftnt1">[1]</a><span class="c45">Veja mais sobre PWM em </span><span class="c43"><a href="https://www.google.com/url?q=https://en.wikipedia.org/wiki/Pulse-width_modulation&amp;sa=D&amp;source=editors&amp;ust=1619797900070000&amp;usg=AOvVaw0NZxkZAWJrMnBdK-rBk-H9">https://en.wikipedia.org/wiki/Pulse-width_modulation</a></span></p></div><div class="c207"><p class="c19"><a href="#cmnt_ref1" id="cmnt1">[a]</a><span class="c5">Usar um padr&atilde;o: ou todas as palavras em maisculas ou todas em minusculas</span></p></div><div class="c207"><p class="c19"><a href="#cmnt_ref2" id="cmnt2">[b]</a><span class="c5">Rever o fluxograma onde se limpa o registrador W dentro do loop. Limpar este registrador fora do loop.</span></p></div><div class="c207"><p class="c19"><a href="#cmnt_ref3" id="cmnt3">[c]</a><span class="c5">colocar figura do programa microbrn</span></p></div><div class="c207"><p class="c19"><a href="#cmnt_ref4" id="cmnt4">[d]</a><span class="c5">colocar a imagem do gerenciador de dispositivo</span></p></div><div class="c207"><p class="c19"><a href="#cmnt_ref5" id="cmnt5">[e]</a><span class="c5">Verificar no programa PICkit 3 a forma de carregar o arquivo hex</span></p></div><div class="c207"><p class="c19"><a href="#cmnt_ref6" id="cmnt6">[f]</a><span class="c5">colocar aqui a tela inicial do PICkit 3 programmer</span></p></div><div class="c207"><p class="c19"><a href="#cmnt_ref7" id="cmnt7">[g]</a><span class="c5">Colocar aqui tela do PICkit 3 programmer ap&oacute;s grava&ccedil;&atilde;o</span></p></div></body></html>